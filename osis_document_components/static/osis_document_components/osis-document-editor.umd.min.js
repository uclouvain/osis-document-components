(function(re,P){typeof exports=="object"&&typeof module<"u"?P(require("@vue/runtime-dom"),require("vue-i18n"),require("vue")):typeof define=="function"&&define.amd?define(["@vue/runtime-dom","vue-i18n","vue"],P):(re=typeof globalThis<"u"?globalThis:re||self,P(re.Vue,re.VueI18n,re.Vue))})(this,function(runtimeDom,vueI18n,vue){"use strict";var dn=Object.defineProperty;var un=(re,P,ee)=>P in re?dn(re,P,{enumerable:!0,configurable:!0,writable:!0,value:ee}):re[P]=ee;var He=(re,P,ee)=>(un(re,typeof P!="symbol"?P+"":P,ee),ee),Tt=(re,P,ee)=>{if(!P.has(re))throw TypeError("Cannot "+ee)};var l=(re,P,ee)=>(Tt(re,P,"read from private field"),ee?ee.call(re):P.get(re)),z=(re,P,ee)=>{if(P.has(re))throw TypeError("Cannot add the same private member more than once");P instanceof WeakSet?P.add(re):P.set(re,ee)},_e=(re,P,ee,T)=>(Tt(re,P,"write to private field"),T?T.call(re,ee):P.set(re,ee),ee);var lt=(re,P,ee,T)=>({set _(O){_e(re,P,O,ee)},get _(){return l(re,P,T)}}),K=(re,P,ee)=>(Tt(re,P,"access private method"),ee);const resource$1={uploader:{specific_nb_drag_n_drop_label:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"Glissez-déposez ici un fichier"},{t:2,i:[{t:3,v:"Glissez-déposez ici "},{t:4,k:"count"},{t:3,v:" fichiers"}]}]}},min_max_drag_n_drop_label:{t:0,b:{t:2,i:[{t:3,v:"Glissez-déposez ici entre "},{t:4,k:"min"},{t:3,v:" et "},{t:4,k:"max"},{t:3,v:" fichiers"}]}},min_drag_n_drop_label:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"Glissez-déposez ici au-moins un fichier"},{t:2,i:[{t:3,v:"Glissez-déposez ici au-moins "},{t:4,k:"count"},{t:3,v:" fichiers"}]}]}},max_drag_n_drop_label:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"Glissez-déposez ici votre fichier"},{t:2,i:[{t:3,v:"Glissez-déposez ici vos fichiers (maximum "},{t:4,k:"count"},{t:3,v:")"}]}]}},drag_n_drop_label:{t:0,b:{t:2,i:[{t:3}],s:"Glissez-déposez ici vos fichiers"}},add_file_label:{t:0,b:{t:2,i:[{t:3}],s:"ou cliquez-ici"}},max_size_label:{t:0,b:{t:2,i:[{t:3,v:"(taille maximum "},{t:4,k:"size"},{t:3,v:")"}]}},trigger_upload:{t:0,b:{t:2,i:[{t:3}],s:"Transférer"}}},upload_entry:{completion:{t:0,b:{t:2,i:[{t:4,k:"progress"},{t:3,v:"% transférés"}]}},too_large:{t:0,b:{t:2,i:[{t:3}],s:"Le fichier est trop lourd"}},wrong_type:{t:0,b:{t:1,c:[{t:2,i:[{t:3,v:'Le fichier doit être du type "'},{t:4,k:"types"},{t:3,v:'"'}]},{t:2,i:[{t:3,v:`Le fichier doit être d'un des types suivants : "`},{t:4,k:"types"},{t:3,v:'"'}]}]}},crop_header:{t:0,b:{t:2,i:[{t:3}],s:"Veuillez choisir la partie à garder."}},crop:{t:0,b:{t:2,i:[{t:3}],s:"Recadrer"}},cancel:{t:0,b:{t:2,i:[{t:3}],s:"Annuler"}}},view_entry:{rotate_left:{t:0,b:{t:2,i:[{t:3}],s:"Faire pivoter l'image à gauche"}},rotate_right:{t:0,b:{t:2,i:[{t:3}],s:"Faire pivoter l'image à droite"}},loading:{t:0,b:{t:2,i:[{t:3}],s:"Chargement..."}},close:{t:0,b:{t:2,i:[{t:3}],s:"Fermer"}},save:{t:0,b:{t:2,i:[{t:3}],s:"Enregistrer"}},file_infected:{t:0,b:{t:2,i:[{t:3}],s:"Le fichier référencé semble infecté par un virus"}}},editor:{pagination:{t:0,b:{t:2,i:[{t:4,k:"currentPage"},{t:3,v:" de "},{t:4,k:"pages"}]}},zoom:{auto:{t:0,b:{t:2,i:[{t:3}],s:"Zoom automatique"}},"page-width":{t:0,b:{t:2,i:[{t:3}],s:"Pleine largeur"}},"page-fit":{t:0,b:{t:2,i:[{t:3}],s:"Page entière"}},"page-actual":{t:0,b:{t:2,i:[{t:3}],s:"Taille réelle"}}},colors:{warning:{t:0,b:{t:2,i:[{t:3}],s:"Jaune"}},danger:{t:0,b:{t:2,i:[{t:3}],s:"Rouge"}},info:{t:0,b:{t:2,i:[{t:3}],s:"Bleu"}},success:{t:0,b:{t:2,i:[{t:3}],s:"Vert"}},muted:{t:0,b:{t:2,i:[{t:3}],s:"Blanc"}}}},error:{t:0,b:{t:2,i:[{t:3,v:"Erreur : "},{t:4,k:"error"}]}},request_error:{t:0,b:{t:2,i:[{t:3,v:"Erreur lors de la requête : "},{t:4,k:"error"}]}},units:[{t:0,b:{t:2,i:[{t:3}],s:"o"}},{t:0,b:{t:2,i:[{t:3}],s:"Ko"}},{t:0,b:{t:2,i:[{t:3}],s:"Mo"}},{t:0,b:{t:2,i:[{t:3}],s:"Go"}},{t:0,b:{t:2,i:[{t:3}],s:"To"}}]},resource={uploader:{specific_nb_drag_n_drop_label:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"Drag and drop one file here"},{t:2,i:[{t:3,v:"Drag and drop "},{t:4,k:"count"},{t:3,v:" files here"}]}]}},min_max_drag_n_drop_label:{t:0,b:{t:2,i:[{t:3,v:"Drag and drop between "},{t:4,k:"min"},{t:3,v:" and "},{t:4,k:"max"},{t:3,v:" files here"}]}},min_drag_n_drop_label:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"Drag and drop at least one file here"},{t:2,i:[{t:3,v:"Drag and drop at least "},{t:4,k:"count"},{t:3,v:" files here"}]}]}},max_drag_n_drop_label:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"Drag and drop your file here"},{t:2,i:[{t:3,v:"Drag and drop your files here (maximum "},{t:4,k:"count"},{t:3,v:")"}]}]}},drag_n_drop_label:{t:0,b:{t:2,i:[{t:3}],s:"Drag and drop your files here"}},add_file_label:{t:0,b:{t:2,i:[{t:3}],s:"or click here"}},max_size_label:{t:0,b:{t:2,i:[{t:3,v:"(max size "},{t:4,k:"size"},{t:3,v:")"}]}},trigger_upload:{t:0,b:{t:2,i:[{t:3}],s:"Upload"}}},upload_entry:{completion:{t:0,b:{t:2,i:[{t:4,k:"progress"},{t:3,v:"% uploaded"}]}},too_large:{t:0,b:{t:2,i:[{t:3}],s:"File is too large"}},wrong_type:{t:0,b:{t:1,c:[{t:2,i:[{t:3,v:'The file must have the following type: "'},{t:4,k:"types"},{t:3,v:'"'}]},{t:2,i:[{t:3,v:'The file must have one of the following types: "'},{t:4,k:"types"},{t:3,v:'"'}]}]}},crop_header:{t:0,b:{t:2,i:[{t:3}],s:"Please choose the part you want to keep."}},crop:{t:0,b:{t:2,i:[{t:3}],s:"Crop"}},cancel:{t:0,b:{t:2,i:[{t:3}],s:"Cancel"}}},view_entry:{rotate_left:{t:0,b:{t:2,i:[{t:3}],s:"Rotate image left"}},rotate_right:{t:0,b:{t:2,i:[{t:3}],s:"Rotate image right"}},loading:{t:0,b:{t:2,i:[{t:3}],s:"Loading..."}},close:{t:0,b:{t:2,i:[{t:3}],s:"Close"}},save:{t:0,b:{t:2,i:[{t:3}],s:"Save"}},file_infected:{t:0,b:{t:2,i:[{t:3}],s:"The referenced file appears to be infected with a virus"}}},editor:{pagination:{t:0,b:{t:2,i:[{t:4,k:"currentPage"},{t:3,v:" of "},{t:4,k:"pages"}]}},zoom:{auto:{t:0,b:{t:2,i:[{t:3}],s:"Automatic Zoom"}},"page-width":{t:0,b:{t:2,i:[{t:3}],s:"Page Width"}},"page-fit":{t:0,b:{t:2,i:[{t:3}],s:"Page Fit"}},"page-actual":{t:0,b:{t:2,i:[{t:3}],s:"Actual Size"}}},colors:{warning:{t:0,b:{t:2,i:[{t:3}],s:"Yellow"}},danger:{t:0,b:{t:2,i:[{t:3}],s:"Red"}},info:{t:0,b:{t:2,i:[{t:3}],s:"Blue"}},success:{t:0,b:{t:2,i:[{t:3}],s:"Green"}},muted:{t:0,b:{t:2,i:[{t:3}],s:"White"}}}},error:{t:0,b:{t:2,i:[{t:3,v:"Error: "},{t:4,k:"error"}]}},request_error:{t:0,b:{t:2,i:[{t:3,v:"Request error: "},{t:4,k:"error"}]}},units:[{t:0,b:{t:2,i:[{t:3}],s:"B"}},{t:0,b:{t:2,i:[{t:3}],s:"KB"}},{t:0,b:{t:2,i:[{t:3}],s:"MB"}},{t:0,b:{t:2,i:[{t:3}],s:"GB"}},{t:0,b:{t:2,i:[{t:3}],s:"TB"}}]},i18n=vueI18n.createI18n({legacy:!1,locale:document.documentElement.lang||"en",allowComposition:!0,messages:{en:resource,fr:resource$1}}),_hoisted_1$4={class:"btn-group dropup annotation-dropdown"},_hoisted_2$3={class:"dropdown-menu"},_hoisted_3$2=["onClick"],_sfc_main$4=vue.defineComponent({__name:"ToolbarAnnotation",props:{isActivated:{type:Boolean},color:{},classPrefix:{},icon:{},colors:{}},emits:["onChange"],setup(re){const P=i18n.global.t;return(ee,T)=>(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$4,[vue.createElementVNode("button",{class:vue.normalizeClass(["btn",ee.isActivated?"btn-primary":"btn-default"]),type:"button",onClick:T[0]||(T[0]=O=>ee.$emit("onChange",ee.isActivated?"":ee.color||Object.values(ee.colors)[0]))},[vue.createElementVNode("span",{class:vue.normalizeClass(["fas",ee.icon])},null,2)],2),T[1]||(T[1]=vue.createElementVNode("button",{type:"button",class:"btn btn-default dropdown-toggle","data-toggle":"dropdown","data-bs-toggle":"dropdown"},[vue.createElementVNode("span",{class:"caret"})],-1)),vue.createElementVNode("ul",_hoisted_2$3,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(ee.colors,(O,ue)=>(vue.openBlock(),vue.createElementBlock("li",{key:ue,class:vue.normalizeClass(`${ee.classPrefix}-${ue}`)},[vue.createElementVNode("a",{href:"#",class:vue.normalizeClass(`${ee.classPrefix}-${ue}`),onClick:vue.withModifiers(G=>ee.$emit("onChange",O),["prevent"])},vue.toDisplayString(vue.unref(P)(`editor.colors.${ue}`)),11,_hoisted_3$2)],2))),128))])]))}}),ToolbarAnnotation_vue_vue_type_style_index_0_lang="",_hoisted_1$3={class:"btn-group"},_hoisted_2$2={class:"btn-group dropup",role:"group"},_hoisted_3$1={type:"button",class:"btn btn-default dropdown-toggle","data-toggle":"dropdown","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},_hoisted_4$1={class:"dropdown-menu"},_hoisted_5$1=["value"],_hoisted_6$1=["onClick"],_sfc_main$3=vue.defineComponent({__name:"ToolbarZoom",props:{currentZoom:{}},emits:["onZoomIn","onZoomOut","onSetScale"],setup(re){const P=i18n.global.t,ee=["auto","page-actual","page-fit","page-width","0.5","0.75","1","1.25","1.5","2","3","4"];function T(O){return isNaN(parseFloat(O))?P(`editor.zoom.${O}`):`${Math.ceil(parseFloat(O)*100)}%`}return(O,ue)=>(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$3,[vue.createElementVNode("button",{class:"btn btn-default",type:"button",onClick:ue[0]||(ue[0]=G=>O.$emit("onZoomOut"))},[...ue[2]||(ue[2]=[vue.createElementVNode("span",{class:"fas fa-magnifying-glass-minus"},null,-1)])]),vue.createElementVNode("div",_hoisted_2$2,[vue.createElementVNode("button",_hoisted_3$1,[vue.createTextVNode(vue.toDisplayString(T(O.currentZoom))+" ",1),ue[3]||(ue[3]=vue.createElementVNode("span",{class:"caret"},null,-1))]),vue.createElementVNode("ul",_hoisted_4$1,[(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,vue.renderList(ee,G=>vue.createElementVNode("li",{key:G,value:G,class:vue.normalizeClass(O.currentZoom==G?"active":"")},[vue.createElementVNode("a",{href:"#",onClick:vue.withModifiers(I=>O.$emit("onSetScale",G),["prevent"])},vue.toDisplayString(T(G)),9,_hoisted_6$1)],10,_hoisted_5$1)),64))])]),vue.createElementVNode("button",{class:"btn btn-default",type:"button",onClick:ue[1]||(ue[1]=G=>O.$emit("onZoomIn"))},[...ue[4]||(ue[4]=[vue.createElementVNode("span",{class:"fas fa-magnifying-glass-plus"},null,-1)])])]))}}),_hoisted_1$2={class:"btn-group"},_sfc_main$2=vue.defineComponent({__name:"ToolbarRotation",props:{currentRotation:{}},emits:["onRotate"],setup(re){return(P,ee)=>(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$2,[vue.createElementVNode("button",{type:"button",class:"btn btn-default",onClick:ee[0]||(ee[0]=T=>P.$emit("onRotate",((P.currentRotation-90)%360+360)%360))},[...ee[2]||(ee[2]=[vue.createElementVNode("span",{class:"fas fa-rotate-left"},null,-1)])]),vue.createElementVNode("button",{type:"button",class:"btn btn-default",onClick:ee[1]||(ee[1]=T=>P.$emit("onRotate",((P.currentRotation+90)%360+360)%360))},[...ee[3]||(ee[3]=[vue.createElementVNode("span",{class:"fas fa-rotate-right"},null,-1)])])]))}}),_hoisted_1$1={class:"btn-group"},_hoisted_2$1={class:"btn btn-default disabled",role:"button"},_sfc_main$1=vue.defineComponent({__name:"ToolbarPagination",props:{currentPage:{},pages:{}},emits:["onChangeCurrentPage"],setup(re){const P=i18n.global.t;return(ee,T)=>(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$1,[vue.createElementVNode("button",{class:vue.normalizeClass(["btn btn-default",{disabled:ee.currentPage==1}]),type:"button",onClick:T[0]||(T[0]=O=>ee.currentPage!=1&&ee.$emit("onChangeCurrentPage",ee.currentPage-1))},[...T[2]||(T[2]=[vue.createElementVNode("span",{class:"fas fa-angle-up"},null,-1)])],2),vue.createElementVNode("a",_hoisted_2$1,vue.toDisplayString(vue.unref(P)("editor.pagination",{currentPage:ee.currentPage,pages:ee.pages})),1),vue.createElementVNode("button",{class:vue.normalizeClass(["btn btn-default",{disabled:ee.currentPage==ee.pages}]),type:"button",onClick:T[1]||(T[1]=O=>ee.currentPage!=ee.pages&&ee.$emit("onChangeCurrentPage",ee.currentPage+1))},[...T[3]||(T[3]=[vue.createElementVNode("span",{class:"fas fa-angle-down"},null,-1)])],2)]))}});async function doRequest(re,P){const ee=await fetch(re,{headers:{"Content-Type":"application/json"},...P});if(ee.status>=200&&ee.status<300)return ee.json();throw new Error(ee.statusText)}function getAugmentedNamespace(re){if(re.__esModule)return re;var P=re.default;if(typeof P=="function"){var ee=function T(){return this instanceof T?Reflect.construct(P,arguments,this.constructor):P.apply(this,arguments)};ee.prototype=P.prototype}else ee={};return Object.defineProperty(ee,"__esModule",{value:!0}),Object.keys(re).forEach(function(T){var O=Object.getOwnPropertyDescriptor(re,T);Object.defineProperty(ee,T,O.get?O:{enumerable:!0,get:function(){return re[T]}})}),ee}function commonjsRequire(re){throw new Error('Could not dynamically require "'+re+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,function(module,exports){(function(P,ee){module.exports=ee()})(globalThis,()=>(()=>{var __webpack_modules__=[,(re,P)=>{var Oe;Object.defineProperty(P,"__esModule",{value:!0}),P.VerbosityLevel=P.Util=P.UnknownErrorException=P.UnexpectedResponseException=P.TextRenderingMode=P.RenderingIntentFlag=P.PromiseCapability=P.PermissionFlag=P.PasswordResponses=P.PasswordException=P.PageActionEventType=P.OPS=P.MissingPDFException=P.MAX_IMAGE_SIZE_TO_CACHE=P.LINE_FACTOR=P.LINE_DESCENT_FACTOR=P.InvalidPDFException=P.ImageKind=P.IDENTITY_MATRIX=P.FormatError=P.FeatureTest=P.FONT_IDENTITY_MATRIX=P.DocumentActionEventType=P.CMapCompressionType=P.BaseException=P.BASELINE_FACTOR=P.AnnotationType=P.AnnotationStateModelType=P.AnnotationReviewState=P.AnnotationReplyType=P.AnnotationMode=P.AnnotationMarkedState=P.AnnotationFlag=P.AnnotationFieldFlag=P.AnnotationEditorType=P.AnnotationEditorPrefix=P.AnnotationEditorParamsType=P.AnnotationBorderStyleType=P.AnnotationActionEventType=P.AbortException=void 0,P.assert=Y,P.bytesToString=V,P.createValidAbsoluteUrl=Ee,P.getModificationDate=Pe,P.getVerbosityLevel=ae,P.info=J,P.isArrayBuffer=ve,P.isArrayEqual=xe,P.normalizeUnicode=Me,P.objectFromMap=M,P.objectSize=A,P.setVerbosityLevel=Z,P.shadow=Q,P.string32=h,P.stringToBytes=n,P.stringToPDFString=ie,P.stringToUTF8String=de,P.unreachable=ye,P.utf8StringToString=be,P.warn=ge;const ee=[1,0,0,1,0,0];P.IDENTITY_MATRIX=ee;const T=[.001,0,0,.001,0,0];P.FONT_IDENTITY_MATRIX=T;const O=1e7;P.MAX_IMAGE_SIZE_TO_CACHE=O;const ue=1.35;P.LINE_FACTOR=ue;const G=.35;P.LINE_DESCENT_FACTOR=G;const I=G/ue;P.BASELINE_FACTOR=I;const D={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};P.RenderingIntentFlag=D;const _={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};P.AnnotationMode=_;const d="pdfjs_internal_editor_";P.AnnotationEditorPrefix=d;const k={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};P.AnnotationEditorType=k;const C={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};P.AnnotationEditorParamsType=C;const v={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};P.PermissionFlag=v;const r={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};P.TextRenderingMode=r;const c={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};P.ImageKind=c;const a={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};P.AnnotationType=a;const p={MARKED:"Marked",REVIEW:"Review"};P.AnnotationStateModelType=p;const m={MARKED:"Marked",UNMARKED:"Unmarked"};P.AnnotationMarkedState=m;const b={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};P.AnnotationReviewState=b;const f={GROUP:"Group",REPLY:"R"};P.AnnotationReplyType=f;const t={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};P.AnnotationFlag=t;const e={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};P.AnnotationFieldFlag=e;const s={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};P.AnnotationBorderStyleType=s;const i={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};P.AnnotationActionEventType=i;const u={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};P.DocumentActionEventType=u;const w={O:"PageOpen",C:"PageClose"};P.PageActionEventType=w;const o={ERRORS:0,WARNINGS:1,INFOS:5};P.VerbosityLevel=o;const F={NONE:0,BINARY:1};P.CMapCompressionType=F;const X={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};P.OPS=X;const le={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};P.PasswordResponses=le;let H=o.WARNINGS;function Z(S){Number.isInteger(S)&&(H=S)}function ae(){return H}function J(S){H>=o.INFOS&&console.log(`Info: ${S}`)}function ge(S){H>=o.WARNINGS&&console.log(`Warning: ${S}`)}function ye(S){throw new Error(S)}function Y(S,g){S||ye(g)}function we(S){switch(S==null?void 0:S.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Ee(S,g=null,x=null){if(!S)return null;try{if(x&&typeof S=="string"){if(x.addDefaultProtocol&&S.startsWith("www.")){const fe=S.match(/\./g);(fe==null?void 0:fe.length)>=2&&(S=`http://${S}`)}if(x.tryConvertEncoding)try{S=de(S)}catch{}}const te=g?new URL(S,g):new URL(S);if(we(te))return te}catch{}return null}function Q(S,g,x,te=!1){return Object.defineProperty(S,g,{value:x,enumerable:!te,configurable:!0,writable:!1}),x}const y=function(){function g(x,te){this.constructor===g&&ye("Cannot initialize BaseException."),this.message=x,this.name=te}return g.prototype=new Error,g.constructor=g,g}();P.BaseException=y;class E extends y{constructor(g,x){super(g,"PasswordException"),this.code=x}}P.PasswordException=E;class L extends y{constructor(g,x){super(g,"UnknownErrorException"),this.details=x}}P.UnknownErrorException=L;class q extends y{constructor(g){super(g,"InvalidPDFException")}}P.InvalidPDFException=q;class j extends y{constructor(g){super(g,"MissingPDFException")}}P.MissingPDFException=j;class ne extends y{constructor(g,x){super(g,"UnexpectedResponseException"),this.status=x}}P.UnexpectedResponseException=ne;class U extends y{constructor(g){super(g,"FormatError")}}P.FormatError=U;class B extends y{constructor(g){super(g,"AbortException")}}P.AbortException=B;function V(S){(typeof S!="object"||(S==null?void 0:S.length)===void 0)&&ye("Invalid argument for bytesToString");const g=S.length,x=8192;if(g<x)return String.fromCharCode.apply(null,S);const te=[];for(let fe=0;fe<g;fe+=x){const se=Math.min(fe+x,g),he=S.subarray(fe,se);te.push(String.fromCharCode.apply(null,he))}return te.join("")}function n(S){typeof S!="string"&&ye("Invalid argument for stringToBytes");const g=S.length,x=new Uint8Array(g);for(let te=0;te<g;++te)x[te]=S.charCodeAt(te)&255;return x}function h(S){return String.fromCharCode(S>>24&255,S>>16&255,S>>8&255,S&255)}function A(S){return Object.keys(S).length}function M(S){const g=Object.create(null);for(const[x,te]of S)g[x]=te;return g}function R(){const S=new Uint8Array(4);return S[0]=1,new Uint32Array(S.buffer,0,1)[0]===1}function W(){try{return new Function(""),!0}catch{return!1}}class me{static get isLittleEndian(){return Q(this,"isLittleEndian",R())}static get isEvalSupported(){return Q(this,"isEvalSupported",W())}static get isOffscreenCanvasSupported(){return Q(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Q(this,"platform",{isWin:!1,isMac:!1}):Q(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}P.FeatureTest=me;const N=[...Array(256).keys()].map(S=>S.toString(16).padStart(2,"0"));class ${static makeHexColor(g,x,te){return`#${N[g]}${N[x]}${N[te]}`}static scaleMinMax(g,x){let te;g[0]?(g[0]<0&&(te=x[0],x[0]=x[1],x[1]=te),x[0]*=g[0],x[1]*=g[0],g[3]<0&&(te=x[2],x[2]=x[3],x[3]=te),x[2]*=g[3],x[3]*=g[3]):(te=x[0],x[0]=x[2],x[2]=te,te=x[1],x[1]=x[3],x[3]=te,g[1]<0&&(te=x[2],x[2]=x[3],x[3]=te),x[2]*=g[1],x[3]*=g[1],g[2]<0&&(te=x[0],x[0]=x[1],x[1]=te),x[0]*=g[2],x[1]*=g[2]),x[0]+=g[4],x[1]+=g[4],x[2]+=g[5],x[3]+=g[5]}static transform(g,x){return[g[0]*x[0]+g[2]*x[1],g[1]*x[0]+g[3]*x[1],g[0]*x[2]+g[2]*x[3],g[1]*x[2]+g[3]*x[3],g[0]*x[4]+g[2]*x[5]+g[4],g[1]*x[4]+g[3]*x[5]+g[5]]}static applyTransform(g,x){const te=g[0]*x[0]+g[1]*x[2]+x[4],fe=g[0]*x[1]+g[1]*x[3]+x[5];return[te,fe]}static applyInverseTransform(g,x){const te=x[0]*x[3]-x[1]*x[2],fe=(g[0]*x[3]-g[1]*x[2]+x[2]*x[5]-x[4]*x[3])/te,se=(-g[0]*x[1]+g[1]*x[0]+x[4]*x[1]-x[5]*x[0])/te;return[fe,se]}static getAxialAlignedBoundingBox(g,x){const te=$.applyTransform(g,x),fe=$.applyTransform(g.slice(2,4),x),se=$.applyTransform([g[0],g[3]],x),he=$.applyTransform([g[2],g[1]],x);return[Math.min(te[0],fe[0],se[0],he[0]),Math.min(te[1],fe[1],se[1],he[1]),Math.max(te[0],fe[0],se[0],he[0]),Math.max(te[1],fe[1],se[1],he[1])]}static inverseTransform(g){const x=g[0]*g[3]-g[1]*g[2];return[g[3]/x,-g[1]/x,-g[2]/x,g[0]/x,(g[2]*g[5]-g[4]*g[3])/x,(g[4]*g[1]-g[5]*g[0])/x]}static singularValueDecompose2dScale(g){const x=[g[0],g[2],g[1],g[3]],te=g[0]*x[0]+g[1]*x[2],fe=g[0]*x[1]+g[1]*x[3],se=g[2]*x[0]+g[3]*x[2],he=g[2]*x[1]+g[3]*x[3],pe=(te+he)/2,Ae=Math.sqrt((te+he)**2-4*(te*he-se*fe))/2,Te=pe+Ae||1,Se=pe-Ae||1;return[Math.sqrt(Te),Math.sqrt(Se)]}static normalizeRect(g){const x=g.slice(0);return g[0]>g[2]&&(x[0]=g[2],x[2]=g[0]),g[1]>g[3]&&(x[1]=g[3],x[3]=g[1]),x}static intersect(g,x){const te=Math.max(Math.min(g[0],g[2]),Math.min(x[0],x[2])),fe=Math.min(Math.max(g[0],g[2]),Math.max(x[0],x[2]));if(te>fe)return null;const se=Math.max(Math.min(g[1],g[3]),Math.min(x[1],x[3])),he=Math.min(Math.max(g[1],g[3]),Math.max(x[1],x[3]));return se>he?null:[te,se,fe,he]}static bezierBoundingBox(g,x,te,fe,se,he,pe,Ae){const Te=[],Se=[[],[]];let Fe,Ie,Le,ke,Ne,Ve,De,je;for(let Ge=0;Ge<2;++Ge){if(Ge===0?(Ie=6*g-12*te+6*se,Fe=-3*g+9*te-9*se+3*pe,Le=3*te-3*g):(Ie=6*x-12*fe+6*he,Fe=-3*x+9*fe-9*he+3*Ae,Le=3*fe-3*x),Math.abs(Fe)<1e-12){if(Math.abs(Ie)<1e-12)continue;ke=-Le/Ie,0<ke&&ke<1&&Te.push(ke);continue}De=Ie*Ie-4*Le*Fe,je=Math.sqrt(De),!(De<0)&&(Ne=(-Ie+je)/(2*Fe),0<Ne&&Ne<1&&Te.push(Ne),Ve=(-Ie-je)/(2*Fe),0<Ve&&Ve<1&&Te.push(Ve))}let Be=Te.length,Ue;const We=Be;for(;Be--;)ke=Te[Be],Ue=1-ke,Se[0][Be]=Ue*Ue*Ue*g+3*Ue*Ue*ke*te+3*Ue*ke*ke*se+ke*ke*ke*pe,Se[1][Be]=Ue*Ue*Ue*x+3*Ue*Ue*ke*fe+3*Ue*ke*ke*he+ke*ke*ke*Ae;return Se[0][We]=g,Se[1][We]=x,Se[0][We+1]=pe,Se[1][We+1]=Ae,Se[0].length=Se[1].length=We+2,[Math.min(...Se[0]),Math.min(...Se[1]),Math.max(...Se[0]),Math.max(...Se[1])]}}P.Util=$;const ce=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ie(S){if(S[0]>="ï"){let x;if(S[0]==="þ"&&S[1]==="ÿ"?x="utf-16be":S[0]==="ÿ"&&S[1]==="þ"?x="utf-16le":S[0]==="ï"&&S[1]==="»"&&S[2]==="¿"&&(x="utf-8"),x)try{const te=new TextDecoder(x,{fatal:!0}),fe=n(S);return te.decode(fe)}catch(te){ge(`stringToPDFString: "${te}".`)}}const g=[];for(let x=0,te=S.length;x<te;x++){const fe=ce[S.charCodeAt(x)];g.push(fe?String.fromCharCode(fe):S.charAt(x))}return g.join("")}function de(S){return decodeURIComponent(escape(S))}function be(S){return unescape(encodeURIComponent(S))}function ve(S){return typeof S=="object"&&(S==null?void 0:S.byteLength)!==void 0}function xe(S,g){if(S.length!==g.length)return!1;for(let x=0,te=S.length;x<te;x++)if(S[x]!==g[x])return!1;return!0}function Pe(S=new Date){return[S.getUTCFullYear().toString(),(S.getUTCMonth()+1).toString().padStart(2,"0"),S.getUTCDate().toString().padStart(2,"0"),S.getUTCHours().toString().padStart(2,"0"),S.getUTCMinutes().toString().padStart(2,"0"),S.getUTCSeconds().toString().padStart(2,"0")].join("")}class Re{constructor(){z(this,Oe,!1);this.promise=new Promise((g,x)=>{this.resolve=te=>{_e(this,Oe,!0),g(te)},this.reject=te=>{_e(this,Oe,!0),x(te)}})}get settled(){return l(this,Oe)}}Oe=new WeakMap,P.PromiseCapability=Re;let oe=null,Ce=null;function Me(S){return oe||(oe=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ce=new Map([["ﬅ","ſt"]])),S.replaceAll(oe,(g,x,te)=>x?x.normalize("NFKC"):Ce.get(te))}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var re,ee,T,O,nt,G,mt,D,_,d,k,C,v,r,c,xt,p,m,Mt,f,t;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:s,NodeCMapReaderFactory:i,NodeFilterFactory:u,NodeStandardFontDataFactory:w}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=s,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=i,exports.DefaultFilterFactory=DefaultFilterFactory=u,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=w}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:s}=__w_pdfjs_require__(21);createPDFNetworkStream=i=>new s(i)}else{const{PDFNetworkStream:s}=__w_pdfjs_require__(24),{PDFFetchStream:i}=__w_pdfjs_require__(25);createPDFNetworkStream=u=>(0,_display_utils.isValidFetchUrl)(u.url)?new i(u):new s(u)}function getDocument(s){if(typeof s=="string"||s instanceof URL?s={url:s}:(0,_util.isArrayBuffer)(s)&&(s={data:s}),typeof s!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!s.url&&!s.data&&!s.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const i=new PDFDocumentLoadingTask,{docId:u}=i,w=s.url?getUrlProp(s.url):null,o=s.data?getDataProp(s.data):null,F=s.httpHeaders||null,X=s.withCredentials===!0,le=s.password??null,H=s.range instanceof PDFDataRangeTransport?s.range:null,Z=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let ae=s.worker instanceof PDFWorker?s.worker:null;const J=s.verbosity,ge=typeof s.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(s.docBaseUrl)?s.docBaseUrl:null,ye=typeof s.cMapUrl=="string"?s.cMapUrl:null,Y=s.cMapPacked!==!1,we=s.CMapReaderFactory||DefaultCMapReaderFactory,Ee=typeof s.standardFontDataUrl=="string"?s.standardFontDataUrl:null,Q=s.StandardFontDataFactory||DefaultStandardFontDataFactory,y=s.stopAtErrors!==!0,E=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,L=s.isEvalSupported!==!1,q=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!_is_node.isNodeJS,j=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,ne=typeof s.disableFontFace=="boolean"?s.disableFontFace:_is_node.isNodeJS,U=s.fontExtraProperties===!0,B=s.enableXfa===!0,V=s.ownerDocument||globalThis.document,n=s.disableRange===!0,h=s.disableStream===!0,A=s.disableAutoFetch===!0,M=s.pdfBug===!0,R=H?H.length:s.length??NaN,W=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!_is_node.isNodeJS&&!ne,me=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:we===_display_utils.DOMCMapReaderFactory&&Q===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(ye,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(Ee,document.baseURI),N=s.canvasFactory||new DefaultCanvasFactory({ownerDocument:V}),$=s.filterFactory||new DefaultFilterFactory({docId:u,ownerDocument:V}),ce=null;(0,_util.setVerbosityLevel)(J);const ie={canvasFactory:N,filterFactory:$};if(me||(ie.cMapReaderFactory=new we({baseUrl:ye,isCompressed:Y}),ie.standardFontDataFactory=new Q({baseUrl:Ee})),!ae){const ve={verbosity:J,port:_worker_options.GlobalWorkerOptions.workerPort};ae=ve.port?PDFWorker.fromPort(ve):new PDFWorker(ve),i._worker=ae}const de={docId:u,apiVersion:"3.6.172",data:o,password:le,disableAutoFetch:A,rangeChunkSize:Z,length:R,docBaseUrl:ge,enableXfa:B,evaluatorOptions:{maxImageSize:E,disableFontFace:ne,ignoreErrors:y,isEvalSupported:L,isOffscreenCanvasSupported:q,canvasMaxAreaInBytes:j,fontExtraProperties:U,useSystemFonts:W,cMapUrl:me?ye:null,standardFontDataUrl:me?Ee:null}},be={ignoreErrors:y,isEvalSupported:L,disableFontFace:ne,fontExtraProperties:U,enableXfa:B,ownerDocument:V,disableAutoFetch:A,pdfBug:M,styleElement:ce};return ae.promise.then(function(){if(i.destroyed)throw new Error("Loading aborted");const ve=_fetchDocument(ae,de),xe=new Promise(function(Pe){let Re;H?Re=new _transport_stream.PDFDataTransportStream({length:R,initialData:H.initialData,progressiveDone:H.progressiveDone,contentDispositionFilename:H.contentDispositionFilename,disableRange:n,disableStream:h},H):o||(Re=createPDFNetworkStream({url:w,length:R,httpHeaders:F,withCredentials:X,rangeChunkSize:Z,disableRange:n,disableStream:h})),Pe(Re)});return Promise.all([ve,xe]).then(function([Pe,Re]){if(i.destroyed)throw new Error("Loading aborted");const oe=new _message_handler.MessageHandler(u,Pe,ae.port),Ce=new WorkerTransport(oe,i,Re,be,ie);i._transport=Ce,oe.send("Ready",null)})}).catch(i._capability.reject),i}async function _fetchDocument(s,i){if(s.destroyed)throw new Error("Worker was destroyed");const u=await s.messageHandler.sendWithPromise("GetDocRequest",i,i.data?[i.data.buffer]:null);if(s.destroyed)throw new Error("Worker was destroyed");return u}function getUrlProp(s){if(s instanceof URL)return s.href;try{return new URL(s,window.location).href}catch{if(_is_node.isNodeJS&&typeof s=="string")return s}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(s){if(_is_node.isNodeJS&&typeof Buffer<"u"&&s instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(s);if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return(0,_util.stringToBytes)(s);if(typeof s=="object"&&!isNaN(s==null?void 0:s.length)||(0,_util.isArrayBuffer)(s))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const P=class P{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${lt(P,re)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var i;this.destroyed=!0,await((i=this._transport)==null?void 0:i.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};re=new WeakMap,z(P,re,0);let PDFDocumentLoadingTask=P;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(i,u,w=!1,o=null){this.length=i,this.initialData=u,this.progressiveDone=w,this.contentDispositionFilename=o,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(i){this._rangeListeners.push(i)}addProgressListener(i){this._progressListeners.push(i)}addProgressiveReadListener(i){this._progressiveReadListeners.push(i)}addProgressiveDoneListener(i){this._progressiveDoneListeners.push(i)}onDataRange(i,u){for(const w of this._rangeListeners)w(i,u)}onDataProgress(i,u){this._readyCapability.promise.then(()=>{for(const w of this._progressListeners)w(i,u)})}onDataProgressiveRead(i){this._readyCapability.promise.then(()=>{for(const u of this._progressiveReadListeners)u(i)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const i of this._progressiveDoneListeners)i()})}transportReady(){this._readyCapability.resolve()}requestDataRange(i,u){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(i,u){this._pdfInfo=i,this._transport=u}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(i){return this._transport.getPage(i)}getPageIndex(i){return this._transport.getPageIndex(i)}getDestinations(){return this._transport.getDestinations()}getDestination(i){return this._transport.getDestination(i)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(i=!1){return this._transport.startCleanup(i||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(i,u,w,o=!1){z(this,O);z(this,G);z(this,ee,null);z(this,T,!1);this._pageIndex=i,this._pageInfo=u,this._transport=w,this._stats=o?new _display_utils.StatTimer:null,this._pdfBug=o,this.commonObjs=w.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:i,rotation:u=this.rotate,offsetX:w=0,offsetY:o=0,dontFlip:F=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:i,rotation:u,offsetX:w,offsetY:o,dontFlip:F})}getAnnotations({intent:i="display"}={}){const u=this._transport.getRenderingIntent(i);return this._transport.getAnnotations(this._pageIndex,u.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var i;return((i=this._transport._htmlForXfa)==null?void 0:i.children[this._pageIndex])||null}render({canvasContext:i,viewport:u,intent:w="display",annotationMode:o=_util.AnnotationMode.ENABLE,transform:F=null,background:X=null,optionalContentConfigPromise:le=null,annotationCanvasMap:H=null,pageColors:Z=null,printAnnotationStorage:ae=null}){var Q,y,E;if((Q=arguments[0])!=null&&Q.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");(y=this._stats)==null||y.time("Overall");const J=this._transport.getRenderingIntent(w,o,ae);_e(this,T,!1),K(this,G,mt).call(this),le||(le=this._transport.getOptionalContentConfig());let ge=this._intentStates.get(J.cacheKey);ge||(ge=Object.create(null),this._intentStates.set(J.cacheKey,ge)),ge.streamReaderCancelTimeout&&(clearTimeout(ge.streamReaderCancelTimeout),ge.streamReaderCancelTimeout=null);const ye=!!(J.renderingIntent&_util.RenderingIntentFlag.PRINT);ge.displayReadyCapability||(ge.displayReadyCapability=new _util.PromiseCapability,ge.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(E=this._stats)==null||E.time("Page Request"),this._pumpOperatorList(J));const Y=L=>{var q,j;ge.renderTasks.delete(we),(this._maybeCleanupAfterRender||ye)&&_e(this,T,!0),K(this,O,nt).call(this,!ye),L?(we.capability.reject(L),this._abortOperatorList({intentState:ge,reason:L instanceof Error?L:new Error(L)})):we.capability.resolve(),(q=this._stats)==null||q.timeEnd("Rendering"),(j=this._stats)==null||j.timeEnd("Overall")},we=new InternalRenderTask({callback:Y,params:{canvasContext:i,viewport:u,transform:F,background:X},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:H,operatorList:ge.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!ye,pdfBug:this._pdfBug,pageColors:Z});(ge.renderTasks||(ge.renderTasks=new Set)).add(we);const Ee=we.task;return Promise.all([ge.displayReadyCapability.promise,le]).then(([L,q])=>{var j;if(l(this,T)){Y();return}(j=this._stats)==null||j.time("Rendering"),we.initializeGraphics({transparency:L,optionalContentConfig:q}),we.operatorListChanged()}).catch(Y),Ee}getOperatorList({intent:i="display",annotationMode:u=_util.AnnotationMode.ENABLE,printAnnotationStorage:w=null}={}){var H;function o(){X.operatorList.lastChunk&&(X.opListReadCapability.resolve(X.operatorList),X.renderTasks.delete(le))}const F=this._transport.getRenderingIntent(i,u,w,!0);let X=this._intentStates.get(F.cacheKey);X||(X=Object.create(null),this._intentStates.set(F.cacheKey,X));let le;return X.opListReadCapability||(le=Object.create(null),le.operatorListChanged=o,X.opListReadCapability=new _util.PromiseCapability,(X.renderTasks||(X.renderTasks=new Set)).add(le),X.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(H=this._stats)==null||H.time("Page Request"),this._pumpOperatorList(F)),X.opListReadCapability.promise}streamTextContent({includeMarkedContent:i=!1,disableNormalization:u=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:i===!0,disableNormalization:u===!0},{highWaterMark:100,size(o){return o.items.length}})}getTextContent(i={}){if(this._transport._htmlForXfa)return this.getXfa().then(w=>_xfa_text.XfaText.textContent(w));const u=this.streamTextContent(i);return new Promise(function(w,o){function F(){X.read().then(function({value:H,done:Z}){if(Z){w(le);return}Object.assign(le.styles,H.styles),le.items.push(...H.items),F()},o)}const X=u.getReader(),le={items:[],styles:Object.create(null)};F()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const i=[];for(const u of this._intentStates.values())if(this._abortOperatorList({intentState:u,reason:new Error("Page was destroyed."),force:!0}),!u.opListReadCapability)for(const w of u.renderTasks)i.push(w.completed),w.cancel();return this.objs.clear(),_e(this,T,!1),K(this,G,mt).call(this),Promise.all(i)}cleanup(i=!1){_e(this,T,!0);const u=K(this,O,nt).call(this,!1);return i&&u&&this._stats&&(this._stats=new _display_utils.StatTimer),u}_startRenderPage(i,u){var o,F;const w=this._intentStates.get(u);w&&((o=this._stats)==null||o.timeEnd("Page Request"),(F=w.displayReadyCapability)==null||F.resolve(i))}_renderPageChunk(i,u){for(let w=0,o=i.length;w<o;w++)u.operatorList.fnArray.push(i.fnArray[w]),u.operatorList.argsArray.push(i.argsArray[w]);u.operatorList.lastChunk=i.lastChunk,u.operatorList.separateAnnots=i.separateAnnots;for(const w of u.renderTasks)w.operatorListChanged();i.lastChunk&&K(this,O,nt).call(this,!0)}_pumpOperatorList({renderingIntent:i,cacheKey:u,annotationStorageMap:w}){const F=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:i,cacheKey:u,annotationStorage:w}).getReader(),X=this._intentStates.get(u);X.streamReader=F;const le=()=>{F.read().then(({value:H,done:Z})=>{if(Z){X.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(H,X),le())},H=>{if(X.streamReader=null,!this._transport.destroyed){if(X.operatorList){X.operatorList.lastChunk=!0;for(const Z of X.renderTasks)Z.operatorListChanged();K(this,O,nt).call(this,!0)}if(X.displayReadyCapability)X.displayReadyCapability.reject(H);else if(X.opListReadCapability)X.opListReadCapability.reject(H);else throw H}})};le()}_abortOperatorList({intentState:i,reason:u,force:w=!1}){if(i.streamReader){if(i.streamReaderCancelTimeout&&(clearTimeout(i.streamReaderCancelTimeout),i.streamReaderCancelTimeout=null),!w){if(i.renderTasks.size>0)return;if(u instanceof _display_utils.RenderingCancelledException){let o=RENDERING_CANCELLED_TIMEOUT;u.extraDelay>0&&u.extraDelay<1e3&&(o+=u.extraDelay),i.streamReaderCancelTimeout=setTimeout(()=>{i.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:i,reason:u,force:!0})},o);return}}if(i.streamReader.cancel(new _util.AbortException(u.message)).catch(()=>{}),i.streamReader=null,!this._transport.destroyed){for(const[o,F]of this._intentStates)if(F===i){this._intentStates.delete(o);break}this.cleanup()}}}get stats(){return this._stats}}ee=new WeakMap,T=new WeakMap,O=new WeakSet,nt=function(i=!1){if(K(this,G,mt).call(this),!l(this,T))return!1;if(i)return _e(this,ee,setTimeout(()=>{_e(this,ee,null),K(this,O,nt).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:u,operatorList:w}of this._intentStates.values())if(u.size>0||!w.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),_e(this,T,!1),!0},G=new WeakSet,mt=function(){l(this,ee)&&(clearTimeout(l(this,ee)),_e(this,ee,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){z(this,D,new Set);z(this,_,Promise.resolve())}postMessage(i,u){const w={data:structuredClone(i,u?{transfer:u}:null)};l(this,_).then(()=>{for(const o of l(this,D))o.call(this,w)})}addEventListener(i,u){l(this,D).add(u)}removeEventListener(i,u){l(this,D).delete(u)}terminate(){l(this,D).clear()}}D=new WeakMap,_=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const s=(d=document==null?void 0:document.currentScript)==null?void 0:d.src;s&&(PDFWorkerUtil.fallbackWorkerSrc=s.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(s,i){let u;try{if(u=new URL(s),!u.origin||u.origin==="null")return!1}catch{return!1}const w=new URL(i,u);return u.origin===w.origin},PDFWorkerUtil.createCDNWrapper=function(s){const i=`importScripts("${s}");`;return URL.createObjectURL(new Blob([i]))}}const _PDFWorker=class _PDFWorker{constructor({name:s=null,port:i=null,verbosity:u=(0,_util.getVerbosityLevel)()}={}){if(i&&l(_PDFWorker,k).has(i))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=s,this.destroyed=!1,this.verbosity=u,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,i){l(_PDFWorker,k).set(i,this),this._initializeFromPort(i);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(s){this._port=s,this._messageHandler=new _message_handler.MessageHandler("main","worker",s),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:s}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,s)||(s=PDFWorkerUtil.createCDNWrapper(new URL(s,window.location).href));const i=new Worker(s),u=new _message_handler.MessageHandler("main","worker",i),w=()=>{i.removeEventListener("error",o),u.destroy(),i.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=()=>{this._webWorker||w()};i.addEventListener("error",o),u.on("test",X=>{if(i.removeEventListener("error",o),this.destroyed){w();return}X?(this._messageHandler=u,this._port=i,this._webWorker=i,this._readyCapability.resolve(),u.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),u.destroy(),i.terminate())}),u.on("ready",X=>{if(i.removeEventListener("error",o),this.destroyed){w();return}try{F()}catch{this._setupFakeWorker()}});const F=()=>{const X=new Uint8Array;u.send("test",X,[X.buffer])};F();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(s=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const i=new LoopbackPort;this._port=i;const u=`fake${PDFWorkerUtil.fakeWorkerId++}`,w=new _message_handler.MessageHandler(u+"_worker",u,i);s.setup(w,i);const o=new _message_handler.MessageHandler(u,u+"_worker",i);this._messageHandler=o,this._readyCapability.resolve(),o.send("configure",{verbosity:this.verbosity})}).catch(s=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${s.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),l(_PDFWorker,k).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(s){if(!(s!=null&&s.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return l(this,k).has(s.port)?l(this,k).get(s.port):new _PDFWorker(s)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var s;try{return((s=globalThis.pdfjsWorker)==null?void 0:s.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};k=new WeakMap,z(_PDFWorker,k,new WeakMap);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(i,u,w,o,F){z(this,c);z(this,C,new Map);z(this,v,new Map);z(this,r,new Map);this.messageHandler=i,this.loadingTask=u,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:o.ownerDocument,styleElement:o.styleElement}),this._params=o,this.canvasFactory=F.canvasFactory,this.filterFactory=F.filterFactory,this.cMapReaderFactory=F.cMapReaderFactory,this.standardFontDataFactory=F.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=w,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(i,u=_util.AnnotationMode.ENABLE,w=null,o=!1){let F=_util.RenderingIntentFlag.DISPLAY,X=null;switch(i){case"any":F=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":F=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${i}`)}switch(u){case _util.AnnotationMode.DISABLE:F+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:F+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:F+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,X=(F&_util.RenderingIntentFlag.PRINT&&w instanceof _annotation_storage.PrintAnnotationStorage?w:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${u}`)}return o&&(F+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:F,cacheKey:`${F}_${_annotation_storage.AnnotationStorage.getHash(X)}`,annotationStorageMap:X}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const i=[];for(const w of l(this,v).values())i.push(w._destroy());l(this,v).clear(),l(this,r).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const u=this.messageHandler.sendWithPromise("Terminate",null);return i.push(u),Promise.all(i).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),l(this,C).clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:i,loadingTask:u}=this;i.on("GetReader",(w,o)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=F=>{this._lastProgress={loaded:F.loaded,total:F.total}},o.onPull=()=>{this._fullReader.read().then(function({value:F,done:X}){if(X){o.close();return}(0,_util.assert)(F instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array(F),1,[F])}).catch(F=>{o.error(F)})},o.onCancel=F=>{this._fullReader.cancel(F),o.ready.catch(X=>{if(!this.destroyed)throw X})}}),i.on("ReaderHeadersReady",w=>{const o=new _util.PromiseCapability,F=this._fullReader;return F.headersReady.then(()=>{var X;(!F.isStreamingSupported||!F.isRangeSupported)&&(this._lastProgress&&((X=u.onProgress)==null||X.call(u,this._lastProgress)),F.onProgress=le=>{var H;(H=u.onProgress)==null||H.call(u,{loaded:le.loaded,total:le.total})}),o.resolve({isStreamingSupported:F.isStreamingSupported,isRangeSupported:F.isRangeSupported,contentLength:F.contentLength})},o.reject),o.promise}),i.on("GetRangeReader",(w,o)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const F=this._networkStream.getRangeReader(w.begin,w.end);if(!F){o.close();return}o.onPull=()=>{F.read().then(function({value:X,done:le}){if(le){o.close();return}(0,_util.assert)(X instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array(X),1,[X])}).catch(X=>{o.error(X)})},o.onCancel=X=>{F.cancel(X),o.ready.catch(le=>{if(!this.destroyed)throw le})}}),i.on("GetDoc",({pdfInfo:w})=>{this._numPages=w.numPages,this._htmlForXfa=w.htmlForXfa,delete w.htmlForXfa,u._capability.resolve(new PDFDocumentProxy(w,this))}),i.on("DocException",function(w){let o;switch(w.name){case"PasswordException":o=new _util.PasswordException(w.message,w.code);break;case"InvalidPDFException":o=new _util.InvalidPDFException(w.message);break;case"MissingPDFException":o=new _util.MissingPDFException(w.message);break;case"UnexpectedResponseException":o=new _util.UnexpectedResponseException(w.message,w.status);break;case"UnknownErrorException":o=new _util.UnknownErrorException(w.message,w.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}u._capability.reject(o)}),i.on("PasswordRequest",w=>{if(this._passwordCapability=new _util.PromiseCapability,u.onPassword){const o=F=>{F instanceof Error?this._passwordCapability.reject(F):this._passwordCapability.resolve({password:F})};try{u.onPassword(o,w.code)}catch(F){this._passwordCapability.reject(F)}}else this._passwordCapability.reject(new _util.PasswordException(w.message,w.code));return this._passwordCapability.promise}),i.on("DataLoaded",w=>{var o;(o=u.onProgress)==null||o.call(u,{loaded:w.length,total:w.length}),this.downloadInfoCapability.resolve(w)}),i.on("StartRenderPage",w=>{if(this.destroyed)return;l(this,v).get(w.pageIndex)._startRenderPage(w.transparency,w.cacheKey)}),i.on("commonobj",([w,o,F])=>{var X;if(!this.destroyed&&!this.commonObjs.has(w))switch(o){case"Font":const le=this._params;if("error"in F){const ae=F.error;(0,_util.warn)(`Error during font loading: ${ae}`),this.commonObjs.resolve(w,ae);break}const H=le.pdfBug&&((X=globalThis.FontInspector)!=null&&X.enabled)?(ae,J)=>globalThis.FontInspector.fontAdded(ae,J):null,Z=new _font_loader.FontFaceObject(F,{isEvalSupported:le.isEvalSupported,disableFontFace:le.disableFontFace,ignoreErrors:le.ignoreErrors,inspectFont:H});this.fontLoader.bind(Z).catch(ae=>i.sendWithPromise("FontFallback",{id:w})).finally(()=>{!le.fontExtraProperties&&Z.data&&(Z.data=null),this.commonObjs.resolve(w,Z)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(w,F);break;default:throw new Error(`Got unknown common object type ${o}`)}}),i.on("obj",([w,o,F,X])=>{var H;if(this.destroyed)return;const le=l(this,v).get(o);if(!le.objs.has(w))switch(F){case"Image":if(le.objs.resolve(w,X),X){let Z;if(X.bitmap){const{width:ae,height:J}=X;Z=ae*J*4}else Z=((H=X.data)==null?void 0:H.length)||0;Z>_util.MAX_IMAGE_SIZE_TO_CACHE&&(le._maybeCleanupAfterRender=!0)}break;case"Pattern":le.objs.resolve(w,X);break;default:throw new Error(`Got unknown object type ${F}`)}}),i.on("DocProgress",w=>{var o;this.destroyed||(o=u.onProgress)==null||o.call(u,{loaded:w.loaded,total:w.total})}),i.on("FetchBuiltInCMap",w=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(w):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),i.on("FetchStandardFontData",w=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(w):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((i=this._fullReader)==null?void 0:i.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(i){if(!Number.isInteger(i)||i<=0||i>this._numPages)return Promise.reject(new Error("Invalid page request."));const u=i-1,w=l(this,r).get(u);if(w)return w;const o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:u}).then(F=>{if(this.destroyed)throw new Error("Transport destroyed");const X=new PDFPageProxy(u,F,this,this._params.pdfBug);return l(this,v).set(u,X),X});return l(this,r).set(u,o),o}getPageIndex(i){return typeof i!="object"||i===null||!Number.isInteger(i.num)||i.num<0||!Number.isInteger(i.gen)||i.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:i.num,gen:i.gen})}getAnnotations(i,u){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:i,intent:u})}getFieldObjects(){return K(this,c,xt).call(this,"GetFieldObjects")}hasJSActions(){return K(this,c,xt).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(i){return typeof i!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:i})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(i){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:i})}getStructTree(i){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:i})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(i=>new _optional_content_config.OptionalContentConfig(i))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const i="GetMetadata",u=l(this,C).get(i);if(u)return u;const w=this.messageHandler.sendWithPromise(i,null).then(o=>{var F,X;return{info:o[0],metadata:o[1]?new _metadata.Metadata(o[1]):null,contentDispositionFilename:((F=this._fullReader)==null?void 0:F.filename)??null,contentLength:((X=this._fullReader)==null?void 0:X.contentLength)??null}});return l(this,C).set(i,w),w}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(i=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const u of l(this,v).values())if(!u.cleanup())throw new Error(`startCleanup: Page ${u.pageNumber} is currently rendering.`);this.commonObjs.clear(),i||this.fontLoader.clear(),l(this,C).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:i,enableXfa:u}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:i,enableXfa:u})}}C=new WeakMap,v=new WeakMap,r=new WeakMap,c=new WeakSet,xt=function(i,u=null){const w=l(this,C).get(i);if(w)return w;const o=this.messageHandler.sendWithPromise(i,u);return l(this,C).set(i,o),o};class PDFObjects{constructor(){z(this,m);z(this,p,Object.create(null))}get(i,u=null){if(u){const o=K(this,m,Mt).call(this,i);return o.capability.promise.then(()=>u(o.data)),null}const w=l(this,p)[i];if(!(w!=null&&w.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${i}.`);return w.data}has(i){const u=l(this,p)[i];return(u==null?void 0:u.capability.settled)||!1}resolve(i,u=null){const w=K(this,m,Mt).call(this,i);w.data=u,w.capability.resolve()}clear(){var i;for(const u in l(this,p)){const{data:w}=l(this,p)[u];(i=w==null?void 0:w.bitmap)==null||i.close()}_e(this,p,Object.create(null))}}p=new WeakMap,m=new WeakSet,Mt=function(i){const u=l(this,p)[i];return u||(l(this,p)[i]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(i){z(this,f,null);_e(this,f,i),this.onContinue=null}get promise(){return l(this,f).capability.promise}cancel(i=0){l(this,f).cancel(null,i)}get separateAnnots(){const{separateAnnots:i}=l(this,f).operatorList;if(!i)return!1;const{annotationCanvasMap:u}=l(this,f);return i.form||i.canvas&&(u==null?void 0:u.size)>0}}f=new WeakMap,exports.RenderTask=RenderTask;const e=class e{constructor({callback:i,params:u,objs:w,commonObjs:o,annotationCanvasMap:F,operatorList:X,pageIndex:le,canvasFactory:H,filterFactory:Z,useRequestAnimationFrame:ae=!1,pdfBug:J=!1,pageColors:ge=null}){this.callback=i,this.params=u,this.objs=w,this.commonObjs=o,this.annotationCanvasMap=F,this.operatorListIdx=null,this.operatorList=X,this._pageIndex=le,this.canvasFactory=H,this.filterFactory=Z,this._pdfBug=J,this.pageColors=ge,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=ae===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=u.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:i=!1,optionalContentConfig:u}){var le,H;if(this.cancelled)return;if(this._canvas){if(l(e,t).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(e,t).add(this._canvas)}this._pdfBug&&((le=globalThis.StepperManager)!=null&&le.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:w,viewport:o,transform:F,background:X}=this.params;this.gfx=new _canvas.CanvasGraphics(w,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:u},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:F,viewport:o,transparency:i,background:X}),this.operatorListIdx=0,this.graphicsReady=!0,(H=this.graphicsReadyCallback)==null||H.call(this)}cancel(i=null,u=0){var w;this.running=!1,this.cancelled=!0,(w=this.gfx)==null||w.endDrawing(),this._canvas&&l(e,t).delete(this._canvas),this.callback(i||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",u))}operatorListChanged(){var i;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(i=this.stepper)==null||i.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&l(e,t).delete(this._canvas),this.callback())))}};t=new WeakMap,z(e,t,new WeakSet);let InternalRenderTask=e;const version="3.6.172";exports.version=version;const build="4d3dfe254";exports.build=build},(re,P,ee)=>{var D,_,d,bi,C;Object.defineProperty(P,"__esModule",{value:!0}),P.PrintAnnotationStorage=P.AnnotationStorage=void 0;var T=ee(1),O=ee(4),ue=ee(8);class G{constructor(){z(this,d);z(this,D,!1);z(this,_,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(r,c){const a=l(this,_).get(r);return a===void 0?c:Object.assign(c,a)}getRawValue(r){return l(this,_).get(r)}remove(r){if(l(this,_).delete(r),l(this,_).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const c of l(this,_).values())if(c instanceof O.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(r,c){const a=l(this,_).get(r);let p=!1;if(a!==void 0)for(const[m,b]of Object.entries(c))a[m]!==b&&(p=!0,a[m]=b);else p=!0,l(this,_).set(r,c);p&&K(this,d,bi).call(this),c instanceof O.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(c.constructor._type)}has(r){return l(this,_).has(r)}getAll(){return l(this,_).size>0?(0,T.objectFromMap)(l(this,_)):null}setAll(r){for(const[c,a]of Object.entries(r))this.setValue(c,a)}get size(){return l(this,_).size}resetModified(){l(this,D)&&(_e(this,D,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new I(this)}get serializable(){if(l(this,_).size===0)return null;const r=new Map;for(const[c,a]of l(this,_)){const p=a instanceof O.AnnotationEditor?a.serialize():a;p&&r.set(c,p)}return r}static getHash(r){if(!r)return"";const c=new ue.MurmurHash3_64;for(const[a,p]of r)c.update(`${a}:${JSON.stringify(p)}`);return c.hexdigest()}}D=new WeakMap,_=new WeakMap,d=new WeakSet,bi=function(){l(this,D)||(_e(this,D,!0),typeof this.onSetModified=="function"&&this.onSetModified())},P.AnnotationStorage=G;class I extends G{constructor(c){super();z(this,C,null);_e(this,C,structuredClone(c.serializable))}get print(){(0,T.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,C)}}C=new WeakMap,P.PrintAnnotationStorage=I},(re,P,ee)=>{var G,I,D,_,d,k;Object.defineProperty(P,"__esModule",{value:!0}),P.AnnotationEditor=void 0;var T=ee(5),O=ee(1);const C=class C{constructor(r){z(this,G,this.focusin.bind(this));z(this,I,this.focusout.bind(this));z(this,D,!1);z(this,_,!1);z(this,d,!1);He(this,"_uiManager",null);z(this,k,C._zIndex++);this.constructor===C&&(0,O.unreachable)("Cannot initialize AnnotationEditor."),this.parent=r.parent,this.id=r.id,this.width=this.height=null,this.pageIndex=r.parent.pageIndex,this.name=r.name,this.div=null,this._uiManager=r.uiManager;const{rotation:c,rawDims:{pageWidth:a,pageHeight:p,pageX:m,pageY:b}}=this.parent.viewport;this.rotation=c,this.pageRotation=(360+c-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[a,p],this.pageTranslation=[m,b];const[f,t]=this.parentDimensions;this.x=r.x/f,this.y=r.y/t,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,O.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(r){this._uiManager.addCommands(r)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,k)}setParent(r){r!==null&&(this.pageIndex=r.pageIndex,this.pageDimensions=r.pageDimensions),this.parent=r}focusin(r){l(this,D)?_e(this,D,!1):this.parent.setSelected(this)}focusout(r){var a;if(!this.isAttachedToDOM)return;const c=r.relatedTarget;c!=null&&c.closest(`#${this.id}`)||(r.preventDefault(),(a=this.parent)!=null&&a.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(r){const c=this.parent.div.getBoundingClientRect();this.startX=r.clientX-c.x,this.startY=r.clientY-c.y,r.dataTransfer.setData("text/plain",this.id),r.dataTransfer.effectAllowed="move"}setAt(r,c,a,p){const[m,b]=this.parentDimensions;[a,p]=this.screenToPageTranslation(a,p),this.x=(r+a)/m,this.y=(c+p)/b,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(r,c){const[a,p]=this.parentDimensions;[r,c]=this.screenToPageTranslation(r,c),this.x+=r/a,this.y+=c/p,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(r,c){switch(this.parentRotation){case 90:return[c,-r];case 180:return[-r,-c];case 270:return[-c,r];default:return[r,c]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{realScale:r}=this._uiManager.viewParameters,[c,a]=this.pageDimensions;return[c*r,a*r]}setDims(r,c){const[a,p]=this.parentDimensions;this.div.style.width=`${100*r/a}%`,this.div.style.height=`${100*c/p}%`}fixDims(){const{style:r}=this.div,{height:c,width:a}=r,p=a.endsWith("%"),m=c.endsWith("%");if(p&&m)return;const[b,f]=this.parentDimensions;p||(r.width=`${100*parseFloat(a)/b}%`),m||(r.height=`${100*parseFloat(c)/f}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",l(this,G)),this.div.addEventListener("focusout",l(this,I));const[r,c]=this.getInitialTranslation();return this.translate(r,c),(0,T.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(r){const{isMac:c}=O.FeatureTest.platform;if(r.button!==0||r.ctrlKey&&c){r.preventDefault();return}r.ctrlKey&&!c||r.shiftKey||r.metaKey&&c?this.parent.toggleSelected(this):this.parent.setSelected(this),_e(this,D,!0)}getRect(r,c){const a=this.parentScale,[p,m]=this.pageDimensions,[b,f]=this.pageTranslation,t=r/a,e=c/a,s=this.x*p,i=this.y*m,u=this.width*p,w=this.height*m;switch(this.rotation){case 0:return[s+t+b,m-i-e-w+f,s+t+u+b,m-i-e+f];case 90:return[s+e+b,m-i+t+f,s+e+w+b,m-i+t+u+f];case 180:return[s-t-u+b,m-i+e+f,s-t+b,m-i+e+w+f];case 270:return[s-e-w+b,m-i-t-u+f,s-e+b,m-i-t+f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(r,c){const[a,p,m,b]=r,f=m-a,t=b-p;switch(this.rotation){case 0:return[a,c-b,f,t];case 90:return[a,c-p,t,f];case 180:return[m,c-p,f,t];case 270:return[m,c-b,t,f];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){_e(this,d,!0)}disableEditMode(){_e(this,d,!1)}isInEditMode(){return l(this,d)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var r;(r=this.div)==null||r.addEventListener("focusin",l(this,G))}serialize(){(0,O.unreachable)("An editor must be serializable")}static deserialize(r,c,a){const p=new this.prototype.constructor({parent:c,id:c.getNextId(),uiManager:a});p.rotation=r.rotation;const[m,b]=p.pageDimensions,[f,t,e,s]=p.getRectInCurrentCoords(r.rect,b);return p.x=f/m,p.y=t/b,p.width=e/m,p.height=s/b,p}remove(){this.div.removeEventListener("focusin",l(this,G)),this.div.removeEventListener("focusout",l(this,I)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var r;(r=this.div)==null||r.classList.add("selectedEditor")}unselect(){var r;(r=this.div)==null||r.classList.remove("selectedEditor")}updateParams(r,c){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return l(this,_)}set isEditing(r){_e(this,_,r),r?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};G=new WeakMap,I=new WeakMap,D=new WeakMap,_=new WeakMap,d=new WeakMap,k=new WeakMap,He(C,"_colorManager",new T.ColorManager),He(C,"_zIndex",1);let ue=C;P.AnnotationEditor=ue},(re,P,ee)=>{var C,v,r,c,a,p,vi,f,t,e,s,i,u,w,o,F,X,le,H,Z,ae,J,ge,ye,Y,we,Ee,Q,y,E,L,yi,j,Rt,U,Ai,V,Si,h,Ke,M,ct,W,Ei,N,Pi,ce,kt,de,ht,ve,Lt;Object.defineProperty(P,"__esModule",{value:!0}),P.KeyboardManager=P.CommandManager=P.ColorManager=P.AnnotationEditorUIManager=void 0,P.bindEvents=ue,P.opacityToHex=G;var T=ee(1),O=ee(6);function ue(Re,oe,Ce){for(const Me of Ce)oe.addEventListener(Me,Re[Me].bind(Re))}function G(Re){return Math.round(Math.min(255,Math.max(1,255*Re))).toString(16).padStart(2,"0")}class I{constructor(){z(this,C,0)}getId(){return`${T.AnnotationEditorPrefix}${lt(this,C)._++}`}}C=new WeakMap;class D{constructor(oe=128){z(this,v,[]);z(this,r,!1);z(this,c,void 0);z(this,a,-1);_e(this,c,oe)}add({cmd:oe,undo:Ce,mustExec:Me,type:Oe=NaN,overwriteIfSameType:S=!1,keepUndo:g=!1}){if(Me&&oe(),l(this,r))return;const x={cmd:oe,undo:Ce,type:Oe};if(l(this,a)===-1){l(this,v).length>0&&(l(this,v).length=0),_e(this,a,0),l(this,v).push(x);return}if(S&&l(this,v)[l(this,a)].type===Oe){g&&(x.undo=l(this,v)[l(this,a)].undo),l(this,v)[l(this,a)]=x;return}const te=l(this,a)+1;te===l(this,c)?l(this,v).splice(0,1):(_e(this,a,te),te<l(this,v).length&&l(this,v).splice(te)),l(this,v).push(x)}undo(){l(this,a)!==-1&&(_e(this,r,!0),l(this,v)[l(this,a)].undo(),_e(this,r,!1),_e(this,a,l(this,a)-1))}redo(){l(this,a)<l(this,v).length-1&&(_e(this,a,l(this,a)+1),_e(this,r,!0),l(this,v)[l(this,a)].cmd(),_e(this,r,!1))}hasSomethingToUndo(){return l(this,a)!==-1}hasSomethingToRedo(){return l(this,a)<l(this,v).length-1}destroy(){_e(this,v,null)}}v=new WeakMap,r=new WeakMap,c=new WeakMap,a=new WeakMap,P.CommandManager=D;class _{constructor(oe){z(this,p);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Ce}=T.FeatureTest.platform;for(const[Me,Oe]of oe)for(const S of Me){const g=S.startsWith("mac+");Ce&&g?(this.callbacks.set(S.slice(4),Oe),this.allKeys.add(S.split("+").at(-1))):!Ce&&!g&&(this.callbacks.set(S,Oe),this.allKeys.add(S.split("+").at(-1)))}}exec(oe,Ce){if(!this.allKeys.has(Ce.key))return;const Me=this.callbacks.get(K(this,p,vi).call(this,Ce));Me&&(Me.bind(oe)(),Ce.stopPropagation(),Ce.preventDefault())}}p=new WeakSet,vi=function(oe){oe.altKey&&this.buffer.push("alt"),oe.ctrlKey&&this.buffer.push("ctrl"),oe.metaKey&&this.buffer.push("meta"),oe.shiftKey&&this.buffer.push("shift"),this.buffer.push(oe.key);const Ce=this.buffer.join("+");return this.buffer.length=0,Ce},P.KeyboardManager=_;const b=class b{get _colors(){const oe=new Map([["CanvasText",null],["Canvas",null]]);return(0,O.getColorValues)(oe),(0,T.shadow)(this,"_colors",oe)}convert(oe){const Ce=(0,O.getRGB)(oe);if(!window.matchMedia("(forced-colors: active)").matches)return Ce;for(const[Me,Oe]of this._colors)if(Oe.every((S,g)=>S===Ce[g]))return b._colorsMapping.get(Me);return Ce}getHexCode(oe){const Ce=this._colors.get(oe);return Ce?T.Util.makeHexColor(...Ce):oe}};He(b,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let d=b;P.ColorManager=d;const Pe=class Pe{constructor(oe,Ce,Me){z(this,L);z(this,j);z(this,U);z(this,V);z(this,h);z(this,M);z(this,W);z(this,N);z(this,ce);z(this,de);z(this,ve);z(this,f,null);z(this,t,new Map);z(this,e,new Map);z(this,s,null);z(this,i,new D);z(this,u,0);z(this,w,null);z(this,o,new Set);z(this,F,null);z(this,X,new I);z(this,le,!1);z(this,H,T.AnnotationEditorType.NONE);z(this,Z,new Set);z(this,ae,this.copy.bind(this));z(this,J,this.cut.bind(this));z(this,ge,this.paste.bind(this));z(this,ye,this.keydown.bind(this));z(this,Y,this.onEditingAction.bind(this));z(this,we,this.onPageChanging.bind(this));z(this,Ee,this.onScaleChanging.bind(this));z(this,Q,this.onRotationChanging.bind(this));z(this,y,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});z(this,E,null);_e(this,E,oe),_e(this,F,Ce),l(this,F)._on("editingaction",l(this,Y)),l(this,F)._on("pagechanging",l(this,we)),l(this,F)._on("scalechanging",l(this,Ee)),l(this,F)._on("rotationchanging",l(this,Q)),_e(this,s,Me),this.viewParameters={realScale:O.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){K(this,j,Rt).call(this),l(this,F)._off("editingaction",l(this,Y)),l(this,F)._off("pagechanging",l(this,we)),l(this,F)._off("scalechanging",l(this,Ee)),l(this,F)._off("rotationchanging",l(this,Q));for(const oe of l(this,e).values())oe.destroy();l(this,e).clear(),l(this,t).clear(),l(this,o).clear(),_e(this,f,null),l(this,Z).clear(),l(this,i).destroy()}onPageChanging({pageNumber:oe}){_e(this,u,oe-1)}focusMainContainer(){l(this,E).focus()}addShouldRescale(oe){l(this,o).add(oe)}removeShouldRescale(oe){l(this,o).delete(oe)}onScaleChanging({scale:oe}){this.commitOrRemove(),this.viewParameters.realScale=oe*O.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Ce of l(this,o))Ce.onScaleChanging()}onRotationChanging({pagesRotation:oe}){this.commitOrRemove(),this.viewParameters.rotation=oe}addToAnnotationStorage(oe){!oe.isEmpty()&&l(this,s)&&!l(this,s).has(oe.id)&&l(this,s).setValue(oe.id,oe)}copy(oe){if(oe.preventDefault(),l(this,f)&&l(this,f).commitOrRemove(),!this.hasSelection)return;const Ce=[];for(const Me of l(this,Z))Me.isEmpty()||Ce.push(Me.serialize());Ce.length!==0&&oe.clipboardData.setData("application/pdfjs",JSON.stringify(Ce))}cut(oe){this.copy(oe),this.delete()}paste(oe){oe.preventDefault();let Ce=oe.clipboardData.getData("application/pdfjs");if(!Ce)return;try{Ce=JSON.parse(Ce)}catch(Oe){(0,T.warn)(`paste: "${Oe.message}".`);return}if(!Array.isArray(Ce))return;this.unselectAll();const Me=l(this,e).get(l(this,u));try{const Oe=[];for(const x of Ce){const te=Me.deserialize(x);if(!te)return;Oe.push(te)}const S=()=>{for(const x of Oe)K(this,ce,kt).call(this,x);K(this,ve,Lt).call(this,Oe)},g=()=>{for(const x of Oe)x.remove()};this.addCommands({cmd:S,undo:g,mustExec:!0})}catch(Oe){(0,T.warn)(`paste: "${Oe.message}".`)}}keydown(oe){var Ce;(Ce=this.getActive())!=null&&Ce.shouldGetKeyboardEvents()||Pe._keyboardManager.exec(this,oe)}onEditingAction(oe){["undo","redo","delete","selectAll"].includes(oe.name)&&this[oe.name]()}setEditingState(oe){oe?(K(this,L,yi).call(this),K(this,U,Ai).call(this),K(this,h,Ke).call(this,{isEditing:l(this,H)!==T.AnnotationEditorType.NONE,isEmpty:K(this,de,ht).call(this),hasSomethingToUndo:l(this,i).hasSomethingToUndo(),hasSomethingToRedo:l(this,i).hasSomethingToRedo(),hasSelectedEditor:!1})):(K(this,j,Rt).call(this),K(this,V,Si).call(this),K(this,h,Ke).call(this,{isEditing:!1}))}registerEditorTypes(oe){if(!l(this,w)){_e(this,w,oe);for(const Ce of l(this,w))K(this,M,ct).call(this,Ce.defaultPropertiesToUpdate)}}getId(){return l(this,X).getId()}get currentLayer(){return l(this,e).get(l(this,u))}get currentPageIndex(){return l(this,u)}addLayer(oe){l(this,e).set(oe.pageIndex,oe),l(this,le)?oe.enable():oe.disable()}removeLayer(oe){l(this,e).delete(oe.pageIndex)}updateMode(oe){if(_e(this,H,oe),oe===T.AnnotationEditorType.NONE)this.setEditingState(!1),K(this,N,Pi).call(this);else{this.setEditingState(!0),K(this,W,Ei).call(this);for(const Ce of l(this,e).values())Ce.updateMode(oe)}}updateToolbar(oe){oe!==l(this,H)&&l(this,F).dispatch("switchannotationeditormode",{source:this,mode:oe})}updateParams(oe,Ce){if(l(this,w)){for(const Me of l(this,Z))Me.updateParams(oe,Ce);for(const Me of l(this,w))Me.updateDefaultParams(oe,Ce)}}getEditors(oe){const Ce=[];for(const Me of l(this,t).values())Me.pageIndex===oe&&Ce.push(Me);return Ce}getEditor(oe){return l(this,t).get(oe)}addEditor(oe){l(this,t).set(oe.id,oe)}removeEditor(oe){var Ce;l(this,t).delete(oe.id),this.unselect(oe),(Ce=l(this,s))==null||Ce.remove(oe.id)}setActiveEditor(oe){l(this,f)!==oe&&(_e(this,f,oe),oe&&K(this,M,ct).call(this,oe.propertiesToUpdate))}toggleSelected(oe){if(l(this,Z).has(oe)){l(this,Z).delete(oe),oe.unselect(),K(this,h,Ke).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,Z).add(oe),oe.select(),K(this,M,ct).call(this,oe.propertiesToUpdate),K(this,h,Ke).call(this,{hasSelectedEditor:!0})}setSelected(oe){for(const Ce of l(this,Z))Ce!==oe&&Ce.unselect();l(this,Z).clear(),l(this,Z).add(oe),oe.select(),K(this,M,ct).call(this,oe.propertiesToUpdate),K(this,h,Ke).call(this,{hasSelectedEditor:!0})}isSelected(oe){return l(this,Z).has(oe)}unselect(oe){oe.unselect(),l(this,Z).delete(oe),K(this,h,Ke).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,Z).size!==0}undo(){l(this,i).undo(),K(this,h,Ke).call(this,{hasSomethingToUndo:l(this,i).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:K(this,de,ht).call(this)})}redo(){l(this,i).redo(),K(this,h,Ke).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,i).hasSomethingToRedo(),isEmpty:K(this,de,ht).call(this)})}addCommands(oe){l(this,i).add(oe),K(this,h,Ke).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:K(this,de,ht).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const oe=[...l(this,Z)],Ce=()=>{for(const Oe of oe)Oe.remove()},Me=()=>{for(const Oe of oe)K(this,ce,kt).call(this,Oe)};this.addCommands({cmd:Ce,undo:Me,mustExec:!0})}commitOrRemove(){var oe;(oe=l(this,f))==null||oe.commitOrRemove()}selectAll(){for(const oe of l(this,Z))oe.commit();K(this,ve,Lt).call(this,l(this,t).values())}unselectAll(){if(l(this,f)){l(this,f).commitOrRemove();return}if(l(this,Z).size!==0){for(const oe of l(this,Z))oe.unselect();l(this,Z).clear(),K(this,h,Ke).call(this,{hasSelectedEditor:!1})}}isActive(oe){return l(this,f)===oe}getActive(){return l(this,f)}getMode(){return l(this,H)}};f=new WeakMap,t=new WeakMap,e=new WeakMap,s=new WeakMap,i=new WeakMap,u=new WeakMap,w=new WeakMap,o=new WeakMap,F=new WeakMap,X=new WeakMap,le=new WeakMap,H=new WeakMap,Z=new WeakMap,ae=new WeakMap,J=new WeakMap,ge=new WeakMap,ye=new WeakMap,Y=new WeakMap,we=new WeakMap,Ee=new WeakMap,Q=new WeakMap,y=new WeakMap,E=new WeakMap,L=new WeakSet,yi=function(){l(this,E).addEventListener("keydown",l(this,ye))},j=new WeakSet,Rt=function(){l(this,E).removeEventListener("keydown",l(this,ye))},U=new WeakSet,Ai=function(){document.addEventListener("copy",l(this,ae)),document.addEventListener("cut",l(this,J)),document.addEventListener("paste",l(this,ge))},V=new WeakSet,Si=function(){document.removeEventListener("copy",l(this,ae)),document.removeEventListener("cut",l(this,J)),document.removeEventListener("paste",l(this,ge))},h=new WeakSet,Ke=function(oe){Object.entries(oe).some(([Me,Oe])=>l(this,y)[Me]!==Oe)&&l(this,F).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,y),oe)})},M=new WeakSet,ct=function(oe){l(this,F).dispatch("annotationeditorparamschanged",{source:this,details:oe})},W=new WeakSet,Ei=function(){if(!l(this,le)){_e(this,le,!0);for(const oe of l(this,e).values())oe.enable()}},N=new WeakSet,Pi=function(){if(this.unselectAll(),l(this,le)){_e(this,le,!1);for(const oe of l(this,e).values())oe.disable()}},ce=new WeakSet,kt=function(oe){const Ce=l(this,e).get(oe.pageIndex);Ce?Ce.addOrRebuild(oe):this.addEditor(oe)},de=new WeakSet,ht=function(){if(l(this,t).size===0)return!0;if(l(this,t).size===1)for(const oe of l(this,t).values())return oe.isEmpty();return!1},ve=new WeakSet,Lt=function(oe){l(this,Z).clear();for(const Ce of oe)Ce.isEmpty()||(l(this,Z).add(Ce),Ce.select());K(this,h,Ke).call(this,{hasSelectedEditor:!0})},He(Pe,"_keyboardManager",new _([[["ctrl+a","mac+meta+a"],Pe.prototype.selectAll],[["ctrl+z","mac+meta+z"],Pe.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],Pe.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],Pe.prototype.delete],[["Escape","mac+Escape"],Pe.prototype.unselectAll]]));let k=Pe;P.AnnotationEditorUIManager=k},(re,P,ee)=>{var ae,J,ge,ye,Y,we,Ee,Q,y,st,L,et,j,Ze;Object.defineProperty(P,"__esModule",{value:!0}),P.StatTimer=P.RenderingCancelledException=P.PixelsPerInch=P.PageViewport=P.PDFDateString=P.DOMStandardFontDataFactory=P.DOMSVGFactory=P.DOMFilterFactory=P.DOMCanvasFactory=P.DOMCMapReaderFactory=P.AnnotationPrefix=void 0,P.deprecated=s,P.getColorValues=F,P.getCurrentTransform=X,P.getCurrentTransformInverse=le,P.getFilenameFromUrl=m,P.getPdfFilenameFromUrl=b,P.getRGB=o,P.getXfaPageViewport=w,P.isDataScheme=a,P.isPdfFile=p,P.isValidFetchUrl=t,P.loadScript=e,P.setLayerDimensions=H;var T=ee(7),O=ee(1);const ue="http://www.w3.org/2000/svg",G="pdfjs_internal_id_";P.AnnotationPrefix=G;const Z=class Z{};He(Z,"CSS",96),He(Z,"PDF",72),He(Z,"PDF_TO_CSS_UNITS",Z.CSS/Z.PDF);let I=Z;P.PixelsPerInch=I;class D extends T.BaseFilterFactory{constructor({docId:V,ownerDocument:n=globalThis.document}={}){super();z(this,y);z(this,L);z(this,j);z(this,ae,void 0);z(this,J,void 0);z(this,ge,void 0);z(this,ye,void 0);z(this,Y,void 0);z(this,we,void 0);z(this,Ee,void 0);z(this,Q,0);_e(this,ge,V),_e(this,ye,n)}addFilter(V){if(!V)return"none";let n=l(this,y,st).get(V);if(n)return n;let h,A,M,R;if(V.length===1){const ce=V[0],ie=new Array(256);for(let de=0;de<256;de++)ie[de]=ce[de]/255;R=h=A=M=ie.join(",")}else{const[ce,ie,de]=V,be=new Array(256),ve=new Array(256),xe=new Array(256);for(let Pe=0;Pe<256;Pe++)be[Pe]=ce[Pe]/255,ve[Pe]=ie[Pe]/255,xe[Pe]=de[Pe]/255;h=be.join(","),A=ve.join(","),M=xe.join(","),R=`${h}${A}${M}`}if(n=l(this,y,st).get(R),n)return l(this,y,st).set(V,n),n;const W=`g_${l(this,ge)}_transfer_map_${lt(this,Q)._++}`,me=`url(#${W})`;l(this,y,st).set(V,me),l(this,y,st).set(R,me);const N=l(this,ye).createElementNS(ue,"filter",ue);N.setAttribute("id",W),N.setAttribute("color-interpolation-filters","sRGB");const $=l(this,ye).createElementNS(ue,"feComponentTransfer");return N.append($),K(this,j,Ze).call(this,$,"feFuncR",h),K(this,j,Ze).call(this,$,"feFuncG",A),K(this,j,Ze).call(this,$,"feFuncB",M),l(this,L,et).append(N),me}addHCMFilter(V,n){var de;const h=`${V}-${n}`;if(l(this,we)===h)return l(this,Ee);if(_e(this,we,h),_e(this,Ee,"none"),(de=l(this,Y))==null||de.remove(),!V||!n)return l(this,Ee);l(this,L,et).style.color=V,V=getComputedStyle(l(this,L,et)).getPropertyValue("color");const A=o(V);V=O.Util.makeHexColor(...A),l(this,L,et).style.color=n,n=getComputedStyle(l(this,L,et)).getPropertyValue("color");const M=o(n);if(n=O.Util.makeHexColor(...M),l(this,L,et).style.color="",V==="#000000"&&n==="#ffffff"||V===n)return l(this,Ee);const R=new Array(256);for(let be=0;be<=255;be++){const ve=be/255;R[be]=ve<=.03928?ve/12.92:((ve+.055)/1.055)**2.4}const W=R.join(","),me=`g_${l(this,ge)}_hcm_filter`,N=_e(this,Y,l(this,ye).createElementNS(ue,"filter",ue));N.setAttribute("id",me),N.setAttribute("color-interpolation-filters","sRGB");let $=l(this,ye).createElementNS(ue,"feComponentTransfer");N.append($),K(this,j,Ze).call(this,$,"feFuncR",W),K(this,j,Ze).call(this,$,"feFuncG",W),K(this,j,Ze).call(this,$,"feFuncB",W);const ce=l(this,ye).createElementNS(ue,"feColorMatrix");ce.setAttribute("type","matrix"),ce.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),N.append(ce),$=l(this,ye).createElementNS(ue,"feComponentTransfer"),N.append($);const ie=(be,ve)=>{const xe=A[be]/255,Pe=M[be]/255,Re=new Array(ve+1);for(let oe=0;oe<=ve;oe++)Re[oe]=xe+oe/ve*(Pe-xe);return Re.join(",")};return K(this,j,Ze).call(this,$,"feFuncR",ie(0,5)),K(this,j,Ze).call(this,$,"feFuncG",ie(1,5)),K(this,j,Ze).call(this,$,"feFuncB",ie(2,5)),l(this,L,et).append(N),_e(this,Ee,`url(#${me})`),l(this,Ee)}destroy(V=!1){V&&l(this,Ee)||(l(this,J)&&(l(this,J).parentNode.parentNode.remove(),_e(this,J,null)),l(this,ae)&&(l(this,ae).clear(),_e(this,ae,null)),_e(this,Q,0))}}ae=new WeakMap,J=new WeakMap,ge=new WeakMap,ye=new WeakMap,Y=new WeakMap,we=new WeakMap,Ee=new WeakMap,Q=new WeakMap,y=new WeakSet,st=function(){return l(this,ae)||_e(this,ae,new Map)},L=new WeakSet,et=function(){if(!l(this,J)){const V=l(this,ye).createElement("div"),{style:n}=V;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const h=l(this,ye).createElementNS(ue,"svg");h.setAttribute("width",0),h.setAttribute("height",0),_e(this,J,l(this,ye).createElementNS(ue,"defs")),V.append(h),h.append(l(this,J)),l(this,ye).body.append(V)}return l(this,J)},j=new WeakSet,Ze=function(V,n,h){const A=l(this,ye).createElementNS(ue,n);A.setAttribute("type","discrete"),A.setAttribute("tableValues",h),V.append(A)},P.DOMFilterFactory=D;class _ extends T.BaseCanvasFactory{constructor({ownerDocument:B=globalThis.document}={}){super(),this._document=B}_createCanvas(B,V){const n=this._document.createElement("canvas");return n.width=B,n.height=V,n}}P.DOMCanvasFactory=_;async function d(U,B=!1){if(t(U,document.baseURI)){const V=await fetch(U);if(!V.ok)throw new Error(V.statusText);return B?new Uint8Array(await V.arrayBuffer()):(0,O.stringToBytes)(await V.text())}return new Promise((V,n)=>{const h=new XMLHttpRequest;h.open("GET",U,!0),B&&(h.responseType="arraybuffer"),h.onreadystatechange=()=>{if(h.readyState===XMLHttpRequest.DONE){if(h.status===200||h.status===0){let A;if(B&&h.response?A=new Uint8Array(h.response):!B&&h.responseText&&(A=(0,O.stringToBytes)(h.responseText)),A){V(A);return}}n(new Error(h.statusText))}},h.send(null)})}class k extends T.BaseCMapReaderFactory{_fetchData(B,V){return d(B,this.isCompressed).then(n=>({cMapData:n,compressionType:V}))}}P.DOMCMapReaderFactory=k;class C extends T.BaseStandardFontDataFactory{_fetchData(B){return d(B,!0)}}P.DOMStandardFontDataFactory=C;class v extends T.BaseSVGFactory{_createSVG(B){return document.createElementNS(ue,B)}}P.DOMSVGFactory=v;class r{constructor({viewBox:B,scale:V,rotation:n,offsetX:h=0,offsetY:A=0,dontFlip:M=!1}){this.viewBox=B,this.scale=V,this.rotation=n,this.offsetX=h,this.offsetY=A;const R=(B[2]+B[0])/2,W=(B[3]+B[1])/2;let me,N,$,ce;switch(n%=360,n<0&&(n+=360),n){case 180:me=-1,N=0,$=0,ce=1;break;case 90:me=0,N=1,$=1,ce=0;break;case 270:me=0,N=-1,$=-1,ce=0;break;case 0:me=1,N=0,$=0,ce=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}M&&($=-$,ce=-ce);let ie,de,be,ve;me===0?(ie=Math.abs(W-B[1])*V+h,de=Math.abs(R-B[0])*V+A,be=(B[3]-B[1])*V,ve=(B[2]-B[0])*V):(ie=Math.abs(R-B[0])*V+h,de=Math.abs(W-B[1])*V+A,be=(B[2]-B[0])*V,ve=(B[3]-B[1])*V),this.transform=[me*V,N*V,$*V,ce*V,ie-me*V*R-$*V*W,de-N*V*R-ce*V*W],this.width=be,this.height=ve}get rawDims(){const{viewBox:B}=this;return(0,O.shadow)(this,"rawDims",{pageWidth:B[2]-B[0],pageHeight:B[3]-B[1],pageX:B[0],pageY:B[1]})}clone({scale:B=this.scale,rotation:V=this.rotation,offsetX:n=this.offsetX,offsetY:h=this.offsetY,dontFlip:A=!1}={}){return new r({viewBox:this.viewBox.slice(),scale:B,rotation:V,offsetX:n,offsetY:h,dontFlip:A})}convertToViewportPoint(B,V){return O.Util.applyTransform([B,V],this.transform)}convertToViewportRectangle(B){const V=O.Util.applyTransform([B[0],B[1]],this.transform),n=O.Util.applyTransform([B[2],B[3]],this.transform);return[V[0],V[1],n[0],n[1]]}convertToPdfPoint(B,V){return O.Util.applyInverseTransform([B,V],this.transform)}}P.PageViewport=r;class c extends O.BaseException{constructor(B,V,n=0){super(B,"RenderingCancelledException"),this.type=V,this.extraDelay=n}}P.RenderingCancelledException=c;function a(U){const B=U.length;let V=0;for(;V<B&&U[V].trim()==="";)V++;return U.substring(V,V+5).toLowerCase()==="data:"}function p(U){return typeof U=="string"&&/\.pdf$/i.test(U)}function m(U,B=!1){return B||([U]=U.split(/[#?]/,1)),U.substring(U.lastIndexOf("/")+1)}function b(U,B="document.pdf"){if(typeof U!="string")return B;if(a(U))return(0,O.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),B;const V=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,h=V.exec(U);let A=n.exec(h[1])||n.exec(h[2])||n.exec(h[3]);if(A&&(A=A[0],A.includes("%")))try{A=n.exec(decodeURIComponent(A))[0]}catch{}return A||B}class f{constructor(){He(this,"started",Object.create(null));He(this,"times",[])}time(B){B in this.started&&(0,O.warn)(`Timer is already running for ${B}`),this.started[B]=Date.now()}timeEnd(B){B in this.started||(0,O.warn)(`Timer has not been started for ${B}`),this.times.push({name:B,start:this.started[B],end:Date.now()}),delete this.started[B]}toString(){const B=[];let V=0;for(const{name:n}of this.times)V=Math.max(n.length,V);for(const{name:n,start:h,end:A}of this.times)B.push(`${n.padEnd(V)} ${A-h}ms
`);return B.join("")}}P.StatTimer=f;function t(U,B){try{const{protocol:V}=B?new URL(U,B):new URL(U);return V==="http:"||V==="https:"}catch{return!1}}function e(U,B=!1){return new Promise((V,n)=>{const h=document.createElement("script");h.src=U,h.onload=function(A){B&&h.remove(),V(A)},h.onerror=function(){n(new Error(`Cannot load script at: ${h.src}`))},(document.head||document.documentElement).append(h)})}function s(U){console.log("Deprecated API usage: "+U)}let i;class u{static toDateObject(B){if(!B||typeof B!="string")return null;i||(i=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const V=i.exec(B);if(!V)return null;const n=parseInt(V[1],10);let h=parseInt(V[2],10);h=h>=1&&h<=12?h-1:0;let A=parseInt(V[3],10);A=A>=1&&A<=31?A:1;let M=parseInt(V[4],10);M=M>=0&&M<=23?M:0;let R=parseInt(V[5],10);R=R>=0&&R<=59?R:0;let W=parseInt(V[6],10);W=W>=0&&W<=59?W:0;const me=V[7]||"Z";let N=parseInt(V[8],10);N=N>=0&&N<=23?N:0;let $=parseInt(V[9],10)||0;return $=$>=0&&$<=59?$:0,me==="-"?(M+=N,R+=$):me==="+"&&(M-=N,R-=$),new Date(Date.UTC(n,h,A,M,R,W))}}P.PDFDateString=u;function w(U,{scale:B=1,rotation:V=0}){const{width:n,height:h}=U.attributes.style,A=[0,0,parseInt(n),parseInt(h)];return new r({viewBox:A,scale:B,rotation:V})}function o(U){if(U.startsWith("#")){const B=parseInt(U.slice(1),16);return[(B&16711680)>>16,(B&65280)>>8,B&255]}return U.startsWith("rgb(")?U.slice(4,-1).split(",").map(B=>parseInt(B)):U.startsWith("rgba(")?U.slice(5,-1).split(",").map(B=>parseInt(B)).slice(0,3):((0,O.warn)(`Not a valid color format: "${U}"`),[0,0,0])}function F(U){const B=document.createElement("span");B.style.visibility="hidden",document.body.append(B);for(const V of U.keys()){B.style.color=V;const n=window.getComputedStyle(B).color;U.set(V,o(n))}B.remove()}function X(U){const{a:B,b:V,c:n,d:h,e:A,f:M}=U.getTransform();return[B,V,n,h,A,M]}function le(U){const{a:B,b:V,c:n,d:h,e:A,f:M}=U.getTransform().invertSelf();return[B,V,n,h,A,M]}function H(U,B,V=!1,n=!0){if(B instanceof r){const{pageWidth:h,pageHeight:A}=B.rawDims,{style:M}=U,R=`calc(var(--scale-factor) * ${h}px)`,W=`calc(var(--scale-factor) * ${A}px)`;!V||B.rotation%180===0?(M.width=R,M.height=W):(M.width=W,M.height=R)}n&&U.setAttribute("data-main-rotation",B.rotation)}},(re,P,ee)=>{Object.defineProperty(P,"__esModule",{value:!0}),P.BaseStandardFontDataFactory=P.BaseSVGFactory=P.BaseFilterFactory=P.BaseCanvasFactory=P.BaseCMapReaderFactory=void 0;var T=ee(1);class O{constructor(){this.constructor===O&&(0,T.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(d){return"none"}addHCMFilter(d,k){return"none"}destroy(d=!1){}}P.BaseFilterFactory=O;class ue{constructor(){this.constructor===ue&&(0,T.unreachable)("Cannot initialize BaseCanvasFactory.")}create(d,k){if(d<=0||k<=0)throw new Error("Invalid canvas size");const C=this._createCanvas(d,k);return{canvas:C,context:C.getContext("2d")}}reset(d,k,C){if(!d.canvas)throw new Error("Canvas is not specified");if(k<=0||C<=0)throw new Error("Invalid canvas size");d.canvas.width=k,d.canvas.height=C}destroy(d){if(!d.canvas)throw new Error("Canvas is not specified");d.canvas.width=0,d.canvas.height=0,d.canvas=null,d.context=null}_createCanvas(d,k){(0,T.unreachable)("Abstract method `_createCanvas` called.")}}P.BaseCanvasFactory=ue;class G{constructor({baseUrl:d=null,isCompressed:k=!0}){this.constructor===G&&(0,T.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=d,this.isCompressed=k}async fetch({name:d}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!d)throw new Error("CMap name must be specified.");const k=this.baseUrl+d+(this.isCompressed?".bcmap":""),C=this.isCompressed?T.CMapCompressionType.BINARY:T.CMapCompressionType.NONE;return this._fetchData(k,C).catch(v=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${k}`)})}_fetchData(d,k){(0,T.unreachable)("Abstract method `_fetchData` called.")}}P.BaseCMapReaderFactory=G;class I{constructor({baseUrl:d=null}){this.constructor===I&&(0,T.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=d}async fetch({filename:d}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!d)throw new Error("Font filename must be specified.");const k=`${this.baseUrl}${d}`;return this._fetchData(k).catch(C=>{throw new Error(`Unable to load font data at: ${k}`)})}_fetchData(d){(0,T.unreachable)("Abstract method `_fetchData` called.")}}P.BaseStandardFontDataFactory=I;class D{constructor(){this.constructor===D&&(0,T.unreachable)("Cannot initialize BaseSVGFactory.")}create(d,k,C=!1){if(d<=0||k<=0)throw new Error("Invalid SVG dimensions");const v=this._createSVG("svg:svg");return v.setAttribute("version","1.1"),C||(v.setAttribute("width",`${d}px`),v.setAttribute("height",`${k}px`)),v.setAttribute("preserveAspectRatio","none"),v.setAttribute("viewBox",`0 0 ${d} ${k}`),v}createElement(d){if(typeof d!="string")throw new Error("Invalid SVG element type");return this._createSVG(d)}_createSVG(d){(0,T.unreachable)("Abstract method `_createSVG` called.")}}P.BaseSVGFactory=D},(re,P,ee)=>{Object.defineProperty(P,"__esModule",{value:!0}),P.MurmurHash3_64=void 0;var T=ee(1);const O=3285377520,ue=4294901760,G=65535;class I{constructor(_){this.h1=_?_&4294967295:O,this.h2=_?_&4294967295:O}update(_){let d,k;if(typeof _=="string"){d=new Uint8Array(_.length*2),k=0;for(let s=0,i=_.length;s<i;s++){const u=_.charCodeAt(s);u<=255?d[k++]=u:(d[k++]=u>>>8,d[k++]=u&255)}}else if((0,T.isArrayBuffer)(_))d=_.slice(),k=d.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const C=k>>2,v=k-C*4,r=new Uint32Array(d.buffer,0,C);let c=0,a=0,p=this.h1,m=this.h2;const b=3432918353,f=461845907,t=b&G,e=f&G;for(let s=0;s<C;s++)s&1?(c=r[s],c=c*b&ue|c*t&G,c=c<<15|c>>>17,c=c*f&ue|c*e&G,p^=c,p=p<<13|p>>>19,p=p*5+3864292196):(a=r[s],a=a*b&ue|a*t&G,a=a<<15|a>>>17,a=a*f&ue|a*e&G,m^=a,m=m<<13|m>>>19,m=m*5+3864292196);switch(c=0,v){case 3:c^=d[C*4+2]<<16;case 2:c^=d[C*4+1]<<8;case 1:c^=d[C*4],c=c*b&ue|c*t&G,c=c<<15|c>>>17,c=c*f&ue|c*e&G,C&1?p^=c:m^=c}this.h1=p,this.h2=m}hexdigest(){let _=this.h1,d=this.h2;return _^=d>>>1,_=_*3981806797&ue|_*36045&G,d=d*4283543511&ue|((d<<16|_>>>16)*2950163797&ue)>>>16,_^=d>>>1,_=_*444984403&ue|_*60499&G,d=d*3301882366&ue|((d<<16|_>>>16)*3120437893&ue)>>>16,_^=d>>>1,(_>>>0).toString(16).padStart(8,"0")+(d>>>0).toString(16).padStart(8,"0")}}P.MurmurHash3_64=I},(re,P,ee)=>{Object.defineProperty(P,"__esModule",{value:!0}),P.FontLoader=P.FontFaceObject=void 0;var T=ee(1),O=ee(10);class ue{constructor({ownerDocument:D=globalThis.document,styleElement:_=null}){this._document=D,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(D){this.nativeFontFaces.push(D),this._document.fonts.add(D)}insertRule(D){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const _=this.styleElement.sheet;_.insertRule(D,_.cssRules.length)}clear(){for(const D of this.nativeFontFaces)this._document.fonts.delete(D);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(D){if(D.attached||D.missingFile)return;if(D.attached=!0,this.isFontLoadingAPISupported){const d=D.createNativeFontFace();if(d){this.addNativeFontFace(d);try{await d.loaded}catch(k){throw(0,T.warn)(`Failed to load font '${d.family}': '${k}'.`),D.disableFontFace=!0,k}}return}const _=D.createFontFaceRule();if(_){if(this.insertRule(_),this.isSyncFontLoadingSupported)return;await new Promise(d=>{const k=this._queueLoadingCallback(d);this._prepareFontLoadEvent(D,k)})}}get isFontLoadingAPISupported(){var _;const D=!!((_=this._document)!=null&&_.fonts);return(0,T.shadow)(this,"isFontLoadingAPISupported",D)}get isSyncFontLoadingSupported(){let D=!1;return(O.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(D=!0),(0,T.shadow)(this,"isSyncFontLoadingSupported",D)}_queueLoadingCallback(D){function _(){for((0,T.assert)(!k.done,"completeRequest() cannot be called twice."),k.done=!0;d.length>0&&d[0].done;){const C=d.shift();setTimeout(C.callback,0)}}const{loadingRequests:d}=this,k={done:!1,complete:_,callback:D};return d.push(k),k}get _loadTestFont(){const D=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,T.shadow)(this,"_loadTestFont",D)}_prepareFontLoadEvent(D,_){function d(o,F){return o.charCodeAt(F)<<24|o.charCodeAt(F+1)<<16|o.charCodeAt(F+2)<<8|o.charCodeAt(F+3)&255}function k(o,F,X,le){const H=o.substring(0,F),Z=o.substring(F+X);return H+le+Z}let C,v;const r=this._document.createElement("canvas");r.width=1,r.height=1;const c=r.getContext("2d");let a=0;function p(o,F){if(++a>30){(0,T.warn)("Load test font never loaded."),F();return}if(c.font="30px "+o,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){F();return}setTimeout(p.bind(null,o,F))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=k(b,976,m.length,m);const t=16,e=1482184792;let s=d(b,t);for(C=0,v=m.length-3;C<v;C+=4)s=s-e+d(m,C)|0;C<m.length&&(s=s-e+d(m+"XXX",C)|0),b=k(b,t,4,(0,T.string32)(s));const i=`url(data:font/opentype;base64,${btoa(b)});`,u=`@font-face {font-family:"${m}";src:${i}}`;this.insertRule(u);const w=this._document.createElement("div");w.style.visibility="hidden",w.style.width=w.style.height="10px",w.style.position="absolute",w.style.top=w.style.left="0px";for(const o of[D.loadedName,m]){const F=this._document.createElement("span");F.textContent="Hi",F.style.fontFamily=o,w.append(F)}this._document.body.append(w),p(m,()=>{w.remove(),_.complete()})}}P.FontLoader=ue;class G{constructor(D,{isEvalSupported:_=!0,disableFontFace:d=!1,ignoreErrors:k=!1,inspectFont:C=null}){this.compiledGlyphs=Object.create(null);for(const v in D)this[v]=D[v];this.isEvalSupported=_!==!1,this.disableFontFace=d===!0,this.ignoreErrors=k===!0,this._inspectFont=C}createNativeFontFace(){var _;if(!this.data||this.disableFontFace)return null;let D;if(!this.cssFontInfo)D=new FontFace(this.loadedName,this.data,{});else{const d={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(d.style=`oblique ${this.cssFontInfo.italicAngle}deg`),D=new FontFace(this.cssFontInfo.fontFamily,this.data,d)}return(_=this._inspectFont)==null||_.call(this,this),D}createFontFaceRule(){var k;if(!this.data||this.disableFontFace)return null;const D=(0,T.bytesToString)(this.data),_=`url(data:${this.mimetype};base64,${btoa(D)});`;let d;if(!this.cssFontInfo)d=`@font-face {font-family:"${this.loadedName}";src:${_}}`;else{let C=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(C+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),d=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${C}src:${_}}`}return(k=this._inspectFont)==null||k.call(this,this,_),d}getPathGenerator(D,_){if(this.compiledGlyphs[_]!==void 0)return this.compiledGlyphs[_];let d;try{d=D.get(this.loadedName+"_path_"+_)}catch(k){if(!this.ignoreErrors)throw k;return(0,T.warn)(`getPathGenerator - ignoring character: "${k}".`),this.compiledGlyphs[_]=function(C,v){}}if(this.isEvalSupported&&T.FeatureTest.isEvalSupported){const k=[];for(const C of d){const v=C.args!==void 0?C.args.join(","):"";k.push("c.",C.cmd,"(",v,`);
`)}return this.compiledGlyphs[_]=new Function("c","size",k.join(""))}return this.compiledGlyphs[_]=function(k,C){for(const v of d)v.cmd==="scale"&&(v.args=[C,-C]),k[v.cmd].apply(k,v.args)}}}P.FontFaceObject=G},(re,P)=>{Object.defineProperty(P,"__esModule",{value:!0}),P.isNodeJS=void 0;const ee=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");P.isNodeJS=ee},(re,P,ee)=>{var ge,Ft,Y,It;Object.defineProperty(P,"__esModule",{value:!0}),P.CanvasGraphics=void 0;var T=ee(1),O=ee(6),ue=ee(12),G=ee(13),I=ee(10);const D=16,_=100,d=4096,k=15,C=10,v=1e3,r=16;function c(Q,y){if(Q._removeMirroring)throw new Error("Context is already forwarding operations.");Q.__originalSave=Q.save,Q.__originalRestore=Q.restore,Q.__originalRotate=Q.rotate,Q.__originalScale=Q.scale,Q.__originalTranslate=Q.translate,Q.__originalTransform=Q.transform,Q.__originalSetTransform=Q.setTransform,Q.__originalResetTransform=Q.resetTransform,Q.__originalClip=Q.clip,Q.__originalMoveTo=Q.moveTo,Q.__originalLineTo=Q.lineTo,Q.__originalBezierCurveTo=Q.bezierCurveTo,Q.__originalRect=Q.rect,Q.__originalClosePath=Q.closePath,Q.__originalBeginPath=Q.beginPath,Q._removeMirroring=()=>{Q.save=Q.__originalSave,Q.restore=Q.__originalRestore,Q.rotate=Q.__originalRotate,Q.scale=Q.__originalScale,Q.translate=Q.__originalTranslate,Q.transform=Q.__originalTransform,Q.setTransform=Q.__originalSetTransform,Q.resetTransform=Q.__originalResetTransform,Q.clip=Q.__originalClip,Q.moveTo=Q.__originalMoveTo,Q.lineTo=Q.__originalLineTo,Q.bezierCurveTo=Q.__originalBezierCurveTo,Q.rect=Q.__originalRect,Q.closePath=Q.__originalClosePath,Q.beginPath=Q.__originalBeginPath,delete Q._removeMirroring},Q.save=function(){y.save(),this.__originalSave()},Q.restore=function(){y.restore(),this.__originalRestore()},Q.translate=function(L,q){y.translate(L,q),this.__originalTranslate(L,q)},Q.scale=function(L,q){y.scale(L,q),this.__originalScale(L,q)},Q.transform=function(L,q,j,ne,U,B){y.transform(L,q,j,ne,U,B),this.__originalTransform(L,q,j,ne,U,B)},Q.setTransform=function(L,q,j,ne,U,B){y.setTransform(L,q,j,ne,U,B),this.__originalSetTransform(L,q,j,ne,U,B)},Q.resetTransform=function(){y.resetTransform(),this.__originalResetTransform()},Q.rotate=function(L){y.rotate(L),this.__originalRotate(L)},Q.clip=function(L){y.clip(L),this.__originalClip(L)},Q.moveTo=function(E,L){y.moveTo(E,L),this.__originalMoveTo(E,L)},Q.lineTo=function(E,L){y.lineTo(E,L),this.__originalLineTo(E,L)},Q.bezierCurveTo=function(E,L,q,j,ne,U){y.bezierCurveTo(E,L,q,j,ne,U),this.__originalBezierCurveTo(E,L,q,j,ne,U)},Q.rect=function(E,L,q,j){y.rect(E,L,q,j),this.__originalRect(E,L,q,j)},Q.closePath=function(){y.closePath(),this.__originalClosePath()},Q.beginPath=function(){y.beginPath(),this.__originalBeginPath()}}class a{constructor(y){this.canvasFactory=y,this.cache=Object.create(null)}getCanvas(y,E,L){let q;return this.cache[y]!==void 0?(q=this.cache[y],this.canvasFactory.reset(q,E,L)):(q=this.canvasFactory.create(E,L),this.cache[y]=q),q}delete(y){delete this.cache[y]}clear(){for(const y in this.cache){const E=this.cache[y];this.canvasFactory.destroy(E),delete this.cache[y]}}}function p(Q,y,E,L,q,j,ne,U,B,V){const[n,h,A,M,R,W]=(0,O.getCurrentTransform)(Q);if(h===0&&A===0){const $=ne*n+R,ce=Math.round($),ie=U*M+W,de=Math.round(ie),be=(ne+B)*n+R,ve=Math.abs(Math.round(be)-ce)||1,xe=(U+V)*M+W,Pe=Math.abs(Math.round(xe)-de)||1;return Q.setTransform(Math.sign(n),0,0,Math.sign(M),ce,de),Q.drawImage(y,E,L,q,j,0,0,ve,Pe),Q.setTransform(n,h,A,M,R,W),[ve,Pe]}if(n===0&&M===0){const $=U*A+R,ce=Math.round($),ie=ne*h+W,de=Math.round(ie),be=(U+V)*A+R,ve=Math.abs(Math.round(be)-ce)||1,xe=(ne+B)*h+W,Pe=Math.abs(Math.round(xe)-de)||1;return Q.setTransform(0,Math.sign(h),Math.sign(A),0,ce,de),Q.drawImage(y,E,L,q,j,0,0,Pe,ve),Q.setTransform(n,h,A,M,R,W),[Pe,ve]}Q.drawImage(y,E,L,q,j,ne,U,B,V);const me=Math.hypot(n,h),N=Math.hypot(A,M);return[me*B,N*V]}function m(Q){const{width:y,height:E}=Q;if(y>v||E>v)return null;const L=1e3,q=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),j=y+1;let ne=new Uint8Array(j*(E+1)),U,B,V;const n=y+7&-8;let h=new Uint8Array(n*E),A=0;for(const N of Q.data){let $=128;for(;$>0;)h[A++]=N&$?0:255,$>>=1}let M=0;for(A=0,h[A]!==0&&(ne[0]=1,++M),B=1;B<y;B++)h[A]!==h[A+1]&&(ne[B]=h[A]?2:1,++M),A++;for(h[A]!==0&&(ne[B]=2,++M),U=1;U<E;U++){A=U*n,V=U*j,h[A-n]!==h[A]&&(ne[V]=h[A]?1:8,++M);let N=(h[A]?4:0)+(h[A-n]?8:0);for(B=1;B<y;B++)N=(N>>2)+(h[A+1]?4:0)+(h[A-n+1]?8:0),q[N]&&(ne[V+B]=q[N],++M),A++;if(h[A-n]!==h[A]&&(ne[V+B]=h[A]?2:4,++M),M>L)return null}for(A=n*(E-1),V=U*j,h[A]!==0&&(ne[V]=8,++M),B=1;B<y;B++)h[A]!==h[A+1]&&(ne[V+B]=h[A]?4:8,++M),A++;if(h[A]!==0&&(ne[V+B]=4,++M),M>L)return null;const R=new Int32Array([0,j,-1,0,-j,0,0,0,1]),W=new Path2D;for(U=0;M&&U<=E;U++){let N=U*j;const $=N+y;for(;N<$&&!ne[N];)N++;if(N===$)continue;W.moveTo(N%j,U);const ce=N;let ie=ne[N];do{const de=R[ie];do N+=de;while(!ne[N]);const be=ne[N];be!==5&&be!==10?(ie=be,ne[N]=0):(ie=be&51*ie>>4,ne[N]&=ie>>2|ie<<2),W.lineTo(N%j,N/j|0),ne[N]||--M}while(ce!==N);--U}return h=null,ne=null,function(N){N.save(),N.scale(1/y,-1/E),N.translate(0,-E),N.fill(W),N.beginPath(),N.restore()}}class b{constructor(y,E){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=T.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=T.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=T.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,y,E])}clone(){const y=Object.create(this);return y.clipBox=this.clipBox.slice(),y}setCurrentPoint(y,E){this.x=y,this.y=E}updatePathMinMax(y,E,L){[E,L]=T.Util.applyTransform([E,L],y),this.minX=Math.min(this.minX,E),this.minY=Math.min(this.minY,L),this.maxX=Math.max(this.maxX,E),this.maxY=Math.max(this.maxY,L)}updateRectMinMax(y,E){const L=T.Util.applyTransform(E,y),q=T.Util.applyTransform(E.slice(2),y);this.minX=Math.min(this.minX,L[0],q[0]),this.minY=Math.min(this.minY,L[1],q[1]),this.maxX=Math.max(this.maxX,L[0],q[0]),this.maxY=Math.max(this.maxY,L[1],q[1])}updateScalingPathMinMax(y,E){T.Util.scaleMinMax(y,E),this.minX=Math.min(this.minX,E[0]),this.maxX=Math.max(this.maxX,E[1]),this.minY=Math.min(this.minY,E[2]),this.maxY=Math.max(this.maxY,E[3])}updateCurvePathMinMax(y,E,L,q,j,ne,U,B,V,n){const h=T.Util.bezierBoundingBox(E,L,q,j,ne,U,B,V);if(n){n[0]=Math.min(n[0],h[0],h[2]),n[1]=Math.max(n[1],h[0],h[2]),n[2]=Math.min(n[2],h[1],h[3]),n[3]=Math.max(n[3],h[1],h[3]);return}this.updateRectMinMax(y,h)}getPathBoundingBox(y=ue.PathType.FILL,E=null){const L=[this.minX,this.minY,this.maxX,this.maxY];if(y===ue.PathType.STROKE){E||(0,T.unreachable)("Stroke bounding box must include transform.");const q=T.Util.singularValueDecompose2dScale(E),j=q[0]*this.lineWidth/2,ne=q[1]*this.lineWidth/2;L[0]-=j,L[1]-=ne,L[2]+=j,L[3]+=ne}return L}updateClipFromPath(){const y=T.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(y||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(y){this.clipBox=y,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(y=ue.PathType.FILL,E=null){return T.Util.intersect(this.clipBox,this.getPathBoundingBox(y,E))}}function f(Q,y){if(typeof ImageData<"u"&&y instanceof ImageData){Q.putImageData(y,0,0);return}const E=y.height,L=y.width,q=E%r,j=(E-q)/r,ne=q===0?j:j+1,U=Q.createImageData(L,r);let B=0,V;const n=y.data,h=U.data;let A,M,R,W;if(y.kind===T.ImageKind.GRAYSCALE_1BPP){const me=n.byteLength,N=new Uint32Array(h.buffer,0,h.byteLength>>2),$=N.length,ce=L+7>>3,ie=4294967295,de=T.FeatureTest.isLittleEndian?4278190080:255;for(A=0;A<ne;A++){for(R=A<j?r:q,V=0,M=0;M<R;M++){const be=me-B;let ve=0;const xe=be>ce?L:be*8-7,Pe=xe&-8;let Re=0,oe=0;for(;ve<Pe;ve+=8)oe=n[B++],N[V++]=oe&128?ie:de,N[V++]=oe&64?ie:de,N[V++]=oe&32?ie:de,N[V++]=oe&16?ie:de,N[V++]=oe&8?ie:de,N[V++]=oe&4?ie:de,N[V++]=oe&2?ie:de,N[V++]=oe&1?ie:de;for(;ve<xe;ve++)Re===0&&(oe=n[B++],Re=128),N[V++]=oe&Re?ie:de,Re>>=1}for(;V<$;)N[V++]=0;Q.putImageData(U,0,A*r)}}else if(y.kind===T.ImageKind.RGBA_32BPP){for(M=0,W=L*r*4,A=0;A<j;A++)h.set(n.subarray(B,B+W)),B+=W,Q.putImageData(U,0,M),M+=r;A<ne&&(W=L*q*4,h.set(n.subarray(B,B+W)),Q.putImageData(U,0,M))}else if(y.kind===T.ImageKind.RGB_24BPP)for(R=r,W=L*R,A=0;A<ne;A++){for(A>=j&&(R=q,W=L*R),V=0,M=W;M--;)h[V++]=n[B++],h[V++]=n[B++],h[V++]=n[B++],h[V++]=255;Q.putImageData(U,0,A*r)}else throw new Error(`bad image kind: ${y.kind}`)}function t(Q,y){if(y.bitmap){Q.drawImage(y.bitmap,0,0);return}const E=y.height,L=y.width,q=E%r,j=(E-q)/r,ne=q===0?j:j+1,U=Q.createImageData(L,r);let B=0;const V=y.data,n=U.data;for(let h=0;h<ne;h++){const A=h<j?r:q;({srcPos:B}=(0,G.convertBlackAndWhiteToRGBA)({src:V,srcPos:B,dest:n,width:L,height:A,nonBlackColor:0})),Q.putImageData(U,0,h*r)}}function e(Q,y){const E=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const L of E)Q[L]!==void 0&&(y[L]=Q[L]);Q.setLineDash!==void 0&&(y.setLineDash(Q.getLineDash()),y.lineDashOffset=Q.lineDashOffset)}function s(Q){Q.strokeStyle=Q.fillStyle="#000000",Q.fillRule="nonzero",Q.globalAlpha=1,Q.lineWidth=1,Q.lineCap="butt",Q.lineJoin="miter",Q.miterLimit=10,Q.globalCompositeOperation="source-over",Q.font="10px sans-serif",Q.setLineDash!==void 0&&(Q.setLineDash([]),Q.lineDashOffset=0),I.isNodeJS||(Q.filter="none")}function i(Q,y,E,L){const q=Q.length;for(let j=3;j<q;j+=4){const ne=Q[j];if(ne===0)Q[j-3]=y,Q[j-2]=E,Q[j-1]=L;else if(ne<255){const U=255-ne;Q[j-3]=Q[j-3]*ne+y*U>>8,Q[j-2]=Q[j-2]*ne+E*U>>8,Q[j-1]=Q[j-1]*ne+L*U>>8}}}function u(Q,y,E){const L=Q.length,q=1/255;for(let j=3;j<L;j+=4){const ne=E?E[Q[j]]:Q[j];y[j]=y[j]*ne*q|0}}function w(Q,y,E){const L=Q.length;for(let q=3;q<L;q+=4){const j=Q[q-3]*77+Q[q-2]*152+Q[q-1]*28;y[q]=E?y[q]*E[j>>8]>>8:y[q]*j>>16}}function o(Q,y,E,L,q,j,ne,U,B,V,n){const h=!!j,A=h?j[0]:0,M=h?j[1]:0,R=h?j[2]:0;let W;q==="Luminosity"?W=w:W=u;const N=Math.min(L,Math.ceil(1048576/E));for(let $=0;$<L;$+=N){const ce=Math.min(N,L-$),ie=Q.getImageData(U-V,$+(B-n),E,ce),de=y.getImageData(U,$+B,E,ce);h&&i(ie.data,A,M,R),W(ie.data,de.data,ne),y.putImageData(de,U,$+B)}}function F(Q,y,E,L){const q=L[0],j=L[1],ne=L[2]-q,U=L[3]-j;ne===0||U===0||(o(y.context,E,ne,U,y.subtype,y.backdrop,y.transferMap,q,j,y.offsetX,y.offsetY),Q.save(),Q.globalAlpha=1,Q.globalCompositeOperation="source-over",Q.setTransform(1,0,0,1,0,0),Q.drawImage(E.canvas,0,0),Q.restore())}function X(Q,y){const E=T.Util.singularValueDecompose2dScale(Q);E[0]=Math.fround(E[0]),E[1]=Math.fround(E[1]);const L=Math.fround((globalThis.devicePixelRatio||1)*O.PixelsPerInch.PDF_TO_CSS_UNITS);return y!==void 0?y:E[0]<=L||E[1]<=L}const le=["butt","round","square"],H=["miter","round","bevel"],Z={},ae={},Ee=class Ee{constructor(y,E,L,q,j,{optionalContentConfig:ne,markedContentStack:U=null},B,V){z(this,ge);z(this,Y);this.ctx=y,this.current=new b(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=E,this.objs=L,this.canvasFactory=q,this.filterFactory=j,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=U||[],this.optionalContentConfig=ne,this.cachedCanvases=new a(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=B,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=V,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(y,E=null){return typeof y=="string"?y.startsWith("g_")?this.commonObjs.get(y):this.objs.get(y):E}beginDrawing({transform:y,viewport:E,transparency:L=!1,background:q=null}){const j=this.ctx.canvas.width,ne=this.ctx.canvas.height,U=this.ctx.fillStyle;if(this.ctx.fillStyle=q||"#ffffff",this.ctx.fillRect(0,0,j,ne),this.ctx.fillStyle=U,L){const B=this.cachedCanvases.getCanvas("transparent",j,ne);this.compositeCtx=this.ctx,this.transparentCanvas=B.canvas,this.ctx=B.context,this.ctx.save(),this.ctx.transform(...(0,O.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),s(this.ctx),y&&(this.ctx.transform(...y),this.outputScaleX=y[0],this.outputScaleY=y[0]),this.ctx.transform(...E.transform),this.viewportScale=E.scale,this.baseTransform=(0,O.getCurrentTransform)(this.ctx)}executeOperatorList(y,E,L,q){const j=y.argsArray,ne=y.fnArray;let U=E||0;const B=j.length;if(B===U)return U;const V=B-U>C&&typeof L=="function",n=V?Date.now()+k:0;let h=0;const A=this.commonObjs,M=this.objs;let R;for(;;){if(q!==void 0&&U===q.nextBreakPoint)return q.breakIt(U,L),U;if(R=ne[U],R!==T.OPS.dependency)this[R].apply(this,j[U]);else for(const W of j[U]){const me=W.startsWith("g_")?A:M;if(!me.has(W))return me.get(W,L),U}if(U++,U===B)return U;if(V&&++h>C){if(Date.now()>n)return L(),U;h=0}}}endDrawing(){K(this,ge,Ft).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const y of this._cachedBitmapsMap.values()){for(const E of y.values())typeof HTMLCanvasElement<"u"&&E instanceof HTMLCanvasElement&&(E.width=E.height=0);y.clear()}this._cachedBitmapsMap.clear(),K(this,Y,It).call(this)}_scaleImage(y,E){const L=y.width,q=y.height;let j=Math.max(Math.hypot(E[0],E[1]),1),ne=Math.max(Math.hypot(E[2],E[3]),1),U=L,B=q,V="prescale1",n,h;for(;j>2&&U>1||ne>2&&B>1;){let A=U,M=B;j>2&&U>1&&(A=U>=16384?Math.floor(U/2)-1||1:Math.ceil(U/2),j/=U/A),ne>2&&B>1&&(M=B>=16384?Math.floor(B/2)-1||1:Math.ceil(B)/2,ne/=B/M),n=this.cachedCanvases.getCanvas(V,A,M),h=n.context,h.clearRect(0,0,A,M),h.drawImage(y,0,0,U,B,0,0,A,M),y=n.canvas,U=A,B=M,V=V==="prescale1"?"prescale2":"prescale1"}return{img:y,paintWidth:U,paintHeight:B}}_createMaskCanvas(y){const E=this.ctx,{width:L,height:q}=y,j=this.current.fillColor,ne=this.current.patternFill,U=(0,O.getCurrentTransform)(E);let B,V,n,h;if((y.bitmap||y.data)&&y.count>1){const ve=y.bitmap||y.data.buffer;V=JSON.stringify(ne?U:[U.slice(0,4),j]),B=this._cachedBitmapsMap.get(ve),B||(B=new Map,this._cachedBitmapsMap.set(ve,B));const xe=B.get(V);if(xe&&!ne){const Pe=Math.round(Math.min(U[0],U[2])+U[4]),Re=Math.round(Math.min(U[1],U[3])+U[5]);return{canvas:xe,offsetX:Pe,offsetY:Re}}n=xe}n||(h=this.cachedCanvases.getCanvas("maskCanvas",L,q),t(h.context,y));let A=T.Util.transform(U,[1/L,0,0,-1/q,0,0]);A=T.Util.transform(A,[1,0,0,1,0,-q]);const M=T.Util.applyTransform([0,0],A),R=T.Util.applyTransform([L,q],A),W=T.Util.normalizeRect([M[0],M[1],R[0],R[1]]),me=Math.round(W[2]-W[0])||1,N=Math.round(W[3]-W[1])||1,$=this.cachedCanvases.getCanvas("fillCanvas",me,N),ce=$.context,ie=Math.min(M[0],R[0]),de=Math.min(M[1],R[1]);ce.translate(-ie,-de),ce.transform(...A),n||(n=this._scaleImage(h.canvas,(0,O.getCurrentTransformInverse)(ce)),n=n.img,B&&ne&&B.set(V,n)),ce.imageSmoothingEnabled=X((0,O.getCurrentTransform)(ce),y.interpolate),p(ce,n,0,0,n.width,n.height,0,0,L,q),ce.globalCompositeOperation="source-in";const be=T.Util.transform((0,O.getCurrentTransformInverse)(ce),[1,0,0,1,-ie,-de]);return ce.fillStyle=ne?j.getPattern(E,this,be,ue.PathType.FILL):j,ce.fillRect(0,0,L,q),B&&!ne&&(this.cachedCanvases.delete("fillCanvas"),B.set(V,$.canvas)),{canvas:$.canvas,offsetX:Math.round(ie),offsetY:Math.round(de)}}setLineWidth(y){y!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=y,this.ctx.lineWidth=y}setLineCap(y){this.ctx.lineCap=le[y]}setLineJoin(y){this.ctx.lineJoin=H[y]}setMiterLimit(y){this.ctx.miterLimit=y}setDash(y,E){const L=this.ctx;L.setLineDash!==void 0&&(L.setLineDash(y),L.lineDashOffset=E)}setRenderingIntent(y){}setFlatness(y){}setGState(y){for(const[E,L]of y)switch(E){case"LW":this.setLineWidth(L);break;case"LC":this.setLineCap(L);break;case"LJ":this.setLineJoin(L);break;case"ML":this.setMiterLimit(L);break;case"D":this.setDash(L[0],L[1]);break;case"RI":this.setRenderingIntent(L);break;case"FL":this.setFlatness(L);break;case"Font":this.setFont(L[0],L[1]);break;case"CA":this.current.strokeAlpha=L;break;case"ca":this.current.fillAlpha=L,this.ctx.globalAlpha=L;break;case"BM":this.ctx.globalCompositeOperation=L;break;case"SMask":this.current.activeSMask=L?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(L);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const y=this.inSMaskMode;this.current.activeSMask&&!y?this.beginSMaskMode():!this.current.activeSMask&&y&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const y=this.ctx.canvas.width,E=this.ctx.canvas.height,L="smaskGroupAt"+this.groupLevel,q=this.cachedCanvases.getCanvas(L,y,E);this.suspendedCtx=this.ctx,this.ctx=q.context;const j=this.ctx;j.setTransform(...(0,O.getCurrentTransform)(this.suspendedCtx)),e(this.suspendedCtx,j),c(j,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),e(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(y){if(!this.current.activeSMask)return;y?(y[0]=Math.floor(y[0]),y[1]=Math.floor(y[1]),y[2]=Math.ceil(y[2]),y[3]=Math.ceil(y[3])):y=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const E=this.current.activeSMask,L=this.suspendedCtx;F(L,E,this.ctx,y),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(e(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const y=this.current;this.stateStack.push(y),this.current=y.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),e(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(y,E,L,q,j,ne){this.ctx.transform(y,E,L,q,j,ne),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(y,E,L){const q=this.ctx,j=this.current;let ne=j.x,U=j.y,B,V;const n=(0,O.getCurrentTransform)(q),h=n[0]===0&&n[3]===0||n[1]===0&&n[2]===0,A=h?L.slice(0):null;for(let M=0,R=0,W=y.length;M<W;M++)switch(y[M]|0){case T.OPS.rectangle:ne=E[R++],U=E[R++];const me=E[R++],N=E[R++],$=ne+me,ce=U+N;q.moveTo(ne,U),me===0||N===0?q.lineTo($,ce):(q.lineTo($,U),q.lineTo($,ce),q.lineTo(ne,ce)),h||j.updateRectMinMax(n,[ne,U,$,ce]),q.closePath();break;case T.OPS.moveTo:ne=E[R++],U=E[R++],q.moveTo(ne,U),h||j.updatePathMinMax(n,ne,U);break;case T.OPS.lineTo:ne=E[R++],U=E[R++],q.lineTo(ne,U),h||j.updatePathMinMax(n,ne,U);break;case T.OPS.curveTo:B=ne,V=U,ne=E[R+4],U=E[R+5],q.bezierCurveTo(E[R],E[R+1],E[R+2],E[R+3],ne,U),j.updateCurvePathMinMax(n,B,V,E[R],E[R+1],E[R+2],E[R+3],ne,U,A),R+=6;break;case T.OPS.curveTo2:B=ne,V=U,q.bezierCurveTo(ne,U,E[R],E[R+1],E[R+2],E[R+3]),j.updateCurvePathMinMax(n,B,V,ne,U,E[R],E[R+1],E[R+2],E[R+3],A),ne=E[R+2],U=E[R+3],R+=4;break;case T.OPS.curveTo3:B=ne,V=U,ne=E[R+2],U=E[R+3],q.bezierCurveTo(E[R],E[R+1],ne,U,ne,U),j.updateCurvePathMinMax(n,B,V,E[R],E[R+1],ne,U,ne,U,A),R+=4;break;case T.OPS.closePath:q.closePath();break}h&&j.updateScalingPathMinMax(n,A),j.setCurrentPoint(ne,U)}closePath(){this.ctx.closePath()}stroke(y=!0){const E=this.ctx,L=this.current.strokeColor;E.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof L=="object"&&(L!=null&&L.getPattern)?(E.save(),E.strokeStyle=L.getPattern(E,this,(0,O.getCurrentTransformInverse)(E),ue.PathType.STROKE),this.rescaleAndStroke(!1),E.restore()):this.rescaleAndStroke(!0)),y&&this.consumePath(this.current.getClippedPathBoundingBox()),E.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(y=!0){const E=this.ctx,L=this.current.fillColor,q=this.current.patternFill;let j=!1;q&&(E.save(),E.fillStyle=L.getPattern(E,this,(0,O.getCurrentTransformInverse)(E),ue.PathType.FILL),j=!0);const ne=this.current.getClippedPathBoundingBox();this.contentVisible&&ne!==null&&(this.pendingEOFill?(E.fill("evenodd"),this.pendingEOFill=!1):E.fill()),j&&E.restore(),y&&this.consumePath(ne)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Z}eoClip(){this.pendingClip=ae}beginText(){this.current.textMatrix=T.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const y=this.pendingTextPaths,E=this.ctx;if(y===void 0){E.beginPath();return}E.save(),E.beginPath();for(const L of y)E.setTransform(...L.transform),E.translate(L.x,L.y),L.addToPath(E,L.fontSize);E.restore(),E.clip(),E.beginPath(),delete this.pendingTextPaths}setCharSpacing(y){this.current.charSpacing=y}setWordSpacing(y){this.current.wordSpacing=y}setHScale(y){this.current.textHScale=y/100}setLeading(y){this.current.leading=-y}setFont(y,E){const L=this.commonObjs.get(y),q=this.current;if(!L)throw new Error(`Can't find font for ${y}`);if(q.fontMatrix=L.fontMatrix||T.FONT_IDENTITY_MATRIX,(q.fontMatrix[0]===0||q.fontMatrix[3]===0)&&(0,T.warn)("Invalid font matrix for font "+y),E<0?(E=-E,q.fontDirection=-1):q.fontDirection=1,this.current.font=L,this.current.fontSize=E,L.isType3Font)return;const j=L.loadedName||"sans-serif";let ne="normal";L.black?ne="900":L.bold&&(ne="bold");const U=L.italic?"italic":"normal",B=`"${j}", ${L.fallbackName}`;let V=E;E<D?V=D:E>_&&(V=_),this.current.fontSizeScale=E/V,this.ctx.font=`${U} ${ne} ${V}px ${B}`}setTextRenderingMode(y){this.current.textRenderingMode=y}setTextRise(y){this.current.textRise=y}moveText(y,E){this.current.x=this.current.lineX+=y,this.current.y=this.current.lineY+=E}setLeadingMoveText(y,E){this.setLeading(-E),this.moveText(y,E)}setTextMatrix(y,E,L,q,j,ne){this.current.textMatrix=[y,E,L,q,j,ne],this.current.textMatrixScale=Math.hypot(y,E),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(y,E,L,q){const j=this.ctx,ne=this.current,U=ne.font,B=ne.textRenderingMode,V=ne.fontSize/ne.fontSizeScale,n=B&T.TextRenderingMode.FILL_STROKE_MASK,h=!!(B&T.TextRenderingMode.ADD_TO_PATH_FLAG),A=ne.patternFill&&!U.missingFile;let M;(U.disableFontFace||h||A)&&(M=U.getPathGenerator(this.commonObjs,y)),U.disableFontFace||A?(j.save(),j.translate(E,L),j.beginPath(),M(j,V),q&&j.setTransform(...q),(n===T.TextRenderingMode.FILL||n===T.TextRenderingMode.FILL_STROKE)&&j.fill(),(n===T.TextRenderingMode.STROKE||n===T.TextRenderingMode.FILL_STROKE)&&j.stroke(),j.restore()):((n===T.TextRenderingMode.FILL||n===T.TextRenderingMode.FILL_STROKE)&&j.fillText(y,E,L),(n===T.TextRenderingMode.STROKE||n===T.TextRenderingMode.FILL_STROKE)&&j.strokeText(y,E,L)),h&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,O.getCurrentTransform)(j),x:E,y:L,fontSize:V,addToPath:M})}get isFontSubpixelAAEnabled(){const{context:y}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);y.scale(1.5,1),y.fillText("I",0,10);const E=y.getImageData(0,0,10,10).data;let L=!1;for(let q=3;q<E.length;q+=4)if(E[q]>0&&E[q]<255){L=!0;break}return(0,T.shadow)(this,"isFontSubpixelAAEnabled",L)}showText(y){const E=this.current,L=E.font;if(L.isType3Font)return this.showType3Text(y);const q=E.fontSize;if(q===0)return;const j=this.ctx,ne=E.fontSizeScale,U=E.charSpacing,B=E.wordSpacing,V=E.fontDirection,n=E.textHScale*V,h=y.length,A=L.vertical,M=A?1:-1,R=L.defaultVMetrics,W=q*E.fontMatrix[0],me=E.textRenderingMode===T.TextRenderingMode.FILL&&!L.disableFontFace&&!E.patternFill;j.save(),j.transform(...E.textMatrix),j.translate(E.x,E.y+E.textRise),V>0?j.scale(n,-1):j.scale(n,1);let N;if(E.patternFill){j.save();const be=E.fillColor.getPattern(j,this,(0,O.getCurrentTransformInverse)(j),ue.PathType.FILL);N=(0,O.getCurrentTransform)(j),j.restore(),j.fillStyle=be}let $=E.lineWidth;const ce=E.textMatrixScale;if(ce===0||$===0){const be=E.textRenderingMode&T.TextRenderingMode.FILL_STROKE_MASK;(be===T.TextRenderingMode.STROKE||be===T.TextRenderingMode.FILL_STROKE)&&($=this.getSinglePixelWidth())}else $/=ce;if(ne!==1&&(j.scale(ne,ne),$/=ne),j.lineWidth=$,L.isInvalidPDFjsFont){const be=[];let ve=0;for(const xe of y)be.push(xe.unicode),ve+=xe.width;j.fillText(be.join(""),0,0),E.x+=ve*W*n,j.restore(),this.compose();return}let ie=0,de;for(de=0;de<h;++de){const be=y[de];if(typeof be=="number"){ie+=M*be*q/1e3;continue}let ve=!1;const xe=(be.isSpace?B:0)+U,Pe=be.fontChar,Re=be.accent;let oe,Ce,Me=be.width;if(A){const S=be.vmetric||R,g=-(be.vmetric?S[1]:Me*.5)*W,x=S[2]*W;Me=S?-S[0]:Me,oe=g/ne,Ce=(ie+x)/ne}else oe=ie/ne,Ce=0;if(L.remeasure&&Me>0){const S=j.measureText(Pe).width*1e3/q*ne;if(Me<S&&this.isFontSubpixelAAEnabled){const g=Me/S;ve=!0,j.save(),j.scale(g,1),oe/=g}else Me!==S&&(oe+=(Me-S)/2e3*q/ne)}if(this.contentVisible&&(be.isInFont||L.missingFile)){if(me&&!Re)j.fillText(Pe,oe,Ce);else if(this.paintChar(Pe,oe,Ce,N),Re){const S=oe+q*Re.offset.x/ne,g=Ce-q*Re.offset.y/ne;this.paintChar(Re.fontChar,S,g,N)}}let Oe;A?Oe=Me*W-xe*V:Oe=Me*W+xe*V,ie+=Oe,ve&&j.restore()}A?E.y-=ie:E.x+=ie*n,j.restore(),this.compose()}showType3Text(y){const E=this.ctx,L=this.current,q=L.font,j=L.fontSize,ne=L.fontDirection,U=q.vertical?1:-1,B=L.charSpacing,V=L.wordSpacing,n=L.textHScale*ne,h=L.fontMatrix||T.FONT_IDENTITY_MATRIX,A=y.length,M=L.textRenderingMode===T.TextRenderingMode.INVISIBLE;let R,W,me,N;if(!(M||j===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,E.save(),E.transform(...L.textMatrix),E.translate(L.x,L.y),E.scale(n,ne),R=0;R<A;++R){if(W=y[R],typeof W=="number"){N=U*W*j/1e3,this.ctx.translate(N,0),L.x+=N*n;continue}const $=(W.isSpace?V:0)+B,ce=q.charProcOperatorList[W.operatorListId];if(!ce){(0,T.warn)(`Type3 character "${W.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=W,this.save(),E.scale(j,j),E.transform(...h),this.executeOperatorList(ce),this.restore()),me=T.Util.applyTransform([W.width,0],h)[0]*j+$,E.translate(me,0),L.x+=me*n}E.restore(),this.processingType3=null}}setCharWidth(y,E){}setCharWidthAndBounds(y,E,L,q,j,ne){this.ctx.rect(L,q,j-L,ne-q),this.ctx.clip(),this.endPath()}getColorN_Pattern(y){let E;if(y[0]==="TilingPattern"){const L=y[1],q=this.baseTransform||(0,O.getCurrentTransform)(this.ctx),j={createCanvasGraphics:ne=>new Ee(ne,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};E=new ue.TilingPattern(y,L,this.ctx,j,q)}else E=this._getPattern(y[1],y[2]);return E}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(y,E,L){const q=T.Util.makeHexColor(y,E,L);this.ctx.strokeStyle=q,this.current.strokeColor=q}setFillRGBColor(y,E,L){const q=T.Util.makeHexColor(y,E,L);this.ctx.fillStyle=q,this.current.fillColor=q,this.current.patternFill=!1}_getPattern(y,E=null){let L;return this.cachedPatterns.has(y)?L=this.cachedPatterns.get(y):(L=(0,ue.getShadingPattern)(this.getObject(y)),this.cachedPatterns.set(y,L)),E&&(L.matrix=E),L}shadingFill(y){if(!this.contentVisible)return;const E=this.ctx;this.save();const L=this._getPattern(y);E.fillStyle=L.getPattern(E,this,(0,O.getCurrentTransformInverse)(E),ue.PathType.SHADING);const q=(0,O.getCurrentTransformInverse)(E);if(q){const j=E.canvas,ne=j.width,U=j.height,B=T.Util.applyTransform([0,0],q),V=T.Util.applyTransform([0,U],q),n=T.Util.applyTransform([ne,0],q),h=T.Util.applyTransform([ne,U],q),A=Math.min(B[0],V[0],n[0],h[0]),M=Math.min(B[1],V[1],n[1],h[1]),R=Math.max(B[0],V[0],n[0],h[0]),W=Math.max(B[1],V[1],n[1],h[1]);this.ctx.fillRect(A,M,R-A,W-M)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,T.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,T.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(y,E){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(y)&&y.length===6&&this.transform(...y),this.baseTransform=(0,O.getCurrentTransform)(this.ctx),E)){const L=E[2]-E[0],q=E[3]-E[1];this.ctx.rect(E[0],E[1],L,q),this.current.updateRectMinMax((0,O.getCurrentTransform)(this.ctx),E),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(y){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const E=this.ctx;y.isolated||(0,T.info)("TODO: Support non-isolated groups."),y.knockout&&(0,T.warn)("Knockout groups not supported.");const L=(0,O.getCurrentTransform)(E);if(y.matrix&&E.transform(...y.matrix),!y.bbox)throw new Error("Bounding box is required.");let q=T.Util.getAxialAlignedBoundingBox(y.bbox,(0,O.getCurrentTransform)(E));const j=[0,0,E.canvas.width,E.canvas.height];q=T.Util.intersect(q,j)||[0,0,0,0];const ne=Math.floor(q[0]),U=Math.floor(q[1]);let B=Math.max(Math.ceil(q[2])-ne,1),V=Math.max(Math.ceil(q[3])-U,1),n=1,h=1;B>d&&(n=B/d,B=d),V>d&&(h=V/d,V=d),this.current.startNewPathAndClipBox([0,0,B,V]);let A="groupAt"+this.groupLevel;y.smask&&(A+="_smask_"+this.smaskCounter++%2);const M=this.cachedCanvases.getCanvas(A,B,V),R=M.context;R.scale(1/n,1/h),R.translate(-ne,-U),R.transform(...L),y.smask?this.smaskStack.push({canvas:M.canvas,context:R,offsetX:ne,offsetY:U,scaleX:n,scaleY:h,subtype:y.smask.subtype,backdrop:y.smask.backdrop,transferMap:y.smask.transferMap||null,startTransformInverse:null}):(E.setTransform(1,0,0,1,0,0),E.translate(ne,U),E.scale(n,h),E.save()),e(E,R),this.ctx=R,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(E),this.groupLevel++}endGroup(y){if(!this.contentVisible)return;this.groupLevel--;const E=this.ctx,L=this.groupStack.pop();if(this.ctx=L,this.ctx.imageSmoothingEnabled=!1,y.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const q=(0,O.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...q);const j=T.Util.getAxialAlignedBoundingBox([0,0,E.canvas.width,E.canvas.height],q);this.ctx.drawImage(E.canvas,0,0),this.ctx.restore(),this.compose(j)}}beginAnnotation(y,E,L,q,j){if(K(this,ge,Ft).call(this),s(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(E)&&E.length===4){const ne=E[2]-E[0],U=E[3]-E[1];if(j&&this.annotationCanvasMap){L=L.slice(),L[4]-=E[0],L[5]-=E[1],E=E.slice(),E[0]=E[1]=0,E[2]=ne,E[3]=U;const[B,V]=T.Util.singularValueDecompose2dScale((0,O.getCurrentTransform)(this.ctx)),{viewportScale:n}=this,h=Math.ceil(ne*this.outputScaleX*n),A=Math.ceil(U*this.outputScaleY*n);this.annotationCanvas=this.canvasFactory.create(h,A);const{canvas:M,context:R}=this.annotationCanvas;this.annotationCanvasMap.set(y,M),this.annotationCanvas.savedCtx=this.ctx,this.ctx=R,this.ctx.save(),this.ctx.setTransform(B,0,0,-V,0,U*V),s(this.ctx)}else s(this.ctx),this.ctx.rect(E[0],E[1],ne,U),this.ctx.clip(),this.endPath()}this.current=new b(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...L),this.transform(...q)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),K(this,Y,It).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(y){if(!this.contentVisible)return;const E=y.count;y=this.getObject(y.data,y),y.count=E;const L=this.ctx,q=this.processingType3;if(q&&(q.compiled===void 0&&(q.compiled=m(y)),q.compiled)){q.compiled(L);return}const j=this._createMaskCanvas(y),ne=j.canvas;L.save(),L.setTransform(1,0,0,1,0,0),L.drawImage(ne,j.offsetX,j.offsetY),L.restore(),this.compose()}paintImageMaskXObjectRepeat(y,E,L=0,q=0,j,ne){if(!this.contentVisible)return;y=this.getObject(y.data,y);const U=this.ctx;U.save();const B=(0,O.getCurrentTransform)(U);U.transform(E,L,q,j,0,0);const V=this._createMaskCanvas(y);U.setTransform(1,0,0,1,V.offsetX-B[4],V.offsetY-B[5]);for(let n=0,h=ne.length;n<h;n+=2){const A=T.Util.transform(B,[E,L,q,j,ne[n],ne[n+1]]),[M,R]=T.Util.applyTransform([0,0],A);U.drawImage(V.canvas,M,R)}U.restore(),this.compose()}paintImageMaskXObjectGroup(y){if(!this.contentVisible)return;const E=this.ctx,L=this.current.fillColor,q=this.current.patternFill;for(const j of y){const{data:ne,width:U,height:B,transform:V}=j,n=this.cachedCanvases.getCanvas("maskCanvas",U,B),h=n.context;h.save();const A=this.getObject(ne,j);t(h,A),h.globalCompositeOperation="source-in",h.fillStyle=q?L.getPattern(h,this,(0,O.getCurrentTransformInverse)(E),ue.PathType.FILL):L,h.fillRect(0,0,U,B),h.restore(),E.save(),E.transform(...V),E.scale(1,-1),p(E,n.canvas,0,0,U,B,0,-1,1,1),E.restore()}this.compose()}paintImageXObject(y){if(!this.contentVisible)return;const E=this.getObject(y);if(!E){(0,T.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(E)}paintImageXObjectRepeat(y,E,L,q){if(!this.contentVisible)return;const j=this.getObject(y);if(!j){(0,T.warn)("Dependent image isn't ready yet");return}const ne=j.width,U=j.height,B=[];for(let V=0,n=q.length;V<n;V+=2)B.push({transform:[E,0,0,L,q[V],q[V+1]],x:0,y:0,w:ne,h:U});this.paintInlineImageXObjectGroup(j,B)}applyTransferMapsToCanvas(y){return this.current.transferMaps!=="none"&&(y.filter=this.current.transferMaps,y.drawImage(y.canvas,0,0),y.filter="none"),y.canvas}applyTransferMapsToBitmap(y){if(this.current.transferMaps==="none")return y.bitmap;const{bitmap:E,width:L,height:q}=y,j=this.cachedCanvases.getCanvas("inlineImage",L,q),ne=j.context;return ne.filter=this.current.transferMaps,ne.drawImage(E,0,0),ne.filter="none",j.canvas}paintInlineImageXObject(y){if(!this.contentVisible)return;const E=y.width,L=y.height,q=this.ctx;this.save(),I.isNodeJS||(q.filter="none"),q.scale(1/E,-1/L);let j;if(y.bitmap)j=this.applyTransferMapsToBitmap(y);else if(typeof HTMLElement=="function"&&y instanceof HTMLElement||!y.data)j=y;else{const B=this.cachedCanvases.getCanvas("inlineImage",E,L).context;f(B,y),j=this.applyTransferMapsToCanvas(B)}const ne=this._scaleImage(j,(0,O.getCurrentTransformInverse)(q));q.imageSmoothingEnabled=X((0,O.getCurrentTransform)(q),y.interpolate),p(q,ne.img,0,0,ne.paintWidth,ne.paintHeight,0,-L,E,L),this.compose(),this.restore()}paintInlineImageXObjectGroup(y,E){if(!this.contentVisible)return;const L=this.ctx;let q;if(y.bitmap)q=y.bitmap;else{const j=y.width,ne=y.height,B=this.cachedCanvases.getCanvas("inlineImage",j,ne).context;f(B,y),q=this.applyTransferMapsToCanvas(B)}for(const j of E)L.save(),L.transform(...j.transform),L.scale(1,-1),p(L,q,j.x,j.y,j.w,j.h,0,-1,1,1),L.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(y){}markPointProps(y,E){}beginMarkedContent(y){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(y,E){y==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(E)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(y){const E=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(y);const L=this.ctx;this.pendingClip&&(E||(this.pendingClip===ae?L.clip("evenodd"):L.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),L.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const y=(0,O.getCurrentTransform)(this.ctx);if(y[1]===0&&y[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(y[0]),Math.abs(y[3]));else{const E=Math.abs(y[0]*y[3]-y[2]*y[1]),L=Math.hypot(y[0],y[2]),q=Math.hypot(y[1],y[3]);this._cachedGetSinglePixelWidth=Math.max(L,q)/E}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:y}=this.current,E=(0,O.getCurrentTransform)(this.ctx);let L,q;if(E[1]===0&&E[2]===0){const j=Math.abs(E[0]),ne=Math.abs(E[3]);if(y===0)L=1/j,q=1/ne;else{const U=j*y,B=ne*y;L=U<1?1/U:1,q=B<1?1/B:1}}else{const j=Math.abs(E[0]*E[3]-E[2]*E[1]),ne=Math.hypot(E[0],E[1]),U=Math.hypot(E[2],E[3]);if(y===0)L=U/j,q=ne/j;else{const B=y*j;L=U>B?U/B:1,q=ne>B?ne/B:1}}this._cachedScaleForStroking=[L,q]}return this._cachedScaleForStroking}rescaleAndStroke(y){const{ctx:E}=this,{lineWidth:L}=this.current,[q,j]=this.getScaleForStroking();if(E.lineWidth=L||1,q===1&&j===1){E.stroke();return}let ne,U,B;y&&(ne=(0,O.getCurrentTransform)(E),U=E.getLineDash().slice(),B=E.lineDashOffset),E.scale(q,j);const V=Math.max(q,j);E.setLineDash(E.getLineDash().map(n=>n/V)),E.lineDashOffset/=V,E.stroke(),y&&(E.setTransform(...ne),E.setLineDash(U),E.lineDashOffset=B)}isContentVisible(){for(let y=this.markedContentStack.length-1;y>=0;y--)if(!this.markedContentStack[y].visible)return!1;return!0}};ge=new WeakSet,Ft=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Y=new WeakSet,It=function(){if(this.pageColors){const y=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(y!=="none"){const E=this.ctx.filter;this.ctx.filter=y,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=E}}};let J=Ee;P.CanvasGraphics=J;for(const Q in T.OPS)J.prototype[Q]!==void 0&&(J.prototype[T.OPS[Q]]=J.prototype[Q])},(re,P,ee)=>{Object.defineProperty(P,"__esModule",{value:!0}),P.TilingPattern=P.PathType=void 0,P.getShadingPattern=v;var T=ee(1),O=ee(6);const ue={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};P.PathType=ue;function G(p,m){if(!m)return;const b=m[2]-m[0],f=m[3]-m[1],t=new Path2D;t.rect(m[0],m[1],b,f),p.clip(t)}class I{constructor(){this.constructor===I&&(0,T.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,T.unreachable)("Abstract method `getPattern` called.")}}class D extends I{constructor(m){super(),this._type=m[1],this._bbox=m[2],this._colorStops=m[3],this._p0=m[4],this._p1=m[5],this._r0=m[6],this._r1=m[7],this.matrix=null}_createGradient(m){let b;this._type==="axial"?b=m.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(b=m.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const f of this._colorStops)b.addColorStop(f[0],f[1]);return b}getPattern(m,b,f,t){let e;if(t===ue.STROKE||t===ue.FILL){const s=b.current.getClippedPathBoundingBox(t,(0,O.getCurrentTransform)(m))||[0,0,0,0],i=Math.ceil(s[2]-s[0])||1,u=Math.ceil(s[3]-s[1])||1,w=b.cachedCanvases.getCanvas("pattern",i,u,!0),o=w.context;o.clearRect(0,0,o.canvas.width,o.canvas.height),o.beginPath(),o.rect(0,0,o.canvas.width,o.canvas.height),o.translate(-s[0],-s[1]),f=T.Util.transform(f,[1,0,0,1,s[0],s[1]]),o.transform(...b.baseTransform),this.matrix&&o.transform(...this.matrix),G(o,this._bbox),o.fillStyle=this._createGradient(o),o.fill(),e=m.createPattern(w.canvas,"no-repeat");const F=new DOMMatrix(f);e.setTransform(F)}else G(m,this._bbox),e=this._createGradient(m);return e}}function _(p,m,b,f,t,e,s,i){const u=m.coords,w=m.colors,o=p.data,F=p.width*4;let X;u[b+1]>u[f+1]&&(X=b,b=f,f=X,X=e,e=s,s=X),u[f+1]>u[t+1]&&(X=f,f=t,t=X,X=s,s=i,i=X),u[b+1]>u[f+1]&&(X=b,b=f,f=X,X=e,e=s,s=X);const le=(u[b]+m.offsetX)*m.scaleX,H=(u[b+1]+m.offsetY)*m.scaleY,Z=(u[f]+m.offsetX)*m.scaleX,ae=(u[f+1]+m.offsetY)*m.scaleY,J=(u[t]+m.offsetX)*m.scaleX,ge=(u[t+1]+m.offsetY)*m.scaleY;if(H>=ge)return;const ye=w[e],Y=w[e+1],we=w[e+2],Ee=w[s],Q=w[s+1],y=w[s+2],E=w[i],L=w[i+1],q=w[i+2],j=Math.round(H),ne=Math.round(ge);let U,B,V,n,h,A,M,R;for(let W=j;W<=ne;W++){if(W<ae){let ie;W<H?ie=0:ie=(H-W)/(H-ae),U=le-(le-Z)*ie,B=ye-(ye-Ee)*ie,V=Y-(Y-Q)*ie,n=we-(we-y)*ie}else{let ie;W>ge?ie=1:ae===ge?ie=0:ie=(ae-W)/(ae-ge),U=Z-(Z-J)*ie,B=Ee-(Ee-E)*ie,V=Q-(Q-L)*ie,n=y-(y-q)*ie}let me;W<H?me=0:W>ge?me=1:me=(H-W)/(H-ge),h=le-(le-J)*me,A=ye-(ye-E)*me,M=Y-(Y-L)*me,R=we-(we-q)*me;const N=Math.round(Math.min(U,h)),$=Math.round(Math.max(U,h));let ce=F*W+N*4;for(let ie=N;ie<=$;ie++)me=(U-ie)/(U-h),me<0?me=0:me>1&&(me=1),o[ce++]=B-(B-A)*me|0,o[ce++]=V-(V-M)*me|0,o[ce++]=n-(n-R)*me|0,o[ce++]=255}}function d(p,m,b){const f=m.coords,t=m.colors;let e,s;switch(m.type){case"lattice":const i=m.verticesPerRow,u=Math.floor(f.length/i)-1,w=i-1;for(e=0;e<u;e++){let o=e*i;for(let F=0;F<w;F++,o++)_(p,b,f[o],f[o+1],f[o+i],t[o],t[o+1],t[o+i]),_(p,b,f[o+i+1],f[o+1],f[o+i],t[o+i+1],t[o+1],t[o+i])}break;case"triangles":for(e=0,s=f.length;e<s;e+=3)_(p,b,f[e],f[e+1],f[e+2],t[e],t[e+1],t[e+2]);break;default:throw new Error("illegal figure")}}class k extends I{constructor(m){super(),this._coords=m[2],this._colors=m[3],this._figures=m[4],this._bounds=m[5],this._bbox=m[7],this._background=m[8],this.matrix=null}_createMeshCanvas(m,b,f){const i=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),w=Math.ceil(this._bounds[2])-i,o=Math.ceil(this._bounds[3])-u,F=Math.min(Math.ceil(Math.abs(w*m[0]*1.1)),3e3),X=Math.min(Math.ceil(Math.abs(o*m[1]*1.1)),3e3),le=w/F,H=o/X,Z={coords:this._coords,colors:this._colors,offsetX:-i,offsetY:-u,scaleX:1/le,scaleY:1/H},ae=F+2*2,J=X+2*2,ge=f.getCanvas("mesh",ae,J,!1),ye=ge.context,Y=ye.createImageData(F,X);if(b){const Ee=Y.data;for(let Q=0,y=Ee.length;Q<y;Q+=4)Ee[Q]=b[0],Ee[Q+1]=b[1],Ee[Q+2]=b[2],Ee[Q+3]=255}for(const Ee of this._figures)d(Y,Ee,Z);return ye.putImageData(Y,2,2),{canvas:ge.canvas,offsetX:i-2*le,offsetY:u-2*H,scaleX:le,scaleY:H}}getPattern(m,b,f,t){G(m,this._bbox);let e;if(t===ue.SHADING)e=T.Util.singularValueDecompose2dScale((0,O.getCurrentTransform)(m));else if(e=T.Util.singularValueDecompose2dScale(b.baseTransform),this.matrix){const i=T.Util.singularValueDecompose2dScale(this.matrix);e=[e[0]*i[0],e[1]*i[1]]}const s=this._createMeshCanvas(e,t===ue.SHADING?null:this._background,b.cachedCanvases);return t!==ue.SHADING&&(m.setTransform(...b.baseTransform),this.matrix&&m.transform(...this.matrix)),m.translate(s.offsetX,s.offsetY),m.scale(s.scaleX,s.scaleY),m.createPattern(s.canvas,"no-repeat")}}class C extends I{getPattern(){return"hotpink"}}function v(p){switch(p[0]){case"RadialAxial":return new D(p);case"Mesh":return new k(p);case"Dummy":return new C}throw new Error(`Unknown IR type: ${p[0]}`)}const r={COLORED:1,UNCOLORED:2},a=class a{constructor(m,b,f,t,e){this.operatorList=m[2],this.matrix=m[3]||[1,0,0,1,0,0],this.bbox=m[4],this.xstep=m[5],this.ystep=m[6],this.paintType=m[7],this.tilingType=m[8],this.color=b,this.ctx=f,this.canvasGraphicsFactory=t,this.baseTransform=e}createPatternCanvas(m){const b=this.operatorList,f=this.bbox,t=this.xstep,e=this.ystep,s=this.paintType,i=this.tilingType,u=this.color,w=this.canvasGraphicsFactory;(0,T.info)("TilingType: "+i);const o=f[0],F=f[1],X=f[2],le=f[3],H=T.Util.singularValueDecompose2dScale(this.matrix),Z=T.Util.singularValueDecompose2dScale(this.baseTransform),ae=[H[0]*Z[0],H[1]*Z[1]],J=this.getSizeAndScale(t,this.ctx.canvas.width,ae[0]),ge=this.getSizeAndScale(e,this.ctx.canvas.height,ae[1]),ye=m.cachedCanvases.getCanvas("pattern",J.size,ge.size,!0),Y=ye.context,we=w.createCanvasGraphics(Y);we.groupLevel=m.groupLevel,this.setFillAndStrokeStyleToContext(we,s,u);let Ee=o,Q=F,y=X,E=le;return o<0&&(Ee=0,y+=Math.abs(o)),F<0&&(Q=0,E+=Math.abs(F)),Y.translate(-(J.scale*Ee),-(ge.scale*Q)),we.transform(J.scale,0,0,ge.scale,0,0),Y.save(),this.clipBbox(we,Ee,Q,y,E),we.baseTransform=(0,O.getCurrentTransform)(we.ctx),we.executeOperatorList(b),we.endDrawing(),{canvas:ye.canvas,scaleX:J.scale,scaleY:ge.scale,offsetX:Ee,offsetY:Q}}getSizeAndScale(m,b,f){m=Math.abs(m);const t=Math.max(a.MAX_PATTERN_SIZE,b);let e=Math.ceil(m*f);return e>=t?e=t:f=e/m,{scale:f,size:e}}clipBbox(m,b,f,t,e){const s=t-b,i=e-f;m.ctx.rect(b,f,s,i),m.current.updateRectMinMax((0,O.getCurrentTransform)(m.ctx),[b,f,t,e]),m.clip(),m.endPath()}setFillAndStrokeStyleToContext(m,b,f){const t=m.ctx,e=m.current;switch(b){case r.COLORED:const s=this.ctx;t.fillStyle=s.fillStyle,t.strokeStyle=s.strokeStyle,e.fillColor=s.fillStyle,e.strokeColor=s.strokeStyle;break;case r.UNCOLORED:const i=T.Util.makeHexColor(f[0],f[1],f[2]);t.fillStyle=i,t.strokeStyle=i,e.fillColor=i,e.strokeColor=i;break;default:throw new T.FormatError(`Unsupported paint type: ${b}`)}}getPattern(m,b,f,t){let e=f;t!==ue.SHADING&&(e=T.Util.transform(e,b.baseTransform),this.matrix&&(e=T.Util.transform(e,this.matrix)));const s=this.createPatternCanvas(b);let i=new DOMMatrix(e);i=i.translate(s.offsetX,s.offsetY),i=i.scale(1/s.scaleX,1/s.scaleY);const u=m.createPattern(s.canvas,"repeat");return u.setTransform(i),u}};He(a,"MAX_PATTERN_SIZE",3e3);let c=a;P.TilingPattern=c},(re,P,ee)=>{Object.defineProperty(P,"__esModule",{value:!0}),P.convertBlackAndWhiteToRGBA=ue,P.convertToRGBA=O,P.grayToRGBA=I;var T=ee(1);function O(D){switch(D.kind){case T.ImageKind.GRAYSCALE_1BPP:return ue(D);case T.ImageKind.RGB_24BPP:return G(D)}return null}function ue({src:D,srcPos:_=0,dest:d,width:k,height:C,nonBlackColor:v=4294967295,inverseDecode:r=!1}){const c=T.FeatureTest.isLittleEndian?4278190080:255,[a,p]=r?[v,c]:[c,v],m=k>>3,b=k&7,f=D.length;d=new Uint32Array(d.buffer);let t=0;for(let e=0;e<C;e++){for(const i=_+m;_<i;_++){const u=_<f?D[_]:255;d[t++]=u&128?p:a,d[t++]=u&64?p:a,d[t++]=u&32?p:a,d[t++]=u&16?p:a,d[t++]=u&8?p:a,d[t++]=u&4?p:a,d[t++]=u&2?p:a,d[t++]=u&1?p:a}if(b===0)continue;const s=_<f?D[_++]:255;for(let i=0;i<b;i++)d[t++]=s&1<<7-i?p:a}return{srcPos:_,destPos:t}}function G({src:D,srcPos:_=0,dest:d,destPos:k=0,width:C,height:v}){let r=0;const c=D.length>>2,a=new Uint32Array(D.buffer,_,c);if(T.FeatureTest.isLittleEndian){for(;r<c-2;r+=3,k+=4){const p=a[r],m=a[r+1],b=a[r+2];d[k]=p|4278190080,d[k+1]=p>>>24|m<<8|4278190080,d[k+2]=m>>>16|b<<16|4278190080,d[k+3]=b>>>8|4278190080}for(let p=r*4,m=D.length;p<m;p+=3)d[k++]=D[p]|D[p+1]<<8|D[p+2]<<16|4278190080}else{for(;r<c-2;r+=3,k+=4){const p=a[r],m=a[r+1],b=a[r+2];d[k]=p|255,d[k+1]=p<<24|m>>>8|255,d[k+2]=m<<16|b>>>16|255,d[k+3]=b<<8|255}for(let p=r*4,m=D.length;p<m;p+=3)d[k++]=D[p]<<24|D[p+1]<<16|D[p+2]<<8|255}return{srcPos:_,destPos:k}}function I(D,_){if(T.FeatureTest.isLittleEndian)for(let d=0,k=D.length;d<k;d++)_[d]=D[d]*65793|4278190080;else for(let d=0,k=D.length;d<k;d++)_[d]=D[d]*16843008|255}},(re,P)=>{Object.defineProperty(P,"__esModule",{value:!0}),P.GlobalWorkerOptions=void 0;const ee=Object.create(null);P.GlobalWorkerOptions=ee,ee.workerPort=null,ee.workerSrc=""},(re,P,ee)=>{var D,Ci,d,wi,C,_t;Object.defineProperty(P,"__esModule",{value:!0}),P.MessageHandler=void 0;var T=ee(1);const O={UNKNOWN:0,DATA:1,ERROR:2},ue={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function G(r){switch(r instanceof Error||typeof r=="object"&&r!==null||(0,T.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new T.AbortException(r.message);case"MissingPDFException":return new T.MissingPDFException(r.message);case"PasswordException":return new T.PasswordException(r.message,r.code);case"UnexpectedResponseException":return new T.UnexpectedResponseException(r.message,r.status);case"UnknownErrorException":return new T.UnknownErrorException(r.message,r.details);default:return new T.UnknownErrorException(r.message,r.toString())}}class I{constructor(c,a,p){z(this,D);z(this,d);z(this,C);this.sourceName=c,this.targetName=a,this.comObj=p,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=m=>{const b=m.data;if(b.targetName!==this.sourceName)return;if(b.stream){K(this,d,wi).call(this,b);return}if(b.callback){const t=b.callbackId,e=this.callbackCapabilities[t];if(!e)throw new Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],b.callback===O.DATA)e.resolve(b.data);else if(b.callback===O.ERROR)e.reject(G(b.reason));else throw new Error("Unexpected callback case");return}const f=this.actionHandler[b.action];if(!f)throw new Error(`Unknown action from worker: ${b.action}`);if(b.callbackId){const t=this.sourceName,e=b.sourceName;new Promise(function(s){s(f(b.data))}).then(function(s){p.postMessage({sourceName:t,targetName:e,callback:O.DATA,callbackId:b.callbackId,data:s})},function(s){p.postMessage({sourceName:t,targetName:e,callback:O.ERROR,callbackId:b.callbackId,reason:G(s)})});return}if(b.streamId){K(this,D,Ci).call(this,b);return}f(b.data)},p.addEventListener("message",this._onComObjOnMessage)}on(c,a){const p=this.actionHandler;if(p[c])throw new Error(`There is already an actionName called "${c}"`);p[c]=a}send(c,a,p){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:c,data:a},p)}sendWithPromise(c,a,p){const m=this.callbackId++,b=new T.PromiseCapability;this.callbackCapabilities[m]=b;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:c,callbackId:m,data:a},p)}catch(f){b.reject(f)}return b.promise}sendWithStream(c,a,p,m){const b=this.streamId++,f=this.sourceName,t=this.targetName,e=this.comObj;return new ReadableStream({start:s=>{const i=new T.PromiseCapability;return this.streamControllers[b]={controller:s,startCall:i,pullCall:null,cancelCall:null,isClosed:!1},e.postMessage({sourceName:f,targetName:t,action:c,streamId:b,data:a,desiredSize:s.desiredSize},m),i.promise},pull:s=>{const i=new T.PromiseCapability;return this.streamControllers[b].pullCall=i,e.postMessage({sourceName:f,targetName:t,stream:ue.PULL,streamId:b,desiredSize:s.desiredSize}),i.promise},cancel:s=>{(0,T.assert)(s instanceof Error,"cancel must have a valid reason");const i=new T.PromiseCapability;return this.streamControllers[b].cancelCall=i,this.streamControllers[b].isClosed=!0,e.postMessage({sourceName:f,targetName:t,stream:ue.CANCEL,streamId:b,reason:G(s)}),i.promise}},p)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}D=new WeakSet,Ci=function(c){const a=c.streamId,p=this.sourceName,m=c.sourceName,b=this.comObj,f=this,t=this.actionHandler[c.action],e={enqueue(s,i=1,u){if(this.isCancelled)return;const w=this.desiredSize;this.desiredSize-=i,w>0&&this.desiredSize<=0&&(this.sinkCapability=new T.PromiseCapability,this.ready=this.sinkCapability.promise),b.postMessage({sourceName:p,targetName:m,stream:ue.ENQUEUE,streamId:a,chunk:s},u)},close(){this.isCancelled||(this.isCancelled=!0,b.postMessage({sourceName:p,targetName:m,stream:ue.CLOSE,streamId:a}),delete f.streamSinks[a])},error(s){(0,T.assert)(s instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,b.postMessage({sourceName:p,targetName:m,stream:ue.ERROR,streamId:a,reason:G(s)}))},sinkCapability:new T.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:c.desiredSize,ready:null};e.sinkCapability.resolve(),e.ready=e.sinkCapability.promise,this.streamSinks[a]=e,new Promise(function(s){s(t(c.data,e))}).then(function(){b.postMessage({sourceName:p,targetName:m,stream:ue.START_COMPLETE,streamId:a,success:!0})},function(s){b.postMessage({sourceName:p,targetName:m,stream:ue.START_COMPLETE,streamId:a,reason:G(s)})})},d=new WeakSet,wi=function(c){const a=c.streamId,p=this.sourceName,m=c.sourceName,b=this.comObj,f=this.streamControllers[a],t=this.streamSinks[a];switch(c.stream){case ue.START_COMPLETE:c.success?f.startCall.resolve():f.startCall.reject(G(c.reason));break;case ue.PULL_COMPLETE:c.success?f.pullCall.resolve():f.pullCall.reject(G(c.reason));break;case ue.PULL:if(!t){b.postMessage({sourceName:p,targetName:m,stream:ue.PULL_COMPLETE,streamId:a,success:!0});break}t.desiredSize<=0&&c.desiredSize>0&&t.sinkCapability.resolve(),t.desiredSize=c.desiredSize,new Promise(function(e){var s;e((s=t.onPull)==null?void 0:s.call(t))}).then(function(){b.postMessage({sourceName:p,targetName:m,stream:ue.PULL_COMPLETE,streamId:a,success:!0})},function(e){b.postMessage({sourceName:p,targetName:m,stream:ue.PULL_COMPLETE,streamId:a,reason:G(e)})});break;case ue.ENQUEUE:if((0,T.assert)(f,"enqueue should have stream controller"),f.isClosed)break;f.controller.enqueue(c.chunk);break;case ue.CLOSE:if((0,T.assert)(f,"close should have stream controller"),f.isClosed)break;f.isClosed=!0,f.controller.close(),K(this,C,_t).call(this,f,a);break;case ue.ERROR:(0,T.assert)(f,"error should have stream controller"),f.controller.error(G(c.reason)),K(this,C,_t).call(this,f,a);break;case ue.CANCEL_COMPLETE:c.success?f.cancelCall.resolve():f.cancelCall.reject(G(c.reason)),K(this,C,_t).call(this,f,a);break;case ue.CANCEL:if(!t)break;new Promise(function(e){var s;e((s=t.onCancel)==null?void 0:s.call(t,G(c.reason)))}).then(function(){b.postMessage({sourceName:p,targetName:m,stream:ue.CANCEL_COMPLETE,streamId:a,success:!0})},function(e){b.postMessage({sourceName:p,targetName:m,stream:ue.CANCEL_COMPLETE,streamId:a,reason:G(e)})}),t.sinkCapability.reject(G(c.reason)),t.isCancelled=!0,delete this.streamSinks[a];break;default:throw new Error("Unexpected stream case")}},C=new WeakSet,_t=async function(c,a){var p,m,b;await Promise.allSettled([(p=c.startCall)==null?void 0:p.promise,(m=c.pullCall)==null?void 0:m.promise,(b=c.cancelCall)==null?void 0:b.promise]),delete this.streamControllers[a]},P.MessageHandler=I},(re,P,ee)=>{var ue,G;Object.defineProperty(P,"__esModule",{value:!0}),P.Metadata=void 0;var T=ee(1);class O{constructor({parsedData:D,rawData:_}){z(this,ue,void 0);z(this,G,void 0);_e(this,ue,D),_e(this,G,_)}getRaw(){return l(this,G)}get(D){return l(this,ue).get(D)??null}getAll(){return(0,T.objectFromMap)(l(this,ue))}has(D){return l(this,ue).has(D)}}ue=new WeakMap,G=new WeakMap,P.Metadata=O},(re,P,ee)=>{var D,_,d,k,C,v,Dt;Object.defineProperty(P,"__esModule",{value:!0}),P.OptionalContentConfig=void 0;var T=ee(1),O=ee(8);const ue=Symbol("INTERNAL");class G{constructor(a,p){z(this,D,!0);this.name=a,this.intent=p}get visible(){return l(this,D)}_setVisible(a,p){a!==ue&&(0,T.unreachable)("Internal method `_setVisible` called."),_e(this,D,p)}}D=new WeakMap;class I{constructor(a){z(this,v);z(this,_,null);z(this,d,new Map);z(this,k,null);z(this,C,null);if(this.name=null,this.creator=null,a!==null){this.name=a.name,this.creator=a.creator,_e(this,C,a.order);for(const p of a.groups)l(this,d).set(p.id,new G(p.name,p.intent));if(a.baseState==="OFF")for(const p of l(this,d).values())p._setVisible(ue,!1);for(const p of a.on)l(this,d).get(p)._setVisible(ue,!0);for(const p of a.off)l(this,d).get(p)._setVisible(ue,!1);_e(this,k,this.getHash())}}isVisible(a){if(l(this,d).size===0)return!0;if(!a)return(0,T.warn)("Optional content group not defined."),!0;if(a.type==="OCG")return l(this,d).has(a.id)?l(this,d).get(a.id).visible:((0,T.warn)(`Optional content group not found: ${a.id}`),!0);if(a.type==="OCMD"){if(a.expression)return K(this,v,Dt).call(this,a.expression);if(!a.policy||a.policy==="AnyOn"){for(const p of a.ids){if(!l(this,d).has(p))return(0,T.warn)(`Optional content group not found: ${p}`),!0;if(l(this,d).get(p).visible)return!0}return!1}else if(a.policy==="AllOn"){for(const p of a.ids){if(!l(this,d).has(p))return(0,T.warn)(`Optional content group not found: ${p}`),!0;if(!l(this,d).get(p).visible)return!1}return!0}else if(a.policy==="AnyOff"){for(const p of a.ids){if(!l(this,d).has(p))return(0,T.warn)(`Optional content group not found: ${p}`),!0;if(!l(this,d).get(p).visible)return!0}return!1}else if(a.policy==="AllOff"){for(const p of a.ids){if(!l(this,d).has(p))return(0,T.warn)(`Optional content group not found: ${p}`),!0;if(l(this,d).get(p).visible)return!1}return!0}return(0,T.warn)(`Unknown optional content policy ${a.policy}.`),!0}return(0,T.warn)(`Unknown group type ${a.type}.`),!0}setVisibility(a,p=!0){if(!l(this,d).has(a)){(0,T.warn)(`Optional content group not found: ${a}`);return}l(this,d).get(a)._setVisible(ue,!!p),_e(this,_,null)}get hasInitialVisibility(){return this.getHash()===l(this,k)}getOrder(){return l(this,d).size?l(this,C)?l(this,C).slice():[...l(this,d).keys()]:null}getGroups(){return l(this,d).size>0?(0,T.objectFromMap)(l(this,d)):null}getGroup(a){return l(this,d).get(a)||null}getHash(){if(l(this,_)!==null)return l(this,_);const a=new O.MurmurHash3_64;for(const[p,m]of l(this,d))a.update(`${p}:${m.visible}`);return _e(this,_,a.hexdigest())}}_=new WeakMap,d=new WeakMap,k=new WeakMap,C=new WeakMap,v=new WeakSet,Dt=function(a){const p=a.length;if(p<2)return!0;const m=a[0];for(let b=1;b<p;b++){const f=a[b];let t;if(Array.isArray(f))t=K(this,v,Dt).call(this,f);else if(l(this,d).has(f))t=l(this,d).get(f).visible;else return(0,T.warn)(`Optional content group not found: ${f}`),!0;switch(m){case"And":if(!t)return!1;break;case"Or":if(t)return!0;break;case"Not":return!t;default:return!0}}return m==="And"},P.OptionalContentConfig=I},(re,P,ee)=>{Object.defineProperty(P,"__esModule",{value:!0}),P.PDFDataTransportStream=void 0;var T=ee(1),O=ee(6);class ue{constructor({length:_,initialData:d,progressiveDone:k=!1,contentDispositionFilename:C=null,disableRange:v=!1,disableStream:r=!1},c){if((0,T.assert)(c,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=k,this._contentDispositionFilename=C,(d==null?void 0:d.length)>0){const a=d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength?d.buffer:new Uint8Array(d).buffer;this._queuedChunks.push(a)}this._pdfDataRangeTransport=c,this._isStreamingSupported=!r,this._isRangeSupported=!v,this._contentLength=_,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((a,p)=>{this._onReceiveData({begin:a,chunk:p})}),this._pdfDataRangeTransport.addProgressListener((a,p)=>{this._onProgress({loaded:a,total:p})}),this._pdfDataRangeTransport.addProgressiveReadListener(a=>{this._onReceiveData({chunk:a})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:_,chunk:d}){const k=d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength?d.buffer:new Uint8Array(d).buffer;if(_===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(k):this._queuedChunks.push(k);else{const C=this._rangeReaders.some(function(v){return v._begin!==_?!1:(v._enqueue(k),!0)});(0,T.assert)(C,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var _;return((_=this._fullRequestReader)==null?void 0:_._loaded)??0}_onProgress(_){var d,k,C,v;_.total===void 0?(k=(d=this._rangeReaders[0])==null?void 0:d.onProgress)==null||k.call(d,{loaded:_.loaded}):(v=(C=this._fullRequestReader)==null?void 0:C.onProgress)==null||v.call(C,{loaded:_.loaded,total:_.total})}_onProgressiveDone(){var _;(_=this._fullRequestReader)==null||_.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(_){const d=this._rangeReaders.indexOf(_);d>=0&&this._rangeReaders.splice(d,1)}getFullReader(){(0,T.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const _=this._queuedChunks;return this._queuedChunks=null,new G(this,_,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(_,d){if(d<=this._progressiveDataLength)return null;const k=new I(this,_,d);return this._pdfDataRangeTransport.requestDataRange(_,d),this._rangeReaders.push(k),k}cancelAllRequests(_){var d;(d=this._fullRequestReader)==null||d.cancel(_);for(const k of this._rangeReaders.slice(0))k.cancel(_);this._pdfDataRangeTransport.abort()}}P.PDFDataTransportStream=ue;class G{constructor(_,d,k=!1,C=null){this._stream=_,this._done=k||!1,this._filename=(0,O.isPdfFile)(C)?C:null,this._queuedChunks=d||[],this._loaded=0;for(const v of this._queuedChunks)this._loaded+=v.byteLength;this._requests=[],this._headersReady=Promise.resolve(),_._fullRequestReader=this,this.onProgress=null}_enqueue(_){this._done||(this._requests.length>0?this._requests.shift().resolve({value:_,done:!1}):this._queuedChunks.push(_),this._loaded+=_.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const _=new T.PromiseCapability;return this._requests.push(_),_.promise}cancel(_){this._done=!0;for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class I{constructor(_,d,k){this._stream=_,this._begin=d,this._end=k,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(_){if(!this._done){if(this._requests.length===0)this._queuedChunk=_;else{this._requests.shift().resolve({value:_,done:!1});for(const k of this._requests)k.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const d=this._queuedChunk;return this._queuedChunk=null,{value:d,done:!1}}if(this._done)return{value:void 0,done:!0};const _=new T.PromiseCapability;return this._requests.push(_),_.promise}cancel(_){this._done=!0;for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(re,P)=>{Object.defineProperty(P,"__esModule",{value:!0}),P.XfaText=void 0;class ee{static textContent(O){const ue=[],G={items:ue,styles:Object.create(null)};function I(D){var k;if(!D)return;let _=null;const d=D.name;if(d==="#text")_=D.value;else if(ee.shouldBuildText(d))(k=D==null?void 0:D.attributes)!=null&&k.textContent?_=D.attributes.textContent:D.value&&(_=D.value);else return;if(_!==null&&ue.push({str:_}),!!D.children)for(const C of D.children)I(C)}return I(O),G}static shouldBuildText(O){return!(O==="textarea"||O==="input"||O==="option"||O==="select")}}P.XfaText=ee},(re,P,ee)=>{Object.defineProperty(P,"__esModule",{value:!0}),P.NodeStandardFontDataFactory=P.NodeFilterFactory=P.NodeCanvasFactory=P.NodeCMapReaderFactory=void 0;var T=ee(7);const O=function(_){return new Promise((d,k)=>{require$$5.readFile(_,(v,r)=>{if(v||!r){k(new Error(v));return}d(new Uint8Array(r))})})};class ue extends T.BaseFilterFactory{}P.NodeFilterFactory=ue;class G extends T.BaseCanvasFactory{_createCanvas(d,k){return require$$5.createCanvas(d,k)}}P.NodeCanvasFactory=G;class I extends T.BaseCMapReaderFactory{_fetchData(d,k){return O(d).then(C=>({cMapData:C,compressionType:k}))}}P.NodeCMapReaderFactory=I;class D extends T.BaseStandardFontDataFactory{_fetchData(d){return O(d)}}P.NodeStandardFontDataFactory=D},(re,P,ee)=>{Object.defineProperty(P,"__esModule",{value:!0}),P.PDFNodeStream=void 0;var T=ee(1),O=ee(22);const ue=require$$5,G=require$$5,I=require$$5,D=require$$5,_=/^file:\/\/\/[a-zA-Z]:\//;function d(b){const f=D.parse(b);return f.protocol==="file:"||f.host?f:/^[a-z]:[/\\]/i.test(b)?D.parse(`file:///${b}`):(f.host||(f.protocol="file:"),f)}class k{constructor(f){this.source=f,this.url=d(f.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&f.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var f;return((f=this._fullRequestReader)==null?void 0:f._loaded)??0}getFullReader(){return(0,T.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new p(this):new c(this),this._fullRequestReader}getRangeReader(f,t){if(t<=this._progressiveDataLength)return null;const e=this.isFsUrl?new m(this,f,t):new a(this,f,t);return this._rangeRequestReaders.push(e),e}cancelAllRequests(f){var t;(t=this._fullRequestReader)==null||t.cancel(f);for(const e of this._rangeRequestReaders.slice(0))e.cancel(f)}}P.PDFNodeStream=k;class C{constructor(f){this._url=f.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=f.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=new T.PromiseCapability,this._headersCapability=new T.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const f=this._readableStream.read();return f===null?(this._readCapability=new T.PromiseCapability,this.read()):(this._loaded+=f.length,(e=this.onProgress)==null||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(f).buffer,done:!1})}cancel(f){if(!this._readableStream){this._error(f);return}this._readableStream.destroy(f)}_error(f){this._storedError=f,this._readCapability.resolve()}_setReadableStream(f){this._readableStream=f,f.on("readable",()=>{this._readCapability.resolve()}),f.on("end",()=>{f.destroy(),this._done=!0,this._readCapability.resolve()}),f.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new T.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class v{constructor(f){this._url=f.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new T.PromiseCapability;const t=f.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const f=this._readableStream.read();return f===null?(this._readCapability=new T.PromiseCapability,this.read()):(this._loaded+=f.length,(e=this.onProgress)==null||e.call(this,{loaded:this._loaded}),{value:new Uint8Array(f).buffer,done:!1})}cancel(f){if(!this._readableStream){this._error(f);return}this._readableStream.destroy(f)}_error(f){this._storedError=f,this._readCapability.resolve()}_setReadableStream(f){this._readableStream=f,f.on("readable",()=>{this._readCapability.resolve()}),f.on("end",()=>{f.destroy(),this._done=!0,this._readCapability.resolve()}),f.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function r(b,f){return{protocol:b.protocol,auth:b.auth,host:b.hostname,port:b.port,path:b.path,method:"GET",headers:f}}class c extends C{constructor(f){super(f);const t=e=>{if(e.statusCode===404){const w=new T.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=w,this._headersCapability.reject(w);return}this._headersCapability.resolve(),this._setReadableStream(e);const s=w=>this._readableStream.headers[w.toLowerCase()],{allowRangeRequests:i,suggestedLength:u}=(0,O.validateRangeRequestCapabilities)({getResponseHeader:s,isHttp:f.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=i,this._contentLength=u||this._contentLength,this._filename=(0,O.extractFilenameFromHeader)(s)};this._request=null,this._url.protocol==="http:"?this._request=G.request(r(this._url,f.httpHeaders),t):this._request=I.request(r(this._url,f.httpHeaders),t),this._request.on("error",e=>{this._storedError=e,this._headersCapability.reject(e)}),this._request.end()}}class a extends v{constructor(f,t,e){super(f),this._httpHeaders={};for(const i in f.httpHeaders){const u=f.httpHeaders[i];u!==void 0&&(this._httpHeaders[i]=u)}this._httpHeaders.Range=`bytes=${t}-${e-1}`;const s=i=>{if(i.statusCode===404){const u=new T.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=u;return}this._setReadableStream(i)};this._request=null,this._url.protocol==="http:"?this._request=G.request(r(this._url,this._httpHeaders),s):this._request=I.request(r(this._url,this._httpHeaders),s),this._request.on("error",i=>{this._storedError=i}),this._request.end()}}class p extends C{constructor(f){super(f);let t=decodeURIComponent(this._url.path);_.test(this._url.href)&&(t=t.replace(/^\//,"")),ue.lstat(t,(e,s)=>{if(e){e.code==="ENOENT"&&(e=new T.MissingPDFException(`Missing PDF "${t}".`)),this._storedError=e,this._headersCapability.reject(e);return}this._contentLength=s.size,this._setReadableStream(ue.createReadStream(t)),this._headersCapability.resolve()})}}class m extends v{constructor(f,t,e){super(f);let s=decodeURIComponent(this._url.path);_.test(this._url.href)&&(s=s.replace(/^\//,"")),this._setReadableStream(ue.createReadStream(s,{start:t,end:e-1}))}}},(re,P,ee)=>{Object.defineProperty(P,"__esModule",{value:!0}),P.createResponseStatusError=D,P.extractFilenameFromHeader=I,P.validateRangeRequestCapabilities=G,P.validateResponseStatus=_;var T=ee(1),O=ee(23),ue=ee(6);function G({getResponseHeader:d,isHttp:k,rangeChunkSize:C,disableRange:v}){const r={allowRangeRequests:!1,suggestedLength:void 0},c=parseInt(d("Content-Length"),10);return!Number.isInteger(c)||(r.suggestedLength=c,c<=2*C)||v||!k||d("Accept-Ranges")!=="bytes"||(d("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function I(d){const k=d("Content-Disposition");if(k){let C=(0,O.getFilenameFromContentDispositionHeader)(k);if(C.includes("%"))try{C=decodeURIComponent(C)}catch{}if((0,ue.isPdfFile)(C))return C}return null}function D(d,k){return d===404||d===0&&k.startsWith("file:")?new T.MissingPDFException('Missing PDF "'+k+'".'):new T.UnexpectedResponseException(`Unexpected server response (${d}) while retrieving PDF "${k}".`,d)}function _(d){return d===200||d===206}},(re,P,ee)=>{Object.defineProperty(P,"__esModule",{value:!0}),P.getFilenameFromContentDispositionHeader=O;var T=ee(1);function O(ue){let G=!0,I=D("filename\\*","i").exec(ue);if(I){I=I[1];let c=C(I);return c=unescape(c),c=v(c),c=r(c),d(c)}if(I=k(ue),I){const c=r(I);return d(c)}if(I=D("filename","i").exec(ue),I){I=I[1];let c=C(I);return c=r(c),d(c)}function D(c,a){return new RegExp("(?:^|;)\\s*"+c+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',a)}function _(c,a){if(c){if(!/^[\x00-\xFF]+$/.test(a))return a;try{const p=new TextDecoder(c,{fatal:!0}),m=(0,T.stringToBytes)(a);a=p.decode(m),G=!1}catch{}}return a}function d(c){return G&&/[\x80-\xff]/.test(c)&&(c=_("utf-8",c),G&&(c=_("iso-8859-1",c))),c}function k(c){const a=[];let p;const m=D("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=m.exec(c))!==null;){let[,f,t,e]=p;if(f=parseInt(f,10),f in a){if(f===0)break;continue}a[f]=[t,e]}const b=[];for(let f=0;f<a.length&&f in a;++f){let[t,e]=a[f];e=C(e),t&&(e=unescape(e),f===0&&(e=v(e))),b.push(e)}return b.join("")}function C(c){if(c.startsWith('"')){const a=c.slice(1).split('\\"');for(let p=0;p<a.length;++p){const m=a[p].indexOf('"');m!==-1&&(a[p]=a[p].slice(0,m),a.length=p+1),a[p]=a[p].replaceAll(/\\(.)/g,"$1")}c=a.join('"')}return c}function v(c){const a=c.indexOf("'");if(a===-1)return c;const p=c.slice(0,a),b=c.slice(a+1).replace(/^[^']*'/,"");return _(p,b)}function r(c){return!c.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(c)?c:c.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(a,p,m,b){if(m==="q"||m==="Q")return b=b.replaceAll("_"," "),b=b.replaceAll(/=([0-9a-fA-F]{2})/g,function(f,t){return String.fromCharCode(parseInt(t,16))}),_(p,b);try{b=atob(b)}catch{}return _(p,b)})}return""}},(re,P,ee)=>{Object.defineProperty(P,"__esModule",{value:!0}),P.PDFNetworkStream=void 0;var T=ee(1),O=ee(22);const ue=200,G=206;function I(C){const v=C.response;return typeof v!="string"?v:(0,T.stringToBytes)(v).buffer}class D{constructor(v,r={}){this.url=v,this.isHttp=/^https?:/i.test(v),this.httpHeaders=this.isHttp&&r.httpHeaders||Object.create(null),this.withCredentials=r.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(v,r,c){const a={begin:v,end:r};for(const p in c)a[p]=c[p];return this.request(a)}requestFull(v){return this.request(v)}request(v){const r=new XMLHttpRequest,c=this.currXhrId++,a=this.pendingRequests[c]={xhr:r};r.open("GET",this.url),r.withCredentials=this.withCredentials;for(const p in this.httpHeaders){const m=this.httpHeaders[p];m!==void 0&&r.setRequestHeader(p,m)}return this.isHttp&&"begin"in v&&"end"in v?(r.setRequestHeader("Range",`bytes=${v.begin}-${v.end-1}`),a.expectedStatus=G):a.expectedStatus=ue,r.responseType="arraybuffer",v.onError&&(r.onerror=function(p){v.onError(r.status)}),r.onreadystatechange=this.onStateChange.bind(this,c),r.onprogress=this.onProgress.bind(this,c),a.onHeadersReceived=v.onHeadersReceived,a.onDone=v.onDone,a.onError=v.onError,a.onProgress=v.onProgress,r.send(null),c}onProgress(v,r){var a;const c=this.pendingRequests[v];c&&((a=c.onProgress)==null||a.call(c,r))}onStateChange(v,r){var f,t,e;const c=this.pendingRequests[v];if(!c)return;const a=c.xhr;if(a.readyState>=2&&c.onHeadersReceived&&(c.onHeadersReceived(),delete c.onHeadersReceived),a.readyState!==4||!(v in this.pendingRequests))return;if(delete this.pendingRequests[v],a.status===0&&this.isHttp){(f=c.onError)==null||f.call(c,a.status);return}const p=a.status||ue;if(!(p===ue&&c.expectedStatus===G)&&p!==c.expectedStatus){(t=c.onError)==null||t.call(c,a.status);return}const b=I(a);if(p===G){const s=a.getResponseHeader("Content-Range"),i=/bytes (\d+)-(\d+)\/(\d+)/.exec(s);c.onDone({begin:parseInt(i[1],10),chunk:b})}else b?c.onDone({begin:0,chunk:b}):(e=c.onError)==null||e.call(c,a.status)}getRequestXhr(v){return this.pendingRequests[v].xhr}isPendingRequest(v){return v in this.pendingRequests}abortRequest(v){const r=this.pendingRequests[v].xhr;delete this.pendingRequests[v],r.abort()}}class _{constructor(v){this._source=v,this._manager=new D(v.url,{httpHeaders:v.httpHeaders,withCredentials:v.withCredentials}),this._rangeChunkSize=v.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(v){const r=this._rangeRequestReaders.indexOf(v);r>=0&&this._rangeRequestReaders.splice(r,1)}getFullReader(){return(0,T.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new d(this._manager,this._source),this._fullRequestReader}getRangeReader(v,r){const c=new k(this._manager,v,r);return c.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(c),c}cancelAllRequests(v){var r;(r=this._fullRequestReader)==null||r.cancel(v);for(const c of this._rangeRequestReaders.slice(0))c.cancel(v)}}P.PDFNetworkStream=_;class d{constructor(v,r){this._manager=v;const c={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=r.url,this._fullRequestId=v.requestFull(c),this._headersReceivedCapability=new T.PromiseCapability,this._disableRange=r.disableRange||!1,this._contentLength=r.length,this._rangeChunkSize=r.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const v=this._fullRequestId,r=this._manager.getRequestXhr(v),c=m=>r.getResponseHeader(m),{allowRangeRequests:a,suggestedLength:p}=(0,O.validateRangeRequestCapabilities)({getResponseHeader:c,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=p||this._contentLength,this._filename=(0,O.extractFilenameFromHeader)(c),this._isRangeSupported&&this._manager.abortRequest(v),this._headersReceivedCapability.resolve()}_onDone(v){if(v&&(this._requests.length>0?this._requests.shift().resolve({value:v.chunk,done:!1}):this._cachedChunks.push(v.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(v){this._storedError=(0,O.createResponseStatusError)(v,this._url),this._headersReceivedCapability.reject(this._storedError);for(const r of this._requests)r.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(v){var r;(r=this.onProgress)==null||r.call(this,{loaded:v.loaded,total:v.lengthComputable?v.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const v=new T.PromiseCapability;return this._requests.push(v),v.promise}cancel(v){this._done=!0,this._headersReceivedCapability.reject(v);for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class k{constructor(v,r,c){this._manager=v;const a={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=v.url,this._requestId=v.requestRange(r,c,a),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var v;(v=this.onClosed)==null||v.call(this,this)}_onDone(v){const r=v.chunk;this._requests.length>0?this._requests.shift().resolve({value:r,done:!1}):this._queuedChunk=r,this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(v){this._storedError=(0,O.createResponseStatusError)(v,this._url);for(const r of this._requests)r.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(v){var r;this.isStreamingSupported||(r=this.onProgress)==null||r.call(this,{loaded:v.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const r=this._queuedChunk;return this._queuedChunk=null,{value:r,done:!1}}if(this._done)return{value:void 0,done:!0};const v=new T.PromiseCapability;return this._requests.push(v),v.promise}cancel(v){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(re,P,ee)=>{Object.defineProperty(P,"__esModule",{value:!0}),P.PDFFetchStream=void 0;var T=ee(1),O=ee(22);function ue(k,C,v){return{method:"GET",headers:k,signal:v.signal,mode:"cors",credentials:C?"include":"same-origin",redirect:"follow"}}function G(k){const C=new Headers;for(const v in k){const r=k[v];r!==void 0&&C.append(v,r)}return C}function I(k){return k instanceof Uint8Array?k.buffer:k instanceof ArrayBuffer?k:((0,T.warn)(`getArrayBuffer - unexpected data format: ${k}`),new Uint8Array(k).buffer)}class D{constructor(C){this.source=C,this.isHttp=/^https?:/i.test(C.url),this.httpHeaders=this.isHttp&&C.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var C;return((C=this._fullRequestReader)==null?void 0:C._loaded)??0}getFullReader(){return(0,T.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new _(this),this._fullRequestReader}getRangeReader(C,v){if(v<=this._progressiveDataLength)return null;const r=new d(this,C,v);return this._rangeRequestReaders.push(r),r}cancelAllRequests(C){var v;(v=this._fullRequestReader)==null||v.cancel(C);for(const r of this._rangeRequestReaders.slice(0))r.cancel(C)}}P.PDFFetchStream=D;class _{constructor(C){this._stream=C,this._reader=null,this._loaded=0,this._filename=null;const v=C.source;this._withCredentials=v.withCredentials||!1,this._contentLength=v.length,this._headersCapability=new T.PromiseCapability,this._disableRange=v.disableRange||!1,this._rangeChunkSize=v.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!v.disableStream,this._isRangeSupported=!v.disableRange,this._headers=G(this._stream.httpHeaders);const r=v.url;fetch(r,ue(this._headers,this._withCredentials,this._abortController)).then(c=>{if(!(0,O.validateResponseStatus)(c.status))throw(0,O.createResponseStatusError)(c.status,r);this._reader=c.body.getReader(),this._headersCapability.resolve();const a=b=>c.headers.get(b),{allowRangeRequests:p,suggestedLength:m}=(0,O.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=p,this._contentLength=m||this._contentLength,this._filename=(0,O.extractFilenameFromHeader)(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new T.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:C,done:v}=await this._reader.read();return v?{value:C,done:v}:(this._loaded+=C.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:I(C),done:!1})}cancel(C){var v;(v=this._reader)==null||v.cancel(C),this._abortController.abort()}}class d{constructor(C,v,r){this._stream=C,this._reader=null,this._loaded=0;const c=C.source;this._withCredentials=c.withCredentials||!1,this._readCapability=new T.PromiseCapability,this._isStreamingSupported=!c.disableStream,this._abortController=new AbortController,this._headers=G(this._stream.httpHeaders),this._headers.append("Range",`bytes=${v}-${r-1}`);const a=c.url;fetch(a,ue(this._headers,this._withCredentials,this._abortController)).then(p=>{if(!(0,O.validateResponseStatus)(p.status))throw(0,O.createResponseStatusError)(p.status,a);this._readCapability.resolve(),this._reader=p.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:C,done:v}=await this._reader.read();return v?{value:C,done:v}:(this._loaded+=C.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:I(C),done:!1})}cancel(C){var v;(v=this._reader)==null||v.cancel(C),this._abortController.abort()}}},(re,P,ee)=>{Object.defineProperty(P,"__esModule",{value:!0}),P.TextLayerRenderTask=void 0,P.renderTextLayer=c,P.updateTextLayer=a;var T=ee(1),O=ee(6);const ue=1e5,G=30,I=.8,D=new Map;function _(p,m){let b;if(m&&T.FeatureTest.isOffscreenCanvasSupported)b=new OffscreenCanvas(p,p).getContext("2d",{alpha:!1});else{const f=document.createElement("canvas");f.width=f.height=p,b=f.getContext("2d",{alpha:!1})}return b}function d(p,m){const b=D.get(p);if(b)return b;const f=_(G,m);f.font=`${G}px ${p}`;const t=f.measureText("");let e=t.fontBoundingBoxAscent,s=Math.abs(t.fontBoundingBoxDescent);if(e){const u=e/(e+s);return D.set(p,u),f.canvas.width=f.canvas.height=0,u}f.strokeStyle="red",f.clearRect(0,0,G,G),f.strokeText("g",0,0);let i=f.getImageData(0,0,G,G).data;s=0;for(let u=i.length-1-3;u>=0;u-=4)if(i[u]>0){s=Math.ceil(u/4/G);break}f.clearRect(0,0,G,G),f.strokeText("A",0,G),i=f.getImageData(0,0,G,G).data,e=0;for(let u=0,w=i.length;u<w;u+=4)if(i[u]>0){e=G-Math.floor(u/4/G);break}if(f.canvas.width=f.canvas.height=0,e){const u=e/(e+s);return D.set(p,u),u}return D.set(p,I),I}function k(p,m,b){const f=document.createElement("span"),t={angle:0,canvasWidth:0,hasText:m.str!=="",hasEOL:m.hasEOL,fontSize:0};p._textDivs.push(f);const e=T.Util.transform(p._transform,m.transform);let s=Math.atan2(e[1],e[0]);const i=b[m.fontName];i.vertical&&(s+=Math.PI/2);const u=Math.hypot(e[2],e[3]),w=u*d(i.fontFamily,p._isOffscreenCanvasSupported);let o,F;s===0?(o=e[4],F=e[5]-w):(o=e[4]+w*Math.sin(s),F=e[5]-w*Math.cos(s));const X="calc(var(--scale-factor)*",le=f.style;p._container===p._rootContainer?(le.left=`${(100*o/p._pageWidth).toFixed(2)}%`,le.top=`${(100*F/p._pageHeight).toFixed(2)}%`):(le.left=`${X}${o.toFixed(2)}px)`,le.top=`${X}${F.toFixed(2)}px)`),le.fontSize=`${X}${u.toFixed(2)}px)`,le.fontFamily=i.fontFamily,t.fontSize=u,f.setAttribute("role","presentation"),f.textContent=m.str,f.dir=m.dir,p._fontInspectorEnabled&&(f.dataset.fontName=m.fontName),s!==0&&(t.angle=s*(180/Math.PI));let H=!1;if(m.str.length>1)H=!0;else if(m.str!==" "&&m.transform[0]!==m.transform[3]){const Z=Math.abs(m.transform[0]),ae=Math.abs(m.transform[3]);Z!==ae&&Math.max(Z,ae)/Math.min(Z,ae)>1.5&&(H=!0)}H&&(t.canvasWidth=i.vertical?m.height:m.width),p._textDivProperties.set(f,t),p._isReadableStream&&p._layoutText(f)}function C(p){const{div:m,scale:b,properties:f,ctx:t,prevFontSize:e,prevFontFamily:s}=p,{style:i}=m;let u="";if(f.canvasWidth!==0&&f.hasText){const{fontFamily:w}=i,{canvasWidth:o,fontSize:F}=f;(e!==F||s!==w)&&(t.font=`${F*b}px ${w}`,p.prevFontSize=F,p.prevFontFamily=w);const{width:X}=t.measureText(m.textContent);X>0&&(u=`scaleX(${o*b/X})`)}f.angle!==0&&(u=`rotate(${f.angle}deg) ${u}`),u.length>0&&(i.transform=u)}function v(p){if(p._canceled)return;const m=p._textDivs,b=p._capability;if(m.length>ue){b.resolve();return}if(!p._isReadableStream)for(const t of m)p._layoutText(t);b.resolve()}class r{constructor({textContentSource:m,container:b,viewport:f,textDivs:t,textDivProperties:e,textContentItemsStr:s,isOffscreenCanvasSupported:i}){var X;this._textContentSource=m,this._isReadableStream=m instanceof ReadableStream,this._container=this._rootContainer=b,this._textDivs=t||[],this._textContentItemsStr=s||[],this._isOffscreenCanvasSupported=i,this._fontInspectorEnabled=!!((X=globalThis.FontInspector)!=null&&X.enabled),this._reader=null,this._textDivProperties=e||new WeakMap,this._canceled=!1,this._capability=new T.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:f.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:_(0,i)};const{pageWidth:u,pageHeight:w,pageX:o,pageY:F}=f.rawDims;this._transform=[1,0,0,-1,-o,F+w],this._pageWidth=u,this._pageHeight=w,(0,O.setLayerDimensions)(b,f),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new T.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new T.AbortException("TextLayer task cancelled."))}_processItems(m,b){for(const f of m){if(f.str===void 0){if(f.type==="beginMarkedContentProps"||f.type==="beginMarkedContent"){const t=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),f.id!==null&&this._container.setAttribute("id",`${f.id}`),t.append(this._container)}else f.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(f.str),k(this,f,b)}}_layoutText(m){const b=this._layoutTextParams.properties=this._textDivProperties.get(m);if(this._layoutTextParams.div=m,C(this._layoutTextParams),b.hasText&&this._container.append(m),b.hasEOL){const f=document.createElement("br");f.setAttribute("role","presentation"),this._container.append(f)}}_render(){const m=new T.PromiseCapability;let b=Object.create(null);if(this._isReadableStream){const f=()=>{this._reader.read().then(({value:t,done:e})=>{if(e){m.resolve();return}Object.assign(b,t.styles),this._processItems(t.items,b),f()},m.reject)};this._reader=this._textContentSource.getReader(),f()}else if(this._textContentSource){const{items:f,styles:t}=this._textContentSource;this._processItems(f,t),m.resolve()}else throw new Error('No "textContentSource" parameter specified.');m.promise.then(()=>{b=null,v(this)},this._capability.reject)}}P.TextLayerRenderTask=r;function c(p){!p.textContentSource&&(p.textContent||p.textContentStream)&&((0,O.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),p.textContentSource=p.textContent||p.textContentStream);const{container:m,viewport:b}=p,f=getComputedStyle(m),t=f.getPropertyValue("visibility"),e=parseFloat(f.getPropertyValue("--scale-factor"));t==="visible"&&(!e||Math.abs(e-b.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const s=new r(p);return s._render(),s}function a({container:p,viewport:m,textDivs:b,textDivProperties:f,isOffscreenCanvasSupported:t,mustRotate:e=!0,mustRescale:s=!0}){if(e&&(0,O.setLayerDimensions)(p,{rotation:m.rotation}),s){const i=_(0,t),w={prevFontSize:null,prevFontFamily:null,div:null,scale:m.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:i};for(const o of b)w.properties=f.get(o),w.div=o,C(w)}}},(re,P,ee)=>{var _,d,k,C,v,r,c,a,p,Ot,b,Ti,t,Nt,s,Bt;Object.defineProperty(P,"__esModule",{value:!0}),P.AnnotationEditorLayer=void 0;var T=ee(1),O=ee(5),ue=ee(28),G=ee(29),I=ee(6);const u=class u{constructor(o){z(this,p);z(this,b);z(this,t);z(this,s);z(this,_,void 0);z(this,d,!1);z(this,k,this.pointerup.bind(this));z(this,C,this.pointerdown.bind(this));z(this,v,new Map);z(this,r,!1);z(this,c,!1);z(this,a,void 0);u._initialized||(u._initialized=!0,ue.FreeTextEditor.initialize(o.l10n),G.InkEditor.initialize(o.l10n)),o.uiManager.registerEditorTypes([ue.FreeTextEditor,G.InkEditor]),_e(this,a,o.uiManager),this.pageIndex=o.pageIndex,this.div=o.div,_e(this,_,o.accessibilityManager),l(this,a).addLayer(this)}get isEmpty(){return l(this,v).size===0}updateToolbar(o){l(this,a).updateToolbar(o)}updateMode(o=l(this,a).getMode()){K(this,s,Bt).call(this),o===T.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),l(this,a).unselectAll(),o!==T.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",o===T.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",o===T.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(o){if(!o&&l(this,a).getMode()!==T.AnnotationEditorType.INK)return;if(!o){for(const X of l(this,v).values())if(X.isEmpty()){X.setInBackground();return}}K(this,t,Nt).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(o){l(this,a).setEditingState(o)}addCommands(o){l(this,a).addCommands(o)}enable(){this.div.style.pointerEvents="auto";for(const o of l(this,v).values())o.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const o of l(this,v).values())o.disableEditing();K(this,s,Bt).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(o){l(this,a).getActive()!==o&&l(this,a).setActiveEditor(o)}enableClick(){this.div.addEventListener("pointerdown",l(this,C)),this.div.addEventListener("pointerup",l(this,k))}disableClick(){this.div.removeEventListener("pointerdown",l(this,C)),this.div.removeEventListener("pointerup",l(this,k))}attach(o){l(this,v).set(o.id,o)}detach(o){var F;l(this,v).delete(o.id),(F=l(this,_))==null||F.removePointerInTextLayer(o.contentDiv)}remove(o){l(this,a).removeEditor(o),this.detach(o),o.div.style.display="none",setTimeout(()=>{o.div.style.display="",o.div.remove(),o.isAttachedToDOM=!1,document.activeElement===document.body&&l(this,a).focusMainContainer()},0),l(this,c)||this.addInkEditorIfNeeded(!1)}add(o){if(K(this,p,Ot).call(this,o),l(this,a).addEditor(o),this.attach(o),!o.isAttachedToDOM){const F=o.render();this.div.append(F),o.isAttachedToDOM=!0}this.moveEditorInDOM(o),o.onceAdded(),l(this,a).addToAnnotationStorage(o)}moveEditorInDOM(o){var F;(F=l(this,_))==null||F.moveElementInDOM(this.div,o.div,o.contentDiv,!0)}addOrRebuild(o){o.needsToBeRebuilt()?o.rebuild():this.add(o)}addANewEditor(o){const F=()=>{this.addOrRebuild(o)},X=()=>{o.remove()};this.addCommands({cmd:F,undo:X,mustExec:!0})}addUndoableEditor(o){const F=()=>{this.addOrRebuild(o)},X=()=>{o.remove()};this.addCommands({cmd:F,undo:X,mustExec:!1})}getNextId(){return l(this,a).getId()}deserialize(o){switch(o.annotationType){case T.AnnotationEditorType.FREETEXT:return ue.FreeTextEditor.deserialize(o,this,l(this,a));case T.AnnotationEditorType.INK:return G.InkEditor.deserialize(o,this,l(this,a))}return null}setSelected(o){l(this,a).setSelected(o)}toggleSelected(o){l(this,a).toggleSelected(o)}isSelected(o){return l(this,a).isSelected(o)}unselect(o){l(this,a).unselect(o)}pointerup(o){const{isMac:F}=T.FeatureTest.platform;if(!(o.button!==0||o.ctrlKey&&F)&&o.target===this.div&&l(this,r)){if(_e(this,r,!1),!l(this,d)){_e(this,d,!0);return}K(this,t,Nt).call(this,o)}}pointerdown(o){const{isMac:F}=T.FeatureTest.platform;if(o.button!==0||o.ctrlKey&&F||o.target!==this.div)return;_e(this,r,!0);const X=l(this,a).getActive();_e(this,d,!X||X.isEmpty())}drop(o){const F=o.dataTransfer.getData("text/plain"),X=l(this,a).getEditor(F);if(!X)return;o.preventDefault(),o.dataTransfer.dropEffect="move",K(this,p,Ot).call(this,X);const le=this.div.getBoundingClientRect(),H=o.clientX-le.x,Z=o.clientY-le.y;X.translate(H-X.startX,Z-X.startY),this.moveEditorInDOM(X),X.div.focus()}dragover(o){o.preventDefault()}destroy(){var o,F;((o=l(this,a).getActive())==null?void 0:o.parent)===this&&l(this,a).setActiveEditor(null);for(const X of l(this,v).values())(F=l(this,_))==null||F.removePointerInTextLayer(X.contentDiv),X.setParent(null),X.isAttachedToDOM=!1,X.div.remove();this.div=null,l(this,v).clear(),l(this,a).removeLayer(this)}render({viewport:o}){this.viewport=o,(0,I.setLayerDimensions)(this.div,o),(0,O.bindEvents)(this,this.div,["dragover","drop"]);for(const F of l(this,a).getEditors(this.pageIndex))this.add(F);this.updateMode()}update({viewport:o}){l(this,a).commitOrRemove(),this.viewport=o,(0,I.setLayerDimensions)(this.div,{rotation:o.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:o,pageHeight:F}=this.viewport.rawDims;return[o,F]}};_=new WeakMap,d=new WeakMap,k=new WeakMap,C=new WeakMap,v=new WeakMap,r=new WeakMap,c=new WeakMap,a=new WeakMap,p=new WeakSet,Ot=function(o){var F;o.parent!==this&&(this.attach(o),(F=o.parent)==null||F.detach(o),o.setParent(this),o.div&&o.isAttachedToDOM&&(o.div.remove(),this.div.append(o.div)))},b=new WeakSet,Ti=function(o){switch(l(this,a).getMode()){case T.AnnotationEditorType.FREETEXT:return new ue.FreeTextEditor(o);case T.AnnotationEditorType.INK:return new G.InkEditor(o)}return null},t=new WeakSet,Nt=function(o){const F=this.getNextId(),X=K(this,b,Ti).call(this,{parent:this,id:F,x:o.offsetX,y:o.offsetY,uiManager:l(this,a)});return X&&this.add(X),X},s=new WeakSet,Bt=function(){_e(this,c,!0);for(const o of l(this,v).values())o.isEmpty()&&o.remove();_e(this,c,!1)},He(u,"_initialized",!1);let D=u;P.AnnotationEditorLayer=D},(re,P,ee)=>{var I,D,_,d,k,C,v,r,c,a,xi,m,Mi,f,Ri,e,Vt;Object.defineProperty(P,"__esModule",{value:!0}),P.FreeTextEditor=void 0;var T=ee(1),O=ee(5),ue=ee(4);const i=class i extends ue.AnnotationEditor{constructor(o){super({...o,name:"freeTextEditor"});z(this,a);z(this,m);z(this,f);z(this,e);z(this,I,this.editorDivBlur.bind(this));z(this,D,this.editorDivFocus.bind(this));z(this,_,this.editorDivInput.bind(this));z(this,d,this.editorDivKeydown.bind(this));z(this,k,void 0);z(this,C,"");z(this,v,`${this.id}-editor`);z(this,r,!1);z(this,c,void 0);_e(this,k,o.color||i._defaultColor||ue.AnnotationEditor._defaultLineColor),_e(this,c,o.fontSize||i._defaultFontSize)}static initialize(o){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(X=>[X,o.get(X)]));const F=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(F.getPropertyValue("--freetext-padding"))}static updateDefaultParams(o,F){switch(o){case T.AnnotationEditorParamsType.FREETEXT_SIZE:i._defaultFontSize=F;break;case T.AnnotationEditorParamsType.FREETEXT_COLOR:i._defaultColor=F;break}}updateParams(o,F){switch(o){case T.AnnotationEditorParamsType.FREETEXT_SIZE:K(this,a,xi).call(this,F);break;case T.AnnotationEditorParamsType.FREETEXT_COLOR:K(this,m,Mi).call(this,F);break}}static get defaultPropertiesToUpdate(){return[[T.AnnotationEditorParamsType.FREETEXT_SIZE,i._defaultFontSize],[T.AnnotationEditorParamsType.FREETEXT_COLOR,i._defaultColor||ue.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[T.AnnotationEditorParamsType.FREETEXT_SIZE,l(this,c)],[T.AnnotationEditorParamsType.FREETEXT_COLOR,l(this,k)]]}getInitialTranslation(){const o=this.parentScale;return[-i._internalPadding*o,-(i._internalPadding+l(this,c))*o]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(T.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",l(this,d)),this.editorDiv.addEventListener("focus",l(this,D)),this.editorDiv.addEventListener("blur",l(this,I)),this.editorDiv.addEventListener("input",l(this,_)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,v)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",l(this,d)),this.editorDiv.removeEventListener("focus",l(this,D)),this.editorDiv.removeEventListener("blur",l(this,I)),this.editorDiv.removeEventListener("input",l(this,_)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(o){super.focusin(o),o.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){this.isInEditMode()&&(super.commit(),l(this,r)||(_e(this,r,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),_e(this,C,K(this,f,Ri).call(this).trimEnd()),K(this,e,Vt).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(o){this.enableEditMode(),this.editorDiv.focus()}keydown(o){o.target===this.div&&o.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(o){i._keyboardManager.exec(this,o)}editorDivFocus(o){this.isEditing=!0}editorDivBlur(o){this.isEditing=!1}editorDivInput(o){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let o,F;this.width&&(o=this.x,F=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,v)),this.enableEditing(),i._l10nPromise.get("editor_free_text2_aria_label").then(le=>{var H;return(H=this.editorDiv)==null?void 0:H.setAttribute("aria-label",le)}),i._l10nPromise.get("free_text2_default_content").then(le=>{var H;return(H=this.editorDiv)==null?void 0:H.setAttribute("default-content",le)}),this.editorDiv.contentEditable=!0;const{style:X}=this.editorDiv;if(X.fontSize=`calc(${l(this,c)}px * var(--scale-factor))`,X.color=l(this,k),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,O.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[le,H]=this.parentDimensions;this.setAt(o*le,F*H,this.width*le,this.height*H);for(const Z of l(this,C).split(`
`)){const ae=document.createElement("div");ae.append(Z?document.createTextNode(Z):document.createElement("br")),this.editorDiv.append(ae)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(o,F,X){const le=super.deserialize(o,F,X);return _e(le,c,o.fontSize),_e(le,k,T.Util.makeHexColor(...o.color)),_e(le,C,o.value),le}serialize(){if(this.isEmpty())return null;const o=i._internalPadding*this.parentScale,F=this.getRect(o,o),X=ue.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,k));return{annotationType:T.AnnotationEditorType.FREETEXT,color:X,fontSize:l(this,c),value:l(this,C),pageIndex:this.pageIndex,rect:F,rotation:this.rotation}}};I=new WeakMap,D=new WeakMap,_=new WeakMap,d=new WeakMap,k=new WeakMap,C=new WeakMap,v=new WeakMap,r=new WeakMap,c=new WeakMap,a=new WeakSet,xi=function(o){const F=le=>{this.editorDiv.style.fontSize=`calc(${le}px * var(--scale-factor))`,this.translate(0,-(le-l(this,c))*this.parentScale),_e(this,c,le),K(this,e,Vt).call(this)},X=l(this,c);this.addCommands({cmd:()=>{F(o)},undo:()=>{F(X)},mustExec:!0,type:T.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},m=new WeakSet,Mi=function(o){const F=l(this,k);this.addCommands({cmd:()=>{_e(this,k,this.editorDiv.style.color=o)},undo:()=>{_e(this,k,this.editorDiv.style.color=F)},mustExec:!0,type:T.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},f=new WeakSet,Ri=function(){const o=this.editorDiv.getElementsByTagName("div");if(o.length===0)return this.editorDiv.innerText;const F=[];for(const X of o)F.push(X.innerText.replace(/\r\n?|\n/,""));return F.join(`
`)},e=new WeakSet,Vt=function(){const[o,F]=this.parentDimensions;let X;if(this.isAttachedToDOM)X=this.div.getBoundingClientRect();else{const{currentLayer:le,div:H}=this,Z=H.style.display;H.style.display="hidden",le.div.append(this.div),X=H.getBoundingClientRect(),H.remove(),H.style.display=Z}this.width=X.width/o,this.height=X.height/F},He(i,"_freeTextDefaultContent",""),He(i,"_l10nPromise"),He(i,"_internalPadding",0),He(i,"_defaultColor",null),He(i,"_defaultFontSize",10),He(i,"_keyboardManager",new O.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],i.prototype.commitOrRemove]])),He(i,"_type","freetext");let G=i;P.FreeTextEditor=G},(re,P,ee)=>{var _,d,k,C,v,r,c,a,p,m,b,f,t,e,s,ki,u,Li,o,Fi,X,Ii,H,Ut,ae,Di,ge,Oi,Y,Ni,Ee,Qe,y,jt,L,bt,j,vt,U,rt,V,Ht,h,yt,M,Wt,W,Bi,N,Vi,ce,Ui,de,zt,ve,At,Pe,at,oe,$t;Object.defineProperty(P,"__esModule",{value:!0}),P.InkEditor=void 0,Object.defineProperty(P,"fitCurve",{enumerable:!0,get:function(){return ue.fitCurve}});var T=ee(1),O=ee(4),ue=ee(30),G=ee(5);const I=16,Me=class Me extends O.AnnotationEditor{constructor(g){super({...g,name:"inkEditor"});z(this,s);z(this,u);z(this,o);z(this,X);z(this,H);z(this,ae);z(this,ge);z(this,Y);z(this,Ee);z(this,y);z(this,L);z(this,j);z(this,U);z(this,V);z(this,h);z(this,W);z(this,N);z(this,ce);z(this,de);z(this,ve);z(this,Pe);z(this,oe);z(this,_,0);z(this,d,0);z(this,k,0);z(this,C,this.canvasPointermove.bind(this));z(this,v,this.canvasPointerleave.bind(this));z(this,r,this.canvasPointerup.bind(this));z(this,c,this.canvasPointerdown.bind(this));z(this,a,!1);z(this,p,!1);z(this,m,null);z(this,b,null);z(this,f,0);z(this,t,0);z(this,e,null);this.color=g.color||null,this.thickness=g.thickness||null,this.opacity=g.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(g){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(x=>[x,g.get(x)]))}static updateDefaultParams(g,x){switch(g){case T.AnnotationEditorParamsType.INK_THICKNESS:Me._defaultThickness=x;break;case T.AnnotationEditorParamsType.INK_COLOR:Me._defaultColor=x;break;case T.AnnotationEditorParamsType.INK_OPACITY:Me._defaultOpacity=x/100;break}}updateParams(g,x){switch(g){case T.AnnotationEditorParamsType.INK_THICKNESS:K(this,s,ki).call(this,x);break;case T.AnnotationEditorParamsType.INK_COLOR:K(this,u,Li).call(this,x);break;case T.AnnotationEditorParamsType.INK_OPACITY:K(this,o,Fi).call(this,x);break}}static get defaultPropertiesToUpdate(){return[[T.AnnotationEditorParamsType.INK_THICKNESS,Me._defaultThickness],[T.AnnotationEditorParamsType.INK_COLOR,Me._defaultColor||O.AnnotationEditor._defaultLineColor],[T.AnnotationEditorParamsType.INK_OPACITY,Math.round(Me._defaultOpacity*100)]]}get propertiesToUpdate(){return[[T.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Me._defaultThickness],[T.AnnotationEditorParamsType.INK_COLOR,this.color||Me._defaultColor||O.AnnotationEditor._defaultLineColor],[T.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Me._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(K(this,L,bt).call(this),K(this,j,vt).call(this)),this.isAttachedToDOM||(this.parent.add(this),K(this,U,rt).call(this)),K(this,Pe,at).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,l(this,b).disconnect(),_e(this,b,null),super.remove())}setParent(g){!this.parent&&g?this._uiManager.removeShouldRescale(this):this.parent&&g===null&&this._uiManager.addShouldRescale(this),super.setParent(g)}onScaleChanging(){const[g,x]=this.parentDimensions,te=this.width*g,fe=this.height*x;this.setDimensions(te,fe)}enableEditMode(){l(this,a)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",l(this,c)),this.canvas.addEventListener("pointerup",l(this,r)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",l(this,c)),this.canvas.removeEventListener("pointerup",l(this,r)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){l(this,a)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),_e(this,a,!0),this.div.classList.add("disabled"),K(this,Pe,at).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(g){super.focusin(g),this.enableEditMode()}canvasPointerdown(g){g.button!==0||!this.isInEditMode()||l(this,a)||(this.setInForeground(),g.type!=="mouse"&&this.div.focus(),g.stopPropagation(),this.canvas.addEventListener("pointerleave",l(this,v)),this.canvas.addEventListener("pointermove",l(this,C)),K(this,ae,Di).call(this,g.offsetX,g.offsetY))}canvasPointermove(g){g.stopPropagation(),K(this,ge,Oi).call(this,g.offsetX,g.offsetY)}canvasPointerup(g){g.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(g.stopPropagation(),K(this,y,jt).call(this,g),this.setInBackground())}canvasPointerleave(g){K(this,y,jt).call(this,g),this.setInBackground()}render(){if(this.div)return this.div;let g,x;this.width&&(g=this.x,x=this.y),super.render(),Me._l10nPromise.get("editor_ink2_aria_label").then(pe=>{var Ae;return(Ae=this.div)==null?void 0:Ae.setAttribute("aria-label",pe)});const[te,fe,se,he]=K(this,X,Ii).call(this);if(this.setAt(te,fe,0,0),this.setDims(se,he),K(this,L,bt).call(this),this.width){const[pe,Ae]=this.parentDimensions;this.setAt(g*pe,x*Ae,this.width*pe,this.height*Ae),_e(this,p,!0),K(this,U,rt).call(this),this.setDims(this.width*pe,this.height*Ae),K(this,Ee,Qe).call(this),K(this,oe,$t).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return K(this,j,vt).call(this),this.div}setDimensions(g,x){const te=Math.round(g),fe=Math.round(x);if(l(this,f)===te&&l(this,t)===fe)return;_e(this,f,te),_e(this,t,fe),this.canvas.style.visibility="hidden",l(this,_)&&Math.abs(l(this,_)-g/x)>.01&&(x=Math.ceil(g/l(this,_)),this.setDims(g,x));const[se,he]=this.parentDimensions;this.width=g/se,this.height=x/he,l(this,a)&&K(this,V,Ht).call(this,g,x),K(this,U,rt).call(this),K(this,Ee,Qe).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(g,x,te){var Ie,Le;const fe=super.deserialize(g,x,te);fe.thickness=g.thickness,fe.color=T.Util.makeHexColor(...g.color),fe.opacity=g.opacity;const[se,he]=fe.pageDimensions,pe=fe.width*se,Ae=fe.height*he,Te=fe.parentScale,Se=g.thickness/2;_e(fe,_,pe/Ae),_e(fe,a,!0),_e(fe,f,Math.round(pe)),_e(fe,t,Math.round(Ae));for(const{bezier:ke}of g.paths){const Ne=[];fe.paths.push(Ne);let Ve=Te*(ke[0]-Se),De=Te*(Ae-ke[1]-Se);for(let Be=2,Ue=ke.length;Be<Ue;Be+=6){const We=Te*(ke[Be]-Se),Ge=Te*(Ae-ke[Be+1]-Se),Ye=Te*(ke[Be+2]-Se),it=Te*(Ae-ke[Be+3]-Se),pt=Te*(ke[Be+4]-Se),$e=Te*(Ae-ke[Be+5]-Se);Ne.push([[Ve,De],[We,Ge],[Ye,it],[pt,$e]]),Ve=pt,De=$e}const je=K(this,M,Wt).call(this,Ne);fe.bezierPath2D.push(je)}const Fe=K(Ie=fe,de,zt).call(Ie);return _e(fe,k,Math.max(I,Fe[2]-Fe[0])),_e(fe,d,Math.max(I,Fe[3]-Fe[1])),K(Le=fe,V,Ht).call(Le,pe,Ae),fe}serialize(){if(this.isEmpty())return null;const g=this.getRect(0,0),x=this.rotation%180===0?g[3]-g[1]:g[2]-g[0],te=O.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:T.AnnotationEditorType.INK,color:te,thickness:this.thickness,opacity:this.opacity,paths:K(this,W,Bi).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,x),pageIndex:this.pageIndex,rect:g,rotation:this.rotation}}};_=new WeakMap,d=new WeakMap,k=new WeakMap,C=new WeakMap,v=new WeakMap,r=new WeakMap,c=new WeakMap,a=new WeakMap,p=new WeakMap,m=new WeakMap,b=new WeakMap,f=new WeakMap,t=new WeakMap,e=new WeakMap,s=new WeakSet,ki=function(g){const x=this.thickness;this.addCommands({cmd:()=>{this.thickness=g,K(this,Pe,at).call(this)},undo:()=>{this.thickness=x,K(this,Pe,at).call(this)},mustExec:!0,type:T.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},u=new WeakSet,Li=function(g){const x=this.color;this.addCommands({cmd:()=>{this.color=g,K(this,Ee,Qe).call(this)},undo:()=>{this.color=x,K(this,Ee,Qe).call(this)},mustExec:!0,type:T.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},o=new WeakSet,Fi=function(g){g/=100;const x=this.opacity;this.addCommands({cmd:()=>{this.opacity=g,K(this,Ee,Qe).call(this)},undo:()=>{this.opacity=x,K(this,Ee,Qe).call(this)},mustExec:!0,type:T.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},X=new WeakSet,Ii=function(){const{parentRotation:g,parentDimensions:[x,te]}=this;switch(g){case 90:return[0,te,te,x];case 180:return[x,te,x,te];case 270:return[x,0,te,x];default:return[0,0,x,te]}},H=new WeakSet,Ut=function(){const{ctx:g,color:x,opacity:te,thickness:fe,parentScale:se,scaleFactor:he}=this;g.lineWidth=fe*se/he,g.lineCap="round",g.lineJoin="round",g.miterLimit=10,g.strokeStyle=`${x}${(0,G.opacityToHex)(te)}`},ae=new WeakSet,Di=function(g,x){this.isEditing=!0,l(this,p)||(_e(this,p,!0),K(this,U,rt).call(this),this.thickness||(this.thickness=Me._defaultThickness),this.color||(this.color=Me._defaultColor||O.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Me._defaultOpacity)),this.currentPath.push([g,x]),_e(this,m,null),K(this,H,Ut).call(this),this.ctx.beginPath(),this.ctx.moveTo(g,x),_e(this,e,()=>{l(this,e)&&(l(this,m)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):K(this,Ee,Qe).call(this),this.ctx.lineTo(...l(this,m)),_e(this,m,null),this.ctx.stroke()),window.requestAnimationFrame(l(this,e)))}),window.requestAnimationFrame(l(this,e))},ge=new WeakSet,Oi=function(g,x){const[te,fe]=this.currentPath.at(-1);g===te&&x===fe||(this.currentPath.push([g,x]),_e(this,m,[g,x]))},Y=new WeakSet,Ni=function(g,x){var Te;this.ctx.closePath(),_e(this,e,null),g=Math.min(Math.max(g,0),this.canvas.width),x=Math.min(Math.max(x,0),this.canvas.height);const[te,fe]=this.currentPath.at(-1);(g!==te||x!==fe)&&this.currentPath.push([g,x]);let se;if(this.currentPath.length!==1)se=(0,ue.fitCurve)(this.currentPath,30,null);else{const Se=[g,x];se=[[Se,Se.slice(),Se.slice(),Se]]}const he=K(Te=Me,M,Wt).call(Te,se);this.currentPath.length=0;const pe=()=>{this.paths.push(se),this.bezierPath2D.push(he),this.rebuild()},Ae=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(K(this,L,bt).call(this),K(this,j,vt).call(this)),K(this,Pe,at).call(this))};this.addCommands({cmd:pe,undo:Ae,mustExec:!0})},Ee=new WeakSet,Qe=function(){if(this.isEmpty()){K(this,h,yt).call(this);return}K(this,H,Ut).call(this);const{canvas:g,ctx:x}=this;x.setTransform(1,0,0,1,0,0),x.clearRect(0,0,g.width,g.height),K(this,h,yt).call(this);for(const te of this.bezierPath2D)x.stroke(te)},y=new WeakSet,jt=function(g){K(this,Y,Ni).call(this,g.offsetX,g.offsetY),this.canvas.removeEventListener("pointerleave",l(this,v)),this.canvas.removeEventListener("pointermove",l(this,C)),this.addToAnnotationStorage()},L=new WeakSet,bt=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Me._l10nPromise.get("editor_ink_canvas_aria_label").then(g=>{var x;return(x=this.canvas)==null?void 0:x.setAttribute("aria-label",g)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},j=new WeakSet,vt=function(){_e(this,b,new ResizeObserver(g=>{const x=g[0].contentRect;x.width&&x.height&&this.setDimensions(x.width,x.height)})),l(this,b).observe(this.div)},U=new WeakSet,rt=function(){if(!l(this,p))return;const[g,x]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*g),this.canvas.height=Math.ceil(this.height*x),K(this,h,yt).call(this)},V=new WeakSet,Ht=function(g,x){const te=K(this,ve,At).call(this),fe=(g-te)/l(this,k),se=(x-te)/l(this,d);this.scaleFactor=Math.min(fe,se)},h=new WeakSet,yt=function(){const g=K(this,ve,At).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+g,this.translationY*this.scaleFactor+g)},M=new WeakSet,Wt=function(g){const x=new Path2D;for(let te=0,fe=g.length;te<fe;te++){const[se,he,pe,Ae]=g[te];te===0&&x.moveTo(...se),x.bezierCurveTo(he[0],he[1],pe[0],pe[1],Ae[0],Ae[1])}return x},W=new WeakSet,Bi=function(g,x,te,fe){const he=[],pe=this.thickness/2;let Ae,Te;for(const Se of this.paths){Ae=[],Te=[];for(let Fe=0,Ie=Se.length;Fe<Ie;Fe++){const[Le,ke,Ne,Ve]=Se[Fe],De=g*(Le[0]+x)+pe,je=fe-g*(Le[1]+te)-pe,Be=g*(ke[0]+x)+pe,Ue=fe-g*(ke[1]+te)-pe,We=g*(Ne[0]+x)+pe,Ge=fe-g*(Ne[1]+te)-pe,Ye=g*(Ve[0]+x)+pe,it=fe-g*(Ve[1]+te)-pe;Fe===0&&(Ae.push(De,je),Te.push(De,je)),Ae.push(Be,Ue,We,Ge,Ye,it),K(this,N,Vi).call(this,De,je,Be,Ue,We,Ge,Ye,it,4,Te)}he.push({bezier:Ae,points:Te})}return he},N=new WeakSet,Vi=function(g,x,te,fe,se,he,pe,Ae,Te,Se){if(K(this,ce,Ui).call(this,g,x,te,fe,se,he,pe,Ae)){Se.push(pe,Ae);return}for(let Fe=1;Fe<Te-1;Fe++){const Ie=Fe/Te,Le=1-Ie;let ke=Ie*g+Le*te,Ne=Ie*x+Le*fe,Ve=Ie*te+Le*se,De=Ie*fe+Le*he;const je=Ie*se+Le*pe,Be=Ie*he+Le*Ae;ke=Ie*ke+Le*Ve,Ne=Ie*Ne+Le*De,Ve=Ie*Ve+Le*je,De=Ie*De+Le*Be,ke=Ie*ke+Le*Ve,Ne=Ie*Ne+Le*De,Se.push(ke,Ne)}Se.push(pe,Ae)},ce=new WeakSet,Ui=function(g,x,te,fe,se,he,pe,Ae){const Se=(3*te-2*g-pe)**2,Fe=(3*fe-2*x-Ae)**2,Ie=(3*se-g-2*pe)**2,Le=(3*he-x-2*Ae)**2;return Math.max(Se,Ie)+Math.max(Fe,Le)<=10},de=new WeakSet,zt=function(){let g=1/0,x=-1/0,te=1/0,fe=-1/0;for(const se of this.paths)for(const[he,pe,Ae,Te]of se){const Se=T.Util.bezierBoundingBox(...he,...pe,...Ae,...Te);g=Math.min(g,Se[0]),te=Math.min(te,Se[1]),x=Math.max(x,Se[2]),fe=Math.max(fe,Se[3])}return[g,te,x,fe]},ve=new WeakSet,At=function(){return l(this,a)?Math.ceil(this.thickness*this.parentScale):0},Pe=new WeakSet,at=function(g=!1){if(this.isEmpty())return;if(!l(this,a)){K(this,Ee,Qe).call(this);return}const x=K(this,de,zt).call(this),te=K(this,ve,At).call(this);_e(this,k,Math.max(I,x[2]-x[0])),_e(this,d,Math.max(I,x[3]-x[1]));const fe=Math.ceil(te+l(this,k)*this.scaleFactor),se=Math.ceil(te+l(this,d)*this.scaleFactor),[he,pe]=this.parentDimensions;this.width=fe/he,this.height=se/pe,_e(this,_,fe/se),K(this,oe,$t).call(this);const Ae=this.translationX,Te=this.translationY;this.translationX=-x[0],this.translationY=-x[1],K(this,U,rt).call(this),K(this,Ee,Qe).call(this),_e(this,f,fe),_e(this,t,se),this.setDims(fe,se);const Se=g?te/this.scaleFactor/2:0;this.translate(Ae-this.translationX-Se,Te-this.translationY-Se)},oe=new WeakSet,$t=function(){const{style:g}=this.div;l(this,_)>=1?(g.minHeight=`${I}px`,g.minWidth=`${Math.round(l(this,_)*I)}px`):(g.minWidth=`${I}px`,g.minHeight=`${Math.round(I/l(this,_))}px`)},z(Me,M),He(Me,"_defaultColor",null),He(Me,"_defaultOpacity",1),He(Me,"_defaultThickness",1),He(Me,"_l10nPromise"),He(Me,"_type","ink");let D=Me;P.InkEditor=D},(re,P,ee)=>{Object.defineProperty(P,"__esModule",{value:!0}),P.fitCurve=void 0;const T=ee(31);P.fitCurve=T},re=>{function P(r,c,a){if(!Array.isArray(r))throw new TypeError("First argument should be an array");if(r.forEach(f=>{if(!Array.isArray(f)||f.some(t=>typeof t!="number")||f.length!==r[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),r=r.filter((f,t)=>t===0||!f.every((e,s)=>e===r[t-1][s])),r.length<2)return[];const p=r.length,m=k(r[1],r[0]),b=k(r[p-2],r[p-1]);return ee(r,m,b,c,a)}function ee(r,c,a,p,m){var f,t,e,s,i,u,w,o,F,X,le,H,Z;if(r.length===2)return H=C.vectorLen(C.subtract(r[0],r[1]))/3,f=[r[0],C.addArrays(r[0],C.mulItems(c,H)),C.addArrays(r[1],C.mulItems(a,H)),r[1]],[f];if(t=I(r),[f,s,u]=T(r,t,t,c,a,m),s===0||s<p)return[f];if(s<p*p)for(e=t,i=s,w=u,Z=0;Z<20;Z++){if(e=ue(f,r,e),[f,s,u]=T(r,t,e,c,a,m),s<p)return[f];if(u===w){let ae=s/i;if(ae>.9999&&ae<1.0001)break}i=s,w=u}return le=[],o=C.subtract(r[u-1],r[u+1]),o.every(ae=>ae===0)&&(o=C.subtract(r[u-1],r[u]),[o[0],o[1]]=[-o[1],o[0]]),F=C.normalize(o),X=C.mulItems(F,-1),le=le.concat(ee(r.slice(0,u+1),c,F,p,m)),le=le.concat(ee(r.slice(u),X,a,p,m)),le}function T(r,c,a,p,m,b){var f,t,e;return f=O(r,a,p,m),[t,e]=D(r,f,c),b&&b({bez:f,points:r,params:c,maxErr:t,maxPoint:e}),[f,t,e]}function O(r,c,a,p){var m,b,f,t,e,s,i,u,w,o,F,X,le,H,Z,ae,J,ge=r[0],ye=r[r.length-1];for(m=[ge,null,null,ye],b=C.zeros_Xx2x2(c.length),le=0,H=c.length;le<H;le++)ae=c[le],J=1-ae,f=b[le],f[0]=C.mulItems(a,3*ae*(J*J)),f[1]=C.mulItems(p,3*J*(ae*ae));for(t=[[0,0],[0,0]],e=[0,0],le=0,H=r.length;le<H;le++)ae=c[le],f=b[le],t[0][0]+=C.dot(f[0],f[0]),t[0][1]+=C.dot(f[0],f[1]),t[1][0]+=C.dot(f[0],f[1]),t[1][1]+=C.dot(f[1],f[1]),Z=C.subtract(r[le],v.q([ge,ge,ye,ye],ae)),e[0]+=C.dot(f[0],Z),e[1]+=C.dot(f[1],Z);return s=t[0][0]*t[1][1]-t[1][0]*t[0][1],i=t[0][0]*e[1]-t[1][0]*e[0],u=e[0]*t[1][1]-e[1]*t[0][1],w=s===0?0:u/s,o=s===0?0:i/s,X=C.vectorLen(C.subtract(ge,ye)),F=1e-6*X,w<F||o<F?(m[1]=C.addArrays(ge,C.mulItems(a,X/3)),m[2]=C.addArrays(ye,C.mulItems(p,X/3))):(m[1]=C.addArrays(ge,C.mulItems(a,w)),m[2]=C.addArrays(ye,C.mulItems(p,o))),m}function ue(r,c,a){return a.map((p,m)=>G(r,c[m],p))}function G(r,c,a){var p=C.subtract(v.q(r,a),c),m=v.qprime(r,a),b=C.mulMatrix(p,m),f=C.sum(C.squareItems(m))+2*C.mulMatrix(p,v.qprimeprime(r,a));return f===0?a:a-b/f}function I(r){var c=[],a,p,m;return r.forEach((b,f)=>{a=f?p+C.vectorLen(C.subtract(b,m)):0,c.push(a),p=a,m=b}),c=c.map(b=>b/p),c}function D(r,c,a){var p,m,b,f,t,e,s,i;m=0,b=Math.floor(r.length/2);const u=_(c,10);for(t=0,e=r.length;t<e;t++)s=r[t],i=d(c,a[t],u,10),f=C.subtract(v.q(c,i),s),p=f[0]*f[0]+f[1]*f[1],p>m&&(m=p,b=t);return[m,b]}var _=function(r,c){for(var a,p=[0],m=r[0],b=0,f=1;f<=c;f++)a=v.q(r,f/c),b+=C.vectorLen(C.subtract(a,m)),p.push(b),m=a;return p=p.map(t=>t/b),p};function d(r,c,a,p){if(c<0)return 0;if(c>1)return 1;for(var m,b,f,t,e,s=1;s<=p;s++)if(c<=a[s]){t=(s-1)/p,f=s/p,b=a[s-1],m=a[s],e=(c-b)/(m-b)*(f-t)+t;break}return e}function k(r,c){return C.normalize(C.subtract(r,c))}class C{static zeros_Xx2x2(c){for(var a=[];c--;)a.push([0,0]);return a}static mulItems(c,a){return c.map(p=>p*a)}static mulMatrix(c,a){return c.reduce((p,m,b)=>p+m*a[b],0)}static subtract(c,a){return c.map((p,m)=>p-a[m])}static addArrays(c,a){return c.map((p,m)=>p+a[m])}static addItems(c,a){return c.map(p=>p+a)}static sum(c){return c.reduce((a,p)=>a+p)}static dot(c,a){return C.mulMatrix(c,a)}static vectorLen(c){return Math.hypot(...c)}static divItems(c,a){return c.map(p=>p/a)}static squareItems(c){return c.map(a=>a*a)}static normalize(c){return this.divItems(c,this.vectorLen(c))}}class v{static q(c,a){var p=1-a,m=C.mulItems(c[0],p*p*p),b=C.mulItems(c[1],3*p*p*a),f=C.mulItems(c[2],3*p*a*a),t=C.mulItems(c[3],a*a*a);return C.addArrays(C.addArrays(m,b),C.addArrays(f,t))}static qprime(c,a){var p=1-a,m=C.mulItems(C.subtract(c[1],c[0]),3*p*p),b=C.mulItems(C.subtract(c[2],c[1]),6*p*a),f=C.mulItems(C.subtract(c[3],c[2]),3*a*a);return C.addArrays(C.addArrays(m,b),f)}static qprimeprime(c,a){return C.addArrays(C.mulItems(C.addArrays(C.subtract(c[2],C.mulItems(c[1],2)),c[0]),6*(1-a)),C.mulItems(C.addArrays(C.subtract(c[3],C.mulItems(c[2],2)),c[1]),6*a))}}re.exports=P,re.exports.fitCubic=ee,re.exports.createTangent=k},(re,P,ee)=>{var Ee,tt,y,ji,q,Gt,ne,Xt;Object.defineProperty(P,"__esModule",{value:!0}),P.AnnotationLayer=void 0;var T=ee(1),O=ee(6),ue=ee(3),G=ee(33),I=ee(34);const D=1e3,_=9,d=new WeakSet;function k(V){return{width:V[2]-V[0],height:V[3]-V[1]}}class C{static create(n){switch(n.data.annotationType){case T.AnnotationType.LINK:return new r(n);case T.AnnotationType.TEXT:return new c(n);case T.AnnotationType.WIDGET:switch(n.data.fieldType){case"Tx":return new p(n);case"Btn":return n.data.radioButton?new b(n):n.data.checkBox?new m(n):new f(n);case"Ch":return new t(n)}return new a(n);case T.AnnotationType.POPUP:return new e(n);case T.AnnotationType.FREETEXT:return new i(n);case T.AnnotationType.LINE:return new u(n);case T.AnnotationType.SQUARE:return new w(n);case T.AnnotationType.CIRCLE:return new o(n);case T.AnnotationType.POLYLINE:return new F(n);case T.AnnotationType.CARET:return new le(n);case T.AnnotationType.INK:return new H(n);case T.AnnotationType.POLYGON:return new X(n);case T.AnnotationType.HIGHLIGHT:return new Z(n);case T.AnnotationType.UNDERLINE:return new ae(n);case T.AnnotationType.SQUIGGLY:return new J(n);case T.AnnotationType.STRIKEOUT:return new ge(n);case T.AnnotationType.STAMP:return new ye(n);case T.AnnotationType.FILEATTACHMENT:return new Y(n);default:return new v(n)}}}class v{constructor(n,{isRenderable:h=!1,ignoreBorder:A=!1,createQuadrilaterals:M=!1}={}){this.isRenderable=h,this.data=n.data,this.layer=n.layer,this.page=n.page,this.viewport=n.viewport,this.linkService=n.linkService,this.downloadManager=n.downloadManager,this.imageResourcesPath=n.imageResourcesPath,this.renderForms=n.renderForms,this.svgFactory=n.svgFactory,this.annotationStorage=n.annotationStorage,this.enableScripting=n.enableScripting,this.hasJSActions=n.hasJSActions,this._fieldObjects=n.fieldObjects,h&&(this.container=this._createContainer(A)),M&&(this.quadrilaterals=this._createQuadrilaterals(A))}_createContainer(n=!1){const{data:h,page:A,viewport:M}=this,R=document.createElement("section");R.setAttribute("data-annotation-id",h.id),h.noRotate&&R.classList.add("norotate");const{pageWidth:W,pageHeight:me,pageX:N,pageY:$}=M.rawDims,{width:ce,height:ie}=k(h.rect),de=T.Util.normalizeRect([h.rect[0],A.view[3]-h.rect[1]+A.view[1],h.rect[2],A.view[3]-h.rect[3]+A.view[1]]);if(!n&&h.borderStyle.width>0){R.style.borderWidth=`${h.borderStyle.width}px`;const ve=h.borderStyle.horizontalCornerRadius,xe=h.borderStyle.verticalCornerRadius;if(ve>0||xe>0){const Re=`calc(${ve}px * var(--scale-factor)) / calc(${xe}px * var(--scale-factor))`;R.style.borderRadius=Re}else if(this instanceof b){const Re=`calc(${ce}px * var(--scale-factor)) / calc(${ie}px * var(--scale-factor))`;R.style.borderRadius=Re}switch(h.borderStyle.style){case T.AnnotationBorderStyleType.SOLID:R.style.borderStyle="solid";break;case T.AnnotationBorderStyleType.DASHED:R.style.borderStyle="dashed";break;case T.AnnotationBorderStyleType.BEVELED:(0,T.warn)("Unimplemented border style: beveled");break;case T.AnnotationBorderStyleType.INSET:(0,T.warn)("Unimplemented border style: inset");break;case T.AnnotationBorderStyleType.UNDERLINE:R.style.borderBottomStyle="solid";break}const Pe=h.borderColor||null;Pe?R.style.borderColor=T.Util.makeHexColor(Pe[0]|0,Pe[1]|0,Pe[2]|0):R.style.borderWidth=0}R.style.left=`${100*(de[0]-N)/W}%`,R.style.top=`${100*(de[1]-$)/me}%`;const{rotation:be}=h;return h.hasOwnCanvas||be===0?(R.style.width=`${100*ce/W}%`,R.style.height=`${100*ie/me}%`):this.setRotation(be,R),R}setRotation(n,h=this.container){const{pageWidth:A,pageHeight:M}=this.viewport.rawDims,{width:R,height:W}=k(this.data.rect);let me,N;n%180===0?(me=100*R/A,N=100*W/M):(me=100*W/A,N=100*R/M),h.style.width=`${me}%`,h.style.height=`${N}%`,h.setAttribute("data-main-rotation",(360-n)%360)}get _commonActions(){const n=(h,A,M)=>{const R=M.detail[h];M.target.style[A]=G.ColorConverters[`${R[0]}_HTML`](R.slice(1))};return(0,T.shadow)(this,"_commonActions",{display:h=>{const A=h.detail.display%2===1;this.container.style.visibility=A?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:A,print:h.detail.display===0||h.detail.display===3})},print:h=>{this.annotationStorage.setValue(this.data.id,{print:h.detail.print})},hidden:h=>{this.container.style.visibility=h.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:h.detail.hidden})},focus:h=>{setTimeout(()=>h.target.focus({preventScroll:!1}),0)},userName:h=>{h.target.title=h.detail.userName},readonly:h=>{h.detail.readonly?h.target.setAttribute("readonly",""):h.target.removeAttribute("readonly")},required:h=>{this._setRequired(h.target,h.detail.required)},bgColor:h=>{n("bgColor","backgroundColor",h)},fillColor:h=>{n("fillColor","backgroundColor",h)},fgColor:h=>{n("fgColor","color",h)},textColor:h=>{n("textColor","color",h)},borderColor:h=>{n("borderColor","borderColor",h)},strokeColor:h=>{n("strokeColor","borderColor",h)},rotation:h=>{const A=h.detail.rotation;this.setRotation(A),this.annotationStorage.setValue(this.data.id,{rotation:A})}})}_dispatchEventFromSandbox(n,h){const A=this._commonActions;for(const M of Object.keys(h.detail)){const R=n[M]||A[M];R==null||R(h)}}_setDefaultPropertiesFromJS(n){if(!this.enableScripting)return;const h=this.annotationStorage.getRawValue(this.data.id);if(!h)return;const A=this._commonActions;for(const[M,R]of Object.entries(h)){const W=A[M];if(W){const me={detail:{[M]:R},target:n};W(me),delete h[M]}}}_createQuadrilaterals(n=!1){if(!this.data.quadPoints)return null;const h=[],A=this.data.rect;for(const M of this.data.quadPoints)this.data.rect=[M[2].x,M[2].y,M[1].x,M[1].y],h.push(this._createContainer(n));return this.data.rect=A,h}_createPopup(n,h){let A=this.container;this.quadrilaterals&&(n||(n=this.quadrilaterals),A=this.quadrilaterals[0]),n||(n=document.createElement("div"),n.classList.add("popupTriggerArea"),A.append(n));const R=new s({container:A,trigger:n,color:h.color,titleObj:h.titleObj,modificationDate:h.modificationDate,contentsObj:h.contentsObj,richText:h.richText,hideWrapper:!0}).render();R.style.left="100%",A.append(R)}_renderQuadrilaterals(n){for(const h of this.quadrilaterals)h.classList.add(n);return this.quadrilaterals}render(){(0,T.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(n,h=null){const A=[];if(this._fieldObjects){const M=this._fieldObjects[n];if(M)for(const{page:R,id:W,exportValues:me}of M){if(R===-1||W===h)continue;const N=typeof me=="string"?me:null,$=document.querySelector(`[data-element-id="${W}"]`);if($&&!d.has($)){(0,T.warn)(`_getElementsByName - element not allowed: ${W}`);continue}A.push({id:W,exportValue:N,domElement:$})}return A}for(const M of document.getElementsByName(n)){const{exportValue:R}=M,W=M.getAttribute("data-element-id");W!==h&&d.has(M)&&A.push({id:W,exportValue:R,domElement:M})}return A}}class r extends v{constructor(h,A=null){super(h,{isRenderable:!0,ignoreBorder:!!(A!=null&&A.ignoreBorder),createQuadrilaterals:!0});z(this,Ee);z(this,y);this.isTooltipOnly=h.data.isTooltipOnly}render(){const{data:h,linkService:A}=this,M=document.createElement("a");M.setAttribute("data-element-id",h.id);let R=!1;return h.url?(A.addLinkAttributes(M,h.url,h.newWindow),R=!0):h.action?(this._bindNamedAction(M,h.action),R=!0):h.attachment?(this._bindAttachment(M,h.attachment),R=!0):h.setOCGState?(K(this,y,ji).call(this,M,h.setOCGState),R=!0):h.dest?(this._bindLink(M,h.dest),R=!0):(h.actions&&(h.actions.Action||h.actions["Mouse Up"]||h.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(M,h),R=!0),h.resetForm?(this._bindResetFormAction(M,h.resetForm),R=!0):this.isTooltipOnly&&!R&&(this._bindLink(M,""),R=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((W,me)=>{const N=me===0?M:M.cloneNode();return W.append(N),W}):(this.container.classList.add("linkAnnotation"),R&&this.container.append(M),this.container)}_bindLink(h,A){h.href=this.linkService.getDestinationHash(A),h.onclick=()=>(A&&this.linkService.goToDestination(A),!1),(A||A==="")&&K(this,Ee,tt).call(this)}_bindNamedAction(h,A){h.href=this.linkService.getAnchorUrl(""),h.onclick=()=>(this.linkService.executeNamedAction(A),!1),K(this,Ee,tt).call(this)}_bindAttachment(h,A){h.href=this.linkService.getAnchorUrl(""),h.onclick=()=>{var M;return(M=this.downloadManager)==null||M.openOrDownloadData(this.container,A.content,A.filename),!1},K(this,Ee,tt).call(this)}_bindJSAction(h,A){h.href=this.linkService.getAnchorUrl("");const M=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const R of Object.keys(A.actions)){const W=M.get(R);W&&(h[W]=()=>{var me;return(me=this.linkService.eventBus)==null||me.dispatch("dispatcheventinsandbox",{source:this,detail:{id:A.id,name:R}}),!1})}h.onclick||(h.onclick=()=>!1),K(this,Ee,tt).call(this)}_bindResetFormAction(h,A){const M=h.onclick;if(M||(h.href=this.linkService.getAnchorUrl("")),K(this,Ee,tt).call(this),!this._fieldObjects){(0,T.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),M||(h.onclick=()=>!1);return}h.onclick=()=>{var ie;M==null||M();const{fields:R,refs:W,include:me}=A,N=[];if(R.length!==0||W.length!==0){const de=new Set(W);for(const be of R){const ve=this._fieldObjects[be]||[];for(const{id:xe}of ve)de.add(xe)}for(const be of Object.values(this._fieldObjects))for(const ve of be)de.has(ve.id)===me&&N.push(ve)}else for(const de of Object.values(this._fieldObjects))N.push(...de);const $=this.annotationStorage,ce=[];for(const de of N){const{id:be}=de;switch(ce.push(be),de.type){case"text":{const xe=de.defaultValue||"";$.setValue(be,{value:xe});break}case"checkbox":case"radiobutton":{const xe=de.defaultValue===de.exportValues;$.setValue(be,{value:xe});break}case"combobox":case"listbox":{const xe=de.defaultValue||"";$.setValue(be,{value:xe});break}default:continue}const ve=document.querySelector(`[data-element-id="${be}"]`);if(ve){if(!d.has(ve)){(0,T.warn)(`_bindResetFormAction - element not allowed: ${be}`);continue}}else continue;ve.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((ie=this.linkService.eventBus)==null||ie.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ce,name:"ResetForm"}})),!1}}}Ee=new WeakSet,tt=function(){this.container.setAttribute("data-internal-link","")},y=new WeakSet,ji=function(h,A){h.href=this.linkService.getAnchorUrl(""),h.onclick=()=>(this.linkService.executeSetOCGState(A),!1),K(this,Ee,tt).call(this)};class c extends v{constructor(n){var A,M,R;const h=!!(n.data.hasPopup||(A=n.data.titleObj)!=null&&A.str||(M=n.data.contentsObj)!=null&&M.str||(R=n.data.richText)!=null&&R.str);super(n,{isRenderable:h})}render(){this.container.classList.add("textAnnotation");const n=document.createElement("img");return n.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",n.alt="[{{type}} Annotation]",n.dataset.l10nId="text_annotation_type",n.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(n,this.data),this.container.append(n),this.container}}class a extends v{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(n){var h;this.data.hasOwnCanvas&&(((h=n.previousSibling)==null?void 0:h.nodeName)==="CANVAS"&&(n.previousSibling.hidden=!0),n.hidden=!1)}_getKeyModifier(n){const{isWin:h,isMac:A}=T.FeatureTest.platform;return h&&n.ctrlKey||A&&n.metaKey}_setEventListener(n,h,A,M){h.includes("mouse")?n.addEventListener(h,R=>{var W;(W=this.linkService.eventBus)==null||W.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:A,value:M(R),shift:R.shiftKey,modifier:this._getKeyModifier(R)}})}):n.addEventListener(h,R=>{var W;(W=this.linkService.eventBus)==null||W.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:A,value:M(R)}})})}_setEventListeners(n,h,A){var M;for(const[R,W]of h)(W==="Action"||(M=this.data.actions)!=null&&M[W])&&this._setEventListener(n,R,W,A)}_setBackgroundColor(n){const h=this.data.backgroundColor||null;n.style.backgroundColor=h===null?"transparent":T.Util.makeHexColor(h[0],h[1],h[2])}_setTextStyle(n){const h=["left","center","right"],{fontColor:A}=this.data.defaultAppearanceData,M=this.data.defaultAppearanceData.fontSize||_,R=n.style;let W;const me=2,N=$=>Math.round(10*$)/10;if(this.data.multiLine){const $=Math.abs(this.data.rect[3]-this.data.rect[1]-me),ce=Math.round($/(T.LINE_FACTOR*M))||1,ie=$/ce;W=Math.min(M,N(ie/T.LINE_FACTOR))}else{const $=Math.abs(this.data.rect[3]-this.data.rect[1]-me);W=Math.min(M,N($/T.LINE_FACTOR))}R.fontSize=`calc(${W}px * var(--scale-factor))`,R.color=T.Util.makeHexColor(A[0],A[1],A[2]),this.data.textAlignment!==null&&(R.textAlign=h[this.data.textAlignment])}_setRequired(n,h){h?n.setAttribute("required",!0):n.removeAttribute("required"),n.setAttribute("aria-required",h)}}class p extends a{constructor(n){const h=n.renderForms||!n.data.hasAppearance&&!!n.data.fieldValue;super(n,{isRenderable:h})}setPropertyOnSiblings(n,h,A,M){const R=this.annotationStorage;for(const W of this._getElementsByName(n.name,n.id))W.domElement&&(W.domElement[h]=A),R.setValue(W.id,{[M]:A})}render(){var M;const n=this.annotationStorage,h=this.data.id;this.container.classList.add("textWidgetAnnotation");let A=null;if(this.renderForms){const R=n.getValue(h,{value:this.data.fieldValue});let W=R.formattedValue||R.value||"";const me=n.getValue(h,{charLimit:this.data.maxLen}).charLimit;me&&W.length>me&&(W=W.slice(0,me));const N={userValue:W,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(A=document.createElement("textarea"),A.textContent=W,this.data.doNotScroll&&(A.style.overflowY="hidden")):(A=document.createElement("input"),A.type="text",A.setAttribute("value",W),this.data.doNotScroll&&(A.style.overflowX="hidden")),this.data.hasOwnCanvas&&(A.hidden=!0),d.add(A),A.setAttribute("data-element-id",h),A.disabled=this.data.readOnly,A.name=this.data.fieldName,A.tabIndex=D,this._setRequired(A,this.data.required),me&&(A.maxLength=me),A.addEventListener("input",ce=>{n.setValue(h,{value:ce.target.value}),this.setPropertyOnSiblings(A,"value",ce.target.value,"value")}),A.addEventListener("resetform",ce=>{const ie=this.data.defaultFieldValue??"";A.value=N.userValue=ie,N.formattedValue=null});let $=ce=>{const{formattedValue:ie}=N;ie!=null&&(ce.target.value=ie),ce.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){A.addEventListener("focus",ie=>{const{target:de}=ie;N.userValue&&(de.value=N.userValue),N.lastCommittedValue=de.value,N.commitKey=1}),A.addEventListener("updatefromsandbox",ie=>{this.showElementAndHideCanvas(ie.target);const de={value(be){N.userValue=be.detail.value??"",n.setValue(h,{value:N.userValue.toString()}),be.target.value=N.userValue},formattedValue(be){const{formattedValue:ve}=be.detail;N.formattedValue=ve,ve!=null&&be.target!==document.activeElement&&(be.target.value=ve),n.setValue(h,{formattedValue:ve})},selRange(be){be.target.setSelectionRange(...be.detail.selRange)},charLimit:be=>{var Re;const{charLimit:ve}=be.detail,{target:xe}=be;if(ve===0){xe.removeAttribute("maxLength");return}xe.setAttribute("maxLength",ve);let Pe=N.userValue;!Pe||Pe.length<=ve||(Pe=Pe.slice(0,ve),xe.value=N.userValue=Pe,n.setValue(h,{value:Pe}),(Re=this.linkService.eventBus)==null||Re.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:Pe,willCommit:!0,commitKey:1,selStart:xe.selectionStart,selEnd:xe.selectionEnd}}))}};this._dispatchEventFromSandbox(de,ie)}),A.addEventListener("keydown",ie=>{var ve;N.commitKey=1;let de=-1;if(ie.key==="Escape"?de=0:ie.key==="Enter"&&!this.data.multiLine?de=2:ie.key==="Tab"&&(N.commitKey=3),de===-1)return;const{value:be}=ie.target;N.lastCommittedValue!==be&&(N.lastCommittedValue=be,N.userValue=be,(ve=this.linkService.eventBus)==null||ve.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:be,willCommit:!0,commitKey:de,selStart:ie.target.selectionStart,selEnd:ie.target.selectionEnd}}))});const ce=$;$=null,A.addEventListener("blur",ie=>{var be;if(!ie.relatedTarget)return;const{value:de}=ie.target;N.userValue=de,N.lastCommittedValue!==de&&((be=this.linkService.eventBus)==null||be.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:de,willCommit:!0,commitKey:N.commitKey,selStart:ie.target.selectionStart,selEnd:ie.target.selectionEnd}})),ce(ie)}),(M=this.data.actions)!=null&&M.Keystroke&&A.addEventListener("beforeinput",ie=>{var Ce;N.lastCommittedValue=null;const{data:de,target:be}=ie,{value:ve,selectionStart:xe,selectionEnd:Pe}=be;let Re=xe,oe=Pe;switch(ie.inputType){case"deleteWordBackward":{const Me=ve.substring(0,xe).match(/\w*[^\w]*$/);Me&&(Re-=Me[0].length);break}case"deleteWordForward":{const Me=ve.substring(xe).match(/^[^\w]*\w*/);Me&&(oe+=Me[0].length);break}case"deleteContentBackward":xe===Pe&&(Re-=1);break;case"deleteContentForward":xe===Pe&&(oe+=1);break}ie.preventDefault(),(Ce=this.linkService.eventBus)==null||Ce.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:ve,change:de||"",willCommit:!1,selStart:Re,selEnd:oe}})}),this._setEventListeners(A,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ie=>ie.target.value)}if($&&A.addEventListener("blur",$),this.data.comb){const ie=(this.data.rect[2]-this.data.rect[0])/me;A.classList.add("comb"),A.style.letterSpacing=`calc(${ie}px * var(--scale-factor) - 1ch)`}}else A=document.createElement("div"),A.textContent=this.data.fieldValue,A.style.verticalAlign="middle",A.style.display="table-cell";return this._setTextStyle(A),this._setBackgroundColor(A),this._setDefaultPropertiesFromJS(A),this.container.append(A),this.container}}class m extends a{constructor(n){super(n,{isRenderable:n.renderForms})}render(){const n=this.annotationStorage,h=this.data,A=h.id;let M=n.getValue(A,{value:h.exportValue===h.fieldValue}).value;typeof M=="string"&&(M=M!=="Off",n.setValue(A,{value:M})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const R=document.createElement("input");return d.add(R),R.setAttribute("data-element-id",A),R.disabled=h.readOnly,this._setRequired(R,this.data.required),R.type="checkbox",R.name=h.fieldName,M&&R.setAttribute("checked",!0),R.setAttribute("exportValue",h.exportValue),R.tabIndex=D,R.addEventListener("change",W=>{const{name:me,checked:N}=W.target;for(const $ of this._getElementsByName(me,A)){const ce=N&&$.exportValue===h.exportValue;$.domElement&&($.domElement.checked=ce),n.setValue($.id,{value:ce})}n.setValue(A,{value:N})}),R.addEventListener("resetform",W=>{const me=h.defaultFieldValue||"Off";W.target.checked=me===h.exportValue}),this.enableScripting&&this.hasJSActions&&(R.addEventListener("updatefromsandbox",W=>{const me={value(N){N.target.checked=N.detail.value!=="Off",n.setValue(A,{value:N.target.checked})}};this._dispatchEventFromSandbox(me,W)}),this._setEventListeners(R,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],W=>W.target.checked)),this._setBackgroundColor(R),this._setDefaultPropertiesFromJS(R),this.container.append(R),this.container}}class b extends a{constructor(n){super(n,{isRenderable:n.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const n=this.annotationStorage,h=this.data,A=h.id;let M=n.getValue(A,{value:h.fieldValue===h.buttonValue}).value;typeof M=="string"&&(M=M!==h.buttonValue,n.setValue(A,{value:M}));const R=document.createElement("input");if(d.add(R),R.setAttribute("data-element-id",A),R.disabled=h.readOnly,this._setRequired(R,this.data.required),R.type="radio",R.name=h.fieldName,M&&R.setAttribute("checked",!0),R.tabIndex=D,R.addEventListener("change",W=>{const{name:me,checked:N}=W.target;for(const $ of this._getElementsByName(me,A))n.setValue($.id,{value:!1});n.setValue(A,{value:N})}),R.addEventListener("resetform",W=>{const me=h.defaultFieldValue;W.target.checked=me!=null&&me===h.buttonValue}),this.enableScripting&&this.hasJSActions){const W=h.buttonValue;R.addEventListener("updatefromsandbox",me=>{const N={value:$=>{const ce=W===$.detail.value;for(const ie of this._getElementsByName($.target.name)){const de=ce&&ie.id===A;ie.domElement&&(ie.domElement.checked=de),n.setValue(ie.id,{value:de})}}};this._dispatchEventFromSandbox(N,me)}),this._setEventListeners(R,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],me=>me.target.checked)}return this._setBackgroundColor(R),this._setDefaultPropertiesFromJS(R),this.container.append(R),this.container}}class f extends r{constructor(n){super(n,{ignoreBorder:n.data.hasAppearance})}render(){const n=super.render();n.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(n.title=this.data.alternativeText);const h=n.lastChild;return this.enableScripting&&this.hasJSActions&&h&&(this._setDefaultPropertiesFromJS(h),h.addEventListener("updatefromsandbox",A=>{this._dispatchEventFromSandbox({},A)})),n}}class t extends a{constructor(n){super(n,{isRenderable:n.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const n=this.annotationStorage,h=this.data.id,A=n.getValue(h,{value:this.data.fieldValue}),M=document.createElement("select");d.add(M),M.setAttribute("data-element-id",h),M.disabled=this.data.readOnly,this._setRequired(M,this.data.required),M.name=this.data.fieldName,M.tabIndex=D;let R=this.data.combo&&this.data.options.length>0;this.data.combo||(M.size=this.data.options.length,this.data.multiSelect&&(M.multiple=!0)),M.addEventListener("resetform",ce=>{const ie=this.data.defaultFieldValue;for(const de of M.options)de.selected=de.value===ie});for(const ce of this.data.options){const ie=document.createElement("option");ie.textContent=ce.displayValue,ie.value=ce.exportValue,A.value.includes(ce.exportValue)&&(ie.setAttribute("selected",!0),R=!1),M.append(ie)}let W=null;if(R){const ce=document.createElement("option");ce.value=" ",ce.setAttribute("hidden",!0),ce.setAttribute("selected",!0),M.prepend(ce),W=()=>{ce.remove(),M.removeEventListener("input",W),W=null},M.addEventListener("input",W)}const me=ce=>{const ie=ce?"value":"textContent",{options:de,multiple:be}=M;return be?Array.prototype.filter.call(de,ve=>ve.selected).map(ve=>ve[ie]):de.selectedIndex===-1?null:de[de.selectedIndex][ie]};let N=me(!1);const $=ce=>{const ie=ce.target.options;return Array.prototype.map.call(ie,de=>({displayValue:de.textContent,exportValue:de.value}))};return this.enableScripting&&this.hasJSActions?(M.addEventListener("updatefromsandbox",ce=>{const ie={value(de){W==null||W();const be=de.detail.value,ve=new Set(Array.isArray(be)?be:[be]);for(const xe of M.options)xe.selected=ve.has(xe.value);n.setValue(h,{value:me(!0)}),N=me(!1)},multipleSelection(de){M.multiple=!0},remove(de){const be=M.options,ve=de.detail.remove;be[ve].selected=!1,M.remove(ve),be.length>0&&Array.prototype.findIndex.call(be,Pe=>Pe.selected)===-1&&(be[0].selected=!0),n.setValue(h,{value:me(!0),items:$(de)}),N=me(!1)},clear(de){for(;M.length!==0;)M.remove(0);n.setValue(h,{value:null,items:[]}),N=me(!1)},insert(de){const{index:be,displayValue:ve,exportValue:xe}=de.detail.insert,Pe=M.children[be],Re=document.createElement("option");Re.textContent=ve,Re.value=xe,Pe?Pe.before(Re):M.append(Re),n.setValue(h,{value:me(!0),items:$(de)}),N=me(!1)},items(de){const{items:be}=de.detail;for(;M.length!==0;)M.remove(0);for(const ve of be){const{displayValue:xe,exportValue:Pe}=ve,Re=document.createElement("option");Re.textContent=xe,Re.value=Pe,M.append(Re)}M.options.length>0&&(M.options[0].selected=!0),n.setValue(h,{value:me(!0),items:$(de)}),N=me(!1)},indices(de){const be=new Set(de.detail.indices);for(const ve of de.target.options)ve.selected=be.has(ve.index);n.setValue(h,{value:me(!0)}),N=me(!1)},editable(de){de.target.disabled=!de.detail.editable}};this._dispatchEventFromSandbox(ie,ce)}),M.addEventListener("input",ce=>{var de;const ie=me(!0);n.setValue(h,{value:ie}),ce.preventDefault(),(de=this.linkService.eventBus)==null||de.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:N,changeEx:ie,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(M,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],ce=>ce.target.value)):M.addEventListener("input",function(ce){n.setValue(h,{value:me(!0)})}),this.data.combo&&this._setTextStyle(M),this._setBackgroundColor(M),this._setDefaultPropertiesFromJS(M),this.container.append(M),this.container}}const L=class L extends v{constructor(n){var M,R,W;const{data:h}=n,A=!L.IGNORE_TYPES.has(h.parentType)&&!!((M=h.titleObj)!=null&&M.str||(R=h.contentsObj)!=null&&R.str||(W=h.richText)!=null&&W.str);super(n,{isRenderable:A})}render(){this.container.classList.add("popupAnnotation");const n=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(n.length===0)return this.container;const h=new s({container:this.container,trigger:Array.from(n),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),A=this.page,M=T.Util.normalizeRect([this.data.parentRect[0],A.view[3]-this.data.parentRect[1]+A.view[1],this.data.parentRect[2],A.view[3]-this.data.parentRect[3]+A.view[1]]),R=M[0]+this.data.parentRect[2]-this.data.parentRect[0],W=M[1],{pageWidth:me,pageHeight:N,pageX:$,pageY:ce}=this.viewport.rawDims;return this.container.style.left=`${100*(R-$)/me}%`,this.container.style.top=`${100*(W-ce)/N}%`,this.container.append(h.render()),this.container}};He(L,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));let e=L;class s{constructor(n){this.container=n.container,this.trigger=n.trigger,this.color=n.color,this.titleObj=n.titleObj,this.modificationDate=n.modificationDate,this.contentsObj=n.contentsObj,this.richText=n.richText,this.hideWrapper=n.hideWrapper||!1,this.pinned=!1}render(){var me,N;const h=document.createElement("div");h.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?h:this.container,this.hideElement.hidden=!0;const A=document.createElement("div");A.classList.add("popup");const M=this.color;if(M){const $=.7*(255-M[0])+M[0],ce=.7*(255-M[1])+M[1],ie=.7*(255-M[2])+M[2];A.style.backgroundColor=T.Util.makeHexColor($|0,ce|0,ie|0)}const R=document.createElement("h1");R.dir=this.titleObj.dir,R.textContent=this.titleObj.str,A.append(R);const W=O.PDFDateString.toDateObject(this.modificationDate);if(W){const $=document.createElement("span");$.classList.add("popupDate"),$.textContent="{{date}}, {{time}}",$.dataset.l10nId="annotation_date_string",$.dataset.l10nArgs=JSON.stringify({date:W.toLocaleDateString(),time:W.toLocaleTimeString()}),A.append($)}if((me=this.richText)!=null&&me.str&&(!((N=this.contentsObj)!=null&&N.str)||this.contentsObj.str===this.richText.str))I.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:A}),A.lastChild.classList.add("richText","popupContent");else{const $=this._formatContents(this.contentsObj);A.append($)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const $ of this.trigger)$.addEventListener("click",this._toggle.bind(this)),$.addEventListener("mouseover",this._show.bind(this,!1)),$.addEventListener("mouseout",this._hide.bind(this,!1));return A.addEventListener("click",this._hide.bind(this,!0)),h.append(A),h}_formatContents({str:n,dir:h}){const A=document.createElement("p");A.classList.add("popupContent"),A.dir=h;const M=n.split(/(?:\r\n?|\n)/);for(let R=0,W=M.length;R<W;++R){const me=M[R];A.append(document.createTextNode(me)),R<W-1&&A.append(document.createElement("br"))}return A}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(n=!1){n&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(n=!0){n&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class i extends v{constructor(n){var A,M,R;const h=!!(n.data.hasPopup||(A=n.data.titleObj)!=null&&A.str||(M=n.data.contentsObj)!=null&&M.str||(R=n.data.richText)!=null&&R.str);super(n,{isRenderable:h,ignoreBorder:!0}),this.textContent=n.data.textContent}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const n=document.createElement("div");n.classList.add("annotationTextContent"),n.setAttribute("role","comment");for(const h of this.textContent){const A=document.createElement("span");A.textContent=h,n.append(A)}this.container.append(n)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class u extends v{constructor(n){var A,M,R;const h=!!(n.data.hasPopup||(A=n.data.titleObj)!=null&&A.str||(M=n.data.contentsObj)!=null&&M.str||(R=n.data.richText)!=null&&R.str);super(n,{isRenderable:h,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const n=this.data,{width:h,height:A}=k(n.rect),M=this.svgFactory.create(h,A,!0),R=this.svgFactory.createElement("svg:line");return R.setAttribute("x1",n.rect[2]-n.lineCoordinates[0]),R.setAttribute("y1",n.rect[3]-n.lineCoordinates[1]),R.setAttribute("x2",n.rect[2]-n.lineCoordinates[2]),R.setAttribute("y2",n.rect[3]-n.lineCoordinates[3]),R.setAttribute("stroke-width",n.borderStyle.width||1),R.setAttribute("stroke","transparent"),R.setAttribute("fill","transparent"),M.append(R),this.container.append(M),this._createPopup(R,n),this.container}}class w extends v{constructor(n){var A,M,R;const h=!!(n.data.hasPopup||(A=n.data.titleObj)!=null&&A.str||(M=n.data.contentsObj)!=null&&M.str||(R=n.data.richText)!=null&&R.str);super(n,{isRenderable:h,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const n=this.data,{width:h,height:A}=k(n.rect),M=this.svgFactory.create(h,A,!0),R=n.borderStyle.width,W=this.svgFactory.createElement("svg:rect");return W.setAttribute("x",R/2),W.setAttribute("y",R/2),W.setAttribute("width",h-R),W.setAttribute("height",A-R),W.setAttribute("stroke-width",R||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),M.append(W),this.container.append(M),this._createPopup(W,n),this.container}}class o extends v{constructor(n){var A,M,R;const h=!!(n.data.hasPopup||(A=n.data.titleObj)!=null&&A.str||(M=n.data.contentsObj)!=null&&M.str||(R=n.data.richText)!=null&&R.str);super(n,{isRenderable:h,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const n=this.data,{width:h,height:A}=k(n.rect),M=this.svgFactory.create(h,A,!0),R=n.borderStyle.width,W=this.svgFactory.createElement("svg:ellipse");return W.setAttribute("cx",h/2),W.setAttribute("cy",A/2),W.setAttribute("rx",h/2-R/2),W.setAttribute("ry",A/2-R/2),W.setAttribute("stroke-width",R||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),M.append(W),this.container.append(M),this._createPopup(W,n),this.container}}class F extends v{constructor(n){var A,M,R;const h=!!(n.data.hasPopup||(A=n.data.titleObj)!=null&&A.str||(M=n.data.contentsObj)!=null&&M.str||(R=n.data.richText)!=null&&R.str);super(n,{isRenderable:h,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const n=this.data,{width:h,height:A}=k(n.rect),M=this.svgFactory.create(h,A,!0);let R=[];for(const me of n.vertices){const N=me.x-n.rect[0],$=n.rect[3]-me.y;R.push(N+","+$)}R=R.join(" ");const W=this.svgFactory.createElement(this.svgElementName);return W.setAttribute("points",R),W.setAttribute("stroke-width",n.borderStyle.width||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),M.append(W),this.container.append(M),this._createPopup(W,n),this.container}}class X extends F{constructor(n){super(n),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class le extends v{constructor(n){var A,M,R;const h=!!(n.data.hasPopup||(A=n.data.titleObj)!=null&&A.str||(M=n.data.contentsObj)!=null&&M.str||(R=n.data.richText)!=null&&R.str);super(n,{isRenderable:h,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class H extends v{constructor(n){var A,M,R;const h=!!(n.data.hasPopup||(A=n.data.titleObj)!=null&&A.str||(M=n.data.contentsObj)!=null&&M.str||(R=n.data.richText)!=null&&R.str);super(n,{isRenderable:h,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const n=this.data,{width:h,height:A}=k(n.rect),M=this.svgFactory.create(h,A,!0);for(const R of n.inkLists){let W=[];for(const N of R){const $=N.x-n.rect[0],ce=n.rect[3]-N.y;W.push(`${$},${ce}`)}W=W.join(" ");const me=this.svgFactory.createElement(this.svgElementName);me.setAttribute("points",W),me.setAttribute("stroke-width",n.borderStyle.width||1),me.setAttribute("stroke","transparent"),me.setAttribute("fill","transparent"),this._createPopup(me,n),M.append(me)}return this.container.append(M),this.container}}class Z extends v{constructor(n){var A,M,R;const h=!!(n.data.hasPopup||(A=n.data.titleObj)!=null&&A.str||(M=n.data.contentsObj)!=null&&M.str||(R=n.data.richText)!=null&&R.str);super(n,{isRenderable:h,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}class ae extends v{constructor(n){var A,M,R;const h=!!(n.data.hasPopup||(A=n.data.titleObj)!=null&&A.str||(M=n.data.contentsObj)!=null&&M.str||(R=n.data.richText)!=null&&R.str);super(n,{isRenderable:h,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}class J extends v{constructor(n){var A,M,R;const h=!!(n.data.hasPopup||(A=n.data.titleObj)!=null&&A.str||(M=n.data.contentsObj)!=null&&M.str||(R=n.data.richText)!=null&&R.str);super(n,{isRenderable:h,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}class ge extends v{constructor(n){var A,M,R;const h=!!(n.data.hasPopup||(A=n.data.titleObj)!=null&&A.str||(M=n.data.contentsObj)!=null&&M.str||(R=n.data.richText)!=null&&R.str);super(n,{isRenderable:h,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}class ye extends v{constructor(n){var A,M,R;const h=!!(n.data.hasPopup||(A=n.data.titleObj)!=null&&A.str||(M=n.data.contentsObj)!=null&&M.str||(R=n.data.richText)!=null&&R.str);super(n,{isRenderable:h,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Y extends v{constructor(n){var M;super(n,{isRenderable:!0});const{filename:h,content:A}=this.data.file;this.filename=(0,O.getFilenameFromUrl)(h,!0),this.content=A,(M=this.linkService.eventBus)==null||M.dispatch("fileattachmentannotation",{source:this,filename:h,content:A})}render(){var h,A;this.container.classList.add("fileAttachmentAnnotation");let n;return this.data.hasAppearance?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),n.classList.add("popupTriggerArea"),n.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((h=this.data.titleObj)!=null&&h.str||(A=this.data.contentsObj)!=null&&A.str||this.data.richText)&&this._createPopup(n,this.data),this.container.append(n),this.container}_download(){var n;(n=this.downloadManager)==null||n.openOrDownloadData(this.container,this.content,this.filename)}}const B=class B{static render(n){var N,$;const{annotations:h,div:A,viewport:M,accessibilityManager:R}=n;(0,O.setLayerDimensions)(A,M);const W={data:null,layer:A,page:n.page,viewport:M,linkService:n.linkService,downloadManager:n.downloadManager,imageResourcesPath:n.imageResourcesPath||"",renderForms:n.renderForms!==!1,svgFactory:new O.DOMSVGFactory,annotationStorage:n.annotationStorage||new ue.AnnotationStorage,enableScripting:n.enableScripting===!0,hasJSActions:n.hasJSActions,fieldObjects:n.fieldObjects};let me=0;for(const ce of h){if(ce.noHTML)continue;if(ce.annotationType!==T.AnnotationType.POPUP){const{width:be,height:ve}=k(ce.rect);if(be<=0||ve<=0)continue}W.data=ce;const ie=C.create(W);if(!ie.isRenderable)continue;const de=ie.render();if(ce.hidden&&(de.style.visibility="hidden"),Array.isArray(de))for(const be of de)be.style.zIndex=me++,K(N=B,q,Gt).call(N,be,ce.id,A,R);else de.style.zIndex=me++,ie instanceof e?A.prepend(de):K($=B,q,Gt).call($,de,ce.id,A,R)}K(this,ne,Xt).call(this,A,n.annotationCanvasMap)}static update(n){const{annotationCanvasMap:h,div:A,viewport:M}=n;(0,O.setLayerDimensions)(A,{rotation:M.rotation}),K(this,ne,Xt).call(this,A,h),A.hidden=!1}};q=new WeakSet,Gt=function(n,h,A,M){const R=n.firstChild||n;R.id=`${O.AnnotationPrefix}${h}`,A.append(n),M==null||M.moveElementInDOM(A,n,R,!1)},ne=new WeakSet,Xt=function(n,h){if(h){for(const[A,M]of h){const R=n.querySelector(`[data-annotation-id="${A}"]`);if(!R)continue;const{firstChild:W}=R;W?W.nodeName==="CANVAS"?W.replaceWith(M):W.before(M):R.append(M)}h.clear()}},z(B,q),z(B,ne);let we=B;P.AnnotationLayer=we},(re,P)=>{Object.defineProperty(P,"__esModule",{value:!0}),P.ColorConverters=void 0;function ee(O){return Math.floor(Math.max(0,Math.min(1,O))*255).toString(16).padStart(2,"0")}class T{static CMYK_G([ue,G,I,D]){return["G",1-Math.min(1,.3*ue+.59*I+.11*G+D)]}static G_CMYK([ue]){return["CMYK",0,0,0,1-ue]}static G_RGB([ue]){return["RGB",ue,ue,ue]}static G_HTML([ue]){const G=ee(ue);return`#${G}${G}${G}`}static RGB_G([ue,G,I]){return["G",.3*ue+.59*G+.11*I]}static RGB_HTML([ue,G,I]){const D=ee(ue),_=ee(G),d=ee(I);return`#${D}${_}${d}`}static T_HTML(){return"#00000000"}static CMYK_RGB([ue,G,I,D]){return["RGB",1-Math.min(1,ue+D),1-Math.min(1,I+D),1-Math.min(1,G+D)]}static CMYK_HTML(ue){const G=this.CMYK_RGB(ue).slice(1);return this.RGB_HTML(G)}static RGB_CMYK([ue,G,I]){const D=1-ue,_=1-G,d=1-I,k=Math.min(D,_,d);return["CMYK",D,_,d,k]}}P.ColorConverters=T},(re,P,ee)=>{Object.defineProperty(P,"__esModule",{value:!0}),P.XfaLayer=void 0;var T=ee(19);class O{static setupStorage(G,I,D,_,d){const k=_.getValue(I,{value:null});switch(D.name){case"textarea":if(k.value!==null&&(G.textContent=k.value),d==="print")break;G.addEventListener("input",C=>{_.setValue(I,{value:C.target.value})});break;case"input":if(D.attributes.type==="radio"||D.attributes.type==="checkbox"){if(k.value===D.attributes.xfaOn?G.setAttribute("checked",!0):k.value===D.attributes.xfaOff&&G.removeAttribute("checked"),d==="print")break;G.addEventListener("change",C=>{_.setValue(I,{value:C.target.checked?C.target.getAttribute("xfaOn"):C.target.getAttribute("xfaOff")})})}else{if(k.value!==null&&G.setAttribute("value",k.value),d==="print")break;G.addEventListener("input",C=>{_.setValue(I,{value:C.target.value})})}break;case"select":if(k.value!==null)for(const C of D.children)C.attributes.value===k.value&&(C.attributes.selected=!0);G.addEventListener("input",C=>{const v=C.target.options,r=v.selectedIndex===-1?"":v[v.selectedIndex].value;_.setValue(I,{value:r})});break}}static setAttributes({html:G,element:I,storage:D=null,intent:_,linkService:d}){const{attributes:k}=I,C=G instanceof HTMLAnchorElement;k.type==="radio"&&(k.name=`${k.name}-${_}`);for(const[v,r]of Object.entries(k))if(r!=null)switch(v){case"class":r.length&&G.setAttribute(v,r.join(" "));break;case"dataId":break;case"id":G.setAttribute("data-element-id",r);break;case"style":Object.assign(G.style,r);break;case"textContent":G.textContent=r;break;default:(!C||v!=="href"&&v!=="newWindow")&&G.setAttribute(v,r)}C&&d.addLinkAttributes(G,k.href,k.newWindow),D&&k.dataId&&this.setupStorage(G,k.dataId,I,D)}static render(G){var c;const I=G.annotationStorage,D=G.linkService,_=G.xfaHtml,d=G.intent||"display",k=document.createElement(_.name);_.attributes&&this.setAttributes({html:k,element:_,intent:d,linkService:D});const C=[[_,-1,k]],v=G.div;if(v.append(k),G.viewport){const a=`matrix(${G.viewport.transform.join(",")})`;v.style.transform=a}d!=="richText"&&v.setAttribute("class","xfaLayer xfaFont");const r=[];for(;C.length>0;){const[a,p,m]=C.at(-1);if(p+1===a.children.length){C.pop();continue}const b=a.children[++C.at(-1)[1]];if(b===null)continue;const{name:f}=b;if(f==="#text"){const e=document.createTextNode(b.value);r.push(e),m.append(e);continue}let t;if((c=b==null?void 0:b.attributes)!=null&&c.xmlns?t=document.createElementNS(b.attributes.xmlns,f):t=document.createElement(f),m.append(t),b.attributes&&this.setAttributes({html:t,element:b,storage:I,intent:d,linkService:D}),b.children&&b.children.length>0)C.push([b,-1,t]);else if(b.value){const e=document.createTextNode(b.value);T.XfaText.shouldBuildText(f)&&r.push(e),t.append(e)}}for(const a of v.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))a.setAttribute("readOnly",!0);return{textDivs:r}}static update(G){const I=`matrix(${G.viewport.transform.join(",")})`;G.div.style.transform=I,G.div.hidden=!1}}P.XfaLayer=O},(re,P,ee)=>{Object.defineProperty(P,"__esModule",{value:!0}),P.SVGGraphics=void 0;var T=ee(6),O=ee(1),ue=ee(10);let G=class{constructor(){(0,O.unreachable)("Not implemented: SVGGraphics")}};P.SVGGraphics=G;{let c=function(t){let e=[];const s=[];for(const i of t){if(i.fn==="save"){e.push({fnId:92,fn:"group",items:[]}),s.push(e),e=e.at(-1).items;continue}i.fn==="restore"?e=s.pop():e.push(i)}return e},a=function(t){if(Number.isInteger(t))return t.toString();const e=t.toFixed(10);let s=e.length-1;if(e[s]!=="0")return e;do s--;while(e[s]==="0");return e.substring(0,e[s]==="."?s:s+1)},p=function(t){if(t[4]===0&&t[5]===0){if(t[1]===0&&t[2]===0)return t[0]===1&&t[3]===1?"":`scale(${a(t[0])} ${a(t[3])})`;if(t[0]===t[3]&&t[1]===-t[2]){const e=Math.acos(t[0])*180/Math.PI;return`rotate(${a(e)})`}}else if(t[0]===1&&t[1]===0&&t[2]===0&&t[3]===1)return`translate(${a(t[4])} ${a(t[5])})`;return`matrix(${a(t[0])} ${a(t[1])} ${a(t[2])} ${a(t[3])} ${a(t[4])} ${a(t[5])})`};const I={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},D="http://www.w3.org/XML/1998/namespace",_="http://www.w3.org/1999/xlink",d=["butt","round","square"],k=["miter","round","bevel"],C=function(t,e="",s=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!s)return URL.createObjectURL(new Blob([t],{type:e}));const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let u=`data:${e};base64,`;for(let w=0,o=t.length;w<o;w+=3){const F=t[w]&255,X=t[w+1]&255,le=t[w+2]&255,H=F>>2,Z=(F&3)<<4|X>>4,ae=w+1<o?(X&15)<<2|le>>6:64,J=w+2<o?le&63:64;u+=i[H]+i[Z]+i[ae]+i[J]}return u},v=function(){const t=new Uint8Array([137,80,78,71,13,10,26,10]),e=12,s=new Int32Array(256);for(let le=0;le<256;le++){let H=le;for(let Z=0;Z<8;Z++)H&1?H=3988292384^H>>1&2147483647:H=H>>1&2147483647;s[le]=H}function i(le,H,Z){let ae=-1;for(let J=H;J<Z;J++){const ge=(ae^le[J])&255,ye=s[ge];ae=ae>>>8^ye}return ae^-1}function u(le,H,Z,ae){let J=ae;const ge=H.length;Z[J]=ge>>24&255,Z[J+1]=ge>>16&255,Z[J+2]=ge>>8&255,Z[J+3]=ge&255,J+=4,Z[J]=le.charCodeAt(0)&255,Z[J+1]=le.charCodeAt(1)&255,Z[J+2]=le.charCodeAt(2)&255,Z[J+3]=le.charCodeAt(3)&255,J+=4,Z.set(H,J),J+=H.length;const ye=i(Z,ae+4,J);Z[J]=ye>>24&255,Z[J+1]=ye>>16&255,Z[J+2]=ye>>8&255,Z[J+3]=ye&255}function w(le,H,Z){let ae=1,J=0;for(let ge=H;ge<Z;++ge)ae=(ae+(le[ge]&255))%65521,J=(J+ae)%65521;return J<<16|ae}function o(le){if(!ue.isNodeJS)return F(le);try{let H;parseInt(process.versions.node)>=8?H=le:H=Buffer.from(le);const Z=require$$5.deflateSync(H,{level:9});return Z instanceof Uint8Array?Z:new Uint8Array(Z)}catch(H){(0,O.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+H)}return F(le)}function F(le){let H=le.length;const Z=65535,ae=Math.ceil(H/Z),J=new Uint8Array(2+H+ae*5+4);let ge=0;J[ge++]=120,J[ge++]=156;let ye=0;for(;H>Z;)J[ge++]=0,J[ge++]=255,J[ge++]=255,J[ge++]=0,J[ge++]=0,J.set(le.subarray(ye,ye+Z),ge),ge+=Z,ye+=Z,H-=Z;J[ge++]=1,J[ge++]=H&255,J[ge++]=H>>8&255,J[ge++]=~H&65535&255,J[ge++]=(~H&65535)>>8&255,J.set(le.subarray(ye),ge),ge+=le.length-ye;const Y=w(le,0,le.length);return J[ge++]=Y>>24&255,J[ge++]=Y>>16&255,J[ge++]=Y>>8&255,J[ge++]=Y&255,J}function X(le,H,Z,ae){const J=le.width,ge=le.height;let ye,Y,we;const Ee=le.data;switch(H){case O.ImageKind.GRAYSCALE_1BPP:Y=0,ye=1,we=J+7>>3;break;case O.ImageKind.RGB_24BPP:Y=2,ye=8,we=J*3;break;case O.ImageKind.RGBA_32BPP:Y=6,ye=8,we=J*4;break;default:throw new Error("invalid format")}const Q=new Uint8Array((1+we)*ge);let y=0,E=0;for(let B=0;B<ge;++B)Q[y++]=0,Q.set(Ee.subarray(E,E+we),y),E+=we,y+=we;if(H===O.ImageKind.GRAYSCALE_1BPP&&ae){y=0;for(let B=0;B<ge;B++){y++;for(let V=0;V<we;V++)Q[y++]^=255}}const L=new Uint8Array([J>>24&255,J>>16&255,J>>8&255,J&255,ge>>24&255,ge>>16&255,ge>>8&255,ge&255,ye,Y,0,0,0]),q=o(Q),j=t.length+e*3+L.length+q.length,ne=new Uint8Array(j);let U=0;return ne.set(t,U),U+=t.length,u("IHDR",L,ne,U),U+=e+L.length,u("IDATA",q,ne,U),U+=e+q.length,u("IEND",new Uint8Array(0),ne,U),C(ne,"image/png",Z)}return function(H,Z,ae){const J=H.kind===void 0?O.ImageKind.GRAYSCALE_1BPP:H.kind;return X(H,J,Z,ae)}}();class r{constructor(){this.fontSizeScale=1,this.fontWeight=I.fontWeight,this.fontSize=0,this.textMatrix=O.IDENTITY_MATRIX,this.fontMatrix=O.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=O.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=I.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(e,s){this.x=e,this.y=s}}let m=0,b=0,f=0;P.SVGGraphics=G=class{constructor(t,e,s=!1){(0,T.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new T.DOMSVGFactory,this.current=new r,this.transformMatrix=O.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=e,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!s,this._operatorIdMapping=[];for(const i in O.OPS)this._operatorIdMapping[O.OPS[i]]=i}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}save(){this.transformStack.push(this.transformMatrix);const t=this.current;this.extraStack.push(t),this.current=t.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(t){this.save(),this.executeOpTree(t),this.restore()}loadDependencies(t){const e=t.fnArray,s=t.argsArray;for(let i=0,u=e.length;i<u;i++)if(e[i]===O.OPS.dependency)for(const w of s[i]){const o=w.startsWith("g_")?this.commonObjs:this.objs,F=new Promise(X=>{o.get(w,X)});this.current.dependencies.push(F)}return Promise.all(this.current.dependencies)}transform(t,e,s,i,u,w){const o=[t,e,s,i,u,w];this.transformMatrix=O.Util.transform(this.transformMatrix,o),this.tgrp=null}getSVG(t,e){this.viewport=e;const s=this._initialize(e);return this.loadDependencies(t).then(()=>(this.transformMatrix=O.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(t)),s))}convertOpList(t){const e=this._operatorIdMapping,s=t.argsArray,i=t.fnArray,u=[];for(let w=0,o=i.length;w<o;w++){const F=i[w];u.push({fnId:F,fn:e[F],args:s[w]})}return c(u)}executeOpTree(t){for(const e of t){const s=e.fn,i=e.fnId,u=e.args;switch(i|0){case O.OPS.beginText:this.beginText();break;case O.OPS.dependency:break;case O.OPS.setLeading:this.setLeading(u);break;case O.OPS.setLeadingMoveText:this.setLeadingMoveText(u[0],u[1]);break;case O.OPS.setFont:this.setFont(u);break;case O.OPS.showText:this.showText(u[0]);break;case O.OPS.showSpacedText:this.showText(u[0]);break;case O.OPS.endText:this.endText();break;case O.OPS.moveText:this.moveText(u[0],u[1]);break;case O.OPS.setCharSpacing:this.setCharSpacing(u[0]);break;case O.OPS.setWordSpacing:this.setWordSpacing(u[0]);break;case O.OPS.setHScale:this.setHScale(u[0]);break;case O.OPS.setTextMatrix:this.setTextMatrix(u[0],u[1],u[2],u[3],u[4],u[5]);break;case O.OPS.setTextRise:this.setTextRise(u[0]);break;case O.OPS.setTextRenderingMode:this.setTextRenderingMode(u[0]);break;case O.OPS.setLineWidth:this.setLineWidth(u[0]);break;case O.OPS.setLineJoin:this.setLineJoin(u[0]);break;case O.OPS.setLineCap:this.setLineCap(u[0]);break;case O.OPS.setMiterLimit:this.setMiterLimit(u[0]);break;case O.OPS.setFillRGBColor:this.setFillRGBColor(u[0],u[1],u[2]);break;case O.OPS.setStrokeRGBColor:this.setStrokeRGBColor(u[0],u[1],u[2]);break;case O.OPS.setStrokeColorN:this.setStrokeColorN(u);break;case O.OPS.setFillColorN:this.setFillColorN(u);break;case O.OPS.shadingFill:this.shadingFill(u[0]);break;case O.OPS.setDash:this.setDash(u[0],u[1]);break;case O.OPS.setRenderingIntent:this.setRenderingIntent(u[0]);break;case O.OPS.setFlatness:this.setFlatness(u[0]);break;case O.OPS.setGState:this.setGState(u[0]);break;case O.OPS.fill:this.fill();break;case O.OPS.eoFill:this.eoFill();break;case O.OPS.stroke:this.stroke();break;case O.OPS.fillStroke:this.fillStroke();break;case O.OPS.eoFillStroke:this.eoFillStroke();break;case O.OPS.clip:this.clip("nonzero");break;case O.OPS.eoClip:this.clip("evenodd");break;case O.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case O.OPS.paintImageXObject:this.paintImageXObject(u[0]);break;case O.OPS.paintInlineImageXObject:this.paintInlineImageXObject(u[0]);break;case O.OPS.paintImageMaskXObject:this.paintImageMaskXObject(u[0]);break;case O.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(u[0],u[1]);break;case O.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case O.OPS.closePath:this.closePath();break;case O.OPS.closeStroke:this.closeStroke();break;case O.OPS.closeFillStroke:this.closeFillStroke();break;case O.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case O.OPS.nextLine:this.nextLine();break;case O.OPS.transform:this.transform(u[0],u[1],u[2],u[3],u[4],u[5]);break;case O.OPS.constructPath:this.constructPath(u[0],u[1]);break;case O.OPS.endPath:this.endPath();break;case 92:this.group(e.items);break;default:(0,O.warn)(`Unimplemented operator ${s}`);break}}}setWordSpacing(t){this.current.wordSpacing=t}setCharSpacing(t){this.current.charSpacing=t}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(t,e,s,i,u,w){const o=this.current;o.textMatrix=o.lineMatrix=[t,e,s,i,u,w],o.textMatrixScale=Math.hypot(t,e),o.x=o.lineX=0,o.y=o.lineY=0,o.xcoords=[],o.ycoords=[],o.tspan=this.svgFactory.createElement("svg:tspan"),o.tspan.setAttributeNS(null,"font-family",o.fontFamily),o.tspan.setAttributeNS(null,"font-size",`${a(o.fontSize)}px`),o.tspan.setAttributeNS(null,"y",a(-o.y)),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtElement.append(o.tspan)}beginText(){const t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=O.IDENTITY_MATRIX,t.lineMatrix=O.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}moveText(t,e){const s=this.current;s.x=s.lineX+=t,s.y=s.lineY+=e,s.xcoords=[],s.ycoords=[],s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${a(s.fontSize)}px`),s.tspan.setAttributeNS(null,"y",a(-s.y))}showText(t){const e=this.current,s=e.font,i=e.fontSize;if(i===0)return;const u=e.fontSizeScale,w=e.charSpacing,o=e.wordSpacing,F=e.fontDirection,X=e.textHScale*F,le=s.vertical,H=le?1:-1,Z=s.defaultVMetrics,ae=i*e.fontMatrix[0];let J=0;for(const Y of t){if(Y===null){J+=F*o;continue}else if(typeof Y=="number"){J+=H*Y*i/1e3;continue}const we=(Y.isSpace?o:0)+w,Ee=Y.fontChar;let Q,y,E=Y.width;if(le){let q;const j=Y.vmetric||Z;q=Y.vmetric?j[1]:E*.5,q=-q*ae;const ne=j[2]*ae;E=j?-j[0]:E,Q=q/u,y=(J+ne)/u}else Q=J/u,y=0;(Y.isInFont||s.missingFile)&&(e.xcoords.push(e.x+Q),le&&e.ycoords.push(-e.y+y),e.tspan.textContent+=Ee);let L;le?L=E*ae-we*F:L=E*ae+we*F,J+=L}e.tspan.setAttributeNS(null,"x",e.xcoords.map(a).join(" ")),le?e.tspan.setAttributeNS(null,"y",e.ycoords.map(a).join(" ")):e.tspan.setAttributeNS(null,"y",a(-e.y)),le?e.y-=J:e.x+=J*X,e.tspan.setAttributeNS(null,"font-family",e.fontFamily),e.tspan.setAttributeNS(null,"font-size",`${a(e.fontSize)}px`),e.fontStyle!==I.fontStyle&&e.tspan.setAttributeNS(null,"font-style",e.fontStyle),e.fontWeight!==I.fontWeight&&e.tspan.setAttributeNS(null,"font-weight",e.fontWeight);const ge=e.textRenderingMode&O.TextRenderingMode.FILL_STROKE_MASK;if(ge===O.TextRenderingMode.FILL||ge===O.TextRenderingMode.FILL_STROKE?(e.fillColor!==I.fillColor&&e.tspan.setAttributeNS(null,"fill",e.fillColor),e.fillAlpha<1&&e.tspan.setAttributeNS(null,"fill-opacity",e.fillAlpha)):e.textRenderingMode===O.TextRenderingMode.ADD_TO_PATH?e.tspan.setAttributeNS(null,"fill","transparent"):e.tspan.setAttributeNS(null,"fill","none"),ge===O.TextRenderingMode.STROKE||ge===O.TextRenderingMode.FILL_STROKE){const Y=1/(e.textMatrixScale||1);this._setStrokeAttributes(e.tspan,Y)}let ye=e.textMatrix;e.textRise!==0&&(ye=ye.slice(),ye[5]+=e.textRise),e.txtElement.setAttributeNS(null,"transform",`${p(ye)} scale(${a(X)}, -1)`),e.txtElement.setAttributeNS(D,"xml:space","preserve"),e.txtElement.append(e.tspan),e.txtgrp.append(e.txtElement),this._ensureTransformGroup().append(e.txtElement)}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const e=C(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${t.loadedName}"; src: url(${e}); }
`}setFont(t){const e=this.current,s=this.commonObjs.get(t[0]);let i=t[1];e.font=s,this.embedFonts&&!s.missingFile&&!this.embeddedFonts[s.loadedName]&&(this.addFontStyle(s),this.embeddedFonts[s.loadedName]=s),e.fontMatrix=s.fontMatrix||O.FONT_IDENTITY_MATRIX;let u="normal";s.black?u="900":s.bold&&(u="bold");const w=s.italic?"italic":"normal";i<0?(i=-i,e.fontDirection=-1):e.fontDirection=1,e.fontSize=i,e.fontFamily=s.loadedName,e.fontWeight=u,e.fontStyle=w,e.tspan=this.svgFactory.createElement("svg:tspan"),e.tspan.setAttributeNS(null,"y",a(-e.y)),e.xcoords=[],e.ycoords=[]}endText(){var e;const t=this.current;t.textRenderingMode&O.TextRenderingMode.ADD_TO_PATH_FLAG&&((e=t.txtElement)!=null&&e.hasChildNodes())&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(t){t>0&&(this.current.lineWidth=t)}setLineCap(t){this.current.lineCap=d[t]}setLineJoin(t){this.current.lineJoin=k[t]}setMiterLimit(t){this.current.miterLimit=t}setStrokeAlpha(t){this.current.strokeAlpha=t}setStrokeRGBColor(t,e,s){this.current.strokeColor=O.Util.makeHexColor(t,e,s)}setFillAlpha(t){this.current.fillAlpha=t}setFillRGBColor(t,e,s){this.current.fillColor=O.Util.makeHexColor(t,e,s),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}shadingFill(t){const e=this.viewport.width,s=this.viewport.height,i=O.Util.inverseTransform(this.transformMatrix),u=O.Util.applyTransform([0,0],i),w=O.Util.applyTransform([0,s],i),o=O.Util.applyTransform([e,0],i),F=O.Util.applyTransform([e,s],i),X=Math.min(u[0],w[0],o[0],F[0]),le=Math.min(u[1],w[1],o[1],F[1]),H=Math.max(u[0],w[0],o[0],F[0]),Z=Math.max(u[1],w[1],o[1],F[1]),ae=this.svgFactory.createElement("svg:rect");ae.setAttributeNS(null,"x",X),ae.setAttributeNS(null,"y",le),ae.setAttributeNS(null,"width",H-X),ae.setAttributeNS(null,"height",Z-le),ae.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&ae.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(ae)}_makeColorN_Pattern(t){return t[0]==="TilingPattern"?this._makeTilingPattern(t):this._makeShadingPattern(t)}_makeTilingPattern(t){const e=t[1],s=t[2],i=t[3]||O.IDENTITY_MATRIX,[u,w,o,F]=t[4],X=t[5],le=t[6],H=t[7],Z=`shading${f++}`,[ae,J,ge,ye]=O.Util.normalizeRect([...O.Util.applyTransform([u,w],i),...O.Util.applyTransform([o,F],i)]),[Y,we]=O.Util.singularValueDecompose2dScale(i),Ee=X*Y,Q=le*we,y=this.svgFactory.createElement("svg:pattern");y.setAttributeNS(null,"id",Z),y.setAttributeNS(null,"patternUnits","userSpaceOnUse"),y.setAttributeNS(null,"width",Ee),y.setAttributeNS(null,"height",Q),y.setAttributeNS(null,"x",`${ae}`),y.setAttributeNS(null,"y",`${J}`);const E=this.svg,L=this.transformMatrix,q=this.current.fillColor,j=this.current.strokeColor,ne=this.svgFactory.create(ge-ae,ye-J);if(this.svg=ne,this.transformMatrix=i,H===2){const U=O.Util.makeHexColor(...e);this.current.fillColor=U,this.current.strokeColor=U}return this.executeOpTree(this.convertOpList(s)),this.svg=E,this.transformMatrix=L,this.current.fillColor=q,this.current.strokeColor=j,y.append(ne.childNodes[0]),this.defs.append(y),`url(#${Z})`}_makeShadingPattern(t){switch(typeof t=="string"&&(t=this.objs.get(t)),t[0]){case"RadialAxial":const e=`shading${f++}`,s=t[3];let i;switch(t[1]){case"axial":const u=t[4],w=t[5];i=this.svgFactory.createElement("svg:linearGradient"),i.setAttributeNS(null,"id",e),i.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),i.setAttributeNS(null,"x1",u[0]),i.setAttributeNS(null,"y1",u[1]),i.setAttributeNS(null,"x2",w[0]),i.setAttributeNS(null,"y2",w[1]);break;case"radial":const o=t[4],F=t[5],X=t[6],le=t[7];i=this.svgFactory.createElement("svg:radialGradient"),i.setAttributeNS(null,"id",e),i.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),i.setAttributeNS(null,"cx",F[0]),i.setAttributeNS(null,"cy",F[1]),i.setAttributeNS(null,"r",le),i.setAttributeNS(null,"fx",o[0]),i.setAttributeNS(null,"fy",o[1]),i.setAttributeNS(null,"fr",X);break;default:throw new Error(`Unknown RadialAxial type: ${t[1]}`)}for(const u of s){const w=this.svgFactory.createElement("svg:stop");w.setAttributeNS(null,"offset",u[0]),w.setAttributeNS(null,"stop-color",u[1]),i.append(w)}return this.defs.append(i),`url(#${e})`;case"Mesh":return(0,O.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${t[0]}`)}}setDash(t,e){this.current.dashArray=t,this.current.dashPhase=e}constructPath(t,e){const s=this.current;let i=s.x,u=s.y,w=[],o=0;for(const F of t)switch(F|0){case O.OPS.rectangle:i=e[o++],u=e[o++];const X=e[o++],le=e[o++],H=i+X,Z=u+le;w.push("M",a(i),a(u),"L",a(H),a(u),"L",a(H),a(Z),"L",a(i),a(Z),"Z");break;case O.OPS.moveTo:i=e[o++],u=e[o++],w.push("M",a(i),a(u));break;case O.OPS.lineTo:i=e[o++],u=e[o++],w.push("L",a(i),a(u));break;case O.OPS.curveTo:i=e[o+4],u=e[o+5],w.push("C",a(e[o]),a(e[o+1]),a(e[o+2]),a(e[o+3]),a(i),a(u)),o+=6;break;case O.OPS.curveTo2:w.push("C",a(i),a(u),a(e[o]),a(e[o+1]),a(e[o+2]),a(e[o+3])),i=e[o+2],u=e[o+3],o+=4;break;case O.OPS.curveTo3:i=e[o+2],u=e[o+3],w.push("C",a(e[o]),a(e[o+1]),a(i),a(u),a(i),a(u)),o+=4;break;case O.OPS.closePath:w.push("Z");break}w=w.join(" "),s.path&&t.length>0&&t[0]!==O.OPS.rectangle&&t[0]!==O.OPS.moveTo?w=s.path.getAttributeNS(null,"d")+w:(s.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(s.path)),s.path.setAttributeNS(null,"d",w),s.path.setAttributeNS(null,"fill","none"),s.element=s.path,s.setCurrentPoint(i,u)}endPath(){const t=this.current;if(t.path=null,!this.pendingClip)return;if(!t.element){this.pendingClip=null;return}const e=`clippath${m++}`,s=this.svgFactory.createElement("svg:clipPath");s.setAttributeNS(null,"id",e),s.setAttributeNS(null,"transform",p(this.transformMatrix));const i=t.element.cloneNode(!0);if(this.pendingClip==="evenodd"?i.setAttributeNS(null,"clip-rule","evenodd"):i.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,s.append(i),this.defs.append(s),t.activeClipUrl){t.clipGroup=null;for(const u of this.extraStack)u.clipGroup=null;s.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl=`url(#${e})`,this.tgrp=null}clip(t){this.pendingClip=t}closePath(){const t=this.current;if(t.path){const e=`${t.path.getAttributeNS(null,"d")}Z`;t.path.setAttributeNS(null,"d",e)}}setLeading(t){this.current.leading=-t}setTextRise(t){this.current.textRise=t}setTextRenderingMode(t){this.current.textRenderingMode=t}setHScale(t){this.current.textHScale=t/100}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,s]of t)switch(e){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s);break;case"CA":this.setStrokeAlpha(s);break;case"ca":this.setFillAlpha(s);break;default:(0,O.warn)(`Unimplemented graphic state operator ${e}`);break}}fill(){const t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}stroke(){const t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(t,e=1){const s=this.current;let i=s.dashArray;e!==1&&i.length>0&&(i=i.map(function(u){return e*u})),t.setAttributeNS(null,"stroke",s.strokeColor),t.setAttributeNS(null,"stroke-opacity",s.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",a(s.miterLimit)),t.setAttributeNS(null,"stroke-linecap",s.lineCap),t.setAttributeNS(null,"stroke-linejoin",s.lineJoin),t.setAttributeNS(null,"stroke-width",a(e*s.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",i.map(a).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",a(e*s.dashPhase)+"px")}eoFill(){var t;(t=this.current.element)==null||t.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var t;(t=this.current.element)==null||t.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(t)}paintImageXObject(t){const e=this.getObject(t);if(!e){(0,O.warn)(`Dependent image with object ID ${t} is not ready yet`);return}this.paintInlineImageXObject(e)}paintInlineImageXObject(t,e){const s=t.width,i=t.height,u=v(t,this.forceDataSchema,!!e),w=this.svgFactory.createElement("svg:rect");w.setAttributeNS(null,"x","0"),w.setAttributeNS(null,"y","0"),w.setAttributeNS(null,"width",a(s)),w.setAttributeNS(null,"height",a(i)),this.current.element=w,this.clip("nonzero");const o=this.svgFactory.createElement("svg:image");o.setAttributeNS(_,"xlink:href",u),o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y",a(-i)),o.setAttributeNS(null,"width",a(s)+"px"),o.setAttributeNS(null,"height",a(i)+"px"),o.setAttributeNS(null,"transform",`scale(${a(1/s)} ${a(-1/i)})`),e?e.append(o):this._ensureTransformGroup().append(o)}paintImageMaskXObject(t){const e=this.getObject(t.data,t);if(e.bitmap){(0,O.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const s=this.current,i=e.width,u=e.height,w=s.fillColor;s.maskId=`mask${b++}`;const o=this.svgFactory.createElement("svg:mask");o.setAttributeNS(null,"id",s.maskId);const F=this.svgFactory.createElement("svg:rect");F.setAttributeNS(null,"x","0"),F.setAttributeNS(null,"y","0"),F.setAttributeNS(null,"width",a(i)),F.setAttributeNS(null,"height",a(u)),F.setAttributeNS(null,"fill",w),F.setAttributeNS(null,"mask",`url(#${s.maskId})`),this.defs.append(o),this._ensureTransformGroup().append(F),this.paintInlineImageXObject(e,o)}paintFormXObjectBegin(t,e){if(Array.isArray(t)&&t.length===6&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e){const s=e[2]-e[0],i=e[3]-e[1],u=this.svgFactory.createElement("svg:rect");u.setAttributeNS(null,"x",e[0]),u.setAttributeNS(null,"y",e[1]),u.setAttributeNS(null,"width",a(s)),u.setAttributeNS(null,"height",a(i)),this.current.element=u,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(t){const e=this.svgFactory.create(t.width,t.height),s=this.svgFactory.createElement("svg:defs");e.append(s),this.defs=s;const i=this.svgFactory.createElement("svg:g");return i.setAttributeNS(null,"transform",p(t.transform)),e.append(i),this.svg=i,e}_ensureClipGroup(){if(!this.current.clipGroup){const t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(t),this.current.clipGroup=t}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",p(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(re){var P=__webpack_module_cache__[re];if(P!==void 0)return P.exports;var ee=__webpack_module_cache__[re]={exports:{}};return __webpack_modules__[re](ee,ee.exports,__w_pdfjs_require__),ee.exports}var __webpack_exports__={};return(()=>{var re=__webpack_exports__;Object.defineProperty(re,"__esModule",{value:!0}),Object.defineProperty(re,"AbortException",{enumerable:!0,get:function(){return P.AbortException}}),Object.defineProperty(re,"AnnotationEditorLayer",{enumerable:!0,get:function(){return ue.AnnotationEditorLayer}}),Object.defineProperty(re,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return P.AnnotationEditorParamsType}}),Object.defineProperty(re,"AnnotationEditorType",{enumerable:!0,get:function(){return P.AnnotationEditorType}}),Object.defineProperty(re,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return G.AnnotationEditorUIManager}}),Object.defineProperty(re,"AnnotationLayer",{enumerable:!0,get:function(){return I.AnnotationLayer}}),Object.defineProperty(re,"AnnotationMode",{enumerable:!0,get:function(){return P.AnnotationMode}}),Object.defineProperty(re,"CMapCompressionType",{enumerable:!0,get:function(){return P.CMapCompressionType}}),Object.defineProperty(re,"FeatureTest",{enumerable:!0,get:function(){return P.FeatureTest}}),Object.defineProperty(re,"GlobalWorkerOptions",{enumerable:!0,get:function(){return D.GlobalWorkerOptions}}),Object.defineProperty(re,"InvalidPDFException",{enumerable:!0,get:function(){return P.InvalidPDFException}}),Object.defineProperty(re,"MissingPDFException",{enumerable:!0,get:function(){return P.MissingPDFException}}),Object.defineProperty(re,"OPS",{enumerable:!0,get:function(){return P.OPS}}),Object.defineProperty(re,"PDFDataRangeTransport",{enumerable:!0,get:function(){return ee.PDFDataRangeTransport}}),Object.defineProperty(re,"PDFDateString",{enumerable:!0,get:function(){return T.PDFDateString}}),Object.defineProperty(re,"PDFWorker",{enumerable:!0,get:function(){return ee.PDFWorker}}),Object.defineProperty(re,"PasswordResponses",{enumerable:!0,get:function(){return P.PasswordResponses}}),Object.defineProperty(re,"PermissionFlag",{enumerable:!0,get:function(){return P.PermissionFlag}}),Object.defineProperty(re,"PixelsPerInch",{enumerable:!0,get:function(){return T.PixelsPerInch}}),Object.defineProperty(re,"PromiseCapability",{enumerable:!0,get:function(){return P.PromiseCapability}}),Object.defineProperty(re,"RenderingCancelledException",{enumerable:!0,get:function(){return T.RenderingCancelledException}}),Object.defineProperty(re,"SVGGraphics",{enumerable:!0,get:function(){return _.SVGGraphics}}),Object.defineProperty(re,"UnexpectedResponseException",{enumerable:!0,get:function(){return P.UnexpectedResponseException}}),Object.defineProperty(re,"Util",{enumerable:!0,get:function(){return P.Util}}),Object.defineProperty(re,"VerbosityLevel",{enumerable:!0,get:function(){return P.VerbosityLevel}}),Object.defineProperty(re,"XfaLayer",{enumerable:!0,get:function(){return d.XfaLayer}}),Object.defineProperty(re,"build",{enumerable:!0,get:function(){return ee.build}}),Object.defineProperty(re,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return P.createValidAbsoluteUrl}}),Object.defineProperty(re,"getDocument",{enumerable:!0,get:function(){return ee.getDocument}}),Object.defineProperty(re,"getFilenameFromUrl",{enumerable:!0,get:function(){return T.getFilenameFromUrl}}),Object.defineProperty(re,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return T.getPdfFilenameFromUrl}}),Object.defineProperty(re,"getXfaPageViewport",{enumerable:!0,get:function(){return T.getXfaPageViewport}}),Object.defineProperty(re,"isDataScheme",{enumerable:!0,get:function(){return T.isDataScheme}}),Object.defineProperty(re,"isPdfFile",{enumerable:!0,get:function(){return T.isPdfFile}}),Object.defineProperty(re,"loadScript",{enumerable:!0,get:function(){return T.loadScript}}),Object.defineProperty(re,"normalizeUnicode",{enumerable:!0,get:function(){return P.normalizeUnicode}}),Object.defineProperty(re,"renderTextLayer",{enumerable:!0,get:function(){return O.renderTextLayer}}),Object.defineProperty(re,"setLayerDimensions",{enumerable:!0,get:function(){return T.setLayerDimensions}}),Object.defineProperty(re,"shadow",{enumerable:!0,get:function(){return P.shadow}}),Object.defineProperty(re,"updateTextLayer",{enumerable:!0,get:function(){return O.updateTextLayer}}),Object.defineProperty(re,"version",{enumerable:!0,get:function(){return ee.version}});var P=__w_pdfjs_require__(1),ee=__w_pdfjs_require__(2),T=__w_pdfjs_require__(6),O=__w_pdfjs_require__(26),ue=__w_pdfjs_require__(27),G=__w_pdfjs_require__(5),I=__w_pdfjs_require__(32),D=__w_pdfjs_require__(14),_=__w_pdfjs_require__(35),d=__w_pdfjs_require__(34)})(),__webpack_exports__})())}(pdf)),pdf.exports}var pdfExports=requirePdf(),pdf_viewer$1={exports:{}};(function(re,P){(function(T,O){re.exports=O()})(globalThis,()=>(()=>{var ee=[,(G,I,D)=>{var c,a,qt,m,Hi;Object.defineProperty(I,"__esModule",{value:!0}),I.SimpleLinkService=I.PDFLinkService=I.LinkTarget=void 0;var _=D(2);const d="noopener noreferrer nofollow",k={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};I.LinkTarget=k;function C(t,{url:e,target:s,rel:i,enabled:u=!0}={}){if(!e||typeof e!="string")throw new Error('A valid "url" parameter must provided.');const w=(0,_.removeNullCharacters)(e);u?t.href=t.title=w:(t.href="",t.title=`Disabled: ${w}`,t.onclick=()=>!1);let o="";switch(s){case k.NONE:break;case k.SELF:o="_self";break;case k.BLANK:o="_blank";break;case k.PARENT:o="_parent";break;case k.TOP:o="_top";break}t.target=o,t.rel=typeof i=="string"?i:d}const f=class f{constructor({eventBus:e,externalLinkTarget:s=null,externalLinkRel:i=null,ignoreDestinationZoom:u=!1}={}){z(this,a);z(this,c,new Map);this.eventBus=e,this.externalLinkTarget=s,this.externalLinkRel=i,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=u,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(e,s=null){this.baseUrl=s,this.pdfDocument=e,l(this,c).clear()}setViewer(e){this.pdfViewer=e}setHistory(e){this.pdfHistory=e}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(e){this.pdfViewer.currentPageNumber=e}get rotation(){return this.pdfViewer.pagesRotation}set rotation(e){this.pdfViewer.pagesRotation=e}get isInPresentationMode(){return this.pdfViewer.isInPresentationMode}async goToDestination(e){if(!this.pdfDocument)return;let s,i;if(typeof e=="string"?(s=e,i=await this.pdfDocument.getDestination(e)):(s=null,i=await e),!Array.isArray(i)){console.error(`PDFLinkService.goToDestination: "${i}" is not a valid destination array, for dest="${e}".`);return}K(this,a,qt).call(this,e,s,i)}goToPage(e){if(!this.pdfDocument)return;const s=typeof e=="string"&&this.pdfViewer.pageLabelToPageNumber(e)||e|0;if(!(Number.isInteger(s)&&s>0&&s<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${e}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(s)),this.pdfViewer.scrollPageIntoView({pageNumber:s})}addLinkAttributes(e,s,i=!1){C(e,{url:s,target:i?k.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(e){if(typeof e=="string"){if(e.length>0)return this.getAnchorUrl("#"+escape(e))}else if(Array.isArray(e)){const s=JSON.stringify(e);if(s.length>0)return this.getAnchorUrl("#"+escape(s))}return this.getAnchorUrl("")}getAnchorUrl(e){return this.baseUrl?this.baseUrl+e:e}setHash(e){var u;if(!this.pdfDocument)return;let s,i;if(e.includes("=")){const w=(0,_.parseQueryString)(e);if(w.has("search")){const o=w.get("search").replaceAll('"',""),F=w.get("phrase")==="true";this.eventBus.dispatch("findfromurlhash",{source:this,query:F?o:o.match(/\S+/g)})}if(w.has("page")&&(s=w.get("page")|0||1),w.has("zoom")){const o=w.get("zoom").split(","),F=o[0],X=parseFloat(F);F.includes("Fit")?F==="Fit"||F==="FitB"?i=[null,{name:F}]:F==="FitH"||F==="FitBH"||F==="FitV"||F==="FitBV"?i=[null,{name:F},o.length>1?o[1]|0:null]:F==="FitR"?o.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):i=[null,{name:F},o[1]|0,o[2]|0,o[3]|0,o[4]|0]:console.error(`PDFLinkService.setHash: "${F}" is not a valid zoom value.`):i=[null,{name:"XYZ"},o.length>1?o[1]|0:null,o.length>2?o[2]|0:null,X?X/100:F]}i?this.pdfViewer.scrollPageIntoView({pageNumber:s||this.page,destArray:i,allowNegativeOffset:!0}):s&&(this.page=s),w.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:w.get("pagemode")}),w.has("nameddest")&&this.goToDestination(w.get("nameddest"))}else{i=unescape(e);try{i=JSON.parse(i),Array.isArray(i)||(i=i.toString())}catch{}if(typeof i=="string"||K(u=f,m,Hi).call(u,i)){this.goToDestination(i);return}console.error(`PDFLinkService.setHash: "${unescape(e)}" is not a valid destination.`)}}executeNamedAction(e){var s,i;switch(e){case"GoBack":(s=this.pdfHistory)==null||s.back();break;case"GoForward":(i=this.pdfHistory)==null||i.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break}this.eventBus.dispatch("namedaction",{source:this,action:e})}async executeSetOCGState(e){const s=this.pdfDocument,i=await this.pdfViewer.optionalContentConfigPromise;if(s!==this.pdfDocument)return;let u;for(const w of e.state){switch(w){case"ON":case"OFF":case"Toggle":u=w;continue}switch(u){case"ON":i.setVisibility(w,!0);break;case"OFF":i.setVisibility(w,!1);break;case"Toggle":const o=i.getGroup(w);o&&i.setVisibility(w,!o.visible);break}}this.pdfViewer.optionalContentConfigPromise=Promise.resolve(i)}cachePageRef(e,s){if(!s)return;const i=s.gen===0?`${s.num}R`:`${s.num}R${s.gen}`;l(this,c).set(i,e)}_cachedPageNumber(e){if(!e)return null;const s=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,c).get(s)||null}isPageVisible(e){return this.pdfViewer.isPageVisible(e)}isPageCached(e){return this.pdfViewer.isPageCached(e)}};c=new WeakMap,a=new WeakSet,qt=function(e,s=null,i){const u=i[0];let w;if(typeof u=="object"&&u!==null){if(w=this._cachedPageNumber(u),!w){this.pdfDocument.getPageIndex(u).then(o=>{this.cachePageRef(o+1,u),K(this,a,qt).call(this,e,s,i)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${u}" is not a valid page reference, for dest="${e}".`)});return}}else if(Number.isInteger(u))w=u+1;else{console.error(`PDFLinkService.#goToDestinationHelper: "${u}" is not a valid destination reference, for dest="${e}".`);return}if(!w||w<1||w>this.pagesCount){console.error(`PDFLinkService.#goToDestinationHelper: "${w}" is not a valid page number, for dest="${e}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:s,explicitDest:i,pageNumber:w})),this.pdfViewer.scrollPageIntoView({pageNumber:w,destArray:i,ignoreDestinationZoom:this._ignoreDestinationZoom})},m=new WeakSet,Hi=function(e){if(!Array.isArray(e))return!1;const s=e.length;if(s<2)return!1;const i=e[0];if(!(typeof i=="object"&&Number.isInteger(i.num)&&Number.isInteger(i.gen))&&!(Number.isInteger(i)&&i>=0))return!1;const u=e[1];if(!(typeof u=="object"&&typeof u.name=="string"))return!1;let w=!0;switch(u.name){case"XYZ":if(s!==5)return!1;break;case"Fit":case"FitB":return s===2;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s!==3)return!1;break;case"FitR":if(s!==6)return!1;w=!1;break;default:return!1}for(let o=2;o<s;o++){const F=e[o];if(!(typeof F=="number"||w&&F===null))return!1}return!0},z(f,m);let v=f;I.PDFLinkService=v;class r{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(e){}get rotation(){return 0}set rotation(e){}get isInPresentationMode(){return!1}async goToDestination(e){}goToPage(e){}addLinkAttributes(e,s,i=!1){C(e,{url:s,enabled:this.externalLinkEnabled})}getDestinationHash(e){return"#"}getAnchorUrl(e){return"#"}setHash(e){}executeNamedAction(e){}executeSetOCGState(e){}cachePageRef(e,s){}isPageVisible(e){return!0}isPageCached(e){return!0}}I.SimpleLinkService=r},(G,I)=>{var A,M,R,W,me;Object.defineProperty(I,"__esModule",{value:!0}),I.animationStarted=I.VERTICAL_PADDING=I.UNKNOWN_SCALE=I.TextLayerMode=I.SpreadMode=I.SidebarView=I.ScrollMode=I.SCROLLBAR_PADDING=I.RenderingStates=I.ProgressBar=I.PresentationModeState=I.OutputScale=I.MIN_SCALE=I.MAX_SCALE=I.MAX_AUTO_SCALE=I.DEFAULT_SCALE_VALUE=I.DEFAULT_SCALE_DELTA=I.DEFAULT_SCALE=I.CursorTool=I.AutoPrintRegExp=void 0,I.apiPageLayoutToViewerModes=V,I.apiPageModeToSidebarView=n,I.approximateFraction=Z,I.backtrackBeforeAllVisibleElements=ge,I.binarySearchFirstItem=H,I.docStyle=void 0,I.getActiveOrFocusedElement=B,I.getPageSizeInches=J,I.getVisibleElements=ye,I.isPortraitOrientation=L,I.isValidRotation=Q,I.isValidScrollMode=y,I.isValidSpreadMode=E,I.noContextMenuHandler=Y,I.normalizeWheelEventDelta=Ee,I.normalizeWheelEventDirection=we,I.parseQueryString=F,I.removeNullCharacters=le,I.roundToDivide=ae,I.scrollIntoView=w,I.toggleCheckedBtn=h,I.watchScroll=o;const D="auto";I.DEFAULT_SCALE_VALUE=D;const _=1;I.DEFAULT_SCALE=_;const d=1.1;I.DEFAULT_SCALE_DELTA=d;const k=.1;I.MIN_SCALE=k;const C=10;I.MAX_SCALE=C;const v=0;I.UNKNOWN_SCALE=v;const r=1.25;I.MAX_AUTO_SCALE=r;const c=40;I.SCROLLBAR_PADDING=c;const a=5;I.VERTICAL_PADDING=a;const p={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};I.RenderingStates=p;const m={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};I.PresentationModeState=m;const b={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};I.SidebarView=b;const f={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2};I.TextLayerMode=f;const t={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};I.ScrollMode=t;const e={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};I.SpreadMode=e;const s={SELECT:0,HAND:1,ZOOM:2};I.CursorTool=s;const i=/\bprint\s*\(/;I.AutoPrintRegExp=i;class u{constructor(){const $=window.devicePixelRatio||1;this.sx=$,this.sy=$}get scaled(){return this.sx!==1||this.sy!==1}}I.OutputScale=u;function w(N,$,ce=!1){let ie=N.offsetParent;if(!ie){console.error("offsetParent is not set -- cannot scroll");return}let de=N.offsetTop+N.clientTop,be=N.offsetLeft+N.clientLeft;for(;ie.clientHeight===ie.scrollHeight&&ie.clientWidth===ie.scrollWidth||ce&&(ie.classList.contains("markedContent")||getComputedStyle(ie).overflow==="hidden");)if(de+=ie.offsetTop,be+=ie.offsetLeft,ie=ie.offsetParent,!ie)return;$&&($.top!==void 0&&(de+=$.top),$.left!==void 0&&(be+=$.left,ie.scrollLeft=be)),ie.scrollTop=de}function o(N,$){const ce=function(be){de||(de=window.requestAnimationFrame(function(){de=null;const xe=N.scrollLeft,Pe=ie.lastX;xe!==Pe&&(ie.right=xe>Pe),ie.lastX=xe;const Re=N.scrollTop,oe=ie.lastY;Re!==oe&&(ie.down=Re>oe),ie.lastY=Re,$(ie)}))},ie={right:!0,down:!0,lastX:N.scrollLeft,lastY:N.scrollTop,_eventHandler:ce};let de=null;return N.addEventListener("scroll",ce,!0),ie}function F(N){const $=new Map;for(const[ce,ie]of new URLSearchParams(N))$.set(ce.toLowerCase(),ie);return $}const X=/[\x01-\x1F]/g;function le(N,$=!1){return typeof N!="string"?(console.error("The argument must be a string."),N):($&&(N=N.replaceAll(X," ")),N.replaceAll("\0",""))}function H(N,$,ce=0){let ie=ce,de=N.length-1;if(de<0||!$(N[de]))return N.length;if($(N[ie]))return ie;for(;ie<de;){const be=ie+de>>1,ve=N[be];$(ve)?de=be:ie=be+1}return ie}function Z(N){if(Math.floor(N)===N)return[N,1];const $=1/N,ce=8;if($>ce)return[1,ce];if(Math.floor($)===$)return[1,$];const ie=N>1?$:N;let de=0,be=1,ve=1,xe=1;for(;;){const Re=de+ve,oe=be+xe;if(oe>ce)break;ie<=Re/oe?(ve=Re,xe=oe):(de=Re,be=oe)}let Pe;return ie-de/be<ve/xe-ie?Pe=ie===N?[de,be]:[be,de]:Pe=ie===N?[ve,xe]:[xe,ve],Pe}function ae(N,$){const ce=N%$;return ce===0?N:Math.round(N-ce+$)}function J({view:N,userUnit:$,rotate:ce}){const[ie,de,be,ve]=N,xe=ce%180!==0,Pe=(be-ie)/72*$,Re=(ve-de)/72*$;return{width:xe?Re:Pe,height:xe?Pe:Re}}function ge(N,$,ce){if(N<2)return N;let ie=$[N].div,de=ie.offsetTop+ie.clientTop;de>=ce&&(ie=$[N-1].div,de=ie.offsetTop+ie.clientTop);for(let be=N-2;be>=0&&(ie=$[be].div,!(ie.offsetTop+ie.clientTop+ie.clientHeight<=de));--be)N=be;return N}function ye({scrollEl:N,views:$,sortByVisibility:ce=!1,horizontal:ie=!1,rtl:de=!1}){const be=N.scrollTop,ve=be+N.clientHeight,xe=N.scrollLeft,Pe=xe+N.clientWidth;function Re(fe){const se=fe.div;return se.offsetTop+se.clientTop+se.clientHeight>be}function oe(fe){const se=fe.div,he=se.offsetLeft+se.clientLeft,pe=he+se.clientWidth;return de?he<Pe:pe>xe}const Ce=[],Me=new Set,Oe=$.length;let S=H($,ie?oe:Re);S>0&&S<Oe&&!ie&&(S=ge(S,$,be));let g=ie?Pe:-1;for(let fe=S;fe<Oe;fe++){const se=$[fe],he=se.div,pe=he.offsetLeft+he.clientLeft,Ae=he.offsetTop+he.clientTop,Te=he.clientWidth,Se=he.clientHeight,Fe=pe+Te,Ie=Ae+Se;if(g===-1)Ie>=ve&&(g=Ie);else if((ie?pe:Ae)>g)break;if(Ie<=be||Ae>=ve||Fe<=xe||pe>=Pe)continue;const Le=Math.max(0,be-Ae)+Math.max(0,Ie-ve),ke=Math.max(0,xe-pe)+Math.max(0,Fe-Pe),Ne=(Se-Le)/Se,Ve=(Te-ke)/Te,De=Ne*Ve*100|0;Ce.push({id:se.id,x:pe,y:Ae,view:se,percent:De,widthPercent:Ve*100|0}),Me.add(se.id)}const x=Ce[0],te=Ce.at(-1);return ce&&Ce.sort(function(fe,se){const he=fe.percent-se.percent;return Math.abs(he)>.001?-he:fe.id-se.id}),{first:x,last:te,views:Ce,ids:Me}}function Y(N){N.preventDefault()}function we(N){let $=Math.hypot(N.deltaX,N.deltaY);const ce=Math.atan2(N.deltaY,N.deltaX);return-.25*Math.PI<ce&&ce<.75*Math.PI&&($=-$),$}function Ee(N){const $=N.deltaMode;let ce=we(N);const ie=30,de=30;return $===WheelEvent.DOM_DELTA_PIXEL?ce/=ie*de:$===WheelEvent.DOM_DELTA_LINE&&(ce/=de),ce}function Q(N){return Number.isInteger(N)&&N%90===0}function y(N){return Number.isInteger(N)&&Object.values(t).includes(N)&&N!==t.UNKNOWN}function E(N){return Number.isInteger(N)&&Object.values(e).includes(N)&&N!==e.UNKNOWN}function L(N){return N.width<=N.height}const q=new Promise(function(N){window.requestAnimationFrame(N)});I.animationStarted=q;const j=document.documentElement.style;I.docStyle=j;function ne(N,$,ce){return Math.min(Math.max(N,$),ce)}class U{constructor($){z(this,A,null);z(this,M,null);z(this,R,0);z(this,W,null);z(this,me,!0);_e(this,A,$.classList),_e(this,W,$.style)}get percent(){return l(this,R)}set percent($){if(_e(this,R,ne($,0,100)),isNaN($)){l(this,A).add("indeterminate");return}l(this,A).remove("indeterminate"),l(this,W).setProperty("--progressBar-percent",`${l(this,R)}%`)}setWidth($){if(!$)return;const ie=$.parentNode.offsetWidth-$.offsetWidth;ie>0&&l(this,W).setProperty("--progressBar-end-offset",`${ie}px`)}setDisableAutoFetch($=5e3){isNaN(l(this,R))||(l(this,M)&&clearTimeout(l(this,M)),this.show(),_e(this,M,setTimeout(()=>{_e(this,M,null),this.hide()},$)))}hide(){l(this,me)&&(_e(this,me,!1),l(this,A).add("hidden"))}show(){l(this,me)||(_e(this,me,!0),l(this,A).remove("hidden"))}}A=new WeakMap,M=new WeakMap,R=new WeakMap,W=new WeakMap,me=new WeakMap,I.ProgressBar=U;function B(){let N=document,$=N.activeElement||N.querySelector(":focus");for(;$!=null&&$.shadowRoot;)N=$.shadowRoot,$=N.activeElement||N.querySelector(":focus");return $}function V(N){let $=t.VERTICAL,ce=e.NONE;switch(N){case"SinglePage":$=t.PAGE;break;case"OneColumn":break;case"TwoPageLeft":$=t.PAGE;case"TwoColumnLeft":ce=e.ODD;break;case"TwoPageRight":$=t.PAGE;case"TwoColumnRight":ce=e.EVEN;break}return{scrollMode:$,spreadMode:ce}}function n(N){switch(N){case"UseNone":return b.NONE;case"UseThumbs":return b.THUMBS;case"UseOutlines":return b.OUTLINE;case"UseAttachments":return b.ATTACHMENTS;case"UseOC":return b.LAYERS}return b.NONE}function h(N,$,ce=null){N.classList.toggle("toggled",$),N.setAttribute("aria-checked",$),ce==null||ce.classList.toggle("hidden",!$)}},(G,I,D)=>{var v,r,c,Kt;Object.defineProperty(I,"__esModule",{value:!0}),I.AnnotationLayerBuilder=void 0;var _=D(4),d=D(5),k=D(2);class C{constructor({pageDiv:m,pdfPage:b,linkService:f,downloadManager:t,annotationStorage:e=null,imageResourcesPath:s="",renderForms:i=!0,l10n:u=d.NullL10n,enableScripting:w=!1,hasJSActionsPromise:o=null,fieldObjectsPromise:F=null,annotationCanvasMap:X=null,accessibilityManager:le=null}){z(this,c);z(this,v,0);z(this,r,null);this.pageDiv=m,this.pdfPage=b,this.linkService=f,this.downloadManager=t,this.imageResourcesPath=s,this.renderForms=i,this.l10n=u,this.annotationStorage=e,this.enableScripting=w,this._hasJSActionsPromise=o||Promise.resolve(!1),this._fieldObjectsPromise=F||Promise.resolve(null),this._annotationCanvasMap=X,this._accessibilityManager=le,this.div=null,this._cancelled=!1,this._eventBus=f.eventBus}async render(m,b="display"){var s;if(this.div){if(this._cancelled||l(this,v)===0)return;_.AnnotationLayer.update({viewport:m.clone({dontFlip:!0}),div:this.div,annotationCanvasMap:this._annotationCanvasMap});return}const[f,t,e]=await Promise.all([this.pdfPage.getAnnotations({intent:b}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(!this._cancelled){if(_e(this,v,f.length),this.div=document.createElement("div"),this.div.className="annotationLayer",this.pageDiv.append(this.div),l(this,v)===0){this.hide();return}_.AnnotationLayer.render({viewport:m.clone({dontFlip:!0}),div:this.div,annotations:f,page:this.pdfPage,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:t,fieldObjects:e,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager}),this.l10n.translate(this.div),this.linkService.isInPresentationMode&&K(this,c,Kt).call(this,k.PresentationModeState.FULLSCREEN),l(this,r)||(_e(this,r,i=>{K(this,c,Kt).call(this,i.state)}),(s=this._eventBus)==null||s._on("presentationmodechanged",l(this,r)))}}cancel(){var m;this._cancelled=!0,l(this,r)&&((m=this._eventBus)==null||m._off("presentationmodechanged",l(this,r)),_e(this,r,null))}hide(){this.div&&(this.div.hidden=!0)}}v=new WeakMap,r=new WeakMap,c=new WeakSet,Kt=function(m){if(!this.div)return;let b=!1;switch(m){case k.PresentationModeState.FULLSCREEN:b=!0;break;case k.PresentationModeState.NORMAL:break;default:return}for(const f of this.div.childNodes)f.hasAttribute("data-internal-link")||(f.inert=b)},I.AnnotationLayerBuilder=C},G=>{let I;typeof window<"u"&&window["pdfjs-dist/build/pdf"]?I=window["pdfjs-dist/build/pdf"]:I=requirePdf(),G.exports=I},(G,I)=>{Object.defineProperty(I,"__esModule",{value:!0}),I.NullL10n=void 0,I.fixupLangCode=k,I.getL10nFallback=_;const D={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image"};D.print_progress_percent="{{progress}}%";function _(r,c){switch(r){case"find_match_count":r=`find_match_count[${c.total===1?"one":"other"}]`;break;case"find_match_count_limit":r=`find_match_count_limit[${c.limit===1?"one":"other"}]`;break}return D[r]||""}const d={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};function k(r){return d[r==null?void 0:r.toLowerCase()]||r}function C(r,c){return c?r.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(a,p)=>p in c?c[p]:"{{"+p+"}}"):r}const v={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(r,c=null,a=_(r,c)){return C(a,c)},async translate(r){}};I.NullL10n=v},(G,I,D)=>{var C;Object.defineProperty(I,"__esModule",{value:!0}),I.DownloadManager=void 0;var _=D(4);function d(v,r){const c=document.createElement("a");if(!c.click)throw new Error('DownloadManager: "a.click()" is not supported.');c.href=v,c.target="_parent","download"in c&&(c.download=r),(document.body||document.documentElement).append(c),c.click(),c.remove()}class k{constructor(){z(this,C,new WeakMap)}downloadUrl(r,c,a){if(!(0,_.createValidAbsoluteUrl)(r,"http://example.com")){console.error(`downloadUrl - not a valid URL: ${r}`);return}d(r+"#pdfjs.action=download",c)}downloadData(r,c,a){const p=URL.createObjectURL(new Blob([r],{type:a}));d(p,c)}openOrDownloadData(r,c,a){const m=(0,_.isPdfFile)(a)?"application/pdf":"";return this.downloadData(c,a,m),!1}download(r,c,a,p){const m=URL.createObjectURL(r);d(m,a)}}C=new WeakMap,I.DownloadManager=k},(G,I)=>{var C;Object.defineProperty(I,"__esModule",{value:!0}),I.WaitOnType=I.EventBus=I.AutomationEventBus=void 0,I.waitOnEventOrTimeout=_;const D={EVENT:"event",TIMEOUT:"timeout"};I.WaitOnType=D;function _({target:v,name:r,delay:c=0}){return new Promise(function(a,p){if(typeof v!="object"||!(r&&typeof r=="string")||!(Number.isInteger(c)&&c>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function m(e){v instanceof d?v._off(r,b):v.removeEventListener(r,b),t&&clearTimeout(t),a(e)}const b=m.bind(null,D.EVENT);v instanceof d?v._on(r,b):v.addEventListener(r,b);const f=m.bind(null,D.TIMEOUT),t=setTimeout(f,c)})}class d{constructor(){z(this,C,Object.create(null))}on(r,c,a=null){this._on(r,c,{external:!0,once:a==null?void 0:a.once})}off(r,c,a=null){this._off(r,c,{external:!0,once:a==null?void 0:a.once})}dispatch(r,c){const a=l(this,C)[r];if(!a||a.length===0)return;let p;for(const{listener:m,external:b,once:f}of a.slice(0)){if(f&&this._off(r,m),b){(p||(p=[])).push(m);continue}m(c)}if(p){for(const m of p)m(c);p=null}}_on(r,c,a=null){var m;((m=l(this,C))[r]||(m[r]=[])).push({listener:c,external:(a==null?void 0:a.external)===!0,once:(a==null?void 0:a.once)===!0})}_off(r,c,a=null){const p=l(this,C)[r];if(p){for(let m=0,b=p.length;m<b;m++)if(p[m].listener===c){p.splice(m,1);return}}}}C=new WeakMap,I.EventBus=d;class k extends d{dispatch(r,c){throw new Error("Not implemented: AutomationEventBus.dispatch")}}I.AutomationEventBus=k},(G,I,D)=>{Object.defineProperty(I,"__esModule",{value:!0}),I.GenericL10n=void 0,D(9);var _=D(5);const d=document.webL10n;class k{constructor(v){this._lang=v,this._ready=new Promise((r,c)=>{d.setLanguage((0,_.fixupLangCode)(v),()=>{r(d)})})}async getLanguage(){return(await this._ready).getLanguage()}async getDirection(){return(await this._ready).getDirection()}async get(v,r=null,c=(0,_.getL10nFallback)(v,r)){return(await this._ready).get(v,r,c)}async translate(v){return(await this._ready).translate(v)}}I.GenericL10n=k},()=>{document.webL10n=function(G,I,D){var _={},d="",k="textContent",C="",v={},r="loading",c=!0;function a(){return I.querySelectorAll('link[type="application/l10n"]')}function p(){var H=I.querySelector('script[type="application/l10n"]');return H?JSON.parse(H.innerHTML):null}function m(H){return H?H.querySelectorAll("*[data-l10n-id]"):[]}function b(H){if(!H)return{};var Z=H.getAttribute("data-l10n-id"),ae=H.getAttribute("data-l10n-args"),J={};if(ae)try{J=JSON.parse(ae)}catch{console.warn("could not parse arguments for #"+Z)}return{id:Z,args:J}}function f(H,Z,ae){Z=Z||function(ye){},ae=ae||function(){};var J=new XMLHttpRequest;J.open("GET",H,c),J.overrideMimeType&&J.overrideMimeType("text/plain; charset=utf-8"),J.onreadystatechange=function(){J.readyState==4&&(J.status==200||J.status===0?Z(J.responseText):ae())},J.onerror=ae,J.ontimeout=ae;try{J.send(null)}catch{ae()}}function t(H,Z,ae,J){var ge=H.replace(/[^\/]*$/,"")||"./";function ye(we){return we.lastIndexOf("\\")<0?we:we.replace(/\\\\/g,"\\").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function Y(we,Ee){var Q={},y=/^\s*|\s*$/,E=/^\s*#|^\s*$/,L=/^\s*\[(.*)\]\s*$/,q=/^\s*@import\s+url\((.*)\)\s*$/i,j=/^([^=\s]*)\s*=\s*(.+)$/;function ne(B,V,n){var h=B.replace(y,"").split(/[\r\n]+/),A="*",M=Z.split("-",1)[0],R=!1,W="";function me(){for(;;){if(!h.length){n();return}var N=h.shift();if(!E.test(N)){if(V){if(W=L.exec(N),W){A=W[1].toLowerCase(),R=A!=="*"&&A!==Z&&A!==M;continue}else if(R)continue;if(W=q.exec(N),W){U(ge+W[1],me);return}}var $=N.match(j);$&&$.length==3&&(Q[$[1]]=ye($[2]))}}}me()}function U(B,V){f(B,function(n){ne(n,!1,V)},function(){console.warn(B+" not found."),V()})}ne(we,!0,function(){Ee(Q)})}f(H,function(we){d+=we,Y(we,function(Ee){for(var Q in Ee){var y,E,L=Q.lastIndexOf(".");L>0?(y=Q.substring(0,L),E=Q.substring(L+1)):(y=Q,E=k),_[y]||(_[y]={}),_[y][E]=Ee[Q]}ae&&ae()})},J)}function e(H,Z){H&&(H=H.toLowerCase()),Z=Z||function(){},s(),C=H;var ae=a(),J=ae.length;if(J===0){var ge=p();if(ge&&ge.locales&&ge.default_locale){if(console.log("using the embedded JSON directory, early way out"),_=ge.locales[H],!_){var ye=ge.default_locale.toLowerCase();for(var Y in ge.locales)if(Y=Y.toLowerCase(),Y===H){_=ge.locales[H];break}else Y===ye&&(_=ge.locales[ye])}Z()}else console.log("no resource to load, early way out");r="complete";return}var we=null,Ee=0;we=function(){Ee++,Ee>=J&&(Z(),r="complete")};function Q(L){var q=L.href;this.load=function(j,ne){t(q,j,ne,function(){console.warn(q+" not found."),console.warn('"'+j+'" resource not found'),C="",ne()})}}for(var y=0;y<J;y++){var E=new Q(ae[y]);E.load(H,we)}}function s(){_={},d="",C=""}function i(H){var Z={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3};function ae(Y,we){return we.indexOf(Y)!==-1}function J(Y,we,Ee){return we<=Y&&Y<=Ee}var ge={0:function(Y){return"other"},1:function(Y){return J(Y%100,3,10)?"few":Y===0?"zero":J(Y%100,11,99)?"many":Y==2?"two":Y==1?"one":"other"},2:function(Y){return Y!==0&&Y%10===0?"many":Y==2?"two":Y==1?"one":"other"},3:function(Y){return Y==1?"one":"other"},4:function(Y){return J(Y,0,1)?"one":"other"},5:function(Y){return J(Y,0,2)&&Y!=2?"one":"other"},6:function(Y){return Y===0?"zero":Y%10==1&&Y%100!=11?"one":"other"},7:function(Y){return Y==2?"two":Y==1?"one":"other"},8:function(Y){return J(Y,3,6)?"few":J(Y,7,10)?"many":Y==2?"two":Y==1?"one":"other"},9:function(Y){return Y===0||Y!=1&&J(Y%100,1,19)?"few":Y==1?"one":"other"},10:function(Y){return J(Y%10,2,9)&&!J(Y%100,11,19)?"few":Y%10==1&&!J(Y%100,11,19)?"one":"other"},11:function(Y){return J(Y%10,2,4)&&!J(Y%100,12,14)?"few":Y%10===0||J(Y%10,5,9)||J(Y%100,11,14)?"many":Y%10==1&&Y%100!=11?"one":"other"},12:function(Y){return J(Y,2,4)?"few":Y==1?"one":"other"},13:function(Y){return J(Y%10,2,4)&&!J(Y%100,12,14)?"few":Y!=1&&J(Y%10,0,1)||J(Y%10,5,9)||J(Y%100,12,14)?"many":Y==1?"one":"other"},14:function(Y){return J(Y%100,3,4)?"few":Y%100==2?"two":Y%100==1?"one":"other"},15:function(Y){return Y===0||J(Y%100,2,10)?"few":J(Y%100,11,19)?"many":Y==1?"one":"other"},16:function(Y){return Y%10==1&&Y!=11?"one":"other"},17:function(Y){return Y==3?"few":Y===0?"zero":Y==6?"many":Y==2?"two":Y==1?"one":"other"},18:function(Y){return Y===0?"zero":J(Y,0,2)&&Y!==0&&Y!=2?"one":"other"},19:function(Y){return J(Y,2,10)?"few":J(Y,0,1)?"one":"other"},20:function(Y){return(J(Y%10,3,4)||Y%10==9)&&!(J(Y%100,10,19)||J(Y%100,70,79)||J(Y%100,90,99))?"few":Y%1e6===0&&Y!==0?"many":Y%10==2&&!ae(Y%100,[12,72,92])?"two":Y%10==1&&!ae(Y%100,[11,71,91])?"one":"other"},21:function(Y){return Y===0?"zero":Y==1?"one":"other"},22:function(Y){return J(Y,0,1)||J(Y,11,99)?"one":"other"},23:function(Y){return J(Y%10,1,2)||Y%20===0?"one":"other"},24:function(Y){return J(Y,3,10)||J(Y,13,19)?"few":ae(Y,[2,12])?"two":ae(Y,[1,11])?"one":"other"}},ye=Z[H.replace(/-.*$/,"")];return ye in ge?ge[ye]:(console.warn("plural form unknown for ["+H+"]"),function(){return"other"})}v.plural=function(H,Z,ae,J){var ge=parseFloat(Z);if(isNaN(ge)||J!=k)return H;v._pluralRules||(v._pluralRules=i(C));var ye="["+v._pluralRules(ge)+"]";return ge===0&&ae+"[zero]"in _?H=_[ae+"[zero]"][J]:ge==1&&ae+"[one]"in _?H=_[ae+"[one]"][J]:ge==2&&ae+"[two]"in _?H=_[ae+"[two]"][J]:ae+ye in _?H=_[ae+ye][J]:ae+"[other]"in _&&(H=_[ae+"[other]"][J]),H};function u(H,Z,ae){var J=_[H];if(!J){if(console.warn("#"+H+" is undefined."),!ae)return null;J=ae}var ge={};for(var ye in J){var Y=J[ye];Y=w(Y,Z,H,ye),Y=o(Y,Z,H),ge[ye]=Y}return ge}function w(H,Z,ae,J){var ge=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/,ye=ge.exec(H);if(!ye||!ye.length)return H;var Y=ye[1],we=ye[2],Ee;if(Z&&we in Z?Ee=Z[we]:we in _&&(Ee=_[we]),Y in v){var Q=v[Y];H=Q(H,Ee,ae,J)}return H}function o(H,Z,ae){var J=/\{\{\s*(.+?)\s*\}\}/g;return H.replace(J,function(ge,ye){return Z&&ye in Z?Z[ye]:ye in _?_[ye]:(console.log("argument {{"+ye+"}} for #"+ae+" is undefined."),ge)})}function F(H){var Z=b(H);if(Z.id){var ae=u(Z.id,Z.args);if(!ae){console.warn("#"+Z.id+" is undefined.");return}if(ae[k]){if(X(H)===0)H[k]=ae[k];else{for(var J=H.childNodes,ge=!1,ye=0,Y=J.length;ye<Y;ye++)J[ye].nodeType===3&&/\S/.test(J[ye].nodeValue)&&(ge?J[ye].nodeValue="":(J[ye].nodeValue=ae[k],ge=!0));if(!ge){var we=I.createTextNode(ae[k]);H.prepend(we)}}delete ae[k]}for(var Ee in ae)H[Ee]=ae[Ee]}}function X(H){if(H.children)return H.children.length;if(typeof H.childElementCount<"u")return H.childElementCount;for(var Z=0,ae=0;ae<H.childNodes.length;ae++)Z+=H.nodeType===1?1:0;return Z}function le(H){H=H||I.documentElement;for(var Z=m(H),ae=Z.length,J=0;J<ae;J++)F(Z[J]);F(H)}return{get:function(H,Z,ae){var J=H.lastIndexOf("."),ge=k;J>0&&(ge=H.substring(J+1),H=H.substring(0,J));var ye;ae&&(ye={},ye[ge]=ae);var Y=u(H,Z,ye);return Y&&ge in Y?Y[ge]:"{{"+H+"}}"},getData:function(){return _},getText:function(){return d},getLanguage:function(){return C},setLanguage:function(H,Z){e(H,function(){Z&&Z()})},getDirection:function(){var H=["ar","he","fa","ps","ur"],Z=C.split("-",1)[0];return H.indexOf(Z)>=0?"rtl":"ltr"},translate:le,getReadyState:function(){return r},ready:function(H){if(H)r=="complete"||r=="interactive"?G.setTimeout(function(){H()}):I.addEventListener&&I.addEventListener("localized",function Z(){I.removeEventListener("localized",Z),H()});else return}}}(window,document)},(G,I,D)=>{var Z,ae,J,ge,Wi,Y,Yt,Ee,Zt,y,zi,L,$i,j,Gi,U,Qt,V,Xi,h,qi,M,St,W,dt,N,ot,ce,Ki,de,Jt,ve,ei,Pe,Et,oe,Yi,Me,ti,S,ii,x,ut;Object.defineProperty(I,"__esModule",{value:!0}),I.PDFFindController=I.FindState=void 0;var _=D(2),d=D(11),k=D(4);const C={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};I.FindState=C;const v=250,r=-50,c=-400,a={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},p=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let m;const b=/\p{M}+/gu,f=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,t=/([^\p{M}])\p{M}*$/u,e=/^\p{M}*([^\p{M}])/u,s=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,i=new Map,u="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",w=new Map;let o=null,F=null;function X(fe){const se=[];let he;for(;(he=s.exec(fe))!==null;){let{index:De}=he;for(const je of he[0]){let Be=i.get(je);Be||(Be=je.normalize("NFD").length,i.set(je,Be)),se.push([Be,De++])}}let pe;if(se.length===0&&o)pe=o;else if(se.length>0&&F)pe=F;else{const De=Object.keys(a).join(""),je=(0,d.getNormalizeWithNFKC)(),We=`([${De}])|([${je}])|((?:゙|゚)\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|((?:\\p{Ideographic}|[぀-ヿ])\\n)|(\\n)`;se.length===0?pe=o=new RegExp(We+"|(\\u0000)","gum"):pe=F=new RegExp(We+`|(${u})`,"gum")}const Ae=[];for(;(he=b.exec(fe))!==null;)Ae.push([he[0].length,he.index]);let Te=fe.normalize("NFD");const Se=[[0,0]];let Fe=0,Ie=0,Le=0,ke=0,Ne=0,Ve=!1;return Te=Te.replace(pe,(De,je,Be,Ue,We,Ge,Ye,it,pt,$e)=>{var gi,mi,_i;if($e-=ke,je){const ze=a[je],Xe=ze.length;for(let qe=1;qe<Xe;qe++)Se.push([$e-Le+qe,Le-qe]);return Le-=Xe-1,ze}if(Be){let ze=w.get(Be);ze||(ze=Be.normalize("NFKC"),w.set(Be,ze));const Xe=ze.length;for(let qe=1;qe<Xe;qe++)Se.push([$e-Le+qe,Le-qe]);return Le-=Xe-1,ze}if(Ue)return Ve=!0,$e+Ne===((gi=Ae[Fe])==null?void 0:gi[1])?++Fe:(Se.push([$e-1-Le+1,Le-1]),Le-=1,ke+=1),Se.push([$e-Le+1,Le]),ke+=1,Ne+=1,Ue.charAt(0);if(We){const ze=We.endsWith(`
`),Xe=ze?We.length-2:We.length;Ve=!0;let qe=Xe;$e+Ne===((mi=Ae[Fe])==null?void 0:mi[1])&&(qe-=Ae[Fe][0],++Fe);for(let gt=1;gt<=qe;gt++)Se.push([$e-1-Le+gt,Le-gt]);return Le-=qe,ke+=qe,ze?($e+=Xe-1,Se.push([$e-Le+1,1+Le]),Le+=1,ke+=1,Ne+=1,We.slice(0,Xe)):We}if(Ge){const ze=Ge.length-2;return Se.push([$e-Le+ze,1+Le]),Le+=1,ke+=1,Ne+=1,Ge.slice(0,-2)}if(Ye){const ze=Ye.length-1;return Se.push([$e-Le+ze,Le]),ke+=1,Ne+=1,Ye.slice(0,-1)}if(it)return Se.push([$e-Le+1,Le-1]),Le-=1,ke+=1,Ne+=1," ";if($e+Ne===((_i=se[Ie])==null?void 0:_i[1])){const ze=se[Ie][0]-1;++Ie;for(let Xe=1;Xe<=ze;Xe++)Se.push([$e-(Le-Xe),Le-Xe]);Le-=ze,ke+=ze}return pt}),Se.push([Te.length,Le]),[Te,Se,Ve]}function le(fe,se,he){if(!fe)return[se,he];const pe=se,Ae=se+he-1;let Te=(0,_.binarySearchFirstItem)(fe,ke=>ke[0]>=pe);fe[Te][0]>pe&&--Te;let Se=(0,_.binarySearchFirstItem)(fe,ke=>ke[0]>=Ae,Te);fe[Se][0]>Ae&&--Se;const Fe=pe+fe[Te][1],Le=Ae+fe[Se][1]+1-Fe;return[Fe,Le]}class H{constructor({linkService:se,eventBus:he,updateMatchesCountOnProgress:pe=!0}){z(this,ge);z(this,Y);z(this,Ee);z(this,y);z(this,L);z(this,j);z(this,U);z(this,V);z(this,h);z(this,M);z(this,W);z(this,N);z(this,ce);z(this,de);z(this,ve);z(this,Pe);z(this,oe);z(this,Me);z(this,S);z(this,x);z(this,Z,null);z(this,ae,!0);z(this,J,0);this._linkService=se,this._eventBus=he,_e(this,ae,pe),K(this,Y,Yt).call(this),he._on("find",K(this,ge,Wi).bind(this)),he._on("findbarclose",K(this,oe,Yi).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return l(this,Z)}setDocument(se){this._pdfDocument&&K(this,Y,Yt).call(this),se&&(this._pdfDocument=se,this._firstPageCapability.resolve())}scrollMatchIntoView({element:se=null,selectedLeft:he=0,pageIndex:pe=-1,matchIndex:Ae=-1}){if(!this._scrollMatches||!se)return;if(Ae===-1||Ae!==this._selected.matchIdx)return;if(pe===-1||pe!==this._selected.pageIdx)return;this._scrollMatches=!1;const Te={top:r,left:he+c};(0,_.scrollIntoView)(se,Te,!0)}}Z=new WeakMap,ae=new WeakMap,J=new WeakMap,ge=new WeakSet,Wi=function(se){if(!se)return;se.phraseSearch===!1&&(console.error("The `phraseSearch`-parameter was removed, please provide an Array of strings in the `query`-parameter instead."),typeof se.query=="string"&&(se.query=se.query.match(/\S+/g)));const he=this._pdfDocument,{type:pe}=se;(l(this,Z)===null||K(this,y,zi).call(this,se))&&(this._dirtyMatch=!0),_e(this,Z,se),pe!=="highlightallchange"&&K(this,x,ut).call(this,C.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||he&&this._pdfDocument!==he)return;K(this,h,qi).call(this);const Ae=!this._highlightMatches,Te=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),pe?this._dirtyMatch?K(this,N,ot).call(this):pe==="again"?(K(this,N,ot).call(this),Ae&&l(this,Z).highlightAll&&K(this,W,dt).call(this)):pe==="highlightallchange"?(Te?K(this,N,ot).call(this):this._highlightMatches=!0,K(this,W,dt).call(this)):K(this,N,ot).call(this):this._findTimeout=setTimeout(()=>{K(this,N,ot).call(this),this._findTimeout=null},v)})},Y=new WeakSet,Yt=function(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],_e(this,J,0),_e(this,Z,null),this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=new k.PromiseCapability},Ee=new WeakSet,Zt=function(){const{query:se}=l(this,Z);return typeof se=="string"?(se!==this._rawQuery&&(this._rawQuery=se,[this._normalizedQuery]=X(se)),this._normalizedQuery):(se||[]).filter(he=>!!he).map(he=>X(he)[0])},y=new WeakSet,zi=function(se){const he=se.query,pe=l(this,Z).query,Ae=typeof he;if(Ae!==typeof pe)return!0;if(Ae==="string"){if(he!==pe)return!0}else if(JSON.stringify(he)!==JSON.stringify(pe))return!0;switch(se.type){case"again":const Se=this._selected.pageIdx+1,Fe=this._linkService;return Se>=1&&Se<=Fe.pagesCount&&Se!==Fe.page&&!Fe.isPageVisible(Se);case"highlightallchange":return!1}return!0},L=new WeakSet,$i=function(se,he,pe){let Ae=se.slice(0,he).match(t);if(Ae){const Te=se.charCodeAt(he),Se=Ae[1].charCodeAt(0);if((0,d.getCharacterType)(Te)===(0,d.getCharacterType)(Se))return!1}if(Ae=se.slice(he+pe).match(e),Ae){const Te=se.charCodeAt(he+pe-1),Se=Ae[1].charCodeAt(0);if((0,d.getCharacterType)(Te)===(0,d.getCharacterType)(Se))return!1}return!0},j=new WeakSet,Gi=function(se,he,pe,Ae){const Te=this._pageMatches[pe]=[],Se=this._pageMatchesLength[pe]=[];if(!se)return;const Fe=this._pageDiffs[pe];let Ie;for(;(Ie=se.exec(Ae))!==null;){if(he&&!K(this,L,$i).call(this,Ae,Ie.index,Ie[0].length))continue;const[Le,ke]=le(Fe,Ie.index,Ie[0].length);ke&&(Te.push(Le),Se.push(ke))}},U=new WeakSet,Qt=function(se,he){const{matchDiacritics:pe}=l(this,Z);let Ae=!1;se=se.replaceAll(f,(Se,Fe,Ie,Le,ke,Ne)=>Fe?`[ ]*\\${Fe}[ ]*`:Ie?`[ ]*${Ie}[ ]*`:Le?"[ ]+":pe?ke||Ne:ke?p.has(ke.charCodeAt(0))?ke:"":he?(Ae=!0,`${Ne}\\p{M}*`):Ne);const Te="[ ]*";return se.endsWith(Te)&&(se=se.slice(0,se.length-Te.length)),pe&&he&&(m||(m=String.fromCharCode(...p)),Ae=!0,se=`${se}(?=[${m}]|[^\\p{M}]|$)`),[Ae,se]},V=new WeakSet,Xi=function(se){let he=l(this,Ee,Zt);if(he.length===0)return;const{caseSensitive:pe,entireWord:Ae}=l(this,Z),Te=this._pageContents[se],Se=this._hasDiacritics[se];let Fe=!1;typeof he=="string"?[Fe,he]=K(this,U,Qt).call(this,he,Se):he=he.sort().reverse().map(ke=>{const[Ne,Ve]=K(this,U,Qt).call(this,ke,Se);return Fe||(Fe=Ne),`(${Ve})`}).join("|");const Ie=`g${Fe?"u":""}${pe?"":"i"}`;he=he?new RegExp(he,Ie):null,K(this,j,Gi).call(this,he,Ae,se,Te),l(this,Z).highlightAll&&K(this,M,St).call(this,se),this._resumePageIdx===se&&(this._resumePageIdx=null,K(this,de,Jt).call(this));const Le=this._pageMatches[se].length;this._matchesCountTotal+=Le,l(this,ae)?Le>0&&K(this,S,ii).call(this):++lt(this,J)._===this._linkService.pagesCount&&K(this,S,ii).call(this)},h=new WeakSet,qi=function(){if(this._extractTextPromises.length>0)return;let se=Promise.resolve();const he={disableNormalization:!0};for(let pe=0,Ae=this._linkService.pagesCount;pe<Ae;pe++){const Te=new k.PromiseCapability;this._extractTextPromises[pe]=Te.promise,se=se.then(()=>this._pdfDocument.getPage(pe+1).then(Se=>Se.getTextContent(he)).then(Se=>{const Fe=[];for(const Ie of Se.items)Fe.push(Ie.str),Ie.hasEOL&&Fe.push(`
`);[this._pageContents[pe],this._pageDiffs[pe],this._hasDiacritics[pe]]=X(Fe.join("")),Te.resolve()},Se=>{console.error(`Unable to get text content for page ${pe+1}`,Se),this._pageContents[pe]="",this._pageDiffs[pe]=null,this._hasDiacritics[pe]=!1,Te.resolve()}))}},M=new WeakSet,St=function(se){this._scrollMatches&&this._selected.pageIdx===se&&(this._linkService.page=se+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:se})},W=new WeakSet,dt=function(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})},N=new WeakSet,ot=function(){const se=l(this,Z).findPrevious,he=this._linkService.page-1,pe=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=he,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,_e(this,J,0),this._matchesCountTotal=0,K(this,W,dt).call(this);for(let Se=0;Se<pe;Se++)this._pendingFindMatches.has(Se)||(this._pendingFindMatches.add(Se),this._extractTextPromises[Se].then(()=>{this._pendingFindMatches.delete(Se),K(this,V,Xi).call(this,Se)}))}if(l(this,Ee,Zt).length===0){K(this,x,ut).call(this,C.FOUND);return}if(this._resumePageIdx)return;const Te=this._offset;if(this._pagesToSearch=pe,Te.matchIdx!==null){const Se=this._pageMatches[Te.pageIdx].length;if(!se&&Te.matchIdx+1<Se||se&&Te.matchIdx>0){Te.matchIdx=se?Te.matchIdx-1:Te.matchIdx+1,K(this,Pe,Et).call(this,!0);return}K(this,ve,ei).call(this,se)}K(this,de,Jt).call(this)},ce=new WeakSet,Ki=function(se){const he=this._offset,pe=se.length,Ae=l(this,Z).findPrevious;return pe?(he.matchIdx=Ae?pe-1:0,K(this,Pe,Et).call(this,!0),!0):(K(this,ve,ei).call(this,Ae),he.wrapped&&(he.matchIdx=null,this._pagesToSearch<0)?(K(this,Pe,Et).call(this,!1),!0):!1)},de=new WeakSet,Jt=function(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let se=null;do{const he=this._offset.pageIdx;if(se=this._pageMatches[he],!se){this._resumePageIdx=he;break}}while(!K(this,ce,Ki).call(this,se))},ve=new WeakSet,ei=function(se){const he=this._offset,pe=this._linkService.pagesCount;he.pageIdx=se?he.pageIdx-1:he.pageIdx+1,he.matchIdx=null,this._pagesToSearch--,(he.pageIdx>=pe||he.pageIdx<0)&&(he.pageIdx=se?pe-1:0,he.wrapped=!0)},Pe=new WeakSet,Et=function(se=!1){let he=C.NOT_FOUND;const pe=this._offset.wrapped;if(this._offset.wrapped=!1,se){const Ae=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,he=pe?C.WRAPPED:C.FOUND,Ae!==-1&&Ae!==this._selected.pageIdx&&K(this,M,St).call(this,Ae)}K(this,x,ut).call(this,he,l(this,Z).findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,K(this,M,St).call(this,this._selected.pageIdx))},oe=new WeakSet,Yi=function(se){const he=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||he&&this._pdfDocument!==he||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),K(this,x,ut).call(this,C.FOUND),this._highlightMatches=!1,K(this,W,dt).call(this))})},Me=new WeakSet,ti=function(){var Te;const{pageIdx:se,matchIdx:he}=this._selected;let pe=0,Ae=this._matchesCountTotal;if(he!==-1){for(let Se=0;Se<se;Se++)pe+=((Te=this._pageMatches[Se])==null?void 0:Te.length)||0;pe+=he+1}return(pe<1||pe>Ae)&&(pe=Ae=0),{current:pe,total:Ae}},S=new WeakSet,ii=function(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:K(this,Me,ti).call(this)})},x=new WeakSet,ut=function(se,he=!1){var pe;!l(this,ae)&&(l(this,J)!==this._linkService.pagesCount||se===C.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:se,previous:he,matchesCount:K(this,Me,ti).call(this),rawQuery:((pe=l(this,Z))==null?void 0:pe.query)??null})},I.PDFFindController=H},(G,I)=>{Object.defineProperty(I,"__esModule",{value:!0}),I.CharacterType=void 0,I.getCharacterType=b,I.getNormalizeWithNFKC=t;const D={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};I.CharacterType=D;function _(e){return e<11904}function d(e){return(e&65408)===0}function k(e){return e>=97&&e<=122||e>=65&&e<=90}function C(e){return e>=48&&e<=57}function v(e){return e===32||e===9||e===13||e===10}function r(e){return e>=13312&&e<=40959||e>=63744&&e<=64255}function c(e){return e>=12448&&e<=12543}function a(e){return e>=12352&&e<=12447}function p(e){return e>=65376&&e<=65439}function m(e){return(e&65408)===3584}function b(e){return _(e)?d(e)?v(e)?D.SPACE:k(e)||C(e)||e===95?D.ALPHA_LETTER:D.PUNCT:m(e)?D.THAI_LETTER:e===160?D.SPACE:D.ALPHA_LETTER:r(e)?D.HAN_LETTER:c(e)?D.KATAKANA_LETTER:a(e)?D.HIRAGANA_LETTER:p(e)?D.HALFWIDTH_KATAKANA_LETTER:D.ALPHA_LETTER}let f;function t(){return f||(f=" ¨ª¯²-µ¸-º¼-¾Ĳ-ĳĿ-ŀŉſǄ-ǌǱ-ǳʰ-ʸ˘-˝ˠ-ˤʹͺ;΄-΅·ϐ-ϖϰ-ϲϴ-ϵϹևٵ-ٸक़-य़ড়-ঢ়য়ਲ਼ਸ਼ਖ਼-ਜ਼ਫ਼ଡ଼-ଢ଼ำຳໜ-ໝ༌གྷཌྷདྷབྷཛྷཀྵჼᴬ-ᴮᴰ-ᴺᴼ-ᵍᵏ-ᵪᵸᶛ-ᶿẚ-ẛάέήίόύώΆ᾽-῁ΈΉ῍-῏ΐΊ῝-῟ΰΎ῭-`ΌΏ´-῾ - ‑‗․-… ″-‴‶-‷‼‾⁇-⁉⁗ ⁰-ⁱ⁴-₎ₐ-ₜ₨℀-℃℅-ℇ℉-ℓℕ-№ℙ-ℝ℠-™ℤΩℨK-ℭℯ-ℱℳ-ℹ℻-⅀ⅅ-ⅉ⅐-ⅿ↉∬-∭∯-∰〈-〉①-⓪⨌⩴-⩶⫝̸ⱼ-ⱽⵯ⺟⻳⼀-⿕　〶〸-〺゛-゜ゟヿㄱ-ㆎ㆒-㆟㈀-㈞㈠-㉇㉐-㉾㊀-㏿ꚜ-ꚝꝰꟲ-ꟴꟸ-ꟹꭜ-ꭟꭩ豈-嗀塚晴凞-羽蘒諸逸-都飯-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-זּטּ-לּמּנּ-סּףּ-פּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷼︐-︙︰-﹄﹇-﹒﹔-﹦﹨-﹫ﹰ-ﹲﹴﹶ-ﻼ！-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ￠-￦"),f}},(G,I,D)=>{Object.defineProperty(I,"__esModule",{value:!0}),I.PDFHistory=void 0,I.isDestArraysEqual=p,I.isDestHashesEqual=a;var _=D(2),d=D(7);const k=1e3,C=50,v=1e3;function r(){return document.location.hash}class c{constructor({linkService:b,eventBus:f}){this.linkService=b,this.eventBus=f,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",t=>{this._isPagesLoaded=!!t.pagesCount},{once:!0})})}initialize({fingerprint:b,resetHistory:f=!1,updateUrl:t=!1}){if(!b||typeof b!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();const e=this._fingerprint!==""&&this._fingerprint!==b;this._fingerprint=b,this._updateUrl=t===!0,this._initialized=!0,this._bindEvents();const s=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=r(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(s,!0)||f){const{hash:u,page:w,rotation:o}=this._parseCurrentHash(!0);if(!u||e||f){this._pushOrReplaceState(null,!0);return}this._pushOrReplaceState({hash:u,page:w,rotation:o},!0);return}const i=s.destination;this._updateInternalState(i,s.uid,!0),i.rotation!==void 0&&(this._initialRotation=i.rotation),i.dest?(this._initialBookmark=JSON.stringify(i.dest),this._destination.page=null):i.hash?this._initialBookmark=i.hash:i.page&&(this._initialBookmark=`page=${i.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:b=null,explicitDest:f,pageNumber:t}){if(!this._initialized)return;if(b&&typeof b!="string"){console.error(`PDFHistory.push: "${b}" is not a valid namedDest parameter.`);return}else if(Array.isArray(f)){if(!this._isValidPage(t)&&(t!==null||this._destination)){console.error(`PDFHistory.push: "${t}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${f}" is not a valid explicitDest parameter.`);return}const e=b||JSON.stringify(f);if(!e)return;let s=!1;if(this._destination&&(a(this._destination.hash,e)||p(this._destination.dest,f))){if(this._destination.page)return;s=!0}this._popStateInProgress&&!s||(this._pushOrReplaceState({dest:f,hash:e,page:t,rotation:this.linkService.rotation},s),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(b){var f;if(this._initialized){if(!this._isValidPage(b)){console.error(`PDFHistory.pushPage: "${b}" is not a valid page number.`);return}((f=this._destination)==null?void 0:f.page)!==b&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${b}`,page:b,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const b=window.history.state;this._isValidState(b)&&b.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const b=window.history.state;this._isValidState(b)&&b.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(b,f=!1){const t=f||!this._destination,e={fingerprint:this._fingerprint,uid:t?this._uid:this._uid+1,destination:b};this._updateInternalState(b,e.uid);let s;if(this._updateUrl&&(b!=null&&b.hash)){const i=document.location.href.split("#")[0];i.startsWith("file://")||(s=`${i}#${b.hash}`)}t?window.history.replaceState(e,"",s):window.history.pushState(e,"",s)}_tryPushCurrentPosition(b=!1){if(!this._position)return;let f=this._position;if(b&&(f=Object.assign(Object.create(null),this._position),f.temporary=!0),!this._destination){this._pushOrReplaceState(f);return}if(this._destination.temporary){this._pushOrReplaceState(f,!0);return}if(this._destination.hash===f.hash||!this._destination.page&&this._numPositionUpdates<=C)return;let t=!1;if(this._destination.page>=f.first&&this._destination.page<=f.page){if(this._destination.dest!==void 0||!this._destination.first)return;t=!0}this._pushOrReplaceState(f,t)}_isValidPage(b){return Number.isInteger(b)&&b>0&&b<=this.linkService.pagesCount}_isValidState(b,f=!1){if(!b)return!1;if(b.fingerprint!==this._fingerprint)if(f){if(typeof b.fingerprint!="string"||b.fingerprint.length!==this._fingerprint.length)return!1;const[t]=performance.getEntriesByType("navigation");if((t==null?void 0:t.type)!=="reload")return!1}else return!1;return!(!Number.isInteger(b.uid)||b.uid<0||b.destination===null||typeof b.destination!="object")}_updateInternalState(b,f,t=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),t&&(b!=null&&b.temporary)&&delete b.temporary,this._destination=b,this._uid=f,this._maxUid=Math.max(this._maxUid,f),this._numPositionUpdates=0}_parseCurrentHash(b=!1){const f=unescape(r()).substring(1),t=(0,_.parseQueryString)(f),e=t.get("nameddest")||"";let s=t.get("page")|0;return(!this._isValidPage(s)||b&&e.length>0)&&(s=null),{hash:f,page:s,rotation:this.linkService.rotation}}_updateViewarea({location:b}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:b.pdfOpenParams.substring(1),page:this.linkService.page,first:b.pageNumber,rotation:b.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},v))}_popState({state:b}){const f=r(),t=this._currentHash!==f;if(this._currentHash=f,!b){this._uid++;const{hash:s,page:i,rotation:u}=this._parseCurrentHash();this._pushOrReplaceState({hash:s,page:i,rotation:u},!0);return}if(!this._isValidState(b))return;this._popStateInProgress=!0,t&&(this._blockHashChange++,(0,d.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:k}).then(()=>{this._blockHashChange--}));const e=b.destination;this._updateInternalState(e,b.uid,!0),(0,_.isValidRotation)(e.rotation)&&(this.linkService.rotation=e.rotation),e.dest?this.linkService.goToDestination(e.dest):e.hash?this.linkService.setHash(e.hash):e.page&&(this.linkService.page=e.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}I.PDFHistory=c;function a(m,b){return typeof m!="string"||typeof b!="string"?!1:m===b||(0,_.parseQueryString)(m).get("nameddest")===b}function p(m,b){function f(t,e){if(typeof t!=typeof e||Array.isArray(t)||Array.isArray(e))return!1;if(t!==null&&typeof t=="object"&&e!==null){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(!f(t[s],e[s]))return!1;return!0}return t===e||Number.isNaN(t)&&Number.isNaN(e)}if(!(Array.isArray(m)&&Array.isArray(b))||m.length!==b.length)return!1;for(let t=0,e=m.length;t<e;t++)if(!f(m[t],b[t]))return!1;return!0}},(G,I,D)=>{var i,u,w,o,F,X,le,H,Z,ae,Pt,ge,ni,Y,si,Ee,ri,y,ai,L,Zi,j,Qi,U,oi;Object.defineProperty(I,"__esModule",{value:!0}),I.PDFPageView=void 0;var _=D(4),d=D(2),k=D(14),C=D(3),v=D(15),r=D(5),c=D(1),a=D(16),p=D(17),m=D(18),b=D(19),f=D(20);const t=v.compatibilityParams.maxCanvasPixels||16777216,e=()=>({annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new c.SimpleLinkService}});class s{constructor(n){z(this,ae);z(this,ge);z(this,Y);z(this,Ee);z(this,y);z(this,L);z(this,j);z(this,U);z(this,i,_.AnnotationMode.ENABLE_FORMS);z(this,u,null);z(this,w,null);z(this,o,null);z(this,F,null);z(this,X,d.RenderingStates.INITIAL);z(this,le,d.TextLayerMode.ENABLE);z(this,H,{initialOptionalContent:!0,regularAnnotations:!0});z(this,Z,new WeakMap);var R;const h=n.container,A=n.defaultViewport;this.id=n.id,this.renderingId="page"+this.id,_e(this,u,n.layerProperties||e),this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=n.scale||d.DEFAULT_SCALE,this.viewport=A,this.pdfPageRotate=A.rotation,this._optionalContentConfigPromise=n.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,_e(this,le,n.textLayerMode??d.TextLayerMode.ENABLE),_e(this,i,n.annotationMode??_.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=n.imageResourcesPath||"",this.useOnlyCssZoom=n.useOnlyCssZoom||!1,this.isOffscreenCanvasSupported=n.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=n.maxCanvasPixels||t,this.pageColors=n.pageColors||null,this.eventBus=n.eventBus,this.renderingQueue=n.renderingQueue,this.l10n=n.l10n||r.NullL10n,this.renderTask=null,this.resume=null,this._isStandalone=!((R=this.renderingQueue)!=null&&R.hasViewer()),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const M=document.createElement("div");if(M.className="page",M.setAttribute("data-page-number",this.id),M.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(W=>{M.setAttribute("aria-label",W)}),this.div=M,K(this,ae,Pt).call(this),h==null||h.append(M),this._isStandalone){h==null||h.style.setProperty("--scale-factor",this.scale*_.PixelsPerInch.PDF_TO_CSS_UNITS);const{optionalContentConfigPromise:W}=n;W&&W.then(me=>{W===this._optionalContentConfigPromise&&(l(this,H).initialOptionalContent=me.hasInitialVisibility)})}}get renderingState(){return l(this,X)}set renderingState(n){if(n!==l(this,X))switch(_e(this,X,n),l(this,w)&&(clearTimeout(l(this,w)),_e(this,w,null)),n){case d.RenderingStates.PAUSED:this.div.classList.remove("loading");break;case d.RenderingStates.RUNNING:this.div.classList.add("loadingIcon"),_e(this,w,setTimeout(()=>{this.div.classList.add("loading"),_e(this,w,null)},0));break;case d.RenderingStates.INITIAL:case d.RenderingStates.FINISHED:this.div.classList.remove("loadingIcon","loading");break}}setPdfPage(n){this.pdfPage=n,this.pdfPageRotate=n.rotate;const h=(this.rotation+this.pdfPageRotate)%360;this.viewport=n.getViewport({scale:this.scale*_.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:h}),K(this,ae,Pt).call(this),this.reset()}destroy(){var n;this.reset(),(n=this.pdfPage)==null||n.cleanup()}get _textHighlighter(){return(0,_.shadow)(this,"_textHighlighter",new m.TextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus,findController:l(this,u).call(this).findController}))}_resetZoomLayer(n=!1){if(!this.zoomLayer)return;const h=this.zoomLayer.firstChild;l(this,Z).delete(h),h.width=0,h.height=0,n&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:n=!1,keepAnnotationLayer:h=!1,keepAnnotationEditorLayer:A=!1,keepXfaLayer:M=!1,keepTextLayer:R=!1}={}){var be,ve,xe,Pe,Re;this.cancelRendering({keepAnnotationLayer:h,keepAnnotationEditorLayer:A,keepXfaLayer:M,keepTextLayer:R}),this.renderingState=d.RenderingStates.INITIAL;const W=this.div,me=W.childNodes,N=n&&this.zoomLayer||null,$=h&&((be=this.annotationLayer)==null?void 0:be.div)||null,ce=A&&((ve=this.annotationEditorLayer)==null?void 0:ve.div)||null,ie=M&&((xe=this.xfaLayer)==null?void 0:xe.div)||null,de=R&&((Pe=this.textLayer)==null?void 0:Pe.div)||null;for(let oe=me.length-1;oe>=0;oe--){const Ce=me[oe];switch(Ce){case N:case $:case ce:case ie:case de:continue}Ce.remove()}W.removeAttribute("data-loaded"),$&&this.annotationLayer.hide(),ce&&this.annotationEditorLayer.hide(),ie&&this.xfaLayer.hide(),de&&this.textLayer.hide(),(Re=this.structTreeLayer)==null||Re.hide(),N||(this.canvas&&(l(this,Z).delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}update({scale:n=0,rotation:h=null,optionalContentConfigPromise:A=null,drawingDelay:M=-1}){var $;this.scale=n||this.scale,typeof h=="number"&&(this.rotation=h),A instanceof Promise&&(this._optionalContentConfigPromise=A,A.then(ce=>{A===this._optionalContentConfigPromise&&(l(this,H).initialOptionalContent=ce.hasInitialVisibility)}));const R=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:this.scale*_.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:R}),K(this,ae,Pt).call(this),this._isStandalone&&(($=this.div.parentNode)==null||$.style.setProperty("--scale-factor",this.viewport.scale));let W=!1;if(this.canvas&&this.maxCanvasPixels>0){const{width:ce,height:ie}=this.viewport,{sx:de,sy:be}=this.outputScale;(Math.floor(ce)*de|0)*(Math.floor(ie)*be|0)>this.maxCanvasPixels&&(W=!0)}const me=this.useOnlyCssZoom||this.hasRestrictedScaling&&W,N=!me&&M>=0&&M<1e3;if(this.canvas){if(N||me){N&&this.renderingState!==d.RenderingStates.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:M}),this.renderingState=d.RenderingStates.FINISHED),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!N,hideTextLayer:N}),this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:l(this,F)});return}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:n=!1,keepAnnotationEditorLayer:h=!1,keepXfaLayer:A=!1,keepTextLayer:M=!1,cancelExtraDelay:R=0}={}){var W;this.renderTask&&(this.renderTask.cancel(R),this.renderTask=null),this.resume=null,this.textLayer&&(!M||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationLayer&&(!n||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!h||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!A||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,(W=this._textHighlighter)==null||W.disable())}cssTransform({target:n,redrawAnnotationLayer:h=!1,redrawAnnotationEditorLayer:A=!1,redrawXfaLayer:M=!1,redrawTextLayer:R=!1,hideTextLayer:W=!1}){var N;if(!n.hasAttribute("zooming")){n.setAttribute("zooming",!0);const{style:$}=n;$.width=$.height=""}const me=l(this,Z).get(n);if(this.viewport!==me){const $=this.viewport.rotation-me.rotation,ce=Math.abs($);let ie=1,de=1;if(ce===90||ce===270){const{width:be,height:ve}=this.viewport;ie=ve/be,de=be/ve}n.style.transform=`rotate(${$}deg) scale(${ie}, ${de})`}h&&this.annotationLayer&&K(this,ge,ni).call(this),A&&this.annotationEditorLayer&&K(this,Y,si).call(this),M&&this.xfaLayer&&K(this,Ee,ri).call(this),this.textLayer&&(W?(this.textLayer.hide(),(N=this.structTreeLayer)==null||N.hide()):R&&K(this,y,ai).call(this))}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(n,h){return this.viewport.convertToPdfPoint(n,h)}async draw(){this.renderingState!==d.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:n,l10n:h,pageColors:A,pdfPage:M,viewport:R}=this;if(!M)throw this.renderingState=d.RenderingStates.FINISHED,new Error("pdfPage is not loaded");this.renderingState=d.RenderingStates.RUNNING;const W=document.createElement("div");if(W.classList.add("canvasWrapper"),n.append(W),!this.textLayer&&l(this,le)!==d.TextLayerMode.DISABLE&&!M.isPureXfa&&(this._accessibilityManager||(this._accessibilityManager=new p.TextAccessibilityManager),this.textLayer=new b.TextLayerBuilder({highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,enablePermissions:l(this,le)===d.TextLayerMode.ENABLE_PERMISSIONS}),n.append(this.textLayer.div)),!this.annotationLayer&&l(this,i)!==_.AnnotationMode.DISABLE){const{annotationStorage:S,downloadManager:g,enableScripting:x,fieldObjectsPromise:te,hasJSActionsPromise:fe,linkService:se}=l(this,u).call(this);this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer=new C.AnnotationLayerBuilder({pageDiv:n,pdfPage:M,annotationStorage:S,imageResourcesPath:this.imageResourcesPath,renderForms:l(this,i)===_.AnnotationMode.ENABLE_FORMS,linkService:se,downloadManager:g,l10n:h,enableScripting:x,hasJSActionsPromise:fe,fieldObjectsPromise:te,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager})}const me=S=>{if(de==null||de(!1),this.renderingQueue&&!this.renderingQueue.isHighestPriority(this)){this.renderingState=d.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=d.RenderingStates.RUNNING,S()};return}S()},{width:N,height:$}=R,ce=document.createElement("canvas");ce.setAttribute("role","presentation"),ce.hidden=!0;const ie=!!(A!=null&&A.background&&(A!=null&&A.foreground));let de=S=>{(!ie||S)&&(ce.hidden=!1,de=null)};W.append(ce),this.canvas=ce;const be=ce.getContext("2d",{alpha:!1}),ve=this.outputScale=new d.OutputScale;if(this.useOnlyCssZoom){const S=R.clone({scale:_.PixelsPerInch.PDF_TO_CSS_UNITS});ve.sx*=S.width/N,ve.sy*=S.height/$}if(this.maxCanvasPixels>0){const S=N*$,g=Math.sqrt(this.maxCanvasPixels/S);ve.sx>g||ve.sy>g?(ve.sx=g,ve.sy=g,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const xe=(0,d.approximateFraction)(ve.sx),Pe=(0,d.approximateFraction)(ve.sy);ce.width=(0,d.roundToDivide)(N*ve.sx,xe[0]),ce.height=(0,d.roundToDivide)($*ve.sy,Pe[0]);const{style:Re}=ce;Re.width=(0,d.roundToDivide)(N,xe[1])+"px",Re.height=(0,d.roundToDivide)($,Pe[1])+"px",l(this,Z).set(ce,R);const oe=ve.scaled?[ve.sx,0,0,ve.sy,0,0]:null,Ce={canvasContext:be,transform:oe,viewport:R,annotationMode:l(this,i),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:A},Me=this.renderTask=this.pdfPage.render(Ce);Me.onContinue=me;const Oe=Me.promise.then(async()=>{if(de==null||de(!0),await K(this,U,oi).call(this,Me),K(this,y,ai).call(this),this.annotationLayer&&await K(this,ge,ni).call(this),!this.annotationEditorLayer){const{annotationEditorUIManager:S}=l(this,u).call(this);if(!S)return;this.annotationEditorLayer=new k.AnnotationEditorLayerBuilder({uiManager:S,pageDiv:n,pdfPage:M,l10n:h,accessibilityManager:this._accessibilityManager})}K(this,Y,si).call(this)},S=>(S instanceof _.RenderingCancelledException||de==null||de(!0),K(this,U,oi).call(this,Me,S)));if(M.isPureXfa){if(this.xfaLayer)this.xfaLayer.div&&n.append(this.xfaLayer.div);else{const{annotationStorage:S,linkService:g}=l(this,u).call(this);this.xfaLayer=new f.XfaLayerBuilder({pageDiv:n,pdfPage:M,annotationStorage:S,linkService:g})}K(this,Ee,ri).call(this)}return n.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),Oe}setPageLabel(n){this.pageLabel=typeof n=="string"?n:null,this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{initialOptionalContent:n,regularAnnotations:h}=l(this,H);return n&&h?this.canvas:null}}i=new WeakMap,u=new WeakMap,w=new WeakMap,o=new WeakMap,F=new WeakMap,X=new WeakMap,le=new WeakMap,H=new WeakMap,Z=new WeakMap,ae=new WeakSet,Pt=function(){const{viewport:n}=this;if(this.pdfPage){if(l(this,o)===n.rotation)return;_e(this,o,n.rotation)}(0,_.setLayerDimensions)(this.div,n,!0,!1)},ge=new WeakSet,ni=async function(){let n=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(h){console.error(`#renderAnnotationLayer: "${h}".`),n=h}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:n})}},Y=new WeakSet,si=async function(){let n=null;try{await this.annotationEditorLayer.render(this.viewport,"display")}catch(h){console.error(`#renderAnnotationEditorLayer: "${h}".`),n=h}finally{this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error:n})}},Ee=new WeakSet,ri=async function(){let n=null;try{const h=await this.xfaLayer.render(this.viewport,"display");h!=null&&h.textDivs&&this._textHighlighter&&K(this,j,Qi).call(this,h.textDivs)}catch(h){console.error(`#renderXfaLayer: "${h}".`),n=h}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:n})}},y=new WeakSet,ai=async function(){const{pdfPage:n,textLayer:h,viewport:A}=this;if(!h)return;let M=null;try{if(!h.renderingDone){const R=n.streamTextContent({includeMarkedContent:!0,disableNormalization:!0});h.setTextContentSource(R)}await h.render(A)}catch(R){if(R instanceof _.AbortException)return;console.error(`#renderTextLayer: "${R}".`),M=R}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.id,numTextDivs:h.numTextDivs,error:M}),K(this,L,Zi).call(this)},L=new WeakSet,Zi=async function(){var A,M,R;if(!this.textLayer)return;this.structTreeLayer||(this.structTreeLayer=new a.StructTreeLayerBuilder);const n=await(this.structTreeLayer.renderingDone?null:this.pdfPage.getStructTree()),h=(A=this.structTreeLayer)==null?void 0:A.render(n);h&&((M=this.canvas)==null||M.append(h)),(R=this.structTreeLayer)==null||R.show()},j=new WeakSet,Qi=async function(n){const h=await this.pdfPage.getTextContent(),A=[];for(const M of h.items)A.push(M.str);this._textHighlighter.setTextMapping(n,A),this._textHighlighter.enable()},U=new WeakSet,oi=async function(n,h=null){if(n===this.renderTask&&(this.renderTask=null),h instanceof _.RenderingCancelledException){_e(this,F,null);return}if(_e(this,F,h),this.renderingState=d.RenderingStates.FINISHED,this._resetZoomLayer(!0),l(this,H).regularAnnotations=!n.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:l(this,F)}),h)throw h},I.PDFPageView=s},(G,I,D)=>{var C;Object.defineProperty(I,"__esModule",{value:!0}),I.AnnotationEditorLayerBuilder=void 0;var _=D(4),d=D(5);class k{constructor(r){z(this,C,void 0);this.pageDiv=r.pageDiv,this.pdfPage=r.pdfPage,this.accessibilityManager=r.accessibilityManager,this.l10n=r.l10n||d.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,_e(this,C,r.uiManager)}async render(r,c="display"){if(c!=="display"||this._cancelled)return;const a=r.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:a}),this.show();return}const p=this.div=document.createElement("div");p.className="annotationEditorLayer",p.tabIndex=0,p.hidden=!0,this.pageDiv.append(p),this.annotationEditorLayer=new _.AnnotationEditorLayer({uiManager:l(this,C),div:p,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:a});const m={viewport:a,div:p,annotations:null,intent:c};this.annotationEditorLayer.render(m),this.show()}cancel(){this._cancelled=!0,this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isEmpty||(this.div.hidden=!1)}}C=new WeakMap,I.AnnotationEditorLayerBuilder=k},(G,I)=>{Object.defineProperty(I,"__esModule",{value:!0}),I.compatibilityParams=I.OptionKind=I.AppOptions=void 0;const D=Object.create(null);I.compatibilityParams=D;{const v=navigator.userAgent||"",r=navigator.platform||"",c=navigator.maxTouchPoints||1,a=/Android/.test(v),p=/\b(iPad|iPhone|iPod)(?=;)/.test(v)||r==="MacIntel"&&c>1;(function(){(p||a)&&(D.maxCanvasPixels=5242880)})()}const _={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};I.OptionKind=_;const d={annotationEditorMode:{value:0,kind:_.VIEWER+_.PREFERENCE},annotationMode:{value:2,kind:_.VIEWER+_.PREFERENCE},cursorToolOnLoad:{value:0,kind:_.VIEWER+_.PREFERENCE},defaultZoomDelay:{value:400,kind:_.VIEWER+_.PREFERENCE},defaultZoomValue:{value:"",kind:_.VIEWER+_.PREFERENCE},disableHistory:{value:!1,kind:_.VIEWER},disablePageLabels:{value:!1,kind:_.VIEWER+_.PREFERENCE},enableFloatingToolbar:{value:!1,kind:_.VIEWER+_.PREFERENCE},enablePermissions:{value:!1,kind:_.VIEWER+_.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:_.VIEWER+_.PREFERENCE},enableScripting:{value:!0,kind:_.VIEWER+_.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:_.VIEWER},externalLinkTarget:{value:0,kind:_.VIEWER+_.PREFERENCE},historyUpdateUrl:{value:!1,kind:_.VIEWER+_.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:_.VIEWER+_.PREFERENCE},imageResourcesPath:{value:"./images/",kind:_.VIEWER},maxCanvasPixels:{value:16777216,kind:_.VIEWER},forcePageColors:{value:!1,kind:_.VIEWER+_.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:_.VIEWER+_.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:_.VIEWER+_.PREFERENCE},pdfBugEnabled:{value:!1,kind:_.VIEWER+_.PREFERENCE},printResolution:{value:150,kind:_.VIEWER},sidebarViewOnLoad:{value:-1,kind:_.VIEWER+_.PREFERENCE},scrollModeOnLoad:{value:-1,kind:_.VIEWER+_.PREFERENCE},spreadModeOnLoad:{value:-1,kind:_.VIEWER+_.PREFERENCE},textLayerMode:{value:1,kind:_.VIEWER+_.PREFERENCE},useOnlyCssZoom:{value:!1,kind:_.VIEWER+_.PREFERENCE},viewerCssTheme:{value:0,kind:_.VIEWER+_.PREFERENCE},viewOnLoad:{value:0,kind:_.VIEWER+_.PREFERENCE},cMapPacked:{value:!0,kind:_.API},cMapUrl:{value:"../web/cmaps/",kind:_.API},disableAutoFetch:{value:!1,kind:_.API+_.PREFERENCE},disableFontFace:{value:!1,kind:_.API+_.PREFERENCE},disableRange:{value:!1,kind:_.API+_.PREFERENCE},disableStream:{value:!1,kind:_.API+_.PREFERENCE},docBaseUrl:{value:"",kind:_.API},enableXfa:{value:!0,kind:_.API+_.PREFERENCE},fontExtraProperties:{value:!1,kind:_.API},isEvalSupported:{value:!0,kind:_.API},isOffscreenCanvasSupported:{value:!0,kind:_.API},maxImageSize:{value:-1,kind:_.API},pdfBug:{value:!1,kind:_.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:_.API},verbosity:{value:1,kind:_.API},workerPort:{value:null,kind:_.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:_.WORKER}};d.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:_.VIEWER},d.disablePreferences={value:!1,kind:_.VIEWER},d.locale={value:navigator.language||"en-US",kind:_.VIEWER},d.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:_.VIEWER};const k=Object.create(null);class C{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(r){const c=k[r];if(c!==void 0)return c;const a=d[r];if(a!==void 0)return D[r]??a.value}static getAll(r=null){const c=Object.create(null);for(const a in d){const p=d[a];if(r){if(!(r&p.kind))continue;if(r===_.PREFERENCE){const b=p.value,f=typeof b;if(f==="boolean"||f==="string"||f==="number"&&Number.isInteger(b)){c[a]=b;continue}throw new Error(`Invalid type for preference: ${a}`)}}const m=k[a];c[a]=m!==void 0?m:D[a]??p.value}return c}static set(r,c){k[r]=c}static setAll(r){for(const c in r)k[c]=r[c]}static remove(r){delete k[r]}}I.AppOptions=C,C._hasUserOptions=function(){return Object.keys(k).length>0}},(G,I)=>{var k,C,li,r,ci;Object.defineProperty(I,"__esModule",{value:!0}),I.StructTreeLayerBuilder=void 0;const D={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},_=/^H(\d+)$/;class d{constructor(){z(this,C);z(this,r);z(this,k,void 0)}get renderingDone(){return l(this,k)!==void 0}render(p){if(l(this,k)!==void 0)return l(this,k);const m=K(this,r,ci).call(this,p);return m==null||m.classList.add("structTree"),_e(this,k,m)}hide(){l(this,k)&&!l(this,k).hidden&&(l(this,k).hidden=!0)}show(){var p;(p=l(this,k))!=null&&p.hidden&&(l(this,k).hidden=!1)}}k=new WeakMap,C=new WeakSet,li=function(p,m){p.alt!==void 0&&m.setAttribute("aria-label",p.alt),p.id!==void 0&&m.setAttribute("aria-owns",p.id),p.lang!==void 0&&m.setAttribute("lang",p.lang)},r=new WeakSet,ci=function(p){if(!p)return null;const m=document.createElement("span");if("role"in p){const{role:b}=p,f=b.match(_);f?(m.setAttribute("role","heading"),m.setAttribute("aria-level",f[1])):D[b]&&m.setAttribute("role",D[b])}if(K(this,C,li).call(this,p,m),p.children)if(p.children.length===1&&"id"in p.children[0])K(this,C,li).call(this,p.children[0],m);else for(const b of p.children)m.append(K(this,r,ci).call(this,b));return m},I.StructTreeLayerBuilder=d},(G,I,D)=>{var k,C,v,r,c,Ct,p,hi;Object.defineProperty(I,"__esModule",{value:!0}),I.TextAccessibilityManager=void 0;var _=D(2);const b=class b{constructor(){z(this,p);z(this,k,!1);z(this,C,null);z(this,v,new Map);z(this,r,new Map)}setTextMapping(t){_e(this,C,t)}enable(){if(l(this,k))throw new Error("TextAccessibilityManager is already enabled.");if(!l(this,C))throw new Error("Text divs and strings have not been set.");if(_e(this,k,!0),_e(this,C,l(this,C).slice()),l(this,C).sort(K(b,c,Ct)),l(this,v).size>0){const t=l(this,C);for(const[e,s]of l(this,v)){if(!document.getElementById(e)){l(this,v).delete(e);continue}K(this,p,hi).call(this,e,t[s])}}for(const[t,e]of l(this,r))this.addPointerInTextLayer(t,e);l(this,r).clear()}disable(){l(this,k)&&(l(this,r).clear(),_e(this,C,null),_e(this,k,!1))}removePointerInTextLayer(t){if(!l(this,k)){l(this,r).delete(t);return}const e=l(this,C);if(!e||e.length===0)return;const{id:s}=t,i=l(this,v).get(s);if(i===void 0)return;const u=e[i];l(this,v).delete(s);let w=u.getAttribute("aria-owns");w!=null&&w.includes(s)&&(w=w.split(" ").filter(o=>o!==s).join(" "),w?u.setAttribute("aria-owns",w):(u.removeAttribute("aria-owns"),u.setAttribute("role","presentation")))}addPointerInTextLayer(t,e){const{id:s}=t;if(!s)return;if(!l(this,k)){l(this,r).set(t,e);return}e&&this.removePointerInTextLayer(t);const i=l(this,C);if(!i||i.length===0)return;const u=(0,_.binarySearchFirstItem)(i,o=>{var F;return K(F=b,c,Ct).call(F,t,o)<0}),w=Math.max(0,u-1);K(this,p,hi).call(this,s,i[w]),l(this,v).set(s,w)}moveElementInDOM(t,e,s,i){if(this.addPointerInTextLayer(s,i),!t.hasChildNodes()){t.append(e);return}const u=Array.from(t.childNodes).filter(F=>F!==e);if(u.length===0)return;const w=s||e,o=(0,_.binarySearchFirstItem)(u,F=>{var X;return K(X=b,c,Ct).call(X,w,F)<0});o===0?u[0].before(e):u[o-1].after(e)}};k=new WeakMap,C=new WeakMap,v=new WeakMap,r=new WeakMap,c=new WeakSet,Ct=function(t,e){const s=t.getBoundingClientRect(),i=e.getBoundingClientRect();if(s.width===0&&s.height===0)return 1;if(i.width===0&&i.height===0)return-1;const u=s.y,w=s.y+s.height,o=s.y+s.height/2,F=i.y,X=i.y+i.height,le=i.y+i.height/2;if(o<=F&&le>=w)return-1;if(le<=u&&o>=X)return 1;const H=s.x+s.width/2,Z=i.x+i.width/2;return H-Z},p=new WeakSet,hi=function(t,e){const s=e.getAttribute("aria-owns");s!=null&&s.includes(t)||e.setAttribute("aria-owns",s?`${s} ${t}`:t),e.removeAttribute("role")},z(b,c);let d=b;I.TextAccessibilityManager=d},(G,I)=>{Object.defineProperty(I,"__esModule",{value:!0}),I.TextHighlighter=void 0;class D{constructor({findController:d,eventBus:k,pageIndex:C}){this.findController=d,this.matches=[],this.eventBus=k,this.pageIdx=C,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(d,k){this.textDivs=d,this.textContentItemsStr=k}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=d=>{(d.pageIndex===this.pageIdx||d.pageIndex===-1)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null),this._updateMatches(!0))}_convertMatches(d,k){if(!d)return[];const{textContentItemsStr:C}=this;let v=0,r=0;const c=C.length-1,a=[];for(let p=0,m=d.length;p<m;p++){let b=d[p];for(;v!==c&&b>=r+C[v].length;)r+=C[v].length,v++;v===C.length&&console.error("Could not find a matching mapping");const f={begin:{divIdx:v,offset:b-r}};for(b+=k[p];v!==c&&b>r+C[v].length;)r+=C[v].length,v++;f.end={divIdx:v,offset:b-r},a.push(f)}return a}_renderMatches(d){if(d.length===0)return;const{findController:k,pageIdx:C}=this,{textContentItemsStr:v,textDivs:r}=this,c=C===k.selected.pageIdx,a=k.selected.matchIdx,p=k.state.highlightAll;let m=null;const b={divIdx:-1,offset:void 0};function f(w,o){const F=w.divIdx;return r[F].textContent="",t(F,0,w.offset,o)}function t(w,o,F,X){let le=r[w];if(le.nodeType===Node.TEXT_NODE){const ae=document.createElement("span");le.before(ae),ae.append(le),r[w]=ae,le=ae}const H=v[w].substring(o,F),Z=document.createTextNode(H);if(X){const ae=document.createElement("span");return ae.className=`${X} appended`,ae.append(Z),le.append(ae),X.includes("selected")?ae.offsetLeft:0}return le.append(Z),0}let e=a,s=e+1;if(p)e=0,s=d.length;else if(!c)return;let i=-1,u=-1;for(let w=e;w<s;w++){const o=d[w],F=o.begin;if(F.divIdx===i&&F.offset===u)continue;i=F.divIdx,u=F.offset;const X=o.end,le=c&&w===a,H=le?" selected":"";let Z=0;if(!m||F.divIdx!==m.divIdx?(m!==null&&t(m.divIdx,m.offset,b.offset),f(F)):t(m.divIdx,m.offset,F.offset),F.divIdx===X.divIdx)Z=t(F.divIdx,F.offset,X.offset,"highlight"+H);else{Z=t(F.divIdx,F.offset,b.offset,"highlight begin"+H);for(let ae=F.divIdx+1,J=X.divIdx;ae<J;ae++)r[ae].className="highlight middle"+H;f(X,"highlight end"+H)}m=X,le&&k.scrollMatchIntoView({element:r[F.divIdx],selectedLeft:Z,pageIndex:C,matchIndex:a})}m&&t(m.divIdx,m.offset,b.offset)}_updateMatches(d=!1){if(!this.enabled&&!d)return;const{findController:k,matches:C,pageIdx:v}=this,{textContentItemsStr:r,textDivs:c}=this;let a=-1;for(const b of C){const f=Math.max(a,b.begin.divIdx);for(let t=f,e=b.end.divIdx;t<=e;t++){const s=c[t];s.textContent=r[t],s.className=""}a=b.end.divIdx+1}if(!(k!=null&&k.highlightMatches)||d)return;const p=k.pageMatches[v]||null,m=k.pageMatchesLength[v]||null;this.matches=this._convertMatches(p,m),this._renderMatches(this.matches)}}I.TextHighlighter=D},(G,I,D)=>{var C,v,r,c,a,Ji,m,en;Object.defineProperty(I,"__esModule",{value:!0}),I.TextLayerBuilder=void 0;var _=D(4),d=D(2);class k{constructor({highlighter:t=null,accessibilityManager:e=null,isOffscreenCanvasSupported:s=!0,enablePermissions:i=!1}){z(this,a);z(this,m);z(this,C,!1);z(this,v,0);z(this,r,0);z(this,c,null);this.textContentItemsStr=[],this.renderingDone=!1,this.textDivs=[],this.textDivProperties=new WeakMap,this.textLayerRenderTask=null,this.highlighter=t,this.accessibilityManager=e,this.isOffscreenCanvasSupported=s,_e(this,C,i===!0),this.div=document.createElement("div"),this.div.className="textLayer",this.hide()}get numTextDivs(){return this.textDivs.length}async render(t){var i,u,w;if(!l(this,c))throw new Error('No "textContentSource" parameter specified.');const e=t.scale*(globalThis.devicePixelRatio||1),{rotation:s}=t;if(this.renderingDone){const o=s!==l(this,v),F=e!==l(this,r);(o||F)&&(this.hide(),(0,_.updateTextLayer)({container:this.div,viewport:t,textDivs:this.textDivs,textDivProperties:this.textDivProperties,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,mustRescale:F,mustRotate:o}),_e(this,r,e),_e(this,v,s)),this.show();return}this.cancel(),(i=this.highlighter)==null||i.setTextMapping(this.textDivs,this.textContentItemsStr),(u=this.accessibilityManager)==null||u.setTextMapping(this.textDivs),this.textLayerRenderTask=(0,_.renderTextLayer)({textContentSource:l(this,c),container:this.div,viewport:t,textDivs:this.textDivs,textDivProperties:this.textDivProperties,textContentItemsStr:this.textContentItemsStr,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported}),await this.textLayerRenderTask.promise,K(this,a,Ji).call(this),_e(this,r,e),_e(this,v,s),this.show(),(w=this.accessibilityManager)==null||w.enable()}hide(){var t;this.div.hidden||((t=this.highlighter)==null||t.disable(),this.div.hidden=!0)}show(){var t;this.div.hidden&&this.renderingDone&&(this.div.hidden=!1,(t=this.highlighter)==null||t.enable())}cancel(){var t,e;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),(t=this.highlighter)==null||t.disable(),(e=this.accessibilityManager)==null||e.disable(),this.textContentItemsStr.length=0,this.textDivs.length=0,this.textDivProperties=new WeakMap}setTextContentSource(t){this.cancel(),_e(this,c,t)}}C=new WeakMap,v=new WeakMap,r=new WeakMap,c=new WeakMap,a=new WeakSet,Ji=function(){this.renderingDone=!0;const t=document.createElement("div");t.className="endOfContent",this.div.append(t),K(this,m,en).call(this)},m=new WeakSet,en=function(){const{div:t}=this;t.addEventListener("mousedown",e=>{const s=t.querySelector(".endOfContent");if(!s)return;let i=e.target!==t;if(i&&(i=getComputedStyle(s).getPropertyValue("-moz-user-select")!=="none"),i){const u=t.getBoundingClientRect(),w=Math.max(0,(e.pageY-u.top)/u.height);s.style.top=(w*100).toFixed(2)+"%"}s.classList.add("active")}),t.addEventListener("mouseup",()=>{const e=t.querySelector(".endOfContent");e&&(e.style.top="",e.classList.remove("active"))}),t.addEventListener("copy",e=>{if(!l(this,C)){const s=document.getSelection();e.clipboardData.setData("text/plain",(0,d.removeNullCharacters)((0,_.normalizeUnicode)(s.toString())))}e.preventDefault(),e.stopPropagation()})},I.TextLayerBuilder=k},(G,I,D)=>{Object.defineProperty(I,"__esModule",{value:!0}),I.XfaLayerBuilder=void 0;var _=D(4);class d{constructor({pageDiv:C,pdfPage:v,annotationStorage:r=null,linkService:c,xfaHtml:a=null}){this.pageDiv=C,this.pdfPage=v,this.annotationStorage=r,this.linkService=c,this.xfaHtml=a,this.div=null,this._cancelled=!1}async render(C,v="display"){if(v==="print"){const a={viewport:C.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:v},p=document.createElement("div");return this.pageDiv.append(p),a.div=p,_.XfaLayer.render(a)}const r=await this.pdfPage.getXfa();if(this._cancelled||!r)return{textDivs:[]};const c={viewport:C.clone({dontFlip:!0}),div:this.div,xfaHtml:r,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:v};return this.div?_.XfaLayer.update(c):(this.div=document.createElement("div"),this.pageDiv.append(this.div),c.div=this.div,_.XfaLayer.render(c))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}I.XfaLayerBuilder=d},(G,I,D)=>{Object.defineProperty(I,"__esModule",{value:!0}),I.PDFScriptingManager=void 0;var _=D(2),d=D(4);class k{constructor({eventBus:v,sandboxBundleSrc:r=null,scriptingFactory:c=null,docPropertiesLookup:a=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._ready=!1,this._eventBus=v,this._sandboxBundleSrc=r,this._scriptingFactory=c,this._docPropertiesLookup=a,this._scriptingFactory||window.addEventListener("updatefromsandbox",p=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:p.detail})})}setViewer(v){this._pdfViewer=v}async setDocument(v){var p;if(this._pdfDocument&&await this._destroyScripting(),this._pdfDocument=v,!v)return;const[r,c,a]=await Promise.all([v.getFieldObjects(),v.getCalculationOrderIds(),v.getJSActions()]);if(!r&&!a){await this._destroyScripting();return}if(v===this._pdfDocument){try{this._scripting=this._createScripting()}catch(m){console.error(`PDFScriptingManager.setDocument: "${m==null?void 0:m.message}".`),await this._destroyScripting();return}this._internalEvents.set("updatefromsandbox",m=>{(m==null?void 0:m.source)===window&&this._updateFromSandbox(m.detail)}),this._internalEvents.set("dispatcheventinsandbox",m=>{var b;(b=this._scripting)==null||b.dispatchEventInSandbox(m.detail)}),this._internalEvents.set("pagechanging",({pageNumber:m,previous:b})=>{m!==b&&(this._dispatchPageClose(b),this._dispatchPageOpen(m))}),this._internalEvents.set("pagerendered",({pageNumber:m})=>{this._pageOpenPending.has(m)&&m===this._pdfViewer.currentPageNumber&&this._dispatchPageOpen(m)}),this._internalEvents.set("pagesdestroy",async m=>{var b,f;await this._dispatchPageClose(this._pdfViewer.currentPageNumber),await((b=this._scripting)==null?void 0:b.dispatchEventInSandbox({id:"doc",name:"WillClose"})),(f=this._closeCapability)==null||f.resolve()});for(const[m,b]of this._internalEvents)this._eventBus._on(m,b);try{const m=await this._getDocProperties();if(v!==this._pdfDocument)return;await this._scripting.createSandbox({objects:r,calculationOrder:c,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...m,actions:a}}),this._eventBus.dispatch("sandboxcreated",{source:this})}catch(m){console.error(`PDFScriptingManager.setDocument: "${m==null?void 0:m.message}".`),await this._destroyScripting();return}await((p=this._scripting)==null?void 0:p.dispatchEventInSandbox({id:"doc",name:"Open"})),await this._dispatchPageOpen(this._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{v===this._pdfDocument&&(this._ready=!0)})}}async dispatchWillSave(v){var r;return(r=this._scripting)==null?void 0:r.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(v){var r;return(r=this._scripting)==null?void 0:r.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(v){var r;return(r=this._scripting)==null?void 0:r.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}async dispatchDidPrint(v){var r;return(r=this._scripting)==null?void 0:r.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get destroyPromise(){var v;return((v=this._destroyCapability)==null?void 0:v.promise)||null}get ready(){return this._ready}get _internalEvents(){return(0,d.shadow)(this,"_internalEvents",new Map)}get _pageOpenPending(){return(0,d.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,d.shadow)(this,"_visitedPages",new Map)}async _updateFromSandbox(v){var f;const r=this._pdfViewer.isInPresentationMode||this._pdfViewer.isChangingPresentationMode,{id:c,siblings:a,command:p,value:m}=v;if(!c){switch(p){case"clear":console.clear();break;case"error":console.error(m);break;case"layout":{if(r)return;const t=(0,_.apiPageLayoutToViewerModes)(m);this._pdfViewer.spreadMode=t.spreadMode;break}case"page-num":this._pdfViewer.currentPageNumber=m+1;break;case"print":await this._pdfViewer.pagesPromise,this._eventBus.dispatch("print",{source:this});break;case"println":console.log(m);break;case"zoom":if(r)return;this._pdfViewer.currentScaleValue=m;break;case"SaveAs":this._eventBus.dispatch("download",{source:this});break;case"FirstPage":this._pdfViewer.currentPageNumber=1;break;case"LastPage":this._pdfViewer.currentPageNumber=this._pdfViewer.pagesCount;break;case"NextPage":this._pdfViewer.nextPage();break;case"PrevPage":this._pdfViewer.previousPage();break;case"ZoomViewIn":if(r)return;this._pdfViewer.increaseScale();break;case"ZoomViewOut":if(r)return;this._pdfViewer.decreaseScale();break}return}if(r&&v.focus)return;delete v.id,delete v.siblings;const b=a?[c,...a]:[c];for(const t of b){const e=document.querySelector(`[data-element-id="${t}"]`);e?e.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:v})):(f=this._pdfDocument)==null||f.annotationStorage.setValue(t,v)}}async _dispatchPageOpen(v,r=!1){const c=this._pdfDocument,a=this._visitedPages;if(r&&(this._closeCapability=new d.PromiseCapability),!this._closeCapability)return;const p=this._pdfViewer.getPageView(v-1);if((p==null?void 0:p.renderingState)!==_.RenderingStates.FINISHED){this._pageOpenPending.add(v);return}this._pageOpenPending.delete(v);const m=(async()=>{var f,t;const b=await(a.has(v)?null:(f=p.pdfPage)==null?void 0:f.getJSActions());c===this._pdfDocument&&await((t=this._scripting)==null?void 0:t.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:v,actions:b}))})();a.set(v,m)}async _dispatchPageClose(v){var p;const r=this._pdfDocument,c=this._visitedPages;if(!this._closeCapability||this._pageOpenPending.has(v))return;const a=c.get(v);a&&(c.set(v,null),await a,r===this._pdfDocument&&await((p=this._scripting)==null?void 0:p.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:v})))}async _getDocProperties(){if(this._docPropertiesLookup)return this._docPropertiesLookup(this._pdfDocument);const{docPropertiesLookup:v}=D(22);return v(this._pdfDocument)}_createScripting(){if(this._destroyCapability=new d.PromiseCapability,this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:v}=D(22);return new v(this._sandboxBundleSrc)}async _destroyScripting(){var v,r;if(!this._scripting){this._pdfDocument=null,(v=this._destroyCapability)==null||v.resolve();return}this._closeCapability&&(await Promise.race([this._closeCapability.promise,new Promise(c=>{setTimeout(c,1e3)})]).catch(c=>{}),this._closeCapability=null),this._pdfDocument=null;try{await this._scripting.destroySandbox()}catch{}for(const[c,a]of this._internalEvents)this._eventBus._off(c,a);this._internalEvents.clear(),this._pageOpenPending.clear(),this._visitedPages.clear(),this._scripting=null,this._ready=!1,(r=this._destroyCapability)==null||r.resolve()}}I.PDFScriptingManager=k},(G,I,D)=>{Object.defineProperty(I,"__esModule",{value:!0}),I.GenericScripting=void 0,I.docPropertiesLookup=d;var _=D(4);async function d(C){const v="",r=v.split("#")[0];let{info:c,metadata:a,contentDispositionFilename:p,contentLength:m}=await C.getMetadata();if(!m){const{length:b}=await C.getDownloadInfo();m=b}return{...c,baseURL:r,filesize:m,filename:p||(0,_.getPdfFilenameFromUrl)(v),metadata:a==null?void 0:a.getRaw(),authors:a==null?void 0:a.get("dc:creator"),numPages:C.numPages,URL:v}}class k{constructor(v){this._ready=(0,_.loadScript)(v,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}async createSandbox(v){(await this._ready).create(v)}async dispatchEventInSandbox(v){const r=await this._ready;setTimeout(()=>r.dispatchEvent(v),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}I.GenericScripting=k},(G,I,D)=>{Object.defineProperty(I,"__esModule",{value:!0}),I.PDFSinglePageViewer=void 0;var _=D(2),d=D(24);class k extends d.PDFViewer{_resetView(){super._resetView(),this._scrollMode=_.ScrollMode.PAGE,this._spreadMode=_.SpreadMode.NONE}set scrollMode(v){}_updateScrollMode(){}set spreadMode(v){}_updateSpreadMode(){}}I.PDFSinglePageViewer=k},(G,I,D)=>{var f,t,e,di,i,u,w,o,F,X,le,H,Z,ae,J,ge,ye,Y,we,Ee,Q,tn,E,nn,q,sn,ne,rn,B,ft,n,wt,A,an,R,ui,me,on,$,Je,ie,fi,be,ln,xe,cn,Re,pi,Ce,hn;Object.defineProperty(I,"__esModule",{value:!0}),I.PagesCountLimit=I.PDFViewer=I.PDFPageViewBuffer=void 0;var _=D(4),d=D(2),k=D(5),C=D(13),v=D(25),r=D(1);const c=10,a={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};I.PagesCountLimit=a;function p(Oe){return Object.values(_.AnnotationEditorType).includes(Oe)&&Oe!==_.AnnotationEditorType.DISABLE}class m{constructor(S){z(this,e);z(this,f,new Set);z(this,t,0);_e(this,t,S)}push(S){const g=l(this,f);g.has(S)&&g.delete(S),g.add(S),g.size>l(this,t)&&K(this,e,di).call(this)}resize(S,g=null){_e(this,t,S);const x=l(this,f);if(g){const te=x.size;let fe=1;for(const se of x)if(g.has(se.id)&&(x.delete(se),x.add(se)),++fe>te)break}for(;x.size>l(this,t);)K(this,e,di).call(this)}has(S){return l(this,f).has(S)}[Symbol.iterator](){return l(this,f).keys()}}f=new WeakMap,t=new WeakMap,e=new WeakSet,di=function(){const S=l(this,f).keys().next().value;S==null||S.destroy(),l(this,f).delete(S)},I.PDFPageViewBuffer=m;class b{constructor(S){z(this,Q);z(this,E);z(this,q);z(this,ne);z(this,B);z(this,n);z(this,A);z(this,R);z(this,me);z(this,$);z(this,ie);z(this,be);z(this,xe);z(this,Re);z(this,Ce);z(this,i,null);z(this,u,_.AnnotationEditorType.NONE);z(this,w,null);z(this,o,_.AnnotationMode.ENABLE_FORMS);z(this,F,null);z(this,X,null);z(this,le,!1);z(this,H,!1);z(this,Z,null);z(this,ae,!1);z(this,J,0);z(this,ge,new ResizeObserver(K(this,Ce,hn).bind(this)));z(this,ye,null);z(this,Y,null);z(this,we,null);z(this,Ee,d.TextLayerMode.ENABLE);var x,te;const g="3.6.172";if(_.version!==g)throw new Error(`The API version "${_.version}" does not match the Viewer version "${g}".`);if(this.container=S.container,this.viewer=S.viewer||S.container.firstElementChild,((x=this.container)==null?void 0:x.tagName)!=="DIV"||((te=this.viewer)==null?void 0:te.tagName)!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");l(this,ge).observe(this.container),this.eventBus=S.eventBus,this.linkService=S.linkService||new r.SimpleLinkService,this.downloadManager=S.downloadManager||null,this.findController=S.findController||null,this._scriptingManager=S.scriptingManager||null,_e(this,Ee,S.textLayerMode??d.TextLayerMode.ENABLE),_e(this,o,S.annotationMode??_.AnnotationMode.ENABLE_FORMS),_e(this,u,S.annotationEditorMode??_.AnnotationEditorType.NONE),this.imageResourcesPath=S.imageResourcesPath||"",this.enablePrintAutoRotate=S.enablePrintAutoRotate||!1,this.removePageBorders=S.removePageBorders||!1,this.useOnlyCssZoom=S.useOnlyCssZoom||!1,this.isOffscreenCanvasSupported=S.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=S.maxCanvasPixels,this.l10n=S.l10n||k.NullL10n,_e(this,le,S.enablePermissions||!1),this.pageColors=S.pageColors||null,this.pageColors&&!(CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground))&&((this.pageColors.background||this.pageColors.foreground)&&console.warn("PDFViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!S.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new v.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=S.renderingQueue,this.scroll=(0,d.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=d.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),K(this,Re,pi).call(this)}get pagesCount(){return this._pages.length}getPageView(S){return this._pages[S]}get pageViewsReady(){return this._pagesCapability.settled&&this._pages.every(S=>S==null?void 0:S.pdfPage)}get renderForms(){return l(this,o)===_.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(S){if(!Number.isInteger(S))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(S,!0)||console.error(`currentPageNumber: "${S}" is not a valid page.`))}_setCurrentPageNumber(S,g=!1){var te;if(this._currentPageNumber===S)return g&&K(this,ie,fi).call(this),!0;if(!(0<S&&S<=this.pagesCount))return!1;const x=this._currentPageNumber;return this._currentPageNumber=S,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:S,pageLabel:((te=this._pageLabels)==null?void 0:te[S-1])??null,previous:x}),g&&K(this,ie,fi).call(this),!0}get currentPageLabel(){var S;return((S=this._pageLabels)==null?void 0:S[this._currentPageNumber-1])??null}set currentPageLabel(S){if(!this.pdfDocument)return;let g=S|0;if(this._pageLabels){const x=this._pageLabels.indexOf(S);x>=0&&(g=x+1)}this._setCurrentPageNumber(g,!0)||console.error(`currentPageLabel: "${S}" is not a valid page.`)}get currentScale(){return this._currentScale!==d.UNKNOWN_SCALE?this._currentScale:d.DEFAULT_SCALE}set currentScale(S){if(isNaN(S))throw new Error("Invalid numeric scale.");this.pdfDocument&&K(this,$,Je).call(this,S,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(S){this.pdfDocument&&K(this,$,Je).call(this,S,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(S){if(!(0,d.isValidRotation)(S))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(S%=360,S<0&&(S+=360),this._pagesRotation===S))return;this._pagesRotation=S;const g=this._currentPageNumber;this.refresh(!0,{rotation:S}),this._currentScaleValue&&K(this,$,Je).call(this,this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:S,pageNumber:g}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}async getAllText(){const S=[],g=[];for(let x=1,te=this.pdfDocument.numPages;x<=te;++x){if(l(this,ae))return null;g.length=0;const fe=await this.pdfDocument.getPage(x),{items:se}=await fe.getTextContent();for(const he of se)he.str&&g.push(he.str),he.hasEOL&&g.push(`
`);S.push((0,d.removeNullCharacters)(g.join("")))}return S.join(`
`)}setDocument(S){var se,he;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),(se=this.findController)==null||se.setDocument(null),(he=this._scriptingManager)==null||he.setDocument(null),l(this,w)&&(l(this,w).destroy(),_e(this,w,null))),this.pdfDocument=S,!S)return;const g=S.numPages,x=S.getPage(1),te=S.getOptionalContentConfig(),fe=l(this,le)?S.getPermissions():Promise.resolve();if(g>a.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const pe=this._scrollMode=d.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:pe})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:g})},()=>{}),this._onBeforeDraw=pe=>{const Ae=this._pages[pe.pageNumber-1];Ae&&l(this,i).push(Ae)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=pe=>{pe.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:pe.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,l(this,Y)&&(document.removeEventListener("visibilitychange",l(this,Y)),_e(this,Y,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([x,fe]).then(([pe,Ae])=>{if(S!==this.pdfDocument)return;this._firstPageCapability.resolve(pe),this._optionalContentConfigPromise=te;const{annotationEditorMode:Te,annotationMode:Se,textLayerMode:Fe}=K(this,E,nn).call(this,Ae);if(Fe!==d.TextLayerMode.DISABLE){const De=_e(this,Z,document.createElement("div"));De.id="hiddenCopyElement",this.viewer.before(De)}if(Te!==_.AnnotationEditorType.DISABLE){const De=Te;S.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):p(De)?(_e(this,w,new _.AnnotationEditorUIManager(this.container,this.eventBus,S==null?void 0:S.annotationStorage)),De!==_.AnnotationEditorType.NONE&&l(this,w).updateMode(De)):console.error(`Invalid AnnotationEditor mode: ${De}`)}const Ie=K(this,Q,tn).bind(this),Le=this._scrollMode===d.ScrollMode.PAGE?null:this.viewer,ke=this.currentScale,Ne=pe.getViewport({scale:ke*_.PixelsPerInch.PDF_TO_CSS_UNITS});this.viewer.style.setProperty("--scale-factor",Ne.scale);for(let De=1;De<=g;++De){const je=new C.PDFPageView({container:Le,eventBus:this.eventBus,id:De,scale:ke,defaultViewport:Ne.clone(),optionalContentConfigPromise:te,renderingQueue:this.renderingQueue,textLayerMode:Fe,annotationMode:Se,imageResourcesPath:this.imageResourcesPath,useOnlyCssZoom:this.useOnlyCssZoom,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n,layerProperties:Ie});this._pages.push(je)}const Ve=this._pages[0];Ve&&(Ve.setPdfPage(pe),this.linkService.cachePageRef(1,pe.ref)),this._scrollMode===d.ScrollMode.PAGE?K(this,B,ft).call(this):this._spreadMode!==d.SpreadMode.NONE&&this._updateSpreadMode(),K(this,q,sn).call(this).then(async()=>{var je,Be;if((je=this.findController)==null||je.setDocument(S),(Be=this._scriptingManager)==null||Be.setDocument(S),l(this,Z)&&(_e(this,X,K(this,ne,rn).bind(this,Fe)),document.addEventListener("copy",l(this,X))),l(this,w)&&this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:l(this,u)}),S.loadingParams.disableAutoFetch||g>a.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let De=g-1;if(De<=0){this._pagesCapability.resolve();return}for(let Ue=2;Ue<=g;++Ue){const We=S.getPage(Ue).then(Ge=>{const Ye=this._pages[Ue-1];Ye.pdfPage||Ye.setPdfPage(Ge),this.linkService.cachePageRef(Ue,Ge.ref),--De===0&&this._pagesCapability.resolve()},Ge=>{console.error(`Unable to get page ${Ue} to initialize viewer`,Ge),--De===0&&this._pagesCapability.resolve()});Ue%a.PAUSE_EAGER_PAGE_INIT===0&&await We}}),this.eventBus.dispatch("pagesinit",{source:this}),S.getMetadata().then(({info:De})=>{S===this.pdfDocument&&De.Language&&(this.viewer.lang=De.Language)}),this.defaultRenderingQueue&&this.update()}).catch(pe=>{console.error("Unable to initialize viewer",pe),this._pagesCapability.reject(pe)})}setPageLabels(S){var g;if(this.pdfDocument){S?Array.isArray(S)&&this.pdfDocument.numPages===S.length?this._pageLabels=S:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let x=0,te=this._pages.length;x<te;x++)this._pages[x].setPageLabel(((g=this._pageLabels)==null?void 0:g[x])??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=d.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,_e(this,i,new m(c)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=new _.PromiseCapability,this._onePageRenderedCapability=new _.PromiseCapability,this._pagesCapability=new _.PromiseCapability,this._scrollMode=d.ScrollMode.VERTICAL,this._previousScrollMode=d.ScrollMode.UNKNOWN,this._spreadMode=d.SpreadMode.NONE,_e(this,ye,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),l(this,Y)&&(document.removeEventListener("visibilitychange",l(this,Y)),_e(this,Y,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),l(this,Z)&&(document.removeEventListener("copy",l(this,X)),_e(this,X,null),l(this,Z).remove(),_e(this,Z,null))}_scrollUpdate(){this.pagesCount!==0&&this.update()}pageLabelToPageNumber(S){if(!this._pageLabels)return null;const g=this._pageLabels.indexOf(S);return g<0?null:g+1}scrollPageIntoView({pageNumber:S,destArray:g=null,allowNegativeOffset:x=!1,ignoreDestinationZoom:te=!1}){if(!this.pdfDocument)return;const fe=Number.isInteger(S)&&this._pages[S-1];if(!fe){console.error(`scrollPageIntoView: "${S}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!g){this._setCurrentPageNumber(S,!0);return}let se=0,he=0,pe=0,Ae=0,Te,Se;const Fe=fe.rotation%180!==0,Ie=(Fe?fe.height:fe.width)/fe.scale/_.PixelsPerInch.PDF_TO_CSS_UNITS,Le=(Fe?fe.width:fe.height)/fe.scale/_.PixelsPerInch.PDF_TO_CSS_UNITS;let ke=0;switch(g[1].name){case"XYZ":se=g[2],he=g[3],ke=g[4],se=se!==null?se:0,he=he!==null?he:Le;break;case"Fit":case"FitB":ke="page-fit";break;case"FitH":case"FitBH":he=g[2],ke="page-width",he===null&&this._location?(se=this._location.left,he=this._location.top):(typeof he!="number"||he<0)&&(he=Le);break;case"FitV":case"FitBV":se=g[2],pe=Ie,Ae=Le,ke="page-height";break;case"FitR":se=g[2],he=g[3],pe=g[4]-se,Ae=g[5]-he;let je=d.SCROLLBAR_PADDING,Be=d.VERTICAL_PADDING;this.removePageBorders&&(je=Be=0),Te=(this.container.clientWidth-je)/pe/_.PixelsPerInch.PDF_TO_CSS_UNITS,Se=(this.container.clientHeight-Be)/Ae/_.PixelsPerInch.PDF_TO_CSS_UNITS,ke=Math.min(Math.abs(Te),Math.abs(Se));break;default:console.error(`scrollPageIntoView: "${g[1].name}" is not a valid destination type.`);return}if(te||(ke&&ke!==this._currentScale?this.currentScaleValue=ke:this._currentScale===d.UNKNOWN_SCALE&&(this.currentScaleValue=d.DEFAULT_SCALE_VALUE)),ke==="page-fit"&&!g[4]){K(this,n,wt).call(this,fe);return}const Ne=[fe.viewport.convertToViewportPoint(se,he),fe.viewport.convertToViewportPoint(se+pe,he+Ae)];let Ve=Math.min(Ne[0][0],Ne[1][0]),De=Math.min(Ne[0][1],Ne[1][1]);x||(Ve=Math.max(Ve,0),De=Math.max(De,0)),K(this,n,wt).call(this,fe,{left:Ve,top:De})}_updateLocation(S){const g=this._currentScale,x=this._currentScaleValue,te=parseFloat(x)===g?Math.round(g*1e4)/100:x,fe=S.id,se=this._pages[fe-1],he=this.container,pe=se.getPagePoint(he.scrollLeft-S.x,he.scrollTop-S.y),Ae=Math.round(pe[0]),Te=Math.round(pe[1]);let Se=`#page=${fe}`;this.isInPresentationMode||(Se+=`&zoom=${te},${Ae},${Te}`),this._location={pageNumber:fe,scale:te,top:Te,left:Ae,rotation:this._pagesRotation,pdfOpenParams:Se}}update(){const S=this._getVisiblePages(),g=S.views,x=g.length;if(x===0)return;const te=Math.max(c,2*x+1);l(this,i).resize(te,S.ids),this.renderingQueue.renderHighestPriority(S);const fe=this._spreadMode===d.SpreadMode.NONE&&(this._scrollMode===d.ScrollMode.PAGE||this._scrollMode===d.ScrollMode.VERTICAL),se=this._currentPageNumber;let he=!1;for(const pe of g){if(pe.percent<100)break;if(pe.id===se&&fe){he=!0;break}}this._setCurrentPageNumber(he?se:g[0].id),this._updateLocation(S.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(S){return this.container.contains(S)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===d.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===d.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const S=this._scrollMode===d.ScrollMode.PAGE?l(this,ye).pages:this._pages,g=this._scrollMode===d.ScrollMode.HORIZONTAL,x=g&&this._isContainerRtl;return(0,d.getVisibleElements)({scrollEl:this.container,views:S,sortByVisibility:!0,horizontal:g,rtl:x})}isPageVisible(S){return this.pdfDocument?Number.isInteger(S)&&S>0&&S<=this.pagesCount?this._getVisiblePages().ids.has(S):(console.error(`isPageVisible: "${S}" is not a valid page.`),!1):!1}isPageCached(S){if(!this.pdfDocument)return!1;if(!(Number.isInteger(S)&&S>0&&S<=this.pagesCount))return console.error(`isPageCached: "${S}" is not a valid page.`),!1;const g=this._pages[S-1];return l(this,i).has(g)}cleanup(){for(const S of this._pages)S.renderingState!==d.RenderingStates.FINISHED&&S.reset()}_cancelRendering(){for(const S of this._pages)S.cancelRendering()}forceRendering(S){const g=S||this._getVisiblePages(),x=K(this,xe,cn).call(this,g),te=this._spreadMode!==d.SpreadMode.NONE&&this._scrollMode!==d.ScrollMode.HORIZONTAL,fe=this.renderingQueue.getHighestPriority(g,this._pages,x,te);return fe?(K(this,be,ln).call(this,fe).then(()=>{this.renderingQueue.renderView(fe)}),!0):!1}get hasEqualPageSizes(){const S=this._pages[0];for(let g=1,x=this._pages.length;g<x;++g){const te=this._pages[g];if(te.width!==S.width||te.height!==S.height)return!1}return!0}getPagesOverview(){let S;return this._pages.map(g=>{const x=g.pdfPage.getViewport({scale:1}),te=(0,d.isPortraitOrientation)(x);if(S===void 0)S=te;else if(this.enablePrintAutoRotate&&te!==S)return{width:x.height,height:x.width,rotation:(x.rotation-90)%360};return{width:x.width,height:x.height,rotation:x.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(S){if(!(S instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${S}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=S,this.refresh(!1,{optionalContentConfigPromise:S}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:S}))}get scrollMode(){return this._scrollMode}set scrollMode(S){if(this._scrollMode!==S){if(!(0,d.isValidScrollMode)(S))throw new Error(`Invalid scroll mode: ${S}`);this.pagesCount>a.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=S,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:S}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(S=null){const g=this._scrollMode,x=this.viewer;x.classList.toggle("scrollHorizontal",g===d.ScrollMode.HORIZONTAL),x.classList.toggle("scrollWrapped",g===d.ScrollMode.WRAPPED),!(!this.pdfDocument||!S)&&(g===d.ScrollMode.PAGE?K(this,B,ft).call(this):this._previousScrollMode===d.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&K(this,$,Je).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(S,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(S){if(this._spreadMode!==S){if(!(0,d.isValidSpreadMode)(S))throw new Error(`Invalid spread mode: ${S}`);this._spreadMode=S,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:S}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(S=null){if(!this.pdfDocument)return;const g=this.viewer,x=this._pages;if(this._scrollMode===d.ScrollMode.PAGE)K(this,B,ft).call(this);else if(g.textContent="",this._spreadMode===d.SpreadMode.NONE)for(const te of this._pages)g.append(te.div);else{const te=this._spreadMode-1;let fe=null;for(let se=0,he=x.length;se<he;++se)fe===null?(fe=document.createElement("div"),fe.className="spread",g.append(fe)):se%2===te&&(fe=fe.cloneNode(!1),g.append(fe)),fe.append(x[se].div)}S&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&K(this,$,Je).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(S,!0),this.update())}_getPageAdvance(S,g=!1){switch(this._scrollMode){case d.ScrollMode.WRAPPED:{const{views:x}=this._getVisiblePages(),te=new Map;for(const{id:fe,y:se,percent:he,widthPercent:pe}of x){if(he===0||pe<100)continue;let Ae=te.get(se);Ae||te.set(se,Ae||(Ae=[])),Ae.push(fe)}for(const fe of te.values()){const se=fe.indexOf(S);if(se===-1)continue;const he=fe.length;if(he===1)break;if(g)for(let pe=se-1,Ae=0;pe>=Ae;pe--){const Te=fe[pe],Se=fe[pe+1]-1;if(Te<Se)return S-Se}else for(let pe=se+1,Ae=he;pe<Ae;pe++){const Te=fe[pe],Se=fe[pe-1]+1;if(Te>Se)return Se-S}if(g){const pe=fe[0];if(pe<S)return S-pe+1}else{const pe=fe[he-1];if(pe>S)return pe-S+1}break}break}case d.ScrollMode.HORIZONTAL:break;case d.ScrollMode.PAGE:case d.ScrollMode.VERTICAL:{if(this._spreadMode===d.SpreadMode.NONE)break;const x=this._spreadMode-1;if(g&&S%2!==x)break;if(!g&&S%2===x)break;const{views:te}=this._getVisiblePages(),fe=g?S-1:S+1;for(const{id:se,percent:he,widthPercent:pe}of te)if(se===fe){if(he>0&&pe===100)return 2;break}break}}return 1}nextPage(){const S=this._currentPageNumber,g=this.pagesCount;if(S>=g)return!1;const x=this._getPageAdvance(S,!1)||1;return this.currentPageNumber=Math.min(S+x,g),!0}previousPage(){const S=this._currentPageNumber;if(S<=1)return!1;const g=this._getPageAdvance(S,!0)||1;return this.currentPageNumber=Math.max(S-g,1),!0}increaseScale({drawingDelay:S,scaleFactor:g,steps:x}={}){if(!this.pdfDocument)return;let te=this._currentScale;if(g>1)te=Math.round(te*g*100)/100;else{x??(x=1);do te=Math.ceil((te*d.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--x>0&&te<d.MAX_SCALE)}K(this,$,Je).call(this,Math.min(d.MAX_SCALE,te),{noScroll:!1,drawingDelay:S})}decreaseScale({drawingDelay:S,scaleFactor:g,steps:x}={}){if(!this.pdfDocument)return;let te=this._currentScale;if(g>0&&g<1)te=Math.round(te*g*100)/100;else{x??(x=1);do te=Math.floor((te/d.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--x>0&&te>d.MIN_SCALE)}K(this,$,Je).call(this,Math.max(d.MIN_SCALE,te),{noScroll:!1,drawingDelay:S})}get containerTopLeft(){return l(this,F)||_e(this,F,[this.container.offsetTop,this.container.offsetLeft])}get annotationEditorMode(){return l(this,w)?l(this,u):_.AnnotationEditorType.DISABLE}set annotationEditorMode(S){if(!l(this,w))throw new Error("The AnnotationEditor is not enabled.");if(l(this,u)!==S){if(!p(S))throw new Error(`Invalid AnnotationEditor mode: ${S}`);this.pdfDocument&&(_e(this,u,S),this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:S}),l(this,w).updateMode(S))}}set annotationEditorParams({type:S,value:g}){if(!l(this,w))throw new Error("The AnnotationEditor is not enabled.");l(this,w).updateParams(S,g)}refresh(S=!1,g=Object.create(null)){if(this.pdfDocument){for(const x of this._pages)x.update(g);l(this,we)!==null&&(clearTimeout(l(this,we)),_e(this,we,null)),S||this.update()}}}i=new WeakMap,u=new WeakMap,w=new WeakMap,o=new WeakMap,F=new WeakMap,X=new WeakMap,le=new WeakMap,H=new WeakMap,Z=new WeakMap,ae=new WeakMap,J=new WeakMap,ge=new WeakMap,ye=new WeakMap,Y=new WeakMap,we=new WeakMap,Ee=new WeakMap,Q=new WeakSet,tn=function(){const S=this;return{get annotationEditorUIManager(){return l(S,w)},get annotationStorage(){var g;return(g=S.pdfDocument)==null?void 0:g.annotationStorage},get downloadManager(){return S.downloadManager},get enableScripting(){return!!S._scriptingManager},get fieldObjectsPromise(){var g;return(g=S.pdfDocument)==null?void 0:g.getFieldObjects()},get findController(){return S.findController},get hasJSActionsPromise(){var g;return(g=S.pdfDocument)==null?void 0:g.hasJSActions()},get linkService(){return S.linkService}}},E=new WeakSet,nn=function(S){const g={annotationEditorMode:l(this,u),annotationMode:l(this,o),textLayerMode:l(this,Ee)};return S&&(!S.includes(_.PermissionFlag.COPY)&&l(this,Ee)===d.TextLayerMode.ENABLE&&(g.textLayerMode=d.TextLayerMode.ENABLE_PERMISSIONS),S.includes(_.PermissionFlag.MODIFY_CONTENTS)||(g.annotationEditorMode=_.AnnotationEditorType.DISABLE),!S.includes(_.PermissionFlag.MODIFY_ANNOTATIONS)&&!S.includes(_.PermissionFlag.FILL_INTERACTIVE_FORMS)&&l(this,o)===_.AnnotationMode.ENABLE_FORMS&&(g.annotationMode=_.AnnotationMode.ENABLE)),g},q=new WeakSet,sn=function(){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return Promise.resolve();const S=new Promise(g=>{_e(this,Y,()=>{document.visibilityState==="hidden"&&(g(),document.removeEventListener("visibilitychange",l(this,Y)),_e(this,Y,null))}),document.addEventListener("visibilitychange",l(this,Y))});return Promise.race([this._onePageRenderedCapability.promise,S])},ne=new WeakSet,rn=function(S,g){const x=document.getSelection(),{focusNode:te,anchorNode:fe}=x;if(fe&&te&&x.containsNode(l(this,Z))){if(l(this,H)||S===d.TextLayerMode.ENABLE_PERMISSIONS){g.preventDefault(),g.stopPropagation();return}_e(this,H,!0);const se=this.container.style.cursor;this.container.style.cursor="wait";const he=pe=>_e(this,ae,pe.key==="Escape");window.addEventListener("keydown",he),this.getAllText().then(async pe=>{pe!==null&&await navigator.clipboard.writeText(pe)}).catch(pe=>{console.warn(`Something goes wrong when extracting the text: ${pe.message}`)}).finally(()=>{_e(this,H,!1),_e(this,ae,!1),window.removeEventListener("keydown",he),this.container.style.cursor=se}),g.preventDefault(),g.stopPropagation()}},B=new WeakSet,ft=function(){if(this._scrollMode!==d.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const S=this._currentPageNumber,g=l(this,ye),x=this.viewer;if(x.textContent="",g.pages.length=0,this._spreadMode===d.SpreadMode.NONE&&!this.isInPresentationMode){const te=this._pages[S-1];x.append(te.div),g.pages.push(te)}else{const te=new Set,fe=this._spreadMode-1;fe===-1?te.add(S-1):S%2!==fe?(te.add(S-1),te.add(S)):(te.add(S-2),te.add(S-1));const se=document.createElement("div");if(se.className="spread",this.isInPresentationMode){const he=document.createElement("div");he.className="dummyPage",se.append(he)}for(const he of te){const pe=this._pages[he];pe&&(se.append(pe.div),g.pages.push(pe))}x.append(se)}g.scrollDown=S>=g.previousPageNumber,g.previousPageNumber=S},n=new WeakSet,wt=function(S,g=null){const{div:x,id:te}=S;if(this._currentPageNumber!==te&&this._setCurrentPageNumber(te),this._scrollMode===d.ScrollMode.PAGE&&(K(this,B,ft).call(this),this.update()),!g&&!this.isInPresentationMode){const fe=x.offsetLeft+x.clientLeft,se=fe+x.clientWidth,{scrollLeft:he,clientWidth:pe}=this.container;(this._scrollMode===d.ScrollMode.HORIZONTAL||fe<he||se>he+pe)&&(g={left:0,top:0})}(0,d.scrollIntoView)(x,g),!this._currentScaleValue&&this._location&&(this._location=null)},A=new WeakSet,an=function(S){return S===this._currentScale||Math.abs(S-this._currentScale)<1e-15},R=new WeakSet,ui=function(S,g,{noScroll:x=!1,preset:te=!1,drawingDelay:fe=-1}){if(this._currentScaleValue=g.toString(),K(this,A,an).call(this,S)){te&&this.eventBus.dispatch("scalechanging",{source:this,scale:S,presetValue:g});return}this.viewer.style.setProperty("--scale-factor",S*_.PixelsPerInch.PDF_TO_CSS_UNITS);const se=fe>=0&&fe<1e3;if(this.refresh(!0,{scale:S,drawingDelay:se?fe:-1}),se&&_e(this,we,setTimeout(()=>{_e(this,we,null),this.refresh()},fe)),this._currentScale=S,!x){let he=this._currentPageNumber,pe;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(he=this._location.pageNumber,pe=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:he,destArray:pe,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:S,presetValue:te?g:void 0}),this.defaultRenderingQueue&&this.update()},me=new WeakSet,on=function(){return this._spreadMode!==d.SpreadMode.NONE&&this._scrollMode!==d.ScrollMode.HORIZONTAL?2:1},$=new WeakSet,Je=function(S,g){let x=parseFloat(S);if(x>0)g.preset=!1,K(this,R,ui).call(this,x,S,g);else{const te=this._pages[this._currentPageNumber-1];if(!te)return;let fe=d.SCROLLBAR_PADDING,se=d.VERTICAL_PADDING;this.isInPresentationMode?(fe=se=4,this._spreadMode!==d.SpreadMode.NONE&&(fe*=2)):this.removePageBorders?fe=se=0:this._scrollMode===d.ScrollMode.HORIZONTAL&&([fe,se]=[se,fe]);const he=(this.container.clientWidth-fe)/te.width*te.scale/l(this,me,on),pe=(this.container.clientHeight-se)/te.height*te.scale;switch(S){case"page-actual":x=1;break;case"page-width":x=he;break;case"page-height":x=pe;break;case"page-fit":x=Math.min(he,pe);break;case"auto":const Ae=(0,d.isPortraitOrientation)(te)?he:Math.min(pe,he);x=Math.min(d.MAX_AUTO_SCALE,Ae);break;default:console.error(`#setScale: "${S}" is an unknown zoom value.`);return}g.preset=!0,K(this,R,ui).call(this,x,S,g)}},ie=new WeakSet,fi=function(){const S=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&K(this,$,Je).call(this,this._currentScaleValue,{noScroll:!0}),K(this,n,wt).call(this,S)},be=new WeakSet,ln=async function(S){var g,x;if(S.pdfPage)return S.pdfPage;try{const te=await this.pdfDocument.getPage(S.id);return S.pdfPage||S.setPdfPage(te),(x=(g=this.linkService)._cachedPageNumber)!=null&&x.call(g,te.ref)||this.linkService.cachePageRef(S.id,te.ref),te}catch(te){return console.error("Unable to get page for page view",te),null}},xe=new WeakSet,cn=function(S){var g,x;if(((g=S.first)==null?void 0:g.id)===1)return!0;if(((x=S.last)==null?void 0:x.id)===this.pagesCount)return!1;switch(this._scrollMode){case d.ScrollMode.PAGE:return l(this,ye).scrollDown;case d.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down},Re=new WeakSet,pi=function(S=this.container.clientHeight){S!==l(this,J)&&(_e(this,J,S),d.docStyle.setProperty("--viewer-container-height",`${S}px`))},Ce=new WeakSet,hn=function(S){for(const g of S)if(g.target===this.container){K(this,Re,pi).call(this,Math.floor(g.borderBoxSize[0].blockSize)),_e(this,F,null);break}},I.PDFViewer=b},(G,I,D)=>{Object.defineProperty(I,"__esModule",{value:!0}),I.PDFRenderingQueue=void 0;var _=D(4),d=D(2);const k=3e4;class C{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(r){this.pdfViewer=r}setThumbnailViewer(r){this.pdfThumbnailViewer=r}isHighestPriority(r){return this.highestPriorityPage===r.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(r){var c;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(r)&&(this.isThumbnailViewEnabled&&((c=this.pdfThumbnailViewer)!=null&&c.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),k)))}getHighestPriority(r,c,a,p=!1){const m=r.views,b=m.length;if(b===0)return null;for(let i=0;i<b;i++){const u=m[i].view;if(!this.isViewFinished(u))return u}const f=r.first.id,t=r.last.id;if(t-f+1>b){const i=r.ids;for(let u=1,w=t-f;u<w;u++){const o=a?f+u:t-u;if(i.has(o))continue;const F=c[o-1];if(!this.isViewFinished(F))return F}}let e=a?t:f-2,s=c[e];return s&&!this.isViewFinished(s)||p&&(e+=a?1:-1,s=c[e],s&&!this.isViewFinished(s))?s:null}isViewFinished(r){return r.renderingState===d.RenderingStates.FINISHED}renderView(r){switch(r.renderingState){case d.RenderingStates.FINISHED:return!1;case d.RenderingStates.PAUSED:this.highestPriorityPage=r.renderingId,r.resume();break;case d.RenderingStates.RUNNING:this.highestPriorityPage=r.renderingId;break;case d.RenderingStates.INITIAL:this.highestPriorityPage=r.renderingId,r.draw().finally(()=>{this.renderHighestPriority()}).catch(c=>{c instanceof _.RenderingCancelledException||console.error(`renderView: "${c}"`)});break}return!0}}I.PDFRenderingQueue=C}],T={};function O(G){var I=T[G];if(I!==void 0)return I.exports;var D=T[G]={exports:{}};return ee[G](D,D.exports,O),D.exports}var ue={};return(()=>{var G=ue;Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return _.AnnotationLayerBuilder}}),G.DefaultXfaLayerFactory=G.DefaultTextLayerFactory=G.DefaultStructTreeLayerFactory=G.DefaultAnnotationLayerFactory=void 0,Object.defineProperty(G,"DownloadManager",{enumerable:!0,get:function(){return d.DownloadManager}}),Object.defineProperty(G,"EventBus",{enumerable:!0,get:function(){return k.EventBus}}),Object.defineProperty(G,"GenericL10n",{enumerable:!0,get:function(){return C.GenericL10n}}),Object.defineProperty(G,"LinkTarget",{enumerable:!0,get:function(){return I.LinkTarget}}),Object.defineProperty(G,"NullL10n",{enumerable:!0,get:function(){return v.NullL10n}}),Object.defineProperty(G,"PDFFindController",{enumerable:!0,get:function(){return r.PDFFindController}}),Object.defineProperty(G,"PDFHistory",{enumerable:!0,get:function(){return c.PDFHistory}}),Object.defineProperty(G,"PDFLinkService",{enumerable:!0,get:function(){return I.PDFLinkService}}),Object.defineProperty(G,"PDFPageView",{enumerable:!0,get:function(){return a.PDFPageView}}),Object.defineProperty(G,"PDFScriptingManager",{enumerable:!0,get:function(){return p.PDFScriptingManager}}),Object.defineProperty(G,"PDFSinglePageViewer",{enumerable:!0,get:function(){return m.PDFSinglePageViewer}}),Object.defineProperty(G,"PDFViewer",{enumerable:!0,get:function(){return b.PDFViewer}}),Object.defineProperty(G,"ProgressBar",{enumerable:!0,get:function(){return D.ProgressBar}}),Object.defineProperty(G,"RenderingStates",{enumerable:!0,get:function(){return D.RenderingStates}}),Object.defineProperty(G,"ScrollMode",{enumerable:!0,get:function(){return D.ScrollMode}}),Object.defineProperty(G,"SimpleLinkService",{enumerable:!0,get:function(){return I.SimpleLinkService}}),Object.defineProperty(G,"SpreadMode",{enumerable:!0,get:function(){return D.SpreadMode}}),Object.defineProperty(G,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return f.StructTreeLayerBuilder}}),Object.defineProperty(G,"TextLayerBuilder",{enumerable:!0,get:function(){return t.TextLayerBuilder}}),Object.defineProperty(G,"XfaLayerBuilder",{enumerable:!0,get:function(){return e.XfaLayerBuilder}}),Object.defineProperty(G,"parseQueryString",{enumerable:!0,get:function(){return D.parseQueryString}});var I=O(1),D=O(2),_=O(3),d=O(6),k=O(7),C=O(8),v=O(5),r=O(10),c=O(12),a=O(13),p=O(21),m=O(23),b=O(24),f=O(16),t=O(19),e=O(20);class s{constructor(){throw new Error("The `DefaultAnnotationLayerFactory` has been removed, please use the `annotationMode` option when initializing the `PDFPageView`-instance to control AnnotationLayer rendering.")}}G.DefaultAnnotationLayerFactory=s;class i{constructor(){throw new Error("The `DefaultStructTreeLayerFactory` has been removed, this functionality is automatically enabled when the TextLayer is used.")}}G.DefaultStructTreeLayerFactory=i;class u{constructor(){throw new Error("The `DefaultTextLayerFactory` has been removed, please use the `textLayerMode` option when initializing the `PDFPageView`-instance to control TextLayer rendering.")}}G.DefaultTextLayerFactory=u;class w{constructor(){throw new Error("The `DefaultXfaLayerFactory` has been removed, please use the `enableXfa` option when calling the `getDocument`-function to control XfaLayer rendering.")}}G.DefaultXfaLayerFactory=w})(),ue})())})(pdf_viewer$1);var pdf_viewerExports=pdf_viewer$1.exports;const pdf_viewer="";pdfExports.GlobalWorkerOptions.workerSrc="/static/pdfjs/pdf.worker.min.js";const _sfc_main=vue.defineComponent({name:"DocumentEditor",components:{ToolbarPagination:_sfc_main$1,ToolbarRotation:_sfc_main$2,ToolbarZoom:_sfc_main$3,ToolbarAnnotation:_sfc_main$4},setup:(re,P)=>{i18n.global.t},props:{value:{type:String,required:!0},baseUrl:{type:String,required:!0},pagination:{type:Boolean,default:!0},zoom:{type:Boolean,default:!0},comment:{type:Boolean,default:!0},highlight:{type:Boolean,default:!0},rotation:{type:Boolean,default:!0}},data(){return{token:this.value,rotations:{},highlightingColor:"",commentingColor:"",loading:!0,error:"",currentPage:1,currentZoom:"",hasAnnotations:!1,savingInProgress:!1,interval:null,pages:1,pdfDocument:void 0,viewer:void 0}},computed:{hasBeenRotated(){return this.rotations&&Object.keys(this.rotations).length!==0},needsToBeSaved(){return this.hasBeenRotated||this.hasAnnotations}},mounted(){this.pdfDocument=void 0,this.getFile();const re=["changeCurrentPage","rotate","zoomIn","zoomOut","setScale","setHighlight","setCommenting","save"];for(const P of re)this.$el.addEventListener(P,ee=>{this[P](ee.detail)})},unmounted(){this.stopWatchingAnnotations()},methods:{getFile:async function(){if(this.token==="FileInfectedException")this.error=this.t("view_entry.file_infected");else try{const re=await doRequest(`${this.baseUrl}metadata/${this.token}`),P=await pdfExports.getDocument(re.url).promise,ee=new pdf_viewerExports.PDFViewer({container:this.$refs.viewerContainer,eventBus:new pdf_viewerExports.EventBus,viewer:this.$refs.pdfViewer});ee.setDocument(P),ee.eventBus.on("pagechanging",O=>{this.currentPage=O.pageNumber;const ue=new CustomEvent("pageChange",{detail:{pageNumber:O.pageNumber}});this.$el.dispatchEvent(ue)}),ee.eventBus.on("pagesinit",()=>{this.currentZoom=ee.currentScaleValue="auto"}),this.pages=P.numPages;const T=new CustomEvent("numPages",{detail:{numPages:P.numPages}});this.$el.dispatchEvent(T),this.pdfDocument=vue.markRaw(P),this.viewer=vue.markRaw(ee)}catch(re){this.error=re.message}this.loading=!1},rotate(re){var P,ee;((P=this.viewer)==null?void 0:P.getPageView(this.currentPage-1)).update({rotation:re}),(ee=this.viewer)==null||ee.update(),re!==0?this.rotations[this.currentPage-1]=re:delete this.rotations[this.currentPage-1]},changeCurrentPage(re){this.viewer.currentPageNumber=re},zoomIn(){const re=this.viewer;re.increaseScale({scaleFactor:1.1}),this.currentZoom=re.currentScale.toString()},zoomOut(){const re=this.viewer;re.decreaseScale({scaleFactor:1.1}),this.currentZoom=re.currentScale.toString()},setScale(re){this.viewer.currentScaleValue=re,this.currentZoom=re},startWatchingAnnotations:function(){this.interval||(this.interval=window.setInterval(()=>this.updateNeedsToBeSaved(),500))},stopWatchingAnnotations:function(){this.interval&&window.clearInterval(this.interval),this.interval=null},setHighlight(re){const P=this.viewer;this.commentingColor="",this.highlightingColor=re,re?(this.startWatchingAnnotations(),P.annotationEditorMode=pdfExports.AnnotationEditorType.INK,P.annotationEditorParams={type:pdfExports.AnnotationEditorParamsType.INK_THICKNESS,value:10},P.annotationEditorParams={type:pdfExports.AnnotationEditorParamsType.INK_OPACITY,value:50},P.annotationEditorParams={type:pdfExports.AnnotationEditorParamsType.INK_COLOR,value:re}):(this.stopWatchingAnnotations(),P.annotationEditorMode=pdfExports.AnnotationEditorType.NONE)},setCommenting(re){const P=this.viewer;this.highlightingColor="",this.commentingColor=re,re?(this.startWatchingAnnotations(),P.annotationEditorMode=pdfExports.AnnotationEditorType.FREETEXT,P.annotationEditorParams={type:pdfExports.AnnotationEditorParamsType.FREETEXT_SIZE,value:10},P.annotationEditorParams={type:pdfExports.AnnotationEditorParamsType.FREETEXT_COLOR,value:re}):(this.stopWatchingAnnotations(),P.annotationEditorMode=pdfExports.AnnotationEditorType.NONE)},updateNeedsToBeSaved(){this.hasAnnotations=!!this.pdfDocument&&this.pdfDocument.annotationStorage.size>0},async save(){if(!this.needsToBeSaved)return!1;this.savingInProgress=!0,this.setCommenting("");const re=await this.pdfDocument.saveDocument(),P=new Blob([re],{type:"application/pdf"}),ee=new FormData;ee.append("file",P),ee.append("rotations",JSON.stringify(vue.toRaw(this.rotations)));try{const T=await doRequest(`${this.baseUrl}save-editor/${this.token}`,{method:"POST",headers:void 0,body:ee});this.rotations={},this.hasAnnotations=!1,this.token=T.token,this.getFile()}catch(T){this.error=T.message}this.savingInProgress=!1}}}),DocumentEditor_vue_vue_type_style_index_0_lang="",_export_sfc=(re,P)=>{const ee=re.__vccOpts||re;for(const[T,O]of P)ee[T]=O;return ee},_hoisted_1={class:"editor-container"},_hoisted_2={class:"wrapper"},_hoisted_3={ref:"viewerContainer",class:"viewerContainer",tabindex:"0"},_hoisted_4={class:"pdfViewer",ref:"pdfViewer"},_hoisted_5={class:"btn-toolbar",role:"toolbar"},_hoisted_6={key:0,class:"text-danger"};function _sfc_render(re,P,ee,T,O,ue){const G=vue.resolveComponent("ToolbarPagination"),I=vue.resolveComponent("ToolbarRotation"),D=vue.resolveComponent("ToolbarZoom"),_=vue.resolveComponent("ToolbarAnnotation");return vue.openBlock(),vue.createElementBlock("div",_hoisted_1,[vue.createElementVNode("div",_hoisted_2,[vue.createElementVNode("div",_hoisted_3,[vue.createElementVNode("div",_hoisted_4,null,512)],512)]),vue.createElementVNode("div",_hoisted_5,[re.pages&&re.pagination?(vue.openBlock(),vue.createBlock(G,{key:0,"current-page":re.currentPage,pages:re.pages,onOnChangeCurrentPage:re.changeCurrentPage},null,8,["current-page","pages","onOnChangeCurrentPage"])):vue.createCommentVNode("",!0),re.rotation?(vue.openBlock(),vue.createBlock(I,{key:1,"current-rotation":re.rotations[re.currentPage-1]||0,onOnRotate:re.rotate},null,8,["current-rotation","onOnRotate"])):vue.createCommentVNode("",!0),re.zoom&&re.currentZoom?(vue.openBlock(),vue.createBlock(D,{key:2,"current-zoom":re.currentZoom,onOnZoomIn:re.zoomIn,onOnZoomOut:re.zoomOut,onOnSetScale:re.setScale},null,8,["current-zoom","onOnZoomIn","onOnZoomOut","onOnSetScale"])):vue.createCommentVNode("",!0),re.highlight?(vue.openBlock(),vue.createBlock(_,{key:3,icon:"fa-highlighter","is-activated":re.highlightingColor!="",color:re.highlightingColor,"class-prefix":"bg",colors:{warning:"#ffff00",danger:"#ff0000",info:"#0000ff",success:"#00ff00"},onOnChange:re.setHighlight},null,8,["is-activated","color","onOnChange"])):vue.createCommentVNode("",!0),re.comment?(vue.openBlock(),vue.createBlock(_,{key:4,icon:"fa-message","is-activated":re.commentingColor!="",color:re.commentingColor,"class-prefix":"text",colors:{danger:"#a94442",warning:"#ffff00",info:"#31708f",success:"#3c763d",muted:"#ffffff"},onOnChange:re.setCommenting},null,8,["is-activated","color","onOnChange"])):vue.createCommentVNode("",!0),vue.createElementVNode("button",{type:"button",class:vue.normalizeClass(["btn",re.needsToBeSaved?"btn-primary":"btn-default disabled"]),onClick:P[0]||(P[0]=(...d)=>re.save&&re.save(...d))},[vue.createElementVNode("span",{class:vue.normalizeClass(["fas",re.savingInProgress?"fa-spinner fa-spin-pulse":`fa-save ${re.needsToBeSaved&&"fa-beat-fade"}`])},null,2)],2)]),re.error?(vue.openBlock(),vue.createElementBlock("p",_hoisted_6,vue.toDisplayString(re.error),1)):vue.createCommentVNode("",!0)])}const Editor=_export_sfc(_sfc_main,[["render",_sfc_render]]);function initEditors(){document.querySelectorAll(".osis-document-editor:not([data-v-app])").forEach(re=>{const P={baseUrl:"",value:"",...re.dataset};for(const ee of["pagination","zoom","comment","highlight","rotation"])typeof re.dataset[ee]<"u"&&(P[ee]=re.dataset[ee]==="true");runtimeDom.createApp(Editor,P).use(i18n).mount(re)})}initEditors();const observer=new MutationObserver(initEditors);observer.observe(document,{childList:!0,subtree:!0})});
//# sourceMappingURL=osis-document-editor.umd.min.js.map
