(function(t,e){typeof exports=="object"&&typeof module<"u"?e(require("@vue/runtime-dom"),require("vue")):typeof define=="function"&&define.amd?define(["@vue/runtime-dom","vue"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.Vue,t.Vue))})(this,(function(runtimeDom,vue){"use strict";function warn(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const inBrowser=typeof window<"u",makeSymbol=(t,e=!1)=>e?Symbol.for(t):Symbol(t),generateFormatCacheKey=(t,e,u)=>friendlyJSONstringify({l:t,k:e,s:u}),friendlyJSONstringify=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),isNumber=t=>typeof t=="number"&&isFinite(t),isDate=t=>toTypeString(t)==="[object Date]",isRegExp=t=>toTypeString(t)==="[object RegExp]",isEmptyObject=t=>isPlainObject(t)&&Object.keys(t).length===0,assign$1=Object.assign,_create=Object.create,create=(t=null)=>_create(t);let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:create());function escapeHtml(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2F;").replace(/=/g,"&#x3D;")}function escapeAttributeValue(t){return t.replace(/&(?![a-zA-Z0-9#]{2,6};)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function sanitizeTranslatedHtml(t){return t=t.replace(/(\w+)\s*=\s*"([^"]*)"/g,(r,p,w)=>`${p}="${escapeAttributeValue(w)}"`),t=t.replace(/(\w+)\s*=\s*'([^']*)'/g,(r,p,w)=>`${p}='${escapeAttributeValue(w)}'`),/\s*on\w+\s*=\s*["']?[^"'>]+["']?/gi.test(t)&&(t=t.replace(/(\s+)(on)(\w+\s*=)/gi,"$1&#111;n$3")),[/(\s+(?:href|src|action|formaction)\s*=\s*["']?)\s*javascript:/gi,/(style\s*=\s*["'][^"']*url\s*\(\s*)javascript:/gi].forEach(r=>{t=t.replace(r,"$1javascript&#58;")}),t}const hasOwnProperty=Object.prototype.hasOwnProperty;function hasOwn(t,e){return hasOwnProperty.call(t,e)}const isArray=Array.isArray,isFunction=t=>typeof t=="function",isString$1=t=>typeof t=="string",isBoolean=t=>typeof t=="boolean",isObject$1=t=>t!==null&&typeof t=="object",isPromise=t=>isObject$1(t)&&isFunction(t.then)&&isFunction(t.catch),objectToString=Object.prototype.toString,toTypeString=t=>objectToString.call(t),isPlainObject=t=>{if(!isObject$1(t))return!1;const e=Object.getPrototypeOf(t);return e===null||e.constructor===Object},toDisplayString=t=>t==null?"":isArray(t)||isPlainObject(t)&&t.toString===objectToString?JSON.stringify(t,null,2):String(t);function join$1(t,e=""){return t.reduce((u,r,p)=>p===0?u+r:u+e+r,"")}function incrementer(t){let e=t;return()=>++e}const isNotObjectOrIsArray=t=>!isObject$1(t)||isArray(t);function deepCopy(t,e){if(isNotObjectOrIsArray(t)||isNotObjectOrIsArray(e))throw new Error("Invalid value");const u=[{src:t,des:e}];for(;u.length;){const{src:r,des:p}=u.pop();Object.keys(r).forEach(w=>{w!=="__proto__"&&(isObject$1(r[w])&&!isObject$1(p[w])&&(p[w]=Array.isArray(r[w])?[]:create()),isNotObjectOrIsArray(p[w])||isNotObjectOrIsArray(r[w])?p[w]=r[w]:u.push({src:r[w],des:p[w]}))})}}function createPosition(t,e,u){return{line:t,column:e,offset:u}}function createLocation(t,e,u){return{start:t,end:e}}const RE_ARGS=/\{([0-9a-zA-Z]+)\}/g;function format$1(t,...e){return e.length===1&&isObject(e[0])&&(e=e[0]),(!e||!e.hasOwnProperty)&&(e={}),t.replace(RE_ARGS,(u,r)=>e.hasOwnProperty(r)?e[r]:"")}const assign=Object.assign,isString=t=>typeof t=="string",isObject=t=>t!==null&&typeof t=="object";function join(t,e=""){return t.reduce((u,r,p)=>p===0?u+r:u+e+r,"")}const CompileWarnCodes={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2},warnMessages={[CompileWarnCodes.USE_MODULO_SYNTAX]:"Use modulo before '{{0}}'."};function createCompileWarn(t,e,...u){const r=format$1(warnMessages[t],...u||[]),p={message:String(r),code:t};return e&&(p.location=e),p}const CompileErrorCodes={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},errorMessages={[CompileErrorCodes.EXPECTED_TOKEN]:"Expected token: '{0}'",[CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[CompileErrorCodes.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[CompileErrorCodes.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[CompileErrorCodes.EMPTY_PLACEHOLDER]:"Empty placeholder",[CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[CompileErrorCodes.INVALID_LINKED_FORMAT]:"Invalid linked format",[CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[CompileErrorCodes.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[CompileErrorCodes.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function createCompileError(t,e,u={}){const{domain:r,messages:p,args:w}=u,P=format$1((p||errorMessages)[t]||"",...w||[]),y=new SyntaxError(String(P));return y.code=t,e&&(y.location=e),y.domain=r,y}function defaultOnError(t){throw t}const CHAR_SP=" ",CHAR_CR="\r",CHAR_LF=`
`,CHAR_LS="\u2028",CHAR_PS="\u2029";function createScanner(t){const e=t;let u=0,r=1,p=1,w=0;const P=C=>e[C]===CHAR_CR&&e[C+1]===CHAR_LF,y=C=>e[C]===CHAR_LF,E=C=>e[C]===CHAR_PS,c=C=>e[C]===CHAR_LS,i=C=>P(C)||y(C)||E(C)||c(C),_=()=>u,g=()=>r,s=()=>p,h=()=>w,b=C=>P(C)||E(C)||c(C)?CHAR_LF:e[C],d=()=>b(u),f=()=>b(u+w);function L(){return w=0,i(u)&&(r++,p=0),P(u)&&u++,u++,p++,e[u]}function S(){return P(u+w)&&w++,w++,e[u+w]}function A(){u=0,r=1,p=1,w=0}function n(C=0){w=C}function a(){const C=u+w;for(;C!==u;)L();w=0}return{index:_,line:g,column:s,peekOffset:h,charAt:b,currentChar:d,currentPeek:f,next:L,peek:S,reset:A,resetPeek:n,skipToPeek:a}}const EOF=void 0,DOT=".",LITERAL_DELIMITER="'",ERROR_DOMAIN$3="tokenizer";function createTokenizer(t,e={}){const u=e.location!==!1,r=createScanner(t),p=()=>r.index(),w=()=>createPosition(r.line(),r.column(),r.index()),P=w(),y=p(),E={currentType:14,offset:y,startLoc:P,endLoc:P,lastType:14,lastOffset:y,lastStartLoc:P,lastEndLoc:P,braceNest:0,inLinked:!1,text:""},c=()=>E,{onError:i}=e;function _(B,j,ee,...oe){const fe=c();if(j.column+=ee,j.offset+=ee,i){const de=u?createLocation(fe.startLoc,j):null,ie=createCompileError(B,de,{domain:ERROR_DOMAIN$3,args:oe});i(ie)}}function g(B,j,ee){B.endLoc=w(),B.currentType=j;const oe={type:j};return u&&(oe.loc=createLocation(B.startLoc,B.endLoc)),ee!=null&&(oe.value=ee),oe}const s=B=>g(B,14);function h(B,j){return B.currentChar()===j?(B.next(),j):(_(CompileErrorCodes.EXPECTED_TOKEN,w(),0,j),"")}function b(B){let j="";for(;B.currentPeek()===CHAR_SP||B.currentPeek()===CHAR_LF;)j+=B.currentPeek(),B.peek();return j}function d(B){const j=b(B);return B.skipToPeek(),j}function f(B){if(B===EOF)return!1;const j=B.charCodeAt(0);return j>=97&&j<=122||j>=65&&j<=90||j===95}function L(B){if(B===EOF)return!1;const j=B.charCodeAt(0);return j>=48&&j<=57}function S(B,j){const{currentType:ee}=j;if(ee!==2)return!1;b(B);const oe=f(B.currentPeek());return B.resetPeek(),oe}function A(B,j){const{currentType:ee}=j;if(ee!==2)return!1;b(B);const oe=B.currentPeek()==="-"?B.peek():B.currentPeek(),fe=L(oe);return B.resetPeek(),fe}function n(B,j){const{currentType:ee}=j;if(ee!==2)return!1;b(B);const oe=B.currentPeek()===LITERAL_DELIMITER;return B.resetPeek(),oe}function a(B,j){const{currentType:ee}=j;if(ee!==8)return!1;b(B);const oe=B.currentPeek()===".";return B.resetPeek(),oe}function C(B,j){const{currentType:ee}=j;if(ee!==9)return!1;b(B);const oe=f(B.currentPeek());return B.resetPeek(),oe}function x(B,j){const{currentType:ee}=j;if(!(ee===8||ee===12))return!1;b(B);const oe=B.currentPeek()===":";return B.resetPeek(),oe}function T(B,j){const{currentType:ee}=j;if(ee!==10)return!1;const oe=()=>{const de=B.currentPeek();return de==="{"?f(B.peek()):de==="@"||de==="%"||de==="|"||de===":"||de==="."||de===CHAR_SP||!de?!1:de===CHAR_LF?(B.peek(),oe()):W(B,!1)},fe=oe();return B.resetPeek(),fe}function D(B){b(B);const j=B.currentPeek()==="|";return B.resetPeek(),j}function $(B){const j=b(B),ee=B.currentPeek()==="%"&&B.peek()==="{";return B.resetPeek(),{isModulo:ee,hasSpace:j.length>0}}function W(B,j=!0){const ee=(fe=!1,de="",ie=!1)=>{const le=B.currentPeek();return le==="{"?de==="%"?!1:fe:le==="@"||!le?de==="%"?!0:fe:le==="%"?(B.peek(),ee(fe,"%",!0)):le==="|"?de==="%"||ie?!0:!(de===CHAR_SP||de===CHAR_LF):le===CHAR_SP?(B.peek(),ee(!0,CHAR_SP,ie)):le===CHAR_LF?(B.peek(),ee(!0,CHAR_LF,ie)):!0},oe=ee();return j&&B.resetPeek(),oe}function se(B,j){const ee=B.currentChar();return ee===EOF?EOF:j(ee)?(B.next(),ee):null}function ne(B){const j=B.charCodeAt(0);return j>=97&&j<=122||j>=65&&j<=90||j>=48&&j<=57||j===95||j===36}function q(B){return se(B,ne)}function G(B){const j=B.charCodeAt(0);return j>=97&&j<=122||j>=65&&j<=90||j>=48&&j<=57||j===95||j===36||j===45}function I(B){return se(B,G)}function k(B){const j=B.charCodeAt(0);return j>=48&&j<=57}function O(B){return se(B,k)}function m(B){const j=B.charCodeAt(0);return j>=48&&j<=57||j>=65&&j<=70||j>=97&&j<=102}function l(B){return se(B,m)}function M(B){let j="",ee="";for(;j=O(B);)ee+=j;return ee}function N(B){d(B);const j=B.currentChar();return j!=="%"&&_(CompileErrorCodes.EXPECTED_TOKEN,w(),0,j),B.next(),"%"}function o(B){let j="";for(;;){const ee=B.currentChar();if(ee==="{"||ee==="}"||ee==="@"||ee==="|"||!ee)break;if(ee==="%")if(W(B))j+=ee,B.next();else break;else if(ee===CHAR_SP||ee===CHAR_LF)if(W(B))j+=ee,B.next();else{if(D(B))break;j+=ee,B.next()}else j+=ee,B.next()}return j}function v(B){d(B);let j="",ee="";for(;j=I(B);)ee+=j;return B.currentChar()===EOF&&_(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,w(),0),ee}function R(B){d(B);let j="";return B.currentChar()==="-"?(B.next(),j+=`-${M(B)}`):j+=M(B),B.currentChar()===EOF&&_(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,w(),0),j}function F(B){return B!==LITERAL_DELIMITER&&B!==CHAR_LF}function U(B){d(B),h(B,"'");let j="",ee="";for(;j=se(B,F);)j==="\\"?ee+=H(B):ee+=j;const oe=B.currentChar();return oe===CHAR_LF||oe===EOF?(_(CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,w(),0),oe===CHAR_LF&&(B.next(),h(B,"'")),ee):(h(B,"'"),ee)}function H(B){const j=B.currentChar();switch(j){case"\\":case"'":return B.next(),`\\${j}`;case"u":return V(B,j,4);case"U":return V(B,j,6);default:return _(CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE,w(),0,j),""}}function V(B,j,ee){h(B,j);let oe="";for(let fe=0;fe<ee;fe++){const de=l(B);if(!de){_(CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE,w(),0,`\\${j}${oe}${B.currentChar()}`);break}oe+=de}return`\\${j}${oe}`}function Y(B){return B!=="{"&&B!=="}"&&B!==CHAR_SP&&B!==CHAR_LF}function Z(B){d(B);let j="",ee="";for(;j=se(B,Y);)ee+=j;return ee}function X(B){let j="",ee="";for(;j=q(B);)ee+=j;return ee}function re(B){const j=ee=>{const oe=B.currentChar();return oe==="{"||oe==="%"||oe==="@"||oe==="|"||oe==="("||oe===")"||!oe||oe===CHAR_SP?ee:(ee+=oe,B.next(),j(ee))};return j("")}function ce(B){d(B);const j=h(B,"|");return d(B),j}function z(B,j){let ee=null;switch(B.currentChar()){case"{":return j.braceNest>=1&&_(CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER,w(),0),B.next(),ee=g(j,2,"{"),d(B),j.braceNest++,ee;case"}":return j.braceNest>0&&j.currentType===2&&_(CompileErrorCodes.EMPTY_PLACEHOLDER,w(),0),B.next(),ee=g(j,3,"}"),j.braceNest--,j.braceNest>0&&d(B),j.inLinked&&j.braceNest===0&&(j.inLinked=!1),ee;case"@":return j.braceNest>0&&_(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,w(),0),ee=te(B,j)||s(j),j.braceNest=0,ee;default:{let fe=!0,de=!0,ie=!0;if(D(B))return j.braceNest>0&&_(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,w(),0),ee=g(j,1,ce(B)),j.braceNest=0,j.inLinked=!1,ee;if(j.braceNest>0&&(j.currentType===5||j.currentType===6||j.currentType===7))return _(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,w(),0),j.braceNest=0,ae(B,j);if(fe=S(B,j))return ee=g(j,5,v(B)),d(B),ee;if(de=A(B,j))return ee=g(j,6,R(B)),d(B),ee;if(ie=n(B,j))return ee=g(j,7,U(B)),d(B),ee;if(!fe&&!de&&!ie)return ee=g(j,13,Z(B)),_(CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER,w(),0,ee.value),d(B),ee;break}}return ee}function te(B,j){const{currentType:ee}=j;let oe=null;const fe=B.currentChar();switch((ee===8||ee===9||ee===12||ee===10)&&(fe===CHAR_LF||fe===CHAR_SP)&&_(CompileErrorCodes.INVALID_LINKED_FORMAT,w(),0),fe){case"@":return B.next(),oe=g(j,8,"@"),j.inLinked=!0,oe;case".":return d(B),B.next(),g(j,9,".");case":":return d(B),B.next(),g(j,10,":");default:return D(B)?(oe=g(j,1,ce(B)),j.braceNest=0,j.inLinked=!1,oe):a(B,j)||x(B,j)?(d(B),te(B,j)):C(B,j)?(d(B),g(j,12,X(B))):T(B,j)?(d(B),fe==="{"?z(B,j)||oe:g(j,11,re(B))):(ee===8&&_(CompileErrorCodes.INVALID_LINKED_FORMAT,w(),0),j.braceNest=0,j.inLinked=!1,ae(B,j))}}function ae(B,j){let ee={type:14};if(j.braceNest>0)return z(B,j)||s(j);if(j.inLinked)return te(B,j)||s(j);switch(B.currentChar()){case"{":return z(B,j)||s(j);case"}":return _(CompileErrorCodes.UNBALANCED_CLOSING_BRACE,w(),0),B.next(),g(j,3,"}");case"@":return te(B,j)||s(j);default:{if(D(B))return ee=g(j,1,ce(B)),j.braceNest=0,j.inLinked=!1,ee;const{isModulo:fe,hasSpace:de}=$(B);if(fe)return de?g(j,0,o(B)):g(j,4,N(B));if(W(B))return g(j,0,o(B));break}}return ee}function Q(){const{currentType:B,offset:j,startLoc:ee,endLoc:oe}=E;return E.lastType=B,E.lastOffset=j,E.lastStartLoc=ee,E.lastEndLoc=oe,E.offset=p(),E.startLoc=w(),r.currentChar()===EOF?g(E,14):ae(r,E)}return{nextToken:Q,currentOffset:p,currentPosition:w,context:c}}const ERROR_DOMAIN$2="parser",KNOWN_ESCAPES=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function fromEscapeSequence(t,e,u){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(e||u,16);return r<=55295||r>=57344?String.fromCodePoint(r):"�"}}}function createParser(t={}){const e=t.location!==!1,{onError:u,onWarn:r}=t;function p(S,A,n,a,...C){const x=S.currentPosition();if(x.offset+=a,x.column+=a,u){const T=e?createLocation(n,x):null,D=createCompileError(A,T,{domain:ERROR_DOMAIN$2,args:C});u(D)}}function w(S,A,n,a,...C){const x=S.currentPosition();if(x.offset+=a,x.column+=a,r){const T=e?createLocation(n,x):null;r(createCompileWarn(A,T,C))}}function P(S,A,n){const a={type:S};return e&&(a.start=A,a.end=A,a.loc={start:n,end:n}),a}function y(S,A,n,a){e&&(S.end=A,S.loc&&(S.loc.end=n))}function E(S,A){const n=S.context(),a=P(3,n.offset,n.startLoc);return a.value=A,y(a,S.currentOffset(),S.currentPosition()),a}function c(S,A){const n=S.context(),{lastOffset:a,lastStartLoc:C}=n,x=P(5,a,C);return x.index=parseInt(A,10),S.nextToken(),y(x,S.currentOffset(),S.currentPosition()),x}function i(S,A,n){const a=S.context(),{lastOffset:C,lastStartLoc:x}=a,T=P(4,C,x);return T.key=A,n===!0&&(T.modulo=!0),S.nextToken(),y(T,S.currentOffset(),S.currentPosition()),T}function _(S,A){const n=S.context(),{lastOffset:a,lastStartLoc:C}=n,x=P(9,a,C);return x.value=A.replace(KNOWN_ESCAPES,fromEscapeSequence),S.nextToken(),y(x,S.currentOffset(),S.currentPosition()),x}function g(S){const A=S.nextToken(),n=S.context(),{lastOffset:a,lastStartLoc:C}=n,x=P(8,a,C);return A.type!==12?(p(S,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER,n.lastStartLoc,0),x.value="",y(x,a,C),{nextConsumeToken:A,node:x}):(A.value==null&&p(S,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,n.lastStartLoc,0,getTokenCaption(A)),x.value=A.value||"",y(x,S.currentOffset(),S.currentPosition()),{node:x})}function s(S,A){const n=S.context(),a=P(7,n.offset,n.startLoc);return a.value=A,y(a,S.currentOffset(),S.currentPosition()),a}function h(S){const A=S.context(),n=P(6,A.offset,A.startLoc);let a=S.nextToken();if(a.type===9){const C=g(S);n.modifier=C.node,a=C.nextConsumeToken||S.nextToken()}switch(a.type!==10&&p(S,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,getTokenCaption(a)),a=S.nextToken(),a.type===2&&(a=S.nextToken()),a.type){case 11:a.value==null&&p(S,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,getTokenCaption(a)),n.key=s(S,a.value||"");break;case 5:a.value==null&&p(S,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,getTokenCaption(a)),n.key=i(S,a.value||"");break;case 6:a.value==null&&p(S,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,getTokenCaption(a)),n.key=c(S,a.value||"");break;case 7:a.value==null&&p(S,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,getTokenCaption(a)),n.key=_(S,a.value||"");break;default:{p(S,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY,A.lastStartLoc,0);const C=S.context(),x=P(7,C.offset,C.startLoc);return x.value="",y(x,C.offset,C.startLoc),n.key=x,y(n,C.offset,C.startLoc),{nextConsumeToken:a,node:n}}}return y(n,S.currentOffset(),S.currentPosition()),{node:n}}function b(S){const A=S.context(),n=A.currentType===1?S.currentOffset():A.offset,a=A.currentType===1?A.endLoc:A.startLoc,C=P(2,n,a);C.items=[];let x=null,T=null;do{const W=x||S.nextToken();switch(x=null,W.type){case 0:W.value==null&&p(S,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,getTokenCaption(W)),C.items.push(E(S,W.value||""));break;case 6:W.value==null&&p(S,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,getTokenCaption(W)),C.items.push(c(S,W.value||""));break;case 4:T=!0;break;case 5:W.value==null&&p(S,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,getTokenCaption(W)),C.items.push(i(S,W.value||"",!!T)),T&&(w(S,CompileWarnCodes.USE_MODULO_SYNTAX,A.lastStartLoc,0,getTokenCaption(W)),T=null);break;case 7:W.value==null&&p(S,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,getTokenCaption(W)),C.items.push(_(S,W.value||""));break;case 8:{const se=h(S);C.items.push(se.node),x=se.nextConsumeToken||null;break}}}while(A.currentType!==14&&A.currentType!==1);const D=A.currentType===1?A.lastOffset:S.currentOffset(),$=A.currentType===1?A.lastEndLoc:S.currentPosition();return y(C,D,$),C}function d(S,A,n,a){const C=S.context();let x=a.items.length===0;const T=P(1,A,n);T.cases=[],T.cases.push(a);do{const D=b(S);x||(x=D.items.length===0),T.cases.push(D)}while(C.currentType!==14);return x&&p(S,CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL,n,0),y(T,S.currentOffset(),S.currentPosition()),T}function f(S){const A=S.context(),{offset:n,startLoc:a}=A,C=b(S);return A.currentType===14?C:d(S,n,a,C)}function L(S){const A=createTokenizer(S,assign({},t)),n=A.context(),a=P(0,n.offset,n.startLoc);return e&&a.loc&&(a.loc.source=S),a.body=f(A),t.onCacheKey&&(a.cacheKey=t.onCacheKey(S)),n.currentType!==14&&p(A,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,n.lastStartLoc,0,S[n.offset]||""),y(a,A.currentOffset(),A.currentPosition()),a}return{parse:L}}function getTokenCaption(t){if(t.type===14)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"…":e}function createTransformer(t,e={}){const u={ast:t,helpers:new Set};return{context:()=>u,helper:w=>(u.helpers.add(w),w)}}function traverseNodes(t,e){for(let u=0;u<t.length;u++)traverseNode(t[u],e)}function traverseNode(t,e){switch(t.type){case 1:traverseNodes(t.cases,e),e.helper("plural");break;case 2:traverseNodes(t.items,e);break;case 6:{traverseNode(t.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function transform(t,e={}){const u=createTransformer(t);u.helper("normalize"),t.body&&traverseNode(t.body,u);const r=u.context();t.helpers=Array.from(r.helpers)}function optimize(t){const e=t.body;return e.type===2?optimizeMessageNode(e):e.cases.forEach(u=>optimizeMessageNode(u)),t}function optimizeMessageNode(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let u=0;u<t.items.length;u++){const r=t.items[u];if(!(r.type===3||r.type===9)||r.value==null)break;e.push(r.value)}if(e.length===t.items.length){t.static=join(e);for(let u=0;u<t.items.length;u++){const r=t.items[u];(r.type===3||r.type===9)&&delete r.value}}}}const ERROR_DOMAIN$1="minifier";function minify(t){switch(t.t=t.type,t.type){case 0:{const e=t;minify(e.body),e.b=e.body,delete e.body;break}case 1:{const e=t,u=e.cases;for(let r=0;r<u.length;r++)minify(u[r]);e.c=u,delete e.cases;break}case 2:{const e=t,u=e.items;for(let r=0;r<u.length;r++)minify(u[r]);e.i=u,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=t;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=t;minify(e.key),e.k=e.key,delete e.key,e.modifier&&(minify(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=t;e.i=e.index,delete e.index;break}case 4:{const e=t;e.k=e.key,delete e.key;break}default:throw createCompileError(CompileErrorCodes.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:ERROR_DOMAIN$1,args:[t.type]})}delete t.type}const ERROR_DOMAIN="parser";function createCodeGenerator(t,e){const{filename:u,breakLineCode:r,needIndent:p}=e,w=e.location!==!1,P={filename:u,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:r,needIndent:p,indentLevel:0};w&&t.loc&&(P.source=t.loc.source);const y=()=>P;function E(b,d){P.code+=b}function c(b,d=!0){const f=d?r:"";E(p?f+"  ".repeat(b):f)}function i(b=!0){const d=++P.indentLevel;b&&c(d)}function _(b=!0){const d=--P.indentLevel;b&&c(d)}function g(){c(P.indentLevel)}return{context:y,push:E,indent:i,deindent:_,newline:g,helper:b=>`_${b}`,needIndent:()=>P.needIndent}}function generateLinkedNode(t,e){const{helper:u}=t;t.push(`${u("linked")}(`),generateNode(t,e.key),e.modifier?(t.push(", "),generateNode(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function generateMessageNode(t,e){const{helper:u,needIndent:r}=t;t.push(`${u("normalize")}([`),t.indent(r());const p=e.items.length;for(let w=0;w<p&&(generateNode(t,e.items[w]),w!==p-1);w++)t.push(", ");t.deindent(r()),t.push("])")}function generatePluralNode(t,e){const{helper:u,needIndent:r}=t;if(e.cases.length>1){t.push(`${u("plural")}([`),t.indent(r());const p=e.cases.length;for(let w=0;w<p&&(generateNode(t,e.cases[w]),w!==p-1);w++)t.push(", ");t.deindent(r()),t.push("])")}}function generateResource(t,e){e.body?generateNode(t,e.body):t.push("null")}function generateNode(t,e){const{helper:u}=t;switch(e.type){case 0:generateResource(t,e);break;case 1:generatePluralNode(t,e);break;case 2:generateMessageNode(t,e);break;case 6:generateLinkedNode(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${u("interpolate")}(${u("list")}(${e.index}))`,e);break;case 4:t.push(`${u("interpolate")}(${u("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break;default:throw createCompileError(CompileErrorCodes.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:ERROR_DOMAIN,args:[e.type]})}}const generate=(t,e={})=>{const u=isString(e.mode)?e.mode:"normal",r=isString(e.filename)?e.filename:"message.intl";e.sourceMap;const p=e.breakLineCode!=null?e.breakLineCode:u==="arrow"?";":`
`,w=e.needIndent?e.needIndent:u!=="arrow",P=t.helpers||[],y=createCodeGenerator(t,{filename:r,breakLineCode:p,needIndent:w});y.push(u==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),y.indent(w),P.length>0&&(y.push(`const { ${join(P.map(i=>`${i}: _${i}`),", ")} } = ctx`),y.newline()),y.push("return "),generateNode(y,t),y.deindent(w),y.push("}"),delete t.helpers;const{code:E,map:c}=y.context();return{ast:t,code:E,map:c?c.toJSON():void 0}};function baseCompile$1(t,e={}){const u=assign({},e),r=!!u.jit,p=!!u.minify,w=u.optimize==null?!0:u.optimize,y=createParser(u).parse(t);return r?(w&&optimize(y),p&&minify(y),{ast:y,code:""}):(transform(y,u),generate(y,u))}function initFeatureFlags$1(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1)}function isMessageAST(t){return isObject$1(t)&&resolveType(t)===0&&(hasOwn(t,"b")||hasOwn(t,"body"))}const PROPS_BODY=["b","body"];function resolveBody(t){return resolveProps(t,PROPS_BODY)}const PROPS_CASES=["c","cases"];function resolveCases(t){return resolveProps(t,PROPS_CASES,[])}const PROPS_STATIC=["s","static"];function resolveStatic(t){return resolveProps(t,PROPS_STATIC)}const PROPS_ITEMS=["i","items"];function resolveItems(t){return resolveProps(t,PROPS_ITEMS,[])}const PROPS_TYPE=["t","type"];function resolveType(t){return resolveProps(t,PROPS_TYPE)}const PROPS_VALUE=["v","value"];function resolveValue$1(t,e){const u=resolveProps(t,PROPS_VALUE);if(u!=null)return u;throw createUnhandleNodeError(e)}const PROPS_MODIFIER=["m","modifier"];function resolveLinkedModifier(t){return resolveProps(t,PROPS_MODIFIER)}const PROPS_KEY=["k","key"];function resolveLinkedKey(t){const e=resolveProps(t,PROPS_KEY);if(e)return e;throw createUnhandleNodeError(6)}function resolveProps(t,e,u){for(let r=0;r<e.length;r++){const p=e[r];if(hasOwn(t,p)&&t[p]!=null)return t[p]}return u}const AST_NODE_PROPS_KEYS=[...PROPS_BODY,...PROPS_CASES,...PROPS_STATIC,...PROPS_ITEMS,...PROPS_KEY,...PROPS_MODIFIER,...PROPS_VALUE,...PROPS_TYPE];function createUnhandleNodeError(t){return new Error(`unhandled node type: ${t}`)}const pathStateMachine=[];pathStateMachine[0]={w:[0],i:[3,0],"[":[4],o:[7]},pathStateMachine[1]={w:[1],".":[2],"[":[4],o:[7]},pathStateMachine[2]={w:[2],i:[3,0],0:[3,0]},pathStateMachine[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]},pathStateMachine[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]},pathStateMachine[5]={"'":[4,0],o:8,l:[5,0]},pathStateMachine[6]={'"':[4,0],o:8,l:[6,0]};const literalValueRE=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function isLiteral(t){return literalValueRE.test(t)}function stripQuotes(t){const e=t.charCodeAt(0),u=t.charCodeAt(t.length-1);return e===u&&(e===34||e===39)?t.slice(1,-1):t}function getPathCharType(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function formatSubPath(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:isLiteral(e)?stripQuotes(e):"*"+e}function parse(t){const e=[];let u=-1,r=0,p=0,w,P,y,E,c,i,_;const g=[];g[0]=()=>{P===void 0?P=y:P+=y},g[1]=()=>{P!==void 0&&(e.push(P),P=void 0)},g[2]=()=>{g[0](),p++},g[3]=()=>{if(p>0)p--,r=4,g[0]();else{if(p=0,P===void 0||(P=formatSubPath(P),P===!1))return!1;g[1]()}};function s(){const h=t[u+1];if(r===5&&h==="'"||r===6&&h==='"')return u++,y="\\"+h,g[0](),!0}for(;r!==null;)if(u++,w=t[u],!(w==="\\"&&s())){if(E=getPathCharType(w),_=pathStateMachine[r],c=_[E]||_.l||8,c===8||(r=c[0],c[1]!==void 0&&(i=g[c[1]],i&&(y=w,i()===!1))))return;if(r===7)return e}}const cache=new Map;function resolveWithKeyValue(t,e){return isObject$1(t)?t[e]:null}function resolveValue(t,e){if(!isObject$1(t))return null;let u=cache.get(e);if(u||(u=parse(e),u&&cache.set(e,u)),!u)return null;const r=u.length;let p=t,w=0;for(;w<r;){const P=u[w];if(AST_NODE_PROPS_KEYS.includes(P)&&isMessageAST(p))return null;const y=p[P];if(y===void 0||isFunction(p))return null;p=y,w++}return p}const DEFAULT_MODIFIER=t=>t,DEFAULT_MESSAGE=t=>"",DEFAULT_MESSAGE_DATA_TYPE="text",DEFAULT_NORMALIZE=t=>t.length===0?"":join$1(t),DEFAULT_INTERPOLATE=toDisplayString;function pluralDefault(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function getPluralIndex(t){const e=isNumber(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(isNumber(t.named.count)||isNumber(t.named.n))?isNumber(t.named.count)?t.named.count:isNumber(t.named.n)?t.named.n:e:e}function normalizeNamed(t,e){e.count||(e.count=t),e.n||(e.n=t)}function createMessageContext(t={}){const e=t.locale,u=getPluralIndex(t),r=isObject$1(t.pluralRules)&&isString$1(e)&&isFunction(t.pluralRules[e])?t.pluralRules[e]:pluralDefault,p=isObject$1(t.pluralRules)&&isString$1(e)&&isFunction(t.pluralRules[e])?pluralDefault:void 0,w=f=>f[r(u,f.length,p)],P=t.list||[],y=f=>P[f],E=t.named||create();isNumber(t.pluralIndex)&&normalizeNamed(u,E);const c=f=>E[f];function i(f){const L=isFunction(t.messages)?t.messages(f):isObject$1(t.messages)?t.messages[f]:!1;return L||(t.parent?t.parent.message(f):DEFAULT_MESSAGE)}const _=f=>t.modifiers?t.modifiers[f]:DEFAULT_MODIFIER,g=isPlainObject(t.processor)&&isFunction(t.processor.normalize)?t.processor.normalize:DEFAULT_NORMALIZE,s=isPlainObject(t.processor)&&isFunction(t.processor.interpolate)?t.processor.interpolate:DEFAULT_INTERPOLATE,h=isPlainObject(t.processor)&&isString$1(t.processor.type)?t.processor.type:DEFAULT_MESSAGE_DATA_TYPE,d={list:y,named:c,plural:w,linked:(f,...L)=>{const[S,A]=L;let n="text",a="";L.length===1?isObject$1(S)?(a=S.modifier||a,n=S.type||n):isString$1(S)&&(a=S||a):L.length===2&&(isString$1(S)&&(a=S||a),isString$1(A)&&(n=A||n));const C=i(f)(d),x=n==="vnode"&&isArray(C)&&a?C[0]:C;return a?_(a)(x,n):x},message:i,type:h,interpolate:s,normalize:g,values:assign$1(create(),P,E)};return d}let devtools=null;function setDevToolsHook(t){devtools=t}function initI18nDevTools(t,e,u){devtools&&devtools.emit("i18n:init",{timestamp:Date.now(),i18n:t,version:e,meta:u})}const translateDevTools=createDevToolsHook("function:translate");function createDevToolsHook(t){return e=>devtools&&devtools.emit(t,e)}const code$1$1=CompileWarnCodes.__EXTEND_POINT__,inc$1$1=incrementer(code$1$1),CoreWarnCodes={FALLBACK_TO_TRANSLATE:inc$1$1(),CANNOT_FORMAT_NUMBER:inc$1$1(),FALLBACK_TO_NUMBER_FORMAT:inc$1$1(),CANNOT_FORMAT_DATE:inc$1$1(),FALLBACK_TO_DATE_FORMAT:inc$1$1(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:inc$1$1(),__EXTEND_POINT__:inc$1$1()},code$2=CompileErrorCodes.__EXTEND_POINT__,inc$2=incrementer(code$2),CoreErrorCodes={INVALID_ARGUMENT:code$2,INVALID_DATE_ARGUMENT:inc$2(),INVALID_ISO_DATE_ARGUMENT:inc$2(),NOT_SUPPORT_NON_STRING_MESSAGE:inc$2(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:inc$2(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:inc$2(),NOT_SUPPORT_LOCALE_TYPE:inc$2(),__EXTEND_POINT__:inc$2()};function createCoreError(t){return createCompileError(t,null,void 0)}function getLocale(t,e){return e.locale!=null?resolveLocale(e.locale):resolveLocale(t.locale)}let _resolveLocale;function resolveLocale(t){if(isString$1(t))return t;if(isFunction(t)){if(t.resolvedOnce&&_resolveLocale!=null)return _resolveLocale;if(t.constructor.name==="Function"){const e=t();if(isPromise(e))throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return _resolveLocale=e}else throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_TYPE)}function fallbackWithSimple(t,e,u){return[...new Set([u,...isArray(e)?e:isObject$1(e)?Object.keys(e):isString$1(e)?[e]:[u]])]}function fallbackWithLocaleChain(t,e,u){const r=isString$1(u)?u:DEFAULT_LOCALE,p=t;p.__localeChainCache||(p.__localeChainCache=new Map);let w=p.__localeChainCache.get(r);if(!w){w=[];let P=[u];for(;isArray(P);)P=appendBlockToChain(w,P,e);const y=isArray(e)||!isPlainObject(e)?e:e.default?e.default:null;P=isString$1(y)?[y]:y,isArray(P)&&appendBlockToChain(w,P,!1),p.__localeChainCache.set(r,w)}return w}function appendBlockToChain(t,e,u){let r=!0;for(let p=0;p<e.length&&isBoolean(r);p++){const w=e[p];isString$1(w)&&(r=appendLocaleToChain(t,e[p],u))}return r}function appendLocaleToChain(t,e,u){let r;const p=e.split("-");do{const w=p.join("-");r=appendItemToChain(t,w,u),p.splice(-1,1)}while(p.length&&r===!0);return r}function appendItemToChain(t,e,u){let r=!1;if(!t.includes(e)&&(r=!0,e)){r=e[e.length-1]!=="!";const p=e.replace(/!/g,"");t.push(p),(isArray(u)||isPlainObject(u))&&u[p]&&(r=u[p])}return r}const VERSION$1="9.14.5",NOT_REOSLVED=-1,DEFAULT_LOCALE="en-US",MISSING_RESOLVE_VALUE="",capitalize=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function getDefaultLinkedModifiers(){return{upper:(t,e)=>e==="text"&&isString$1(t)?t.toUpperCase():e==="vnode"&&isObject$1(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&isString$1(t)?t.toLowerCase():e==="vnode"&&isObject$1(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&isString$1(t)?capitalize(t):e==="vnode"&&isObject$1(t)&&"__v_isVNode"in t?capitalize(t.children):t}}let _compiler;function registerMessageCompiler(t){_compiler=t}let _resolver;function registerMessageResolver(t){_resolver=t}let _fallbacker;function registerLocaleFallbacker(t){_fallbacker=t}let _additionalMeta=null;const setAdditionalMeta=t=>{_additionalMeta=t},getAdditionalMeta=()=>_additionalMeta;let _fallbackContext=null;const setFallbackContext=t=>{_fallbackContext=t},getFallbackContext=()=>_fallbackContext;let _cid=0;function createCoreContext(t={}){const e=isFunction(t.onWarn)?t.onWarn:warn,u=isString$1(t.version)?t.version:VERSION$1,r=isString$1(t.locale)||isFunction(t.locale)?t.locale:DEFAULT_LOCALE,p=isFunction(r)?DEFAULT_LOCALE:r,w=isArray(t.fallbackLocale)||isPlainObject(t.fallbackLocale)||isString$1(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:p,P=isPlainObject(t.messages)?t.messages:createResources(p),y=isPlainObject(t.datetimeFormats)?t.datetimeFormats:createResources(p),E=isPlainObject(t.numberFormats)?t.numberFormats:createResources(p),c=assign$1(create(),t.modifiers,getDefaultLinkedModifiers()),i=t.pluralRules||create(),_=isFunction(t.missing)?t.missing:null,g=isBoolean(t.missingWarn)||isRegExp(t.missingWarn)?t.missingWarn:!0,s=isBoolean(t.fallbackWarn)||isRegExp(t.fallbackWarn)?t.fallbackWarn:!0,h=!!t.fallbackFormat,b=!!t.unresolving,d=isFunction(t.postTranslation)?t.postTranslation:null,f=isPlainObject(t.processor)?t.processor:null,L=isBoolean(t.warnHtmlMessage)?t.warnHtmlMessage:!0,S=!!t.escapeParameter,A=isFunction(t.messageCompiler)?t.messageCompiler:_compiler,n=isFunction(t.messageResolver)?t.messageResolver:_resolver||resolveWithKeyValue,a=isFunction(t.localeFallbacker)?t.localeFallbacker:_fallbacker||fallbackWithSimple,C=isObject$1(t.fallbackContext)?t.fallbackContext:void 0,x=t,T=isObject$1(x.__datetimeFormatters)?x.__datetimeFormatters:new Map,D=isObject$1(x.__numberFormatters)?x.__numberFormatters:new Map,$=isObject$1(x.__meta)?x.__meta:{};_cid++;const W={version:u,cid:_cid,locale:r,fallbackLocale:w,messages:P,modifiers:c,pluralRules:i,missing:_,missingWarn:g,fallbackWarn:s,fallbackFormat:h,unresolving:b,postTranslation:d,processor:f,warnHtmlMessage:L,escapeParameter:S,messageCompiler:A,messageResolver:n,localeFallbacker:a,fallbackContext:C,onWarn:e,__meta:$};return W.datetimeFormats=y,W.numberFormats=E,W.__datetimeFormatters=T,W.__numberFormatters=D,__INTLIFY_PROD_DEVTOOLS__&&initI18nDevTools(W,u,$),W}const createResources=t=>({[t]:create()});function handleMissing(t,e,u,r,p){const{missing:w,onWarn:P}=t;if(w!==null){const y=w(t,u,e,p);return isString$1(y)?y:e}else return e}function updateFallbackLocale(t,e,u){const r=t;r.__localeChainCache=new Map,t.localeFallbacker(t,u,e)}function isAlmostSameLocale(t,e){return t===e?!1:t.split("-")[0]===e.split("-")[0]}function isImplicitFallback(t,e){const u=e.indexOf(t);if(u===-1)return!1;for(let r=u+1;r<e.length;r++)if(isAlmostSameLocale(t,e[r]))return!0;return!1}function format(t){return u=>formatParts(u,t)}function formatParts(t,e){const u=resolveBody(e);if(u==null)throw createUnhandleNodeError(0);if(resolveType(u)===1){const w=resolveCases(u);return t.plural(w.reduce((P,y)=>[...P,formatMessageParts(t,y)],[]))}else return formatMessageParts(t,u)}function formatMessageParts(t,e){const u=resolveStatic(e);if(u!=null)return t.type==="text"?u:t.normalize([u]);{const r=resolveItems(e).reduce((p,w)=>[...p,formatMessagePart(t,w)],[]);return t.normalize(r)}}function formatMessagePart(t,e){const u=resolveType(e);switch(u){case 3:return resolveValue$1(e,u);case 9:return resolveValue$1(e,u);case 4:{const r=e;if(hasOwn(r,"k")&&r.k)return t.interpolate(t.named(r.k));if(hasOwn(r,"key")&&r.key)return t.interpolate(t.named(r.key));throw createUnhandleNodeError(u)}case 5:{const r=e;if(hasOwn(r,"i")&&isNumber(r.i))return t.interpolate(t.list(r.i));if(hasOwn(r,"index")&&isNumber(r.index))return t.interpolate(t.list(r.index));throw createUnhandleNodeError(u)}case 6:{const r=e,p=resolveLinkedModifier(r),w=resolveLinkedKey(r);return t.linked(formatMessagePart(t,w),p?formatMessagePart(t,p):void 0,t.type)}case 7:return resolveValue$1(e,u);case 8:return resolveValue$1(e,u);default:throw new Error(`unhandled node on format message part: ${u}`)}}const defaultOnCacheKey=t=>t;let compileCache=create();function baseCompile(t,e={}){let u=!1;const r=e.onError||defaultOnError;return e.onError=p=>{u=!0,r(p)},{...baseCompile$1(t,e),detectError:u}}function compile(t,e){if(isString$1(t)){isBoolean(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||defaultOnCacheKey)(t),p=compileCache[r];if(p)return p;const{ast:w,detectError:P}=baseCompile(t,{...e,location:!1,jit:!0}),y=format(w);return P?y:compileCache[r]=y}else{const u=t.cacheKey;if(u){const r=compileCache[u];return r||(compileCache[u]=format(t))}else return format(t)}}const NOOP_MESSAGE_FUNCTION=()=>"",isMessageFunction=t=>isFunction(t);function translate(t,...e){const{fallbackFormat:u,postTranslation:r,unresolving:p,messageCompiler:w,fallbackLocale:P,messages:y}=t,[E,c]=parseTranslateArgs(...e),i=isBoolean(c.missingWarn)?c.missingWarn:t.missingWarn,_=isBoolean(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn,g=isBoolean(c.escapeParameter)?c.escapeParameter:t.escapeParameter,s=!!c.resolvedMessage,h=isString$1(c.default)||isBoolean(c.default)?isBoolean(c.default)?w?E:()=>E:c.default:u?w?E:()=>E:"",b=u||h!=="",d=getLocale(t,c);g&&escapeParams(c);let[f,L,S]=s?[E,d,y[d]||create()]:resolveMessageFormat(t,E,d,P,_,i),A=f,n=E;if(!s&&!(isString$1(A)||isMessageAST(A)||isMessageFunction(A))&&b&&(A=h,n=A),!s&&(!(isString$1(A)||isMessageAST(A)||isMessageFunction(A))||!isString$1(L)))return p?NOT_REOSLVED:E;let a=!1;const C=()=>{a=!0},x=isMessageFunction(A)?A:compileMessageFormat(t,E,L,A,n,C);if(a)return A;const T=getMessageContextOptions(t,L,S,c),D=createMessageContext(T),$=evaluateMessage(t,x,D);let W=r?r($,E):$;if(g&&isString$1(W)&&(W=sanitizeTranslatedHtml(W)),__INTLIFY_PROD_DEVTOOLS__){const se={timestamp:Date.now(),key:isString$1(E)?E:isMessageFunction(A)?A.key:"",locale:L||(isMessageFunction(A)?A.locale:""),format:isString$1(A)?A:isMessageFunction(A)?A.source:"",message:W};se.meta=assign$1({},t.__meta,getAdditionalMeta()||{}),translateDevTools(se)}return W}function escapeParams(t){isArray(t.list)?t.list=t.list.map(e=>isString$1(e)?escapeHtml(e):e):isObject$1(t.named)&&Object.keys(t.named).forEach(e=>{isString$1(t.named[e])&&(t.named[e]=escapeHtml(t.named[e]))})}function resolveMessageFormat(t,e,u,r,p,w){const{messages:P,onWarn:y,messageResolver:E,localeFallbacker:c}=t,i=c(t,r,u);let _=create(),g,s=null;const h="translate";for(let b=0;b<i.length&&(g=i[b],_=P[g]||create(),(s=E(_,e))===null&&(s=_[e]),!(isString$1(s)||isMessageAST(s)||isMessageFunction(s)));b++)if(!isImplicitFallback(g,i)){const d=handleMissing(t,e,g,w,h);d!==e&&(s=d)}return[s,g,_]}function compileMessageFormat(t,e,u,r,p,w){const{messageCompiler:P,warnHtmlMessage:y}=t;if(isMessageFunction(r)){const c=r;return c.locale=c.locale||u,c.key=c.key||e,c}if(P==null){const c=(()=>r);return c.locale=u,c.key=e,c}const E=P(r,getCompileContext(t,u,p,r,y,w));return E.locale=u,E.key=e,E.source=r,E}function evaluateMessage(t,e,u){return e(u)}function parseTranslateArgs(...t){const[e,u,r]=t,p=create();if(!isString$1(e)&&!isNumber(e)&&!isMessageFunction(e)&&!isMessageAST(e))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const w=isNumber(e)?String(e):(isMessageFunction(e),e);return isNumber(u)?p.plural=u:isString$1(u)?p.default=u:isPlainObject(u)&&!isEmptyObject(u)?p.named=u:isArray(u)&&(p.list=u),isNumber(r)?p.plural=r:isString$1(r)?p.default=r:isPlainObject(r)&&assign$1(p,r),[w,p]}function getCompileContext(t,e,u,r,p,w){return{locale:e,key:u,warnHtmlMessage:p,onError:P=>{throw w&&w(P),P},onCacheKey:P=>generateFormatCacheKey(e,u,P)}}function getMessageContextOptions(t,e,u,r){const{modifiers:p,pluralRules:w,messageResolver:P,fallbackLocale:y,fallbackWarn:E,missingWarn:c,fallbackContext:i}=t,g={locale:e,modifiers:p,pluralRules:w,messages:s=>{let h=P(u,s);if(h==null&&i){const[,,b]=resolveMessageFormat(i,s,e,y,E,c);h=P(b,s)}if(isString$1(h)||isMessageAST(h)){let b=!1;const f=compileMessageFormat(t,s,e,h,s,()=>{b=!0});return b?NOOP_MESSAGE_FUNCTION:f}else return isMessageFunction(h)?h:NOOP_MESSAGE_FUNCTION}};return t.processor&&(g.processor=t.processor),r.list&&(g.list=r.list),r.named&&(g.named=r.named),isNumber(r.plural)&&(g.pluralIndex=r.plural),g}function datetime(t,...e){const{datetimeFormats:u,unresolving:r,fallbackLocale:p,onWarn:w,localeFallbacker:P}=t,{__datetimeFormatters:y}=t,[E,c,i,_]=parseDateTimeArgs(...e),g=isBoolean(i.missingWarn)?i.missingWarn:t.missingWarn;isBoolean(i.fallbackWarn)?i.fallbackWarn:t.fallbackWarn;const s=!!i.part,h=getLocale(t,i),b=P(t,p,h);if(!isString$1(E)||E==="")return new Intl.DateTimeFormat(h,_).format(c);let d={},f,L=null;const S="datetime format";for(let a=0;a<b.length&&(f=b[a],d=u[f]||{},L=d[E],!isPlainObject(L));a++)handleMissing(t,E,f,g,S);if(!isPlainObject(L)||!isString$1(f))return r?NOT_REOSLVED:E;let A=`${f}__${E}`;isEmptyObject(_)||(A=`${A}__${JSON.stringify(_)}`);let n=y.get(A);return n||(n=new Intl.DateTimeFormat(f,assign$1({},L,_)),y.set(A,n)),s?n.formatToParts(c):n.format(c)}const DATETIME_FORMAT_OPTIONS_KEYS=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function parseDateTimeArgs(...t){const[e,u,r,p]=t,w=create();let P=create(),y;if(isString$1(e)){const E=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!E)throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT);const c=E[3]?E[3].trim().startsWith("T")?`${E[1].trim()}${E[3].trim()}`:`${E[1].trim()}T${E[3].trim()}`:E[1].trim();y=new Date(c);try{y.toISOString()}catch{throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT)}}else if(isDate(e)){if(isNaN(e.getTime()))throw createCoreError(CoreErrorCodes.INVALID_DATE_ARGUMENT);y=e}else if(isNumber(e))y=e;else throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);return isString$1(u)?w.key=u:isPlainObject(u)&&Object.keys(u).forEach(E=>{DATETIME_FORMAT_OPTIONS_KEYS.includes(E)?P[E]=u[E]:w[E]=u[E]}),isString$1(r)?w.locale=r:isPlainObject(r)&&(P=r),isPlainObject(p)&&(P=p),[w.key||"",y,w,P]}function clearDateTimeFormat(t,e,u){const r=t;for(const p in u){const w=`${e}__${p}`;r.__datetimeFormatters.has(w)&&r.__datetimeFormatters.delete(w)}}function number(t,...e){const{numberFormats:u,unresolving:r,fallbackLocale:p,onWarn:w,localeFallbacker:P}=t,{__numberFormatters:y}=t,[E,c,i,_]=parseNumberArgs(...e),g=isBoolean(i.missingWarn)?i.missingWarn:t.missingWarn;isBoolean(i.fallbackWarn)?i.fallbackWarn:t.fallbackWarn;const s=!!i.part,h=getLocale(t,i),b=P(t,p,h);if(!isString$1(E)||E==="")return new Intl.NumberFormat(h,_).format(c);let d={},f,L=null;const S="number format";for(let a=0;a<b.length&&(f=b[a],d=u[f]||{},L=d[E],!isPlainObject(L));a++)handleMissing(t,E,f,g,S);if(!isPlainObject(L)||!isString$1(f))return r?NOT_REOSLVED:E;let A=`${f}__${E}`;isEmptyObject(_)||(A=`${A}__${JSON.stringify(_)}`);let n=y.get(A);return n||(n=new Intl.NumberFormat(f,assign$1({},L,_)),y.set(A,n)),s?n.formatToParts(c):n.format(c)}const NUMBER_FORMAT_OPTIONS_KEYS=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function parseNumberArgs(...t){const[e,u,r,p]=t,w=create();let P=create();if(!isNumber(e))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const y=e;return isString$1(u)?w.key=u:isPlainObject(u)&&Object.keys(u).forEach(E=>{NUMBER_FORMAT_OPTIONS_KEYS.includes(E)?P[E]=u[E]:w[E]=u[E]}),isString$1(r)?w.locale=r:isPlainObject(r)&&(P=r),isPlainObject(p)&&(P=p),[w.key||"",y,w,P]}function clearNumberFormat(t,e,u){const r=t;for(const p in u){const w=`${e}__${p}`;r.__numberFormatters.has(w)&&r.__numberFormatters.delete(w)}}initFeatureFlags$1();const VERSION="9.14.5";function initFeatureFlags(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1)}const code$1=CoreWarnCodes.__EXTEND_POINT__,inc$1=incrementer(code$1);inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1();const code=CoreErrorCodes.__EXTEND_POINT__,inc=incrementer(code),I18nErrorCodes={UNEXPECTED_RETURN_TYPE:code,INVALID_ARGUMENT:inc(),MUST_BE_CALL_SETUP_TOP:inc(),NOT_INSTALLED:inc(),NOT_AVAILABLE_IN_LEGACY_MODE:inc(),REQUIRED_VALUE:inc(),INVALID_VALUE:inc(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:inc(),NOT_INSTALLED_WITH_PROVIDE:inc(),UNEXPECTED_ERROR:inc(),NOT_COMPATIBLE_LEGACY_VUE_I18N:inc(),BRIDGE_SUPPORT_VUE_2_ONLY:inc(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:inc(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:inc(),__EXTEND_POINT__:inc()};function createI18nError(t,...e){return createCompileError(t,null,void 0)}const TranslateVNodeSymbol=makeSymbol("__translateVNode"),DatetimePartsSymbol=makeSymbol("__datetimeParts"),NumberPartsSymbol=makeSymbol("__numberParts"),SetPluralRulesSymbol=makeSymbol("__setPluralRules"),InejctWithOptionSymbol=makeSymbol("__injectWithOption"),DisposeSymbol=makeSymbol("__dispose");function handleFlatJson(t){if(!isObject$1(t)||isMessageAST(t))return t;for(const e in t)if(hasOwn(t,e))if(!e.includes("."))isObject$1(t[e])&&handleFlatJson(t[e]);else{const u=e.split("."),r=u.length-1;let p=t,w=!1;for(let P=0;P<r;P++){if(u[P]==="__proto__")throw new Error(`unsafe key: ${u[P]}`);if(u[P]in p||(p[u[P]]=create()),!isObject$1(p[u[P]])){w=!0;break}p=p[u[P]]}if(w||(isMessageAST(p)?AST_NODE_PROPS_KEYS.includes(u[r])||delete t[e]:(p[u[r]]=t[e],delete t[e])),!isMessageAST(p)){const P=p[u[r]];isObject$1(P)&&handleFlatJson(P)}}return t}function getLocaleMessages(t,e){const{messages:u,__i18n:r,messageResolver:p,flatJson:w}=e,P=isPlainObject(u)?u:isArray(r)?create():{[t]:create()};if(isArray(r)&&r.forEach(y=>{if("locale"in y&&"resource"in y){const{locale:E,resource:c}=y;E?(P[E]=P[E]||create(),deepCopy(c,P[E])):deepCopy(c,P)}else isString$1(y)&&deepCopy(JSON.parse(y),P)}),p==null&&w)for(const y in P)hasOwn(P,y)&&handleFlatJson(P[y]);return P}function getComponentOptions(t){return t.type}function adjustI18nResources(t,e,u){let r=isObject$1(e.messages)?e.messages:create();"__i18nGlobal"in u&&(r=getLocaleMessages(t.locale.value,{messages:r,__i18n:u.__i18nGlobal}));const p=Object.keys(r);p.length&&p.forEach(w=>{t.mergeLocaleMessage(w,r[w])});{if(isObject$1(e.datetimeFormats)){const w=Object.keys(e.datetimeFormats);w.length&&w.forEach(P=>{t.mergeDateTimeFormat(P,e.datetimeFormats[P])})}if(isObject$1(e.numberFormats)){const w=Object.keys(e.numberFormats);w.length&&w.forEach(P=>{t.mergeNumberFormat(P,e.numberFormats[P])})}}}function createTextNode(t){return vue.createVNode(vue.Text,null,t,0)}const DEVTOOLS_META="__INTLIFY_META__",NOOP_RETURN_ARRAY=()=>[],NOOP_RETURN_FALSE=()=>!1;let composerID=0;function defineCoreMissingHandler(t){return((e,u,r,p)=>t(u,r,vue.getCurrentInstance()||void 0,p))}const getMetaInfo=()=>{const t=vue.getCurrentInstance();let e=null;return t&&(e=getComponentOptions(t)[DEVTOOLS_META])?{[DEVTOOLS_META]:e}:null};function createComposer(t={},e){const{__root:u,__injectWithOption:r}=t,p=u===void 0,w=t.flatJson,P=inBrowser?vue.ref:vue.shallowRef,y=!!t.translateExistCompatible;let E=isBoolean(t.inheritLocale)?t.inheritLocale:!0;const c=P(u&&E?u.locale.value:isString$1(t.locale)?t.locale:DEFAULT_LOCALE),i=P(u&&E?u.fallbackLocale.value:isString$1(t.fallbackLocale)||isArray(t.fallbackLocale)||isPlainObject(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:c.value),_=P(getLocaleMessages(c.value,t)),g=P(isPlainObject(t.datetimeFormats)?t.datetimeFormats:{[c.value]:{}}),s=P(isPlainObject(t.numberFormats)?t.numberFormats:{[c.value]:{}});let h=u?u.missingWarn:isBoolean(t.missingWarn)||isRegExp(t.missingWarn)?t.missingWarn:!0,b=u?u.fallbackWarn:isBoolean(t.fallbackWarn)||isRegExp(t.fallbackWarn)?t.fallbackWarn:!0,d=u?u.fallbackRoot:isBoolean(t.fallbackRoot)?t.fallbackRoot:!0,f=!!t.fallbackFormat,L=isFunction(t.missing)?t.missing:null,S=isFunction(t.missing)?defineCoreMissingHandler(t.missing):null,A=isFunction(t.postTranslation)?t.postTranslation:null,n=u?u.warnHtmlMessage:isBoolean(t.warnHtmlMessage)?t.warnHtmlMessage:!0,a=!!t.escapeParameter;const C=u?u.modifiers:isPlainObject(t.modifiers)?t.modifiers:{};let x=t.pluralRules||u&&u.pluralRules,T;T=(()=>{p&&setFallbackContext(null);const ie={version:VERSION,locale:c.value,fallbackLocale:i.value,messages:_.value,modifiers:C,pluralRules:x,missing:S===null?void 0:S,missingWarn:h,fallbackWarn:b,fallbackFormat:f,unresolving:!0,postTranslation:A===null?void 0:A,warnHtmlMessage:n,escapeParameter:a,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};ie.datetimeFormats=g.value,ie.numberFormats=s.value,ie.__datetimeFormatters=isPlainObject(T)?T.__datetimeFormatters:void 0,ie.__numberFormatters=isPlainObject(T)?T.__numberFormatters:void 0;const le=createCoreContext(ie);return p&&setFallbackContext(le),le})(),updateFallbackLocale(T,c.value,i.value);function $(){return[c.value,i.value,_.value,g.value,s.value]}const W=vue.computed({get:()=>c.value,set:ie=>{c.value=ie,T.locale=c.value}}),se=vue.computed({get:()=>i.value,set:ie=>{i.value=ie,T.fallbackLocale=i.value,updateFallbackLocale(T,c.value,ie)}}),ne=vue.computed(()=>_.value),q=vue.computed(()=>g.value),G=vue.computed(()=>s.value);function I(){return isFunction(A)?A:null}function k(ie){A=ie,T.postTranslation=ie}function O(){return L}function m(ie){ie!==null&&(S=defineCoreMissingHandler(ie)),L=ie,T.missing=S}const l=(ie,le,pe,me,_e,ye)=>{$();let Se;try{__INTLIFY_PROD_DEVTOOLS__,p||(T.fallbackContext=u?getFallbackContext():void 0),Se=ie(T)}finally{__INTLIFY_PROD_DEVTOOLS__,p||(T.fallbackContext=void 0)}if(pe!=="translate exists"&&isNumber(Se)&&Se===NOT_REOSLVED||pe==="translate exists"&&!Se){const[Oe,ue]=le();return u&&d?me(u):_e(Oe)}else{if(ye(Se))return Se;throw createI18nError(I18nErrorCodes.UNEXPECTED_RETURN_TYPE)}};function M(...ie){return l(le=>Reflect.apply(translate,null,[le,...ie]),()=>parseTranslateArgs(...ie),"translate",le=>Reflect.apply(le.t,le,[...ie]),le=>le,le=>isString$1(le))}function N(...ie){const[le,pe,me]=ie;if(me&&!isObject$1(me))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);return M(le,pe,assign$1({resolvedMessage:!0},me||{}))}function o(...ie){return l(le=>Reflect.apply(datetime,null,[le,...ie]),()=>parseDateTimeArgs(...ie),"datetime format",le=>Reflect.apply(le.d,le,[...ie]),()=>MISSING_RESOLVE_VALUE,le=>isString$1(le))}function v(...ie){return l(le=>Reflect.apply(number,null,[le,...ie]),()=>parseNumberArgs(...ie),"number format",le=>Reflect.apply(le.n,le,[...ie]),()=>MISSING_RESOLVE_VALUE,le=>isString$1(le))}function R(ie){return ie.map(le=>isString$1(le)||isNumber(le)||isBoolean(le)?createTextNode(String(le)):le)}const U={normalize:R,interpolate:ie=>ie,type:"vnode"};function H(...ie){return l(le=>{let pe;const me=le;try{me.processor=U,pe=Reflect.apply(translate,null,[me,...ie])}finally{me.processor=null}return pe},()=>parseTranslateArgs(...ie),"translate",le=>le[TranslateVNodeSymbol](...ie),le=>[createTextNode(le)],le=>isArray(le))}function V(...ie){return l(le=>Reflect.apply(number,null,[le,...ie]),()=>parseNumberArgs(...ie),"number format",le=>le[NumberPartsSymbol](...ie),NOOP_RETURN_ARRAY,le=>isString$1(le)||isArray(le))}function Y(...ie){return l(le=>Reflect.apply(datetime,null,[le,...ie]),()=>parseDateTimeArgs(...ie),"datetime format",le=>le[DatetimePartsSymbol](...ie),NOOP_RETURN_ARRAY,le=>isString$1(le)||isArray(le))}function Z(ie){x=ie,T.pluralRules=x}function X(ie,le){return l(()=>{if(!ie)return!1;const pe=isString$1(le)?le:c.value,me=z(pe),_e=T.messageResolver(me,ie);return y?_e!=null:isMessageAST(_e)||isMessageFunction(_e)||isString$1(_e)},()=>[ie],"translate exists",pe=>Reflect.apply(pe.te,pe,[ie,le]),NOOP_RETURN_FALSE,pe=>isBoolean(pe))}function re(ie){let le=null;const pe=fallbackWithLocaleChain(T,i.value,c.value);for(let me=0;me<pe.length;me++){const _e=_.value[pe[me]]||{},ye=T.messageResolver(_e,ie);if(ye!=null){le=ye;break}}return le}function ce(ie){const le=re(ie);return le??(u?u.tm(ie)||{}:{})}function z(ie){return _.value[ie]||{}}function te(ie,le){if(w){const pe={[ie]:le};for(const me in pe)hasOwn(pe,me)&&handleFlatJson(pe[me]);le=pe[ie]}_.value[ie]=le,T.messages=_.value}function ae(ie,le){_.value[ie]=_.value[ie]||{};const pe={[ie]:le};if(w)for(const me in pe)hasOwn(pe,me)&&handleFlatJson(pe[me]);le=pe[ie],deepCopy(le,_.value[ie]),T.messages=_.value}function Q(ie){return g.value[ie]||{}}function B(ie,le){g.value[ie]=le,T.datetimeFormats=g.value,clearDateTimeFormat(T,ie,le)}function j(ie,le){g.value[ie]=assign$1(g.value[ie]||{},le),T.datetimeFormats=g.value,clearDateTimeFormat(T,ie,le)}function ee(ie){return s.value[ie]||{}}function oe(ie,le){s.value[ie]=le,T.numberFormats=s.value,clearNumberFormat(T,ie,le)}function fe(ie,le){s.value[ie]=assign$1(s.value[ie]||{},le),T.numberFormats=s.value,clearNumberFormat(T,ie,le)}composerID++,u&&inBrowser&&(vue.watch(u.locale,ie=>{E&&(c.value=ie,T.locale=ie,updateFallbackLocale(T,c.value,i.value))}),vue.watch(u.fallbackLocale,ie=>{E&&(i.value=ie,T.fallbackLocale=ie,updateFallbackLocale(T,c.value,i.value))}));const de={id:composerID,locale:W,fallbackLocale:se,get inheritLocale(){return E},set inheritLocale(ie){E=ie,ie&&u&&(c.value=u.locale.value,i.value=u.fallbackLocale.value,updateFallbackLocale(T,c.value,i.value))},get availableLocales(){return Object.keys(_.value).sort()},messages:ne,get modifiers(){return C},get pluralRules(){return x||{}},get isGlobal(){return p},get missingWarn(){return h},set missingWarn(ie){h=ie,T.missingWarn=h},get fallbackWarn(){return b},set fallbackWarn(ie){b=ie,T.fallbackWarn=b},get fallbackRoot(){return d},set fallbackRoot(ie){d=ie},get fallbackFormat(){return f},set fallbackFormat(ie){f=ie,T.fallbackFormat=f},get warnHtmlMessage(){return n},set warnHtmlMessage(ie){n=ie,T.warnHtmlMessage=ie},get escapeParameter(){return a},set escapeParameter(ie){a=ie,T.escapeParameter=ie},t:M,getLocaleMessage:z,setLocaleMessage:te,mergeLocaleMessage:ae,getPostTranslationHandler:I,setPostTranslationHandler:k,getMissingHandler:O,setMissingHandler:m,[SetPluralRulesSymbol]:Z};return de.datetimeFormats=q,de.numberFormats=G,de.rt=N,de.te=X,de.tm=ce,de.d=o,de.n=v,de.getDateTimeFormat=Q,de.setDateTimeFormat=B,de.mergeDateTimeFormat=j,de.getNumberFormat=ee,de.setNumberFormat=oe,de.mergeNumberFormat=fe,de[InejctWithOptionSymbol]=r,de[TranslateVNodeSymbol]=H,de[DatetimePartsSymbol]=Y,de[NumberPartsSymbol]=V,de}const baseFormatProps={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function getInterpolateArg({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((r,p)=>[...r,...p.type===vue.Fragment?p.children:[p]],[]):e.reduce((u,r)=>{const p=t[r];return p&&(u[r]=p()),u},create())}function getFragmentableTag(t){return vue.Fragment}const TranslationImpl=vue.defineComponent({name:"i18n-t",props:assign$1({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>isNumber(t)||!isNaN(t)}},baseFormatProps),setup(t,e){const{slots:u,attrs:r}=e,p=t.i18n||useI18n({useScope:t.scope,__useComponent:!0});return()=>{const w=Object.keys(u).filter(_=>_!=="_"),P=create();t.locale&&(P.locale=t.locale),t.plural!==void 0&&(P.plural=isString$1(t.plural)?+t.plural:t.plural);const y=getInterpolateArg(e,w),E=p[TranslateVNodeSymbol](t.keypath,y,P),c=assign$1(create(),r),i=isString$1(t.tag)||isObject$1(t.tag)?t.tag:getFragmentableTag();return vue.h(i,c,E)}}}),Translation=TranslationImpl;function isVNode(t){return isArray(t)&&!isString$1(t[0])}function renderFormatter(t,e,u,r){const{slots:p,attrs:w}=e;return()=>{const P={part:!0};let y=create();t.locale&&(P.locale=t.locale),isString$1(t.format)?P.key=t.format:isObject$1(t.format)&&(isString$1(t.format.key)&&(P.key=t.format.key),y=Object.keys(t.format).reduce((g,s)=>u.includes(s)?assign$1(create(),g,{[s]:t.format[s]}):g,create()));const E=r(t.value,P,y);let c=[P.key];isArray(E)?c=E.map((g,s)=>{const h=p[g.type],b=h?h({[g.type]:g.value,index:s,parts:E}):[g.value];return isVNode(b)&&(b[0].key=`${g.type}-${s}`),b}):isString$1(E)&&(c=[E]);const i=assign$1(create(),w),_=isString$1(t.tag)||isObject$1(t.tag)?t.tag:getFragmentableTag();return vue.h(_,i,c)}}const NumberFormatImpl=vue.defineComponent({name:"i18n-n",props:assign$1({value:{type:Number,required:!0},format:{type:[String,Object]}},baseFormatProps),setup(t,e){const u=t.i18n||useI18n({useScope:t.scope,__useComponent:!0});return renderFormatter(t,e,NUMBER_FORMAT_OPTIONS_KEYS,(...r)=>u[NumberPartsSymbol](...r))}}),NumberFormat=NumberFormatImpl,DatetimeFormatImpl=vue.defineComponent({name:"i18n-d",props:assign$1({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},baseFormatProps),setup(t,e){const u=t.i18n||useI18n({useScope:t.scope,__useComponent:!0});return renderFormatter(t,e,DATETIME_FORMAT_OPTIONS_KEYS,(...r)=>u[DatetimePartsSymbol](...r))}}),DatetimeFormat=DatetimeFormatImpl;function getComposer$2(t,e){const u=t;if(t.mode==="composition")return u.__getInstance(e)||t.global;{const r=u.__getInstance(e);return r!=null?r.__composer:t.global.__composer}}function vTDirective(t){const e=P=>{const{instance:y,modifiers:E,value:c}=P;if(!y||!y.$)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const i=getComposer$2(t,y.$),_=parseValue(c);return[Reflect.apply(i.t,i,[...makeParams(_)]),i]};return{created:(P,y)=>{const[E,c]=e(y);inBrowser&&t.global===c&&(P.__i18nWatcher=vue.watch(c.locale,()=>{y.instance&&y.instance.$forceUpdate()})),P.__composer=c,P.textContent=E},unmounted:P=>{inBrowser&&P.__i18nWatcher&&(P.__i18nWatcher(),P.__i18nWatcher=void 0,delete P.__i18nWatcher),P.__composer&&(P.__composer=void 0,delete P.__composer)},beforeUpdate:(P,{value:y})=>{if(P.__composer){const E=P.__composer,c=parseValue(y);P.textContent=Reflect.apply(E.t,E,[...makeParams(c)])}},getSSRProps:P=>{const[y]=e(P);return{textContent:y}}}}function parseValue(t){if(isString$1(t))return{path:t};if(isPlainObject(t)){if(!("path"in t))throw createI18nError(I18nErrorCodes.REQUIRED_VALUE,"path");return t}else throw createI18nError(I18nErrorCodes.INVALID_VALUE)}function makeParams(t){const{path:e,locale:u,args:r,choice:p,plural:w}=t,P={},y=r||{};return isString$1(u)&&(P.locale=u),isNumber(p)&&(P.plural=p),isNumber(w)&&(P.plural=w),[e,y,P]}function apply(t,e,...u){const r=isPlainObject(u[0])?u[0]:{},p=!!r.useI18nComponentName;(!isBoolean(r.globalInstall)||r.globalInstall)&&([p?"i18n":Translation.name,"I18nT"].forEach(P=>t.component(P,Translation)),[NumberFormat.name,"I18nN"].forEach(P=>t.component(P,NumberFormat)),[DatetimeFormat.name,"I18nD"].forEach(P=>t.component(P,DatetimeFormat))),t.directive("t",vTDirective(e))}const I18nInjectionKey=makeSymbol("global-vue-i18n");function createI18n(t={},e){const u=isBoolean(t.globalInjection)?t.globalInjection:!0,r=!0,p=new Map,[w,P]=createGlobal(t),y=makeSymbol("");function E(_){return p.get(_)||null}function c(_,g){p.set(_,g)}function i(_){p.delete(_)}{const _={get mode(){return"composition"},get allowComposition(){return r},async install(g,...s){if(g.__VUE_I18N_SYMBOL__=y,g.provide(g.__VUE_I18N_SYMBOL__,_),isPlainObject(s[0])){const d=s[0];_.__composerExtend=d.__composerExtend,_.__vueI18nExtend=d.__vueI18nExtend}let h=null;u&&(h=injectGlobalFields(g,_.global)),apply(g,_,...s);const b=g.unmount;g.unmount=()=>{h&&h(),_.dispose(),b()}},get global(){return P},dispose(){w.stop()},__instances:p,__getInstance:E,__setInstance:c,__deleteInstance:i};return _}}function useI18n(t={}){const e=vue.getCurrentInstance();if(e==null)throw createI18nError(I18nErrorCodes.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw createI18nError(I18nErrorCodes.NOT_INSTALLED);const u=getI18nInstance(e),r=getGlobalComposer(u),p=getComponentOptions(e),w=getScope(t,p);if(w==="global")return adjustI18nResources(r,t,p),r;if(w==="parent"){let E=getComposer(u,e,t.__useComponent);return E==null&&(E=r),E}const P=u;let y=P.__getInstance(e);if(y==null){const E=assign$1({},t);"__i18n"in p&&(E.__i18n=p.__i18n),r&&(E.__root=r),y=createComposer(E),P.__composerExtend&&(y[DisposeSymbol]=P.__composerExtend(y)),setupLifeCycle(P,e,y),P.__setInstance(e,y)}return y}function createGlobal(t,e,u){const r=vue.effectScope();{const p=r.run(()=>createComposer(t));if(p==null)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);return[r,p]}}function getI18nInstance(t){{const e=vue.inject(t.isCE?I18nInjectionKey:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw createI18nError(t.isCE?I18nErrorCodes.NOT_INSTALLED_WITH_PROVIDE:I18nErrorCodes.UNEXPECTED_ERROR);return e}}function getScope(t,e){return isEmptyObject(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function getGlobalComposer(t){return t.mode==="composition"?t.global:t.global.__composer}function getComposer(t,e,u=!1){let r=null;const p=e.root;let w=getParentComponentInstance(e,u);for(;w!=null;){const P=t;if(t.mode==="composition"&&(r=P.__getInstance(w)),r!=null||p===w)break;w=w.parent}return r}function getParentComponentInstance(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function setupLifeCycle(t,e,u){vue.onMounted(()=>{},e),vue.onUnmounted(()=>{const r=u;t.__deleteInstance(e);const p=r[DisposeSymbol];p&&(p(),delete r[DisposeSymbol])},e)}const globalExportProps=["locale","fallbackLocale","availableLocales"],globalExportMethods=["t","rt","d","n","tm","te"];function injectGlobalFields(t,e){const u=Object.create(null);return globalExportProps.forEach(p=>{const w=Object.getOwnPropertyDescriptor(e,p);if(!w)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const P=vue.isRef(w.value)?{get(){return w.value.value},set(y){w.value.value=y}}:{get(){return w.get&&w.get()}};Object.defineProperty(u,p,P)}),t.config.globalProperties.$i18n=u,globalExportMethods.forEach(p=>{const w=Object.getOwnPropertyDescriptor(e,p);if(!w||!w.value)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${p}`,w)}),()=>{delete t.config.globalProperties.$i18n,globalExportMethods.forEach(p=>{delete t.config.globalProperties[`$${p}`]})}}if(initFeatureFlags(),registerMessageCompiler(compile),registerMessageResolver(resolveValue),registerLocaleFallbacker(fallbackWithLocaleChain),__INTLIFY_PROD_DEVTOOLS__){const t=getGlobalThis();t.__INTLIFY__=!0,setDevToolsHook(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const resource$1={uploader:{specific_nb_drag_n_drop_label:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"Glissez-déposez ici un fichier"},{t:2,i:[{t:3,v:"Glissez-déposez ici "},{t:4,k:"count"},{t:3,v:" fichiers"}]}]}},min_max_drag_n_drop_label:{t:0,b:{t:2,i:[{t:3,v:"Glissez-déposez ici entre "},{t:4,k:"min"},{t:3,v:" et "},{t:4,k:"max"},{t:3,v:" fichiers"}]}},min_drag_n_drop_label:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"Glissez-déposez ici au-moins un fichier"},{t:2,i:[{t:3,v:"Glissez-déposez ici au-moins "},{t:4,k:"count"},{t:3,v:" fichiers"}]}]}},max_drag_n_drop_label:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"Glissez-déposez ici votre fichier"},{t:2,i:[{t:3,v:"Glissez-déposez ici vos fichiers (maximum "},{t:4,k:"count"},{t:3,v:")"}]}]}},drag_n_drop_label:{t:0,b:{t:2,i:[{t:3}],s:"Glissez-déposez ici vos fichiers"}},add_file_label:{t:0,b:{t:2,i:[{t:3}],s:"ou cliquez-ici"}},max_size_label:{t:0,b:{t:2,i:[{t:3,v:"(taille maximum "},{t:4,k:"size"},{t:3,v:")"}]}},trigger_upload:{t:0,b:{t:2,i:[{t:3}],s:"Transférer"}}},upload_entry:{completion:{t:0,b:{t:2,i:[{t:4,k:"progress"},{t:3,v:"% transférés"}]}},too_large:{t:0,b:{t:2,i:[{t:3}],s:"Le fichier est trop lourd"}},wrong_type:{t:0,b:{t:1,c:[{t:2,i:[{t:3,v:'Le fichier doit être du type "'},{t:4,k:"types"},{t:3,v:'"; tout autre fichier ne sera pas sauvegardé.'}]},{t:2,i:[{t:3,v:`Le fichier doit être d'un des types suivants : "`},{t:4,k:"types"},{t:3,v:'"; tout autre fichier ne sera pas sauvegardé.'}]}]}},crop_header:{t:0,b:{t:2,i:[{t:3}],s:"Veuillez choisir la partie à garder."}},crop:{t:0,b:{t:2,i:[{t:3}],s:"Recadrer"}},cancel:{t:0,b:{t:2,i:[{t:3}],s:"Annuler"}}},view_entry:{rotate_left:{t:0,b:{t:2,i:[{t:3}],s:"Faire pivoter l'image à gauche"}},rotate_right:{t:0,b:{t:2,i:[{t:3}],s:"Faire pivoter l'image à droite"}},loading:{t:0,b:{t:2,i:[{t:3}],s:"Chargement..."}},close:{t:0,b:{t:2,i:[{t:3}],s:"Fermer"}},save:{t:0,b:{t:2,i:[{t:3}],s:"Enregistrer"}},file_infected:{t:0,b:{t:2,i:[{t:3}],s:"Le fichier référencé semble infecté par un virus"}}},editor:{pagination:{t:0,b:{t:2,i:[{t:4,k:"currentPage"},{t:3,v:" de "},{t:4,k:"pages"}]}},zoom:{auto:{t:0,b:{t:2,i:[{t:3}],s:"Zoom automatique"}},"page-width":{t:0,b:{t:2,i:[{t:3}],s:"Pleine largeur"}},"page-fit":{t:0,b:{t:2,i:[{t:3}],s:"Page entière"}},"page-actual":{t:0,b:{t:2,i:[{t:3}],s:"Taille réelle"}}},colors:{warning:{t:0,b:{t:2,i:[{t:3}],s:"Jaune"}},danger:{t:0,b:{t:2,i:[{t:3}],s:"Rouge"}},info:{t:0,b:{t:2,i:[{t:3}],s:"Bleu"}},success:{t:0,b:{t:2,i:[{t:3}],s:"Vert"}},muted:{t:0,b:{t:2,i:[{t:3}],s:"Blanc"}}}},error:{t:0,b:{t:2,i:[{t:3,v:"Erreur : "},{t:4,k:"error"}]}},request_error:{t:0,b:{t:2,i:[{t:3,v:"Erreur lors de la requête : "},{t:4,k:"error"}]}},units:[{t:0,b:{t:2,i:[{t:3}],s:"o"}},{t:0,b:{t:2,i:[{t:3}],s:"Ko"}},{t:0,b:{t:2,i:[{t:3}],s:"Mo"}},{t:0,b:{t:2,i:[{t:3}],s:"Go"}},{t:0,b:{t:2,i:[{t:3}],s:"To"}}]},resource={uploader:{specific_nb_drag_n_drop_label:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"Drag and drop one file here"},{t:2,i:[{t:3,v:"Drag and drop "},{t:4,k:"count"},{t:3,v:" files here"}]}]}},min_max_drag_n_drop_label:{t:0,b:{t:2,i:[{t:3,v:"Drag and drop between "},{t:4,k:"min"},{t:3,v:" and "},{t:4,k:"max"},{t:3,v:" files here"}]}},min_drag_n_drop_label:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"Drag and drop at least one file here"},{t:2,i:[{t:3,v:"Drag and drop at least "},{t:4,k:"count"},{t:3,v:" files here"}]}]}},max_drag_n_drop_label:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"Drag and drop your file here"},{t:2,i:[{t:3,v:"Drag and drop your files here (maximum "},{t:4,k:"count"},{t:3,v:")"}]}]}},drag_n_drop_label:{t:0,b:{t:2,i:[{t:3}],s:"Drag and drop your files here"}},add_file_label:{t:0,b:{t:2,i:[{t:3}],s:"or click here"}},max_size_label:{t:0,b:{t:2,i:[{t:3,v:"(max size "},{t:4,k:"size"},{t:3,v:")"}]}},trigger_upload:{t:0,b:{t:2,i:[{t:3}],s:"Upload"}}},upload_entry:{completion:{t:0,b:{t:2,i:[{t:4,k:"progress"},{t:3,v:"% uploaded"}]}},too_large:{t:0,b:{t:2,i:[{t:3}],s:"File is too large"}},wrong_type:{t:0,b:{t:1,c:[{t:2,i:[{t:3,v:'The file must have the following type: "'},{t:4,k:"types"},{t:3,v:'"; any other files will not be saved.'}]},{t:2,i:[{t:3,v:'The file must have one of the following types: "'},{t:4,k:"types"},{t:3,v:'"; any other files will not be saved.'}]}]}},crop_header:{t:0,b:{t:2,i:[{t:3}],s:"Please choose the part you want to keep."}},crop:{t:0,b:{t:2,i:[{t:3}],s:"Crop"}},cancel:{t:0,b:{t:2,i:[{t:3}],s:"Cancel"}}},view_entry:{rotate_left:{t:0,b:{t:2,i:[{t:3}],s:"Rotate image left"}},rotate_right:{t:0,b:{t:2,i:[{t:3}],s:"Rotate image right"}},loading:{t:0,b:{t:2,i:[{t:3}],s:"Loading..."}},close:{t:0,b:{t:2,i:[{t:3}],s:"Close"}},save:{t:0,b:{t:2,i:[{t:3}],s:"Save"}},file_infected:{t:0,b:{t:2,i:[{t:3}],s:"The referenced file appears to be infected with a virus"}}},editor:{pagination:{t:0,b:{t:2,i:[{t:4,k:"currentPage"},{t:3,v:" of "},{t:4,k:"pages"}]}},zoom:{auto:{t:0,b:{t:2,i:[{t:3}],s:"Automatic Zoom"}},"page-width":{t:0,b:{t:2,i:[{t:3}],s:"Page Width"}},"page-fit":{t:0,b:{t:2,i:[{t:3}],s:"Page Fit"}},"page-actual":{t:0,b:{t:2,i:[{t:3}],s:"Actual Size"}}},colors:{warning:{t:0,b:{t:2,i:[{t:3}],s:"Yellow"}},danger:{t:0,b:{t:2,i:[{t:3}],s:"Red"}},info:{t:0,b:{t:2,i:[{t:3}],s:"Blue"}},success:{t:0,b:{t:2,i:[{t:3}],s:"Green"}},muted:{t:0,b:{t:2,i:[{t:3}],s:"White"}}}},error:{t:0,b:{t:2,i:[{t:3,v:"Error: "},{t:4,k:"error"}]}},request_error:{t:0,b:{t:2,i:[{t:3,v:"Request error: "},{t:4,k:"error"}]}},units:[{t:0,b:{t:2,i:[{t:3}],s:"B"}},{t:0,b:{t:2,i:[{t:3}],s:"KB"}},{t:0,b:{t:2,i:[{t:3}],s:"MB"}},{t:0,b:{t:2,i:[{t:3}],s:"GB"}},{t:0,b:{t:2,i:[{t:3}],s:"TB"}}]},i18n=createI18n({locale:document.documentElement.lang||"en",messages:{en:resource,fr:resource$1}}),_hoisted_1$4={class:"btn-group dropup annotation-dropdown"},_hoisted_2$3={class:"dropdown-menu"},_hoisted_3$2=["onClick"],_sfc_main$4=vue.defineComponent({__name:"ToolbarAnnotation",props:{isActivated:{type:Boolean},color:{},classPrefix:{},icon:{},colors:{}},emits:["onChange"],setup(t){const{t:e}=useI18n();return(u,r)=>(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$4,[vue.createElementVNode("button",{class:vue.normalizeClass(["btn",u.isActivated?"btn-primary":"btn-default"]),type:"button",onClick:r[0]||(r[0]=p=>u.$emit("onChange",u.isActivated?"":u.color||Object.values(u.colors)[0]))},[vue.createElementVNode("span",{class:vue.normalizeClass(["fas",u.icon])},null,2)],2),r[1]||(r[1]=vue.createElementVNode("button",{type:"button",class:"btn btn-default dropdown-toggle","data-toggle":"dropdown","data-bs-toggle":"dropdown"},[vue.createElementVNode("span",{class:"caret"})],-1)),vue.createElementVNode("ul",_hoisted_2$3,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(u.colors,(p,w)=>(vue.openBlock(),vue.createElementBlock("li",{key:w,class:vue.normalizeClass(`${u.classPrefix}-${w}`)},[vue.createElementVNode("a",{href:"#",class:vue.normalizeClass(`${u.classPrefix}-${w}`),onClick:vue.withModifiers(P=>u.$emit("onChange",p),["prevent"])},vue.toDisplayString(vue.unref(e)(`editor.colors.${w}`)),11,_hoisted_3$2)],2))),128))])]))}}),_hoisted_1$3={class:"btn-group"},_hoisted_2$2={class:"btn-group dropup",role:"group"},_hoisted_3$1={type:"button",class:"btn btn-default dropdown-toggle","data-toggle":"dropdown","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},_hoisted_4$1={class:"dropdown-menu"},_hoisted_5$1=["value"],_hoisted_6$1=["onClick"],_sfc_main$3=vue.defineComponent({__name:"ToolbarZoom",props:{currentZoom:{}},emits:["onZoomIn","onZoomOut","onSetScale"],setup(t){const{t:e}=useI18n(),u=["auto","page-actual","page-fit","page-width","0.5","0.75","1","1.25","1.5","2","3","4"];function r(p){return isNaN(parseFloat(p))?e(`editor.zoom.${p}`):`${Math.ceil(parseFloat(p)*100)}%`}return(p,w)=>(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$3,[vue.createElementVNode("button",{class:"btn btn-default",type:"button",onClick:w[0]||(w[0]=P=>p.$emit("onZoomOut"))},[...w[2]||(w[2]=[vue.createElementVNode("span",{class:"fas fa-magnifying-glass-minus"},null,-1)])]),vue.createElementVNode("div",_hoisted_2$2,[vue.createElementVNode("button",_hoisted_3$1,[vue.createTextVNode(vue.toDisplayString(r(p.currentZoom))+" ",1),w[3]||(w[3]=vue.createElementVNode("span",{class:"caret"},null,-1))]),vue.createElementVNode("ul",_hoisted_4$1,[(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,vue.renderList(u,P=>vue.createElementVNode("li",{key:P,value:P,class:vue.normalizeClass(p.currentZoom==P?"active":"")},[vue.createElementVNode("a",{href:"#",onClick:vue.withModifiers(y=>p.$emit("onSetScale",P),["prevent"])},vue.toDisplayString(r(P)),9,_hoisted_6$1)],10,_hoisted_5$1)),64))])]),vue.createElementVNode("button",{class:"btn btn-default",type:"button",onClick:w[1]||(w[1]=P=>p.$emit("onZoomIn"))},[...w[4]||(w[4]=[vue.createElementVNode("span",{class:"fas fa-magnifying-glass-plus"},null,-1)])])]))}}),_hoisted_1$2={class:"btn-group"},_sfc_main$2=vue.defineComponent({__name:"ToolbarRotation",props:{currentRotation:{}},emits:["onRotate"],setup(t){return(e,u)=>(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$2,[vue.createElementVNode("button",{type:"button",class:"btn btn-default",onClick:u[0]||(u[0]=r=>e.$emit("onRotate",((e.currentRotation-90)%360+360)%360))},[...u[2]||(u[2]=[vue.createElementVNode("span",{class:"fas fa-rotate-left"},null,-1)])]),vue.createElementVNode("button",{type:"button",class:"btn btn-default",onClick:u[1]||(u[1]=r=>e.$emit("onRotate",((e.currentRotation+90)%360+360)%360))},[...u[3]||(u[3]=[vue.createElementVNode("span",{class:"fas fa-rotate-right"},null,-1)])])]))}}),_hoisted_1$1={class:"btn-group"},_hoisted_2$1={class:"btn btn-default disabled",role:"button"},_sfc_main$1=vue.defineComponent({__name:"ToolbarPagination",props:{currentPage:{},pages:{}},emits:["onChangeCurrentPage"],setup(t){const{t:e}=useI18n();return(u,r)=>(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$1,[vue.createElementVNode("button",{class:vue.normalizeClass(["btn btn-default",{disabled:u.currentPage==1}]),type:"button",onClick:r[0]||(r[0]=p=>u.currentPage!=1&&u.$emit("onChangeCurrentPage",u.currentPage-1))},[...r[2]||(r[2]=[vue.createElementVNode("span",{class:"fas fa-angle-up"},null,-1)])],2),vue.createElementVNode("a",_hoisted_2$1,vue.toDisplayString(vue.unref(e)("editor.pagination",{currentPage:u.currentPage,pages:u.pages})),1),vue.createElementVNode("button",{class:vue.normalizeClass(["btn btn-default",{disabled:u.currentPage==u.pages}]),type:"button",onClick:r[1]||(r[1]=p=>u.currentPage!=u.pages&&u.$emit("onChangeCurrentPage",u.currentPage+1))},[...r[3]||(r[3]=[vue.createElementVNode("span",{class:"fas fa-angle-down"},null,-1)])],2)]))}});async function doRequest(t,e){const u=await fetch(t,{headers:{"Content-Type":"application/json"},...e});if(u.status>=200&&u.status<300)return u.json();throw new Error(u.statusText)}function getAugmentedNamespace(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var u=function r(){var p=!1;try{p=this instanceof r}catch{}return p?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};u.prototype=e.prototype}else u={};return Object.defineProperty(u,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var p=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(u,r,p.get?p:{enumerable:!0,get:function(){return t[r]}})}),u}function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,(function(module,exports){(function(e,u){module.exports=u()})(globalThis,()=>(()=>{var __webpack_modules__=[,((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=l,e.bytesToString=X,e.createValidAbsoluteUrl=N,e.getModificationDate=me,e.getVerbosityLevel=I,e.info=k,e.isArrayBuffer=le,e.isArrayEqual=pe,e.normalizeUnicode=Oe,e.objectFromMap=te,e.objectSize=z,e.setVerbosityLevel=G,e.shadow=o,e.string32=ce,e.stringToBytes=re,e.stringToPDFString=fe,e.stringToUTF8String=de,e.unreachable=m,e.utf8StringToString=ie,e.warn=O;const u=[1,0,0,1,0,0];e.IDENTITY_MATRIX=u;const r=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=r;const p=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=p;const w=1.35;e.LINE_FACTOR=w;const P=.35;e.LINE_DESCENT_FACTOR=P;const y=P/w;e.BASELINE_FACTOR=y;const E={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=E;const c={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=c;const i="pdfjs_internal_editor_";e.AnnotationEditorPrefix=i;const _={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};e.AnnotationEditorType=_;const g={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};e.AnnotationEditorParamsType=g;const s={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=s;const h={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=h;const b={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=b;const d={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=d;const f={MARKED:"Marked",REVIEW:"Review"};e.AnnotationStateModelType=f;const L={MARKED:"Marked",UNMARKED:"Unmarked"};e.AnnotationMarkedState=L;const S={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};e.AnnotationReviewState=S;const A={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=A;const n={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=n;const a={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=a;const C={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=C;const x={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=x;const T={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=T;const D={O:"PageOpen",C:"PageClose"};e.PageActionEventType=D;const $={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=$;const W={NONE:0,BINARY:1};e.CMapCompressionType=W;const se={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=se;const ne={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=ne;let q=$.WARNINGS;function G(ue){Number.isInteger(ue)&&(q=ue)}function I(){return q}function k(ue){q>=$.INFOS&&console.log(`Info: ${ue}`)}function O(ue){q>=$.WARNINGS&&console.log(`Warning: ${ue}`)}function m(ue){throw new Error(ue)}function l(ue,J){ue||m(J)}function M(ue){switch(ue?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function N(ue,J=null,K=null){if(!ue)return null;try{if(K&&typeof ue=="string"&&(K.addDefaultProtocol&&ue.startsWith("www.")&&ue.match(/\./g)?.length>=2&&(ue=`http://${ue}`),K.tryConvertEncoding))try{ue=de(ue)}catch{}const he=J?new URL(ue,J):new URL(ue);if(M(he))return he}catch{}return null}function o(ue,J,K,he=!1){return Object.defineProperty(ue,J,{value:K,enumerable:!he,configurable:!0,writable:!1}),K}const v=(function(){function J(K,he){this.constructor===J&&m("Cannot initialize BaseException."),this.message=K,this.name=he}return J.prototype=new Error,J.constructor=J,J})();e.BaseException=v;class R extends v{constructor(J,K){super(J,"PasswordException"),this.code=K}}e.PasswordException=R;class F extends v{constructor(J,K){super(J,"UnknownErrorException"),this.details=K}}e.UnknownErrorException=F;class U extends v{constructor(J){super(J,"InvalidPDFException")}}e.InvalidPDFException=U;class H extends v{constructor(J){super(J,"MissingPDFException")}}e.MissingPDFException=H;class V extends v{constructor(J,K){super(J,"UnexpectedResponseException"),this.status=K}}e.UnexpectedResponseException=V;class Y extends v{constructor(J){super(J,"FormatError")}}e.FormatError=Y;class Z extends v{constructor(J){super(J,"AbortException")}}e.AbortException=Z;function X(ue){(typeof ue!="object"||ue?.length===void 0)&&m("Invalid argument for bytesToString");const J=ue.length,K=8192;if(J<K)return String.fromCharCode.apply(null,ue);const he=[];for(let ge=0;ge<J;ge+=K){const be=Math.min(ge+K,J),ve=ue.subarray(ge,be);he.push(String.fromCharCode.apply(null,ve))}return he.join("")}function re(ue){typeof ue!="string"&&m("Invalid argument for stringToBytes");const J=ue.length,K=new Uint8Array(J);for(let he=0;he<J;++he)K[he]=ue.charCodeAt(he)&255;return K}function ce(ue){return String.fromCharCode(ue>>24&255,ue>>16&255,ue>>8&255,ue&255)}function z(ue){return Object.keys(ue).length}function te(ue){const J=Object.create(null);for(const[K,he]of ue)J[K]=he;return J}function ae(){const ue=new Uint8Array(4);return ue[0]=1,new Uint32Array(ue.buffer,0,1)[0]===1}function Q(){try{return new Function(""),!0}catch{return!1}}class B{static get isLittleEndian(){return o(this,"isLittleEndian",ae())}static get isEvalSupported(){return o(this,"isEvalSupported",Q())}static get isOffscreenCanvasSupported(){return o(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?o(this,"platform",{isWin:!1,isMac:!1}):o(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}e.FeatureTest=B;const j=[...Array(256).keys()].map(ue=>ue.toString(16).padStart(2,"0"));class ee{static makeHexColor(J,K,he){return`#${j[J]}${j[K]}${j[he]}`}static scaleMinMax(J,K){let he;J[0]?(J[0]<0&&(he=K[0],K[0]=K[1],K[1]=he),K[0]*=J[0],K[1]*=J[0],J[3]<0&&(he=K[2],K[2]=K[3],K[3]=he),K[2]*=J[3],K[3]*=J[3]):(he=K[0],K[0]=K[2],K[2]=he,he=K[1],K[1]=K[3],K[3]=he,J[1]<0&&(he=K[2],K[2]=K[3],K[3]=he),K[2]*=J[1],K[3]*=J[1],J[2]<0&&(he=K[0],K[0]=K[1],K[1]=he),K[0]*=J[2],K[1]*=J[2]),K[0]+=J[4],K[1]+=J[4],K[2]+=J[5],K[3]+=J[5]}static transform(J,K){return[J[0]*K[0]+J[2]*K[1],J[1]*K[0]+J[3]*K[1],J[0]*K[2]+J[2]*K[3],J[1]*K[2]+J[3]*K[3],J[0]*K[4]+J[2]*K[5]+J[4],J[1]*K[4]+J[3]*K[5]+J[5]]}static applyTransform(J,K){const he=J[0]*K[0]+J[1]*K[2]+K[4],ge=J[0]*K[1]+J[1]*K[3]+K[5];return[he,ge]}static applyInverseTransform(J,K){const he=K[0]*K[3]-K[1]*K[2],ge=(J[0]*K[3]-J[1]*K[2]+K[2]*K[5]-K[4]*K[3])/he,be=(-J[0]*K[1]+J[1]*K[0]+K[4]*K[1]-K[5]*K[0])/he;return[ge,be]}static getAxialAlignedBoundingBox(J,K){const he=ee.applyTransform(J,K),ge=ee.applyTransform(J.slice(2,4),K),be=ee.applyTransform([J[0],J[3]],K),ve=ee.applyTransform([J[2],J[1]],K);return[Math.min(he[0],ge[0],be[0],ve[0]),Math.min(he[1],ge[1],be[1],ve[1]),Math.max(he[0],ge[0],be[0],ve[0]),Math.max(he[1],ge[1],be[1],ve[1])]}static inverseTransform(J){const K=J[0]*J[3]-J[1]*J[2];return[J[3]/K,-J[1]/K,-J[2]/K,J[0]/K,(J[2]*J[5]-J[4]*J[3])/K,(J[4]*J[1]-J[5]*J[0])/K]}static singularValueDecompose2dScale(J){const K=[J[0],J[2],J[1],J[3]],he=J[0]*K[0]+J[1]*K[2],ge=J[0]*K[1]+J[1]*K[3],be=J[2]*K[0]+J[3]*K[2],ve=J[2]*K[1]+J[3]*K[3],we=(he+ve)/2,Ce=Math.sqrt((he+ve)**2-4*(he*ve-be*ge))/2,Le=we+Ce||1,Ae=we-Ce||1;return[Math.sqrt(Le),Math.sqrt(Ae)]}static normalizeRect(J){const K=J.slice(0);return J[0]>J[2]&&(K[0]=J[2],K[2]=J[0]),J[1]>J[3]&&(K[1]=J[3],K[3]=J[1]),K}static intersect(J,K){const he=Math.max(Math.min(J[0],J[2]),Math.min(K[0],K[2])),ge=Math.min(Math.max(J[0],J[2]),Math.max(K[0],K[2]));if(he>ge)return null;const be=Math.max(Math.min(J[1],J[3]),Math.min(K[1],K[3])),ve=Math.min(Math.max(J[1],J[3]),Math.max(K[1],K[3]));return be>ve?null:[he,be,ge,ve]}static bezierBoundingBox(J,K,he,ge,be,ve,we,Ce){const Le=[],Ae=[[],[]];let Re,Te,Me,Ee,xe,Fe,Ne,De;for(let Be=0;Be<2;++Be){if(Be===0?(Te=6*J-12*he+6*be,Re=-3*J+9*he-9*be+3*we,Me=3*he-3*J):(Te=6*K-12*ge+6*ve,Re=-3*K+9*ge-9*ve+3*Ce,Me=3*ge-3*K),Math.abs(Re)<1e-12){if(Math.abs(Te)<1e-12)continue;Ee=-Me/Te,0<Ee&&Ee<1&&Le.push(Ee);continue}Ne=Te*Te-4*Me*Re,De=Math.sqrt(Ne),!(Ne<0)&&(xe=(-Te+De)/(2*Re),0<xe&&xe<1&&Le.push(xe),Fe=(-Te-De)/(2*Re),0<Fe&&Fe<1&&Le.push(Fe))}let ke=Le.length,Pe;const Ie=ke;for(;ke--;)Ee=Le[ke],Pe=1-Ee,Ae[0][ke]=Pe*Pe*Pe*J+3*Pe*Pe*Ee*he+3*Pe*Ee*Ee*be+Ee*Ee*Ee*we,Ae[1][ke]=Pe*Pe*Pe*K+3*Pe*Pe*Ee*ge+3*Pe*Ee*Ee*ve+Ee*Ee*Ee*Ce;return Ae[0][Ie]=J,Ae[1][Ie]=K,Ae[0][Ie+1]=we,Ae[1][Ie+1]=Ce,Ae[0].length=Ae[1].length=Ie+2,[Math.min(...Ae[0]),Math.min(...Ae[1]),Math.max(...Ae[0]),Math.max(...Ae[1])]}}e.Util=ee;const oe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function fe(ue){if(ue[0]>="ï"){let K;if(ue[0]==="þ"&&ue[1]==="ÿ"?K="utf-16be":ue[0]==="ÿ"&&ue[1]==="þ"?K="utf-16le":ue[0]==="ï"&&ue[1]==="»"&&ue[2]==="¿"&&(K="utf-8"),K)try{const he=new TextDecoder(K,{fatal:!0}),ge=re(ue);return he.decode(ge)}catch(he){O(`stringToPDFString: "${he}".`)}}const J=[];for(let K=0,he=ue.length;K<he;K++){const ge=oe[ue.charCodeAt(K)];J.push(ge?String.fromCharCode(ge):ue.charAt(K))}return J.join("")}function de(ue){return decodeURIComponent(escape(ue))}function ie(ue){return unescape(encodeURIComponent(ue))}function le(ue){return typeof ue=="object"&&ue?.byteLength!==void 0}function pe(ue,J){if(ue.length!==J.length)return!1;for(let K=0,he=ue.length;K<he;K++)if(ue[K]!==J[K])return!1;return!0}function me(ue=new Date){return[ue.getUTCFullYear().toString(),(ue.getUTCMonth()+1).toString().padStart(2,"0"),ue.getUTCDate().toString().padStart(2,"0"),ue.getUTCHours().toString().padStart(2,"0"),ue.getUTCMinutes().toString().padStart(2,"0"),ue.getUTCSeconds().toString().padStart(2,"0")].join("")}class _e{#e=!1;constructor(){this.promise=new Promise((J,K)=>{this.resolve=he=>{this.#e=!0,J(he)},this.reject=he=>{this.#e=!0,K(he)}})}get settled(){return this.#e}}e.PromiseCapability=_e;let ye=null,Se=null;function Oe(ue){return ye||(ye=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Se=new Map([["ﬅ","ſt"]])),ue.replaceAll(ye,(J,K,he)=>K?K.normalize("NFKC"):Se.get(he))}}),((__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:t,NodeCMapReaderFactory:e,NodeFilterFactory:u,NodeStandardFontDataFactory:r}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=t,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=e,exports.DefaultFilterFactory=DefaultFilterFactory=u,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=r}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:t}=__w_pdfjs_require__(21);createPDFNetworkStream=e=>new t(e)}else{const{PDFNetworkStream:t}=__w_pdfjs_require__(24),{PDFFetchStream:e}=__w_pdfjs_require__(25);createPDFNetworkStream=u=>(0,_display_utils.isValidFetchUrl)(u.url)?new e(u):new t(u)}function getDocument(t){if(typeof t=="string"||t instanceof URL?t={url:t}:(0,_util.isArrayBuffer)(t)&&(t={data:t}),typeof t!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const e=new PDFDocumentLoadingTask,{docId:u}=e,r=t.url?getUrlProp(t.url):null,p=t.data?getDataProp(t.data):null,w=t.httpHeaders||null,P=t.withCredentials===!0,y=t.password??null,E=t.range instanceof PDFDataRangeTransport?t.range:null,c=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let i=t.worker instanceof PDFWorker?t.worker:null;const _=t.verbosity,g=typeof t.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(t.docBaseUrl)?t.docBaseUrl:null,s=typeof t.cMapUrl=="string"?t.cMapUrl:null,h=t.cMapPacked!==!1,b=t.CMapReaderFactory||DefaultCMapReaderFactory,d=typeof t.standardFontDataUrl=="string"?t.standardFontDataUrl:null,f=t.StandardFontDataFactory||DefaultStandardFontDataFactory,L=t.stopAtErrors!==!0,S=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,A=t.isEvalSupported!==!1,n=typeof t.isOffscreenCanvasSupported=="boolean"?t.isOffscreenCanvasSupported:!_is_node.isNodeJS,a=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,C=typeof t.disableFontFace=="boolean"?t.disableFontFace:_is_node.isNodeJS,x=t.fontExtraProperties===!0,T=t.enableXfa===!0,D=t.ownerDocument||globalThis.document,$=t.disableRange===!0,W=t.disableStream===!0,se=t.disableAutoFetch===!0,ne=t.pdfBug===!0,q=E?E.length:t.length??NaN,G=typeof t.useSystemFonts=="boolean"?t.useSystemFonts:!_is_node.isNodeJS&&!C,I=typeof t.useWorkerFetch=="boolean"?t.useWorkerFetch:b===_display_utils.DOMCMapReaderFactory&&f===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(s,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(d,document.baseURI),k=t.canvasFactory||new DefaultCanvasFactory({ownerDocument:D}),O=t.filterFactory||new DefaultFilterFactory({docId:u,ownerDocument:D}),m=null;(0,_util.setVerbosityLevel)(_);const l={canvasFactory:k,filterFactory:O};if(I||(l.cMapReaderFactory=new b({baseUrl:s,isCompressed:h}),l.standardFontDataFactory=new f({baseUrl:d})),!i){const o={verbosity:_,port:_worker_options.GlobalWorkerOptions.workerPort};i=o.port?PDFWorker.fromPort(o):new PDFWorker(o),e._worker=i}const M={docId:u,apiVersion:"3.6.172",data:p,password:y,disableAutoFetch:se,rangeChunkSize:c,length:q,docBaseUrl:g,enableXfa:T,evaluatorOptions:{maxImageSize:S,disableFontFace:C,ignoreErrors:L,isEvalSupported:A,isOffscreenCanvasSupported:n,canvasMaxAreaInBytes:a,fontExtraProperties:x,useSystemFonts:G,cMapUrl:I?s:null,standardFontDataUrl:I?d:null}},N={ignoreErrors:L,isEvalSupported:A,disableFontFace:C,fontExtraProperties:x,enableXfa:T,ownerDocument:D,disableAutoFetch:se,pdfBug:ne,styleElement:m};return i.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");const o=_fetchDocument(i,M),v=new Promise(function(R){let F;E?F=new _transport_stream.PDFDataTransportStream({length:q,initialData:E.initialData,progressiveDone:E.progressiveDone,contentDispositionFilename:E.contentDispositionFilename,disableRange:$,disableStream:W},E):p||(F=createPDFNetworkStream({url:r,length:q,httpHeaders:w,withCredentials:P,rangeChunkSize:c,disableRange:$,disableStream:W})),R(F)});return Promise.all([o,v]).then(function([R,F]){if(e.destroyed)throw new Error("Loading aborted");const U=new _message_handler.MessageHandler(u,R,i.port),H=new WorkerTransport(U,e,F,N,l);e._transport=H,U.send("Ready",null)})}).catch(e._capability.reject),e}async function _fetchDocument(t,e){if(t.destroyed)throw new Error("Worker was destroyed");const u=await t.messageHandler.sendWithPromise("GetDocRequest",e,e.data?[e.data.buffer]:null);if(t.destroyed)throw new Error("Worker was destroyed");return u}function getUrlProp(t){if(t instanceof URL)return t.href;try{return new URL(t,window.location).href}catch{if(_is_node.isNodeJS&&typeof t=="string")return t}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(t){if(_is_node.isNodeJS&&typeof Buffer<"u"&&t instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(t);if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if(typeof t=="string")return(0,_util.stringToBytes)(t);if(typeof t=="object"&&!isNaN(t?.length)||(0,_util.isArrayBuffer)(t))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#e=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0,await this._transport?.destroy(),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,u,r=!1,p=null){this.length=e,this.initialData=u,this.progressiveDone=r,this.contentDispositionFilename=p,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,u){for(const r of this._rangeListeners)r(e,u)}onDataProgress(e,u){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(e,u)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const u of this._progressiveReadListeners)u(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,u){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,u){this._pdfInfo=e,this._transport=u}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#e=null;#t=!1;constructor(e,u,r,p=!1){this._pageIndex=e,this._pageInfo=u,this._transport=r,this._stats=p?new _display_utils.StatTimer:null,this._pdfBug=p,this.commonObjs=r.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:u=this.rotate,offsetX:r=0,offsetY:p=0,dontFlip:w=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:u,offsetX:r,offsetY:p,dontFlip:w})}getAnnotations({intent:e="display"}={}){const u=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,u.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:u,intent:r="display",annotationMode:p=_util.AnnotationMode.ENABLE,transform:w=null,background:P=null,optionalContentConfigPromise:y=null,annotationCanvasMap:E=null,pageColors:c=null,printAnnotationStorage:i=null}){if(arguments[0]?.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");this._stats?.time("Overall");const _=this._transport.getRenderingIntent(r,p,i);this.#t=!1,this.#i(),y||(y=this._transport.getOptionalContentConfig());let g=this._intentStates.get(_.cacheKey);g||(g=Object.create(null),this._intentStates.set(_.cacheKey,g)),g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null);const s=!!(_.renderingIntent&_util.RenderingIntentFlag.PRINT);g.displayReadyCapability||(g.displayReadyCapability=new _util.PromiseCapability,g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(_));const h=f=>{g.renderTasks.delete(b),(this._maybeCleanupAfterRender||s)&&(this.#t=!0),this.#n(!s),f?(b.capability.reject(f),this._abortOperatorList({intentState:g,reason:f instanceof Error?f:new Error(f)})):b.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},b=new InternalRenderTask({callback:h,params:{canvasContext:e,viewport:u,transform:w,background:P},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:E,operatorList:g.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!s,pdfBug:this._pdfBug,pageColors:c});(g.renderTasks||=new Set).add(b);const d=b.task;return Promise.all([g.displayReadyCapability.promise,y]).then(([f,L])=>{if(this.#t){h();return}this._stats?.time("Rendering"),b.initializeGraphics({transparency:f,optionalContentConfig:L}),b.operatorListChanged()}).catch(h),d}getOperatorList({intent:e="display",annotationMode:u=_util.AnnotationMode.ENABLE,printAnnotationStorage:r=null}={}){function p(){P.operatorList.lastChunk&&(P.opListReadCapability.resolve(P.operatorList),P.renderTasks.delete(y))}const w=this._transport.getRenderingIntent(e,u,r,!0);let P=this._intentStates.get(w.cacheKey);P||(P=Object.create(null),this._intentStates.set(w.cacheKey,P));let y;return P.opListReadCapability||(y=Object.create(null),y.operatorListChanged=p,P.opListReadCapability=new _util.PromiseCapability,(P.renderTasks||=new Set).add(y),P.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(w)),P.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:u=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:u===!0},{highWaterMark:100,size(p){return p.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>_xfa_text.XfaText.textContent(r));const u=this.streamTextContent(e);return new Promise(function(r,p){function w(){P.read().then(function({value:E,done:c}){if(c){r(y);return}Object.assign(y.styles,E.styles),y.items.push(...E.items),w()},p)}const P=u.getReader(),y={items:[],styles:Object.create(null)};w()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const u of this._intentStates.values())if(this._abortOperatorList({intentState:u,reason:new Error("Page was destroyed."),force:!0}),!u.opListReadCapability)for(const r of u.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),this.#t=!1,this.#i(),Promise.all(e)}cleanup(e=!1){this.#t=!0;const u=this.#n(!1);return e&&u&&(this._stats&&=new _display_utils.StatTimer),u}#n(e=!1){if(this.#i(),!this.#t)return!1;if(e)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:u,operatorList:r}of this._intentStates.values())if(u.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#i(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(e,u){const r=this._intentStates.get(u);r&&(this._stats?.timeEnd("Page Request"),r.displayReadyCapability?.resolve(e))}_renderPageChunk(e,u){for(let r=0,p=e.length;r<p;r++)u.operatorList.fnArray.push(e.fnArray[r]),u.operatorList.argsArray.push(e.argsArray[r]);u.operatorList.lastChunk=e.lastChunk,u.operatorList.separateAnnots=e.separateAnnots;for(const r of u.renderTasks)r.operatorListChanged();e.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:u,annotationStorageMap:r}){const w=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:u,annotationStorage:r}).getReader(),P=this._intentStates.get(u);P.streamReader=w;const y=()=>{w.read().then(({value:E,done:c})=>{if(c){P.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(E,P),y())},E=>{if(P.streamReader=null,!this._transport.destroyed){if(P.operatorList){P.operatorList.lastChunk=!0;for(const c of P.renderTasks)c.operatorListChanged();this.#n(!0)}if(P.displayReadyCapability)P.displayReadyCapability.reject(E);else if(P.opListReadCapability)P.opListReadCapability.reject(E);else throw E}})};y()}_abortOperatorList({intentState:e,reason:u,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(u instanceof _display_utils.RenderingCancelledException){let p=RENDERING_CANCELLED_TIMEOUT;u.extraDelay>0&&u.extraDelay<1e3&&(p+=u.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:u,force:!0})},p);return}}if(e.streamReader.cancel(new _util.AbortException(u.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[p,w]of this._intentStates)if(w===e){this._intentStates.delete(p);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{#e=new Set;#t=Promise.resolve();postMessage(e,u){const r={data:structuredClone(e,u?{transfer:u}:null)};this.#t.then(()=>{for(const p of this.#e)p.call(this,r)})}addEventListener(e,u){this.#e.add(u)}removeEventListener(e,u){this.#e.delete(u)}terminate(){this.#e.clear()}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const t=document?.currentScript?.src;t&&(PDFWorkerUtil.fallbackWorkerSrc=t.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(t,e){let u;try{if(u=new URL(t),!u.origin||u.origin==="null")return!1}catch{return!1}const r=new URL(e,u);return u.origin===r.origin},PDFWorkerUtil.createCDNWrapper=function(t){const e=`importScripts("${t}");`;return URL.createObjectURL(new Blob([e]))}}class PDFWorker{static#workerPorts=new WeakMap;constructor({name:t=null,port:e=null,verbosity:u=(0,_util.getVerbosityLevel)()}={}){if(e&&PDFWorker.#workerPorts.has(e))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=t,this.destroyed=!1,this.verbosity=u,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,e){PDFWorker.#workerPorts.set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new _message_handler.MessageHandler("main","worker",t),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:t}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,t)||(t=PDFWorkerUtil.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t),u=new _message_handler.MessageHandler("main","worker",e),r=()=>{e.removeEventListener("error",p),u.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},p=()=>{this._webWorker||r()};e.addEventListener("error",p),u.on("test",P=>{if(e.removeEventListener("error",p),this.destroyed){r();return}P?(this._messageHandler=u,this._port=e,this._webWorker=e,this._readyCapability.resolve(),u.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),u.destroy(),e.terminate())}),u.on("ready",P=>{if(e.removeEventListener("error",p),this.destroyed){r();return}try{w()}catch{this._setupFakeWorker()}});const w=()=>{const P=new Uint8Array;u.send("test",P,[P.buffer])};w();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new LoopbackPort;this._port=e;const u=`fake${PDFWorkerUtil.fakeWorkerId++}`,r=new _message_handler.MessageHandler(u+"_worker",u,e);t.setup(r,e);const p=new _message_handler.MessageHandler(u,u+"_worker",e);this._messageHandler=p,this._readyCapability.resolve(),p.send("configure",{verbosity:this.verbosity})}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return this.#workerPorts.has(t.port)?this.#workerPorts.get(t.port):new PDFWorker(t)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{#e=new Map;#t=new Map;#n=new Map;constructor(e,u,r,p,w){this.messageHandler=e,this.loadingTask=u,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:p.ownerDocument,styleElement:p.styleElement}),this._params=p,this.canvasFactory=w.canvasFactory,this.filterFactory=w.filterFactory,this.cMapReaderFactory=w.cMapReaderFactory,this.standardFontDataFactory=w.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#i(e,u=null){const r=this.#e.get(e);if(r)return r;const p=this.messageHandler.sendWithPromise(e,u);return this.#e.set(e,p),p}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(e,u=_util.AnnotationMode.ENABLE,r=null,p=!1){let w=_util.RenderingIntentFlag.DISPLAY,P=null;switch(e){case"any":w=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":w=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(u){case _util.AnnotationMode.DISABLE:w+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:w+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:w+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,P=(w&_util.RenderingIntentFlag.PRINT&&r instanceof _annotation_storage.PrintAnnotationStorage?r:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${u}`)}return p&&(w+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:w,cacheKey:`${w}_${_annotation_storage.AnnotationStorage.getHash(P)}`,annotationStorageMap:P}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of this.#t.values())e.push(r._destroy());this.#t.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const u=this.messageHandler.sendWithPromise("Terminate",null);return e.push(u),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:u}=this;e.on("GetReader",(r,p)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=w=>{this._lastProgress={loaded:w.loaded,total:w.total}},p.onPull=()=>{this._fullReader.read().then(function({value:w,done:P}){if(P){p.close();return}(0,_util.assert)(w instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),p.enqueue(new Uint8Array(w),1,[w])}).catch(w=>{p.error(w)})},p.onCancel=w=>{this._fullReader.cancel(w),p.ready.catch(P=>{if(!this.destroyed)throw P})}}),e.on("ReaderHeadersReady",r=>{const p=new _util.PromiseCapability,w=this._fullReader;return w.headersReady.then(()=>{(!w.isStreamingSupported||!w.isRangeSupported)&&(this._lastProgress&&u.onProgress?.(this._lastProgress),w.onProgress=P=>{u.onProgress?.({loaded:P.loaded,total:P.total})}),p.resolve({isStreamingSupported:w.isStreamingSupported,isRangeSupported:w.isRangeSupported,contentLength:w.contentLength})},p.reject),p.promise}),e.on("GetRangeReader",(r,p)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const w=this._networkStream.getRangeReader(r.begin,r.end);if(!w){p.close();return}p.onPull=()=>{w.read().then(function({value:P,done:y}){if(y){p.close();return}(0,_util.assert)(P instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),p.enqueue(new Uint8Array(P),1,[P])}).catch(P=>{p.error(P)})},p.onCancel=P=>{w.cancel(P),p.ready.catch(y=>{if(!this.destroyed)throw y})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,u._capability.resolve(new PDFDocumentProxy(r,this))}),e.on("DocException",function(r){let p;switch(r.name){case"PasswordException":p=new _util.PasswordException(r.message,r.code);break;case"InvalidPDFException":p=new _util.InvalidPDFException(r.message);break;case"MissingPDFException":p=new _util.MissingPDFException(r.message);break;case"UnexpectedResponseException":p=new _util.UnexpectedResponseException(r.message,r.status);break;case"UnknownErrorException":p=new _util.UnknownErrorException(r.message,r.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}u._capability.reject(p)}),e.on("PasswordRequest",r=>{if(this._passwordCapability=new _util.PromiseCapability,u.onPassword){const p=w=>{w instanceof Error?this._passwordCapability.reject(w):this._passwordCapability.resolve({password:w})};try{u.onPassword(p,r.code)}catch(w){this._passwordCapability.reject(w)}}else this._passwordCapability.reject(new _util.PasswordException(r.message,r.code));return this._passwordCapability.promise}),e.on("DataLoaded",r=>{u.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;this.#t.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,p,w])=>{if(!this.destroyed&&!this.commonObjs.has(r))switch(p){case"Font":const P=this._params;if("error"in w){const c=w.error;(0,_util.warn)(`Error during font loading: ${c}`),this.commonObjs.resolve(r,c);break}const y=P.pdfBug&&globalThis.FontInspector?.enabled?(c,i)=>globalThis.FontInspector.fontAdded(c,i):null,E=new _font_loader.FontFaceObject(w,{isEvalSupported:P.isEvalSupported,disableFontFace:P.disableFontFace,ignoreErrors:P.ignoreErrors,inspectFont:y});this.fontLoader.bind(E).catch(c=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!P.fontExtraProperties&&E.data&&(E.data=null),this.commonObjs.resolve(r,E)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,w);break;default:throw new Error(`Got unknown common object type ${p}`)}}),e.on("obj",([r,p,w,P])=>{if(this.destroyed)return;const y=this.#t.get(p);if(!y.objs.has(r))switch(w){case"Image":if(y.objs.resolve(r,P),P){let E;if(P.bitmap){const{width:c,height:i}=P;E=c*i*4}else E=P.data?.length||0;E>_util.MAX_IMAGE_SIZE_TO_CACHE&&(y._maybeCleanupAfterRender=!0)}break;case"Pattern":y.objs.resolve(r,P);break;default:throw new Error(`Got unknown object type ${w}`)}}),e.on("DocProgress",r=>{this.destroyed||u.onProgress?.({loaded:r.loaded,total:r.total})}),e.on("FetchBuiltInCMap",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(r):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(r):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const u=e-1,r=this.#n.get(u);if(r)return r;const p=this.messageHandler.sendWithPromise("GetPage",{pageIndex:u}).then(w=>{if(this.destroyed)throw new Error("Transport destroyed");const P=new PDFPageProxy(u,w,this,this._params.pdfBug);return this.#t.set(u,P),P});return this.#n.set(u,p),p}getPageIndex(e){return typeof e!="object"||e===null||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,u){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:u})}getFieldObjects(){return this.#i("GetFieldObjects")}hasJSActions(){return this.#i("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",u=this.#e.get(e);if(u)return u;const r=this.messageHandler.sendWithPromise(e,null).then(p=>({info:p[0],metadata:p[1]?new _metadata.Metadata(p[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const u of this.#t.values())if(!u.cleanup())throw new Error(`startCleanup: Page ${u.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:e,enableXfa:u}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e,enableXfa:u})}}class PDFObjects{#e=Object.create(null);#t(e){const u=this.#e[e];return u||(this.#e[e]={capability:new _util.PromiseCapability,data:null})}get(e,u=null){if(u){const p=this.#t(e);return p.capability.promise.then(()=>u(p.data)),null}const r=this.#e[e];if(!r?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){return this.#e[e]?.capability.settled||!1}resolve(e,u=null){const r=this.#t(e);r.data=u,r.capability.resolve()}clear(){for(const e in this.#e){const{data:u}=this.#e[e];u?.bitmap?.close()}this.#e=Object.create(null)}}class RenderTask{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:u}=this.#e;return e.form||e.canvas&&u?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#e=new WeakSet;constructor({callback:e,params:u,objs:r,commonObjs:p,annotationCanvasMap:w,operatorList:P,pageIndex:y,canvasFactory:E,filterFactory:c,useRequestAnimationFrame:i=!1,pdfBug:_=!1,pageColors:g=null}){this.callback=e,this.params=u,this.objs=r,this.commonObjs=p,this.annotationCanvasMap=w,this.operatorListIdx=null,this.operatorList=P,this._pageIndex=y,this.canvasFactory=E,this.filterFactory=c,this._pdfBug=_,this.pageColors=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=i===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=u.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:u}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:p,transform:w,background:P}=this.params;this.gfx=new _canvas.CanvasGraphics(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:u},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:w,viewport:p,transparency:e,background:P}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,u=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this._canvas&&InternalRenderTask.#e.delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",u))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&InternalRenderTask.#e.delete(this._canvas),this.callback())))}}const version="3.6.172";exports.version=version;const build="4d3dfe254";exports.build=build}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var r=u(1),p=u(4),w=u(8);class P{#e=!1;#t=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(c,i){const _=this.#t.get(c);return _===void 0?i:Object.assign(i,_)}getRawValue(c){return this.#t.get(c)}remove(c){if(this.#t.delete(c),this.#t.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const i of this.#t.values())if(i instanceof p.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(c,i){const _=this.#t.get(c);let g=!1;if(_!==void 0)for(const[s,h]of Object.entries(i))_[s]!==h&&(g=!0,_[s]=h);else g=!0,this.#t.set(c,i);g&&this.#n(),i instanceof p.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(i.constructor._type)}has(c){return this.#t.has(c)}getAll(){return this.#t.size>0?(0,r.objectFromMap)(this.#t):null}setAll(c){for(const[i,_]of Object.entries(c))this.setValue(i,_)}get size(){return this.#t.size}#n(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new y(this)}get serializable(){if(this.#t.size===0)return null;const c=new Map;for(const[i,_]of this.#t){const g=_ instanceof p.AnnotationEditor?_.serialize():_;g&&c.set(i,g)}return c}static getHash(c){if(!c)return"";const i=new w.MurmurHash3_64;for(const[_,g]of c)i.update(`${_}:${JSON.stringify(g)}`);return i.hexdigest()}}e.AnnotationStorage=P;class y extends P{#e=null;constructor(c){super(),this.#e=structuredClone(c.serializable)}get print(){(0,r.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}}e.PrintAnnotationStorage=y}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var r=u(5),p=u(1);class w{#e=this.focusin.bind(this);#t=this.focusout.bind(this);#n=!1;#i=!1;#s=!1;_uiManager=null;#l=w._zIndex++;static _colorManager=new r.ColorManager;static _zIndex=1;constructor(y){this.constructor===w&&(0,p.unreachable)("Cannot initialize AnnotationEditor."),this.parent=y.parent,this.id=y.id,this.width=this.height=null,this.pageIndex=y.parent.pageIndex,this.name=y.name,this.div=null,this._uiManager=y.uiManager;const{rotation:E,rawDims:{pageWidth:c,pageHeight:i,pageX:_,pageY:g}}=this.parent.viewport;this.rotation=E,this.pageRotation=(360+E-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[c,i],this.pageTranslation=[_,g];const[s,h]=this.parentDimensions;this.x=y.x/s,this.y=y.y/h,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,p.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(y){this._uiManager.addCommands(y)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#l}setParent(y){y!==null&&(this.pageIndex=y.pageIndex,this.pageDimensions=y.pageDimensions),this.parent=y}focusin(y){this.#n?this.#n=!1:this.parent.setSelected(this)}focusout(y){!this.isAttachedToDOM||y.relatedTarget?.closest(`#${this.id}`)||(y.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(y){const E=this.parent.div.getBoundingClientRect();this.startX=y.clientX-E.x,this.startY=y.clientY-E.y,y.dataTransfer.setData("text/plain",this.id),y.dataTransfer.effectAllowed="move"}setAt(y,E,c,i){const[_,g]=this.parentDimensions;[c,i]=this.screenToPageTranslation(c,i),this.x=(y+c)/_,this.y=(E+i)/g,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(y,E){const[c,i]=this.parentDimensions;[y,E]=this.screenToPageTranslation(y,E),this.x+=y/c,this.y+=E/i,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(y,E){switch(this.parentRotation){case 90:return[E,-y];case 180:return[-y,-E];case 270:return[-E,y];default:return[y,E]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{realScale:y}=this._uiManager.viewParameters,[E,c]=this.pageDimensions;return[E*y,c*y]}setDims(y,E){const[c,i]=this.parentDimensions;this.div.style.width=`${100*y/c}%`,this.div.style.height=`${100*E/i}%`}fixDims(){const{style:y}=this.div,{height:E,width:c}=y,i=c.endsWith("%"),_=E.endsWith("%");if(i&&_)return;const[g,s]=this.parentDimensions;i||(y.width=`${100*parseFloat(c)/g}%`),_||(y.height=`${100*parseFloat(E)/s}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#e),this.div.addEventListener("focusout",this.#t);const[y,E]=this.getInitialTranslation();return this.translate(y,E),(0,r.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(y){const{isMac:E}=p.FeatureTest.platform;if(y.button!==0||y.ctrlKey&&E){y.preventDefault();return}y.ctrlKey&&!E||y.shiftKey||y.metaKey&&E?this.parent.toggleSelected(this):this.parent.setSelected(this),this.#n=!0}getRect(y,E){const c=this.parentScale,[i,_]=this.pageDimensions,[g,s]=this.pageTranslation,h=y/c,b=E/c,d=this.x*i,f=this.y*_,L=this.width*i,S=this.height*_;switch(this.rotation){case 0:return[d+h+g,_-f-b-S+s,d+h+L+g,_-f-b+s];case 90:return[d+b+g,_-f+h+s,d+b+S+g,_-f+h+L+s];case 180:return[d-h-L+g,_-f+b+s,d-h+g,_-f+b+S+s];case 270:return[d-b-S+g,_-f-h-L+s,d-b+g,_-f-h+s];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(y,E){const[c,i,_,g]=y,s=_-c,h=g-i;switch(this.rotation){case 0:return[c,E-g,s,h];case 90:return[c,E-i,h,s];case 180:return[_,E-i,s,h];case 270:return[_,E-g,h,s];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#s=!0}disableEditMode(){this.#s=!1}isInEditMode(){return this.#s}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#e)}serialize(){(0,p.unreachable)("An editor must be serializable")}static deserialize(y,E,c){const i=new this.prototype.constructor({parent:E,id:E.getNextId(),uiManager:c});i.rotation=y.rotation;const[_,g]=i.pageDimensions,[s,h,b,d]=i.getRectInCurrentCoords(y.rect,g);return i.x=s/_,i.y=h/g,i.width=b/_,i.height=d/g,i}remove(){this.div.removeEventListener("focusin",this.#e),this.div.removeEventListener("focusout",this.#t),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){this.div?.classList.add("selectedEditor")}unselect(){this.div?.classList.remove("selectedEditor")}updateParams(y,E){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return this.#i}set isEditing(y){this.#i=y,y?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}e.AnnotationEditor=w}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=w,e.opacityToHex=P;var r=u(1),p=u(6);function w(g,s,h){for(const b of h)s.addEventListener(b,g[b].bind(g))}function P(g){return Math.round(Math.min(255,Math.max(1,255*g))).toString(16).padStart(2,"0")}class y{#e=0;getId(){return`${r.AnnotationEditorPrefix}${this.#e++}`}}class E{#e=[];#t=!1;#n;#i=-1;constructor(s=128){this.#n=s}add({cmd:s,undo:h,mustExec:b,type:d=NaN,overwriteIfSameType:f=!1,keepUndo:L=!1}){if(b&&s(),this.#t)return;const S={cmd:s,undo:h,type:d};if(this.#i===-1){this.#e.length>0&&(this.#e.length=0),this.#i=0,this.#e.push(S);return}if(f&&this.#e[this.#i].type===d){L&&(S.undo=this.#e[this.#i].undo),this.#e[this.#i]=S;return}const A=this.#i+1;A===this.#n?this.#e.splice(0,1):(this.#i=A,A<this.#e.length&&this.#e.splice(A)),this.#e.push(S)}undo(){this.#i!==-1&&(this.#t=!0,this.#e[this.#i].undo(),this.#t=!1,this.#i-=1)}redo(){this.#i<this.#e.length-1&&(this.#i+=1,this.#t=!0,this.#e[this.#i].cmd(),this.#t=!1)}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#e.length-1}destroy(){this.#e=null}}e.CommandManager=E;class c{constructor(s){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:h}=r.FeatureTest.platform;for(const[b,d]of s)for(const f of b){const L=f.startsWith("mac+");h&&L?(this.callbacks.set(f.slice(4),d),this.allKeys.add(f.split("+").at(-1))):!h&&!L&&(this.callbacks.set(f,d),this.allKeys.add(f.split("+").at(-1)))}}#e(s){s.altKey&&this.buffer.push("alt"),s.ctrlKey&&this.buffer.push("ctrl"),s.metaKey&&this.buffer.push("meta"),s.shiftKey&&this.buffer.push("shift"),this.buffer.push(s.key);const h=this.buffer.join("+");return this.buffer.length=0,h}exec(s,h){if(!this.allKeys.has(h.key))return;const b=this.callbacks.get(this.#e(h));b&&(b.bind(s)(),h.stopPropagation(),h.preventDefault())}}e.KeyboardManager=c;class i{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const s=new Map([["CanvasText",null],["Canvas",null]]);return(0,p.getColorValues)(s),(0,r.shadow)(this,"_colors",s)}convert(s){const h=(0,p.getRGB)(s);if(!window.matchMedia("(forced-colors: active)").matches)return h;for(const[b,d]of this._colors)if(d.every((f,L)=>f===h[L]))return i._colorsMapping.get(b);return h}getHexCode(s){const h=this._colors.get(s);return h?r.Util.makeHexColor(...h):s}}e.ColorManager=i;class _{#e=null;#t=new Map;#n=new Map;#i=null;#s=new E;#l=0;#u=null;#r=new Set;#a=null;#h=new y;#c=!1;#f=r.AnnotationEditorType.NONE;#o=new Set;#d=this.copy.bind(this);#g=this.cut.bind(this);#b=this.paste.bind(this);#v=this.keydown.bind(this);#C=this.onEditingAction.bind(this);#E=this.onPageChanging.bind(this);#T=this.onScaleChanging.bind(this);#y=this.onRotationChanging.bind(this);#A={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#p=null;static _keyboardManager=new c([[["ctrl+a","mac+meta+a"],_.prototype.selectAll],[["ctrl+z","mac+meta+z"],_.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],_.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],_.prototype.delete],[["Escape","mac+Escape"],_.prototype.unselectAll]]);constructor(s,h,b){this.#p=s,this.#a=h,this.#a._on("editingaction",this.#C),this.#a._on("pagechanging",this.#E),this.#a._on("scalechanging",this.#T),this.#a._on("rotationchanging",this.#y),this.#i=b,this.viewParameters={realScale:p.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#w(),this.#a._off("editingaction",this.#C),this.#a._off("pagechanging",this.#E),this.#a._off("scalechanging",this.#T),this.#a._off("rotationchanging",this.#y);for(const s of this.#n.values())s.destroy();this.#n.clear(),this.#t.clear(),this.#r.clear(),this.#e=null,this.#o.clear(),this.#s.destroy()}onPageChanging({pageNumber:s}){this.#l=s-1}focusMainContainer(){this.#p.focus()}addShouldRescale(s){this.#r.add(s)}removeShouldRescale(s){this.#r.delete(s)}onScaleChanging({scale:s}){this.commitOrRemove(),this.viewParameters.realScale=s*p.PixelsPerInch.PDF_TO_CSS_UNITS;for(const h of this.#r)h.onScaleChanging()}onRotationChanging({pagesRotation:s}){this.commitOrRemove(),this.viewParameters.rotation=s}addToAnnotationStorage(s){!s.isEmpty()&&this.#i&&!this.#i.has(s.id)&&this.#i.setValue(s.id,s)}#L(){this.#p.addEventListener("keydown",this.#v)}#w(){this.#p.removeEventListener("keydown",this.#v)}#_(){document.addEventListener("copy",this.#d),document.addEventListener("cut",this.#g),document.addEventListener("paste",this.#b)}#S(){document.removeEventListener("copy",this.#d),document.removeEventListener("cut",this.#g),document.removeEventListener("paste",this.#b)}copy(s){if(s.preventDefault(),this.#e&&this.#e.commitOrRemove(),!this.hasSelection)return;const h=[];for(const b of this.#o)b.isEmpty()||h.push(b.serialize());h.length!==0&&s.clipboardData.setData("application/pdfjs",JSON.stringify(h))}cut(s){this.copy(s),this.delete()}paste(s){s.preventDefault();let h=s.clipboardData.getData("application/pdfjs");if(!h)return;try{h=JSON.parse(h)}catch(d){(0,r.warn)(`paste: "${d.message}".`);return}if(!Array.isArray(h))return;this.unselectAll();const b=this.#n.get(this.#l);try{const d=[];for(const S of h){const A=b.deserialize(S);if(!A)return;d.push(A)}const f=()=>{for(const S of d)this.#x(S);this.#k(d)},L=()=>{for(const S of d)S.remove()};this.addCommands({cmd:f,undo:L,mustExec:!0})}catch(d){(0,r.warn)(`paste: "${d.message}".`)}}keydown(s){this.getActive()?.shouldGetKeyboardEvents()||_._keyboardManager.exec(this,s)}onEditingAction(s){["undo","redo","delete","selectAll"].includes(s.name)&&this[s.name]()}#m(s){Object.entries(s).some(([b,d])=>this.#A[b]!==d)&&this.#a.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#A,s)})}#P(s){this.#a.dispatch("annotationeditorparamschanged",{source:this,details:s})}setEditingState(s){s?(this.#L(),this.#_(),this.#m({isEditing:this.#f!==r.AnnotationEditorType.NONE,isEmpty:this.#M(),hasSomethingToUndo:this.#s.hasSomethingToUndo(),hasSomethingToRedo:this.#s.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#w(),this.#S(),this.#m({isEditing:!1}))}registerEditorTypes(s){if(!this.#u){this.#u=s;for(const h of this.#u)this.#P(h.defaultPropertiesToUpdate)}}getId(){return this.#h.getId()}get currentLayer(){return this.#n.get(this.#l)}get currentPageIndex(){return this.#l}addLayer(s){this.#n.set(s.pageIndex,s),this.#c?s.enable():s.disable()}removeLayer(s){this.#n.delete(s.pageIndex)}updateMode(s){if(this.#f=s,s===r.AnnotationEditorType.NONE)this.setEditingState(!1),this.#O();else{this.setEditingState(!0),this.#R();for(const h of this.#n.values())h.updateMode(s)}}updateToolbar(s){s!==this.#f&&this.#a.dispatch("switchannotationeditormode",{source:this,mode:s})}updateParams(s,h){if(this.#u){for(const b of this.#o)b.updateParams(s,h);for(const b of this.#u)b.updateDefaultParams(s,h)}}#R(){if(!this.#c){this.#c=!0;for(const s of this.#n.values())s.enable()}}#O(){if(this.unselectAll(),this.#c){this.#c=!1;for(const s of this.#n.values())s.disable()}}getEditors(s){const h=[];for(const b of this.#t.values())b.pageIndex===s&&h.push(b);return h}getEditor(s){return this.#t.get(s)}addEditor(s){this.#t.set(s.id,s)}removeEditor(s){this.#t.delete(s.id),this.unselect(s),this.#i?.remove(s.id)}#x(s){const h=this.#n.get(s.pageIndex);h?h.addOrRebuild(s):this.addEditor(s)}setActiveEditor(s){this.#e!==s&&(this.#e=s,s&&this.#P(s.propertiesToUpdate))}toggleSelected(s){if(this.#o.has(s)){this.#o.delete(s),s.unselect(),this.#m({hasSelectedEditor:this.hasSelection});return}this.#o.add(s),s.select(),this.#P(s.propertiesToUpdate),this.#m({hasSelectedEditor:!0})}setSelected(s){for(const h of this.#o)h!==s&&h.unselect();this.#o.clear(),this.#o.add(s),s.select(),this.#P(s.propertiesToUpdate),this.#m({hasSelectedEditor:!0})}isSelected(s){return this.#o.has(s)}unselect(s){s.unselect(),this.#o.delete(s),this.#m({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#o.size!==0}undo(){this.#s.undo(),this.#m({hasSomethingToUndo:this.#s.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#M()})}redo(){this.#s.redo(),this.#m({hasSomethingToUndo:!0,hasSomethingToRedo:this.#s.hasSomethingToRedo(),isEmpty:this.#M()})}addCommands(s){this.#s.add(s),this.#m({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#M()})}#M(){if(this.#t.size===0)return!0;if(this.#t.size===1)for(const s of this.#t.values())return s.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const s=[...this.#o],h=()=>{for(const d of s)d.remove()},b=()=>{for(const d of s)this.#x(d)};this.addCommands({cmd:h,undo:b,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}#k(s){this.#o.clear();for(const h of s)h.isEmpty()||(this.#o.add(h),h.select());this.#m({hasSelectedEditor:!0})}selectAll(){for(const s of this.#o)s.commit();this.#k(this.#t.values())}unselectAll(){if(this.#e){this.#e.commitOrRemove();return}if(this.#o.size!==0){for(const s of this.#o)s.unselect();this.#o.clear(),this.#m({hasSelectedEditor:!1})}}isActive(s){return this.#e===s}getActive(){return this.#e}getMode(){return this.#f}}e.AnnotationEditorUIManager=_}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=e.AnnotationPrefix=void 0,e.deprecated=C,e.getColorValues=W,e.getCurrentTransform=se,e.getCurrentTransformInverse=ne,e.getFilenameFromUrl=L,e.getPdfFilenameFromUrl=S,e.getRGB=$,e.getXfaPageViewport=D,e.isDataScheme=d,e.isPdfFile=f,e.isValidFetchUrl=n,e.loadScript=a,e.setLayerDimensions=q;var r=u(7),p=u(1);const w="http://www.w3.org/2000/svg",P="pdfjs_internal_id_";e.AnnotationPrefix=P;class y{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}e.PixelsPerInch=y;class E extends r.BaseFilterFactory{#e;#t;#n;#i;#s;#l;#u;#r=0;constructor({docId:I,ownerDocument:k=globalThis.document}={}){super(),this.#n=I,this.#i=k}get#a(){return this.#e||=new Map}get#h(){if(!this.#t){const I=this.#i.createElement("div"),{style:k}=I;k.visibility="hidden",k.contain="strict",k.width=k.height=0,k.position="absolute",k.top=k.left=0,k.zIndex=-1;const O=this.#i.createElementNS(w,"svg");O.setAttribute("width",0),O.setAttribute("height",0),this.#t=this.#i.createElementNS(w,"defs"),I.append(O),O.append(this.#t),this.#i.body.append(I)}return this.#t}#c(I,k,O){const m=this.#i.createElementNS(w,k);m.setAttribute("type","discrete"),m.setAttribute("tableValues",O),I.append(m)}addFilter(I){if(!I)return"none";let k=this.#a.get(I);if(k)return k;let O,m,l,M;if(I.length===1){const F=I[0],U=new Array(256);for(let H=0;H<256;H++)U[H]=F[H]/255;M=O=m=l=U.join(",")}else{const[F,U,H]=I,V=new Array(256),Y=new Array(256),Z=new Array(256);for(let X=0;X<256;X++)V[X]=F[X]/255,Y[X]=U[X]/255,Z[X]=H[X]/255;O=V.join(","),m=Y.join(","),l=Z.join(","),M=`${O}${m}${l}`}if(k=this.#a.get(M),k)return this.#a.set(I,k),k;const N=`g_${this.#n}_transfer_map_${this.#r++}`,o=`url(#${N})`;this.#a.set(I,o),this.#a.set(M,o);const v=this.#i.createElementNS(w,"filter",w);v.setAttribute("id",N),v.setAttribute("color-interpolation-filters","sRGB");const R=this.#i.createElementNS(w,"feComponentTransfer");return v.append(R),this.#c(R,"feFuncR",O),this.#c(R,"feFuncG",m),this.#c(R,"feFuncB",l),this.#h.append(v),o}addHCMFilter(I,k){const O=`${I}-${k}`;if(this.#l===O)return this.#u;if(this.#l=O,this.#u="none",this.#s?.remove(),!I||!k)return this.#u;this.#h.style.color=I,I=getComputedStyle(this.#h).getPropertyValue("color");const m=$(I);I=p.Util.makeHexColor(...m),this.#h.style.color=k,k=getComputedStyle(this.#h).getPropertyValue("color");const l=$(k);if(k=p.Util.makeHexColor(...l),this.#h.style.color="",I==="#000000"&&k==="#ffffff"||I===k)return this.#u;const M=new Array(256);for(let H=0;H<=255;H++){const V=H/255;M[H]=V<=.03928?V/12.92:((V+.055)/1.055)**2.4}const N=M.join(","),o=`g_${this.#n}_hcm_filter`,v=this.#s=this.#i.createElementNS(w,"filter",w);v.setAttribute("id",o),v.setAttribute("color-interpolation-filters","sRGB");let R=this.#i.createElementNS(w,"feComponentTransfer");v.append(R),this.#c(R,"feFuncR",N),this.#c(R,"feFuncG",N),this.#c(R,"feFuncB",N);const F=this.#i.createElementNS(w,"feColorMatrix");F.setAttribute("type","matrix"),F.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),v.append(F),R=this.#i.createElementNS(w,"feComponentTransfer"),v.append(R);const U=(H,V)=>{const Y=m[H]/255,Z=l[H]/255,X=new Array(V+1);for(let re=0;re<=V;re++)X[re]=Y+re/V*(Z-Y);return X.join(",")};return this.#c(R,"feFuncR",U(0,5)),this.#c(R,"feFuncG",U(1,5)),this.#c(R,"feFuncB",U(2,5)),this.#h.append(v),this.#u=`url(#${o})`,this.#u}destroy(I=!1){I&&this.#u||(this.#t&&(this.#t.parentNode.parentNode.remove(),this.#t=null),this.#e&&(this.#e.clear(),this.#e=null),this.#r=0)}}e.DOMFilterFactory=E;class c extends r.BaseCanvasFactory{constructor({ownerDocument:I=globalThis.document}={}){super(),this._document=I}_createCanvas(I,k){const O=this._document.createElement("canvas");return O.width=I,O.height=k,O}}e.DOMCanvasFactory=c;async function i(G,I=!1){if(n(G,document.baseURI)){const k=await fetch(G);if(!k.ok)throw new Error(k.statusText);return I?new Uint8Array(await k.arrayBuffer()):(0,p.stringToBytes)(await k.text())}return new Promise((k,O)=>{const m=new XMLHttpRequest;m.open("GET",G,!0),I&&(m.responseType="arraybuffer"),m.onreadystatechange=()=>{if(m.readyState===XMLHttpRequest.DONE){if(m.status===200||m.status===0){let l;if(I&&m.response?l=new Uint8Array(m.response):!I&&m.responseText&&(l=(0,p.stringToBytes)(m.responseText)),l){k(l);return}}O(new Error(m.statusText))}},m.send(null)})}class _ extends r.BaseCMapReaderFactory{_fetchData(I,k){return i(I,this.isCompressed).then(O=>({cMapData:O,compressionType:k}))}}e.DOMCMapReaderFactory=_;class g extends r.BaseStandardFontDataFactory{_fetchData(I){return i(I,!0)}}e.DOMStandardFontDataFactory=g;class s extends r.BaseSVGFactory{_createSVG(I){return document.createElementNS(w,I)}}e.DOMSVGFactory=s;class h{constructor({viewBox:I,scale:k,rotation:O,offsetX:m=0,offsetY:l=0,dontFlip:M=!1}){this.viewBox=I,this.scale=k,this.rotation=O,this.offsetX=m,this.offsetY=l;const N=(I[2]+I[0])/2,o=(I[3]+I[1])/2;let v,R,F,U;switch(O%=360,O<0&&(O+=360),O){case 180:v=-1,R=0,F=0,U=1;break;case 90:v=0,R=1,F=1,U=0;break;case 270:v=0,R=-1,F=-1,U=0;break;case 0:v=1,R=0,F=0,U=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}M&&(F=-F,U=-U);let H,V,Y,Z;v===0?(H=Math.abs(o-I[1])*k+m,V=Math.abs(N-I[0])*k+l,Y=(I[3]-I[1])*k,Z=(I[2]-I[0])*k):(H=Math.abs(N-I[0])*k+m,V=Math.abs(o-I[1])*k+l,Y=(I[2]-I[0])*k,Z=(I[3]-I[1])*k),this.transform=[v*k,R*k,F*k,U*k,H-v*k*N-F*k*o,V-R*k*N-U*k*o],this.width=Y,this.height=Z}get rawDims(){const{viewBox:I}=this;return(0,p.shadow)(this,"rawDims",{pageWidth:I[2]-I[0],pageHeight:I[3]-I[1],pageX:I[0],pageY:I[1]})}clone({scale:I=this.scale,rotation:k=this.rotation,offsetX:O=this.offsetX,offsetY:m=this.offsetY,dontFlip:l=!1}={}){return new h({viewBox:this.viewBox.slice(),scale:I,rotation:k,offsetX:O,offsetY:m,dontFlip:l})}convertToViewportPoint(I,k){return p.Util.applyTransform([I,k],this.transform)}convertToViewportRectangle(I){const k=p.Util.applyTransform([I[0],I[1]],this.transform),O=p.Util.applyTransform([I[2],I[3]],this.transform);return[k[0],k[1],O[0],O[1]]}convertToPdfPoint(I,k){return p.Util.applyInverseTransform([I,k],this.transform)}}e.PageViewport=h;class b extends p.BaseException{constructor(I,k,O=0){super(I,"RenderingCancelledException"),this.type=k,this.extraDelay=O}}e.RenderingCancelledException=b;function d(G){const I=G.length;let k=0;for(;k<I&&G[k].trim()==="";)k++;return G.substring(k,k+5).toLowerCase()==="data:"}function f(G){return typeof G=="string"&&/\.pdf$/i.test(G)}function L(G,I=!1){return I||([G]=G.split(/[#?]/,1)),G.substring(G.lastIndexOf("/")+1)}function S(G,I="document.pdf"){if(typeof G!="string")return I;if(d(G))return(0,p.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),I;const k=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,O=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,m=k.exec(G);let l=O.exec(m[1])||O.exec(m[2])||O.exec(m[3]);if(l&&(l=l[0],l.includes("%")))try{l=O.exec(decodeURIComponent(l))[0]}catch{}return l||I}class A{started=Object.create(null);times=[];time(I){I in this.started&&(0,p.warn)(`Timer is already running for ${I}`),this.started[I]=Date.now()}timeEnd(I){I in this.started||(0,p.warn)(`Timer has not been started for ${I}`),this.times.push({name:I,start:this.started[I],end:Date.now()}),delete this.started[I]}toString(){const I=[];let k=0;for(const{name:O}of this.times)k=Math.max(O.length,k);for(const{name:O,start:m,end:l}of this.times)I.push(`${O.padEnd(k)} ${l-m}ms
`);return I.join("")}}e.StatTimer=A;function n(G,I){try{const{protocol:k}=I?new URL(G,I):new URL(G);return k==="http:"||k==="https:"}catch{return!1}}function a(G,I=!1){return new Promise((k,O)=>{const m=document.createElement("script");m.src=G,m.onload=function(l){I&&m.remove(),k(l)},m.onerror=function(){O(new Error(`Cannot load script at: ${m.src}`))},(document.head||document.documentElement).append(m)})}function C(G){console.log("Deprecated API usage: "+G)}let x;class T{static toDateObject(I){if(!I||typeof I!="string")return null;x||(x=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const k=x.exec(I);if(!k)return null;const O=parseInt(k[1],10);let m=parseInt(k[2],10);m=m>=1&&m<=12?m-1:0;let l=parseInt(k[3],10);l=l>=1&&l<=31?l:1;let M=parseInt(k[4],10);M=M>=0&&M<=23?M:0;let N=parseInt(k[5],10);N=N>=0&&N<=59?N:0;let o=parseInt(k[6],10);o=o>=0&&o<=59?o:0;const v=k[7]||"Z";let R=parseInt(k[8],10);R=R>=0&&R<=23?R:0;let F=parseInt(k[9],10)||0;return F=F>=0&&F<=59?F:0,v==="-"?(M+=R,N+=F):v==="+"&&(M-=R,N-=F),new Date(Date.UTC(O,m,l,M,N,o))}}e.PDFDateString=T;function D(G,{scale:I=1,rotation:k=0}){const{width:O,height:m}=G.attributes.style,l=[0,0,parseInt(O),parseInt(m)];return new h({viewBox:l,scale:I,rotation:k})}function $(G){if(G.startsWith("#")){const I=parseInt(G.slice(1),16);return[(I&16711680)>>16,(I&65280)>>8,I&255]}return G.startsWith("rgb(")?G.slice(4,-1).split(",").map(I=>parseInt(I)):G.startsWith("rgba(")?G.slice(5,-1).split(",").map(I=>parseInt(I)).slice(0,3):((0,p.warn)(`Not a valid color format: "${G}"`),[0,0,0])}function W(G){const I=document.createElement("span");I.style.visibility="hidden",document.body.append(I);for(const k of G.keys()){I.style.color=k;const O=window.getComputedStyle(I).color;G.set(k,$(O))}I.remove()}function se(G){const{a:I,b:k,c:O,d:m,e:l,f:M}=G.getTransform();return[I,k,O,m,l,M]}function ne(G){const{a:I,b:k,c:O,d:m,e:l,f:M}=G.getTransform().invertSelf();return[I,k,O,m,l,M]}function q(G,I,k=!1,O=!0){if(I instanceof h){const{pageWidth:m,pageHeight:l}=I.rawDims,{style:M}=G,N=`calc(var(--scale-factor) * ${m}px)`,o=`calc(var(--scale-factor) * ${l}px)`;!k||I.rotation%180===0?(M.width=N,M.height=o):(M.width=o,M.height=N)}O&&G.setAttribute("data-main-rotation",I.rotation)}}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var r=u(1);class p{constructor(){this.constructor===p&&(0,r.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(i){return"none"}addHCMFilter(i,_){return"none"}destroy(i=!1){}}e.BaseFilterFactory=p;class w{constructor(){this.constructor===w&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(i,_){if(i<=0||_<=0)throw new Error("Invalid canvas size");const g=this._createCanvas(i,_);return{canvas:g,context:g.getContext("2d")}}reset(i,_,g){if(!i.canvas)throw new Error("Canvas is not specified");if(_<=0||g<=0)throw new Error("Invalid canvas size");i.canvas.width=_,i.canvas.height=g}destroy(i){if(!i.canvas)throw new Error("Canvas is not specified");i.canvas.width=0,i.canvas.height=0,i.canvas=null,i.context=null}_createCanvas(i,_){(0,r.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=w;class P{constructor({baseUrl:i=null,isCompressed:_=!0}){this.constructor===P&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=i,this.isCompressed=_}async fetch({name:i}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!i)throw new Error("CMap name must be specified.");const _=this.baseUrl+i+(this.isCompressed?".bcmap":""),g=this.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE;return this._fetchData(_,g).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${_}`)})}_fetchData(i,_){(0,r.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=P;class y{constructor({baseUrl:i=null}){this.constructor===y&&(0,r.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=i}async fetch({filename:i}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!i)throw new Error("Font filename must be specified.");const _=`${this.baseUrl}${i}`;return this._fetchData(_).catch(g=>{throw new Error(`Unable to load font data at: ${_}`)})}_fetchData(i){(0,r.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=y;class E{constructor(){this.constructor===E&&(0,r.unreachable)("Cannot initialize BaseSVGFactory.")}create(i,_,g=!1){if(i<=0||_<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),g||(s.setAttribute("width",`${i}px`),s.setAttribute("height",`${_}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${i} ${_}`),s}createElement(i){if(typeof i!="string")throw new Error("Invalid SVG element type");return this._createSVG(i)}_createSVG(i){(0,r.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=E}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var r=u(1);const p=3285377520,w=4294901760,P=65535;class y{constructor(c){this.h1=c?c&4294967295:p,this.h2=c?c&4294967295:p}update(c){let i,_;if(typeof c=="string"){i=new Uint8Array(c.length*2),_=0;for(let C=0,x=c.length;C<x;C++){const T=c.charCodeAt(C);T<=255?i[_++]=T:(i[_++]=T>>>8,i[_++]=T&255)}}else if((0,r.isArrayBuffer)(c))i=c.slice(),_=i.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const g=_>>2,s=_-g*4,h=new Uint32Array(i.buffer,0,g);let b=0,d=0,f=this.h1,L=this.h2;const S=3432918353,A=461845907,n=S&P,a=A&P;for(let C=0;C<g;C++)C&1?(b=h[C],b=b*S&w|b*n&P,b=b<<15|b>>>17,b=b*A&w|b*a&P,f^=b,f=f<<13|f>>>19,f=f*5+3864292196):(d=h[C],d=d*S&w|d*n&P,d=d<<15|d>>>17,d=d*A&w|d*a&P,L^=d,L=L<<13|L>>>19,L=L*5+3864292196);switch(b=0,s){case 3:b^=i[g*4+2]<<16;case 2:b^=i[g*4+1]<<8;case 1:b^=i[g*4],b=b*S&w|b*n&P,b=b<<15|b>>>17,b=b*A&w|b*a&P,g&1?f^=b:L^=b}this.h1=f,this.h2=L}hexdigest(){let c=this.h1,i=this.h2;return c^=i>>>1,c=c*3981806797&w|c*36045&P,i=i*4283543511&w|((i<<16|c>>>16)*2950163797&w)>>>16,c^=i>>>1,c=c*444984403&w|c*60499&P,i=i*3301882366&w|((i<<16|c>>>16)*3120437893&w)>>>16,c^=i>>>1,(c>>>0).toString(16).padStart(8,"0")+(i>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=y}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var r=u(1),p=u(10);class w{constructor({ownerDocument:E=globalThis.document,styleElement:c=null}){this._document=E,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(E){this.nativeFontFaces.push(E),this._document.fonts.add(E)}insertRule(E){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const c=this.styleElement.sheet;c.insertRule(E,c.cssRules.length)}clear(){for(const E of this.nativeFontFaces)this._document.fonts.delete(E);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(E){if(E.attached||E.missingFile)return;if(E.attached=!0,this.isFontLoadingAPISupported){const i=E.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(_){throw(0,r.warn)(`Failed to load font '${i.family}': '${_}'.`),E.disableFontFace=!0,_}}return}const c=E.createFontFaceRule();if(c){if(this.insertRule(c),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const _=this._queueLoadingCallback(i);this._prepareFontLoadEvent(E,_)})}}get isFontLoadingAPISupported(){const E=!!this._document?.fonts;return(0,r.shadow)(this,"isFontLoadingAPISupported",E)}get isSyncFontLoadingSupported(){let E=!1;return(p.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(E=!0),(0,r.shadow)(this,"isSyncFontLoadingSupported",E)}_queueLoadingCallback(E){function c(){for((0,r.assert)(!_.done,"completeRequest() cannot be called twice."),_.done=!0;i.length>0&&i[0].done;){const g=i.shift();setTimeout(g.callback,0)}}const{loadingRequests:i}=this,_={done:!1,complete:c,callback:E};return i.push(_),_}get _loadTestFont(){const E=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,r.shadow)(this,"_loadTestFont",E)}_prepareFontLoadEvent(E,c){function i($,W){return $.charCodeAt(W)<<24|$.charCodeAt(W+1)<<16|$.charCodeAt(W+2)<<8|$.charCodeAt(W+3)&255}function _($,W,se,ne){const q=$.substring(0,W),G=$.substring(W+se);return q+ne+G}let g,s;const h=this._document.createElement("canvas");h.width=1,h.height=1;const b=h.getContext("2d");let d=0;function f($,W){if(++d>30){(0,r.warn)("Load test font never loaded."),W();return}if(b.font="30px "+$,b.fillText(".",0,20),b.getImageData(0,0,1,1).data[3]>0){W();return}setTimeout(f.bind(null,$,W))}const L=`lt${Date.now()}${this.loadTestFontId++}`;let S=this._loadTestFont;S=_(S,976,L.length,L);const n=16,a=1482184792;let C=i(S,n);for(g=0,s=L.length-3;g<s;g+=4)C=C-a+i(L,g)|0;g<L.length&&(C=C-a+i(L+"XXX",g)|0),S=_(S,n,4,(0,r.string32)(C));const x=`url(data:font/opentype;base64,${btoa(S)});`,T=`@font-face {font-family:"${L}";src:${x}}`;this.insertRule(T);const D=this._document.createElement("div");D.style.visibility="hidden",D.style.width=D.style.height="10px",D.style.position="absolute",D.style.top=D.style.left="0px";for(const $ of[E.loadedName,L]){const W=this._document.createElement("span");W.textContent="Hi",W.style.fontFamily=$,D.append(W)}this._document.body.append(D),f(L,()=>{D.remove(),c.complete()})}}e.FontLoader=w;class P{constructor(E,{isEvalSupported:c=!0,disableFontFace:i=!1,ignoreErrors:_=!1,inspectFont:g=null}){this.compiledGlyphs=Object.create(null);for(const s in E)this[s]=E[s];this.isEvalSupported=c!==!1,this.disableFontFace=i===!0,this.ignoreErrors=_===!0,this._inspectFont=g}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let E;if(!this.cssFontInfo)E=new FontFace(this.loadedName,this.data,{});else{const c={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(c.style=`oblique ${this.cssFontInfo.italicAngle}deg`),E=new FontFace(this.cssFontInfo.fontFamily,this.data,c)}return this._inspectFont?.(this),E}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const E=(0,r.bytesToString)(this.data),c=`url(data:${this.mimetype};base64,${btoa(E)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${c}}`;else{let _=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(_+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${_}src:${c}}`}return this._inspectFont?.(this,c),i}getPathGenerator(E,c){if(this.compiledGlyphs[c]!==void 0)return this.compiledGlyphs[c];let i;try{i=E.get(this.loadedName+"_path_"+c)}catch(_){if(!this.ignoreErrors)throw _;return(0,r.warn)(`getPathGenerator - ignoring character: "${_}".`),this.compiledGlyphs[c]=function(g,s){}}if(this.isEvalSupported&&r.FeatureTest.isEvalSupported){const _=[];for(const g of i){const s=g.args!==void 0?g.args.join(","):"";_.push("c.",g.cmd,"(",s,`);
`)}return this.compiledGlyphs[c]=new Function("c","size",_.join(""))}return this.compiledGlyphs[c]=function(_,g){for(const s of i)s.cmd==="scale"&&(s.args=[g,-g]),_[s.cmd].apply(_,s.args)}}}e.FontFaceObject=P}),((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;const u=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=u}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var r=u(1),p=u(6),w=u(12),P=u(13),y=u(10);const E=16,c=100,i=4096,_=15,g=10,s=1e3,h=16;function b(O,m){if(O._removeMirroring)throw new Error("Context is already forwarding operations.");O.__originalSave=O.save,O.__originalRestore=O.restore,O.__originalRotate=O.rotate,O.__originalScale=O.scale,O.__originalTranslate=O.translate,O.__originalTransform=O.transform,O.__originalSetTransform=O.setTransform,O.__originalResetTransform=O.resetTransform,O.__originalClip=O.clip,O.__originalMoveTo=O.moveTo,O.__originalLineTo=O.lineTo,O.__originalBezierCurveTo=O.bezierCurveTo,O.__originalRect=O.rect,O.__originalClosePath=O.closePath,O.__originalBeginPath=O.beginPath,O._removeMirroring=()=>{O.save=O.__originalSave,O.restore=O.__originalRestore,O.rotate=O.__originalRotate,O.scale=O.__originalScale,O.translate=O.__originalTranslate,O.transform=O.__originalTransform,O.setTransform=O.__originalSetTransform,O.resetTransform=O.__originalResetTransform,O.clip=O.__originalClip,O.moveTo=O.__originalMoveTo,O.lineTo=O.__originalLineTo,O.bezierCurveTo=O.__originalBezierCurveTo,O.rect=O.__originalRect,O.closePath=O.__originalClosePath,O.beginPath=O.__originalBeginPath,delete O._removeMirroring},O.save=function(){m.save(),this.__originalSave()},O.restore=function(){m.restore(),this.__originalRestore()},O.translate=function(M,N){m.translate(M,N),this.__originalTranslate(M,N)},O.scale=function(M,N){m.scale(M,N),this.__originalScale(M,N)},O.transform=function(M,N,o,v,R,F){m.transform(M,N,o,v,R,F),this.__originalTransform(M,N,o,v,R,F)},O.setTransform=function(M,N,o,v,R,F){m.setTransform(M,N,o,v,R,F),this.__originalSetTransform(M,N,o,v,R,F)},O.resetTransform=function(){m.resetTransform(),this.__originalResetTransform()},O.rotate=function(M){m.rotate(M),this.__originalRotate(M)},O.clip=function(M){m.clip(M),this.__originalClip(M)},O.moveTo=function(l,M){m.moveTo(l,M),this.__originalMoveTo(l,M)},O.lineTo=function(l,M){m.lineTo(l,M),this.__originalLineTo(l,M)},O.bezierCurveTo=function(l,M,N,o,v,R){m.bezierCurveTo(l,M,N,o,v,R),this.__originalBezierCurveTo(l,M,N,o,v,R)},O.rect=function(l,M,N,o){m.rect(l,M,N,o),this.__originalRect(l,M,N,o)},O.closePath=function(){m.closePath(),this.__originalClosePath()},O.beginPath=function(){m.beginPath(),this.__originalBeginPath()}}class d{constructor(m){this.canvasFactory=m,this.cache=Object.create(null)}getCanvas(m,l,M){let N;return this.cache[m]!==void 0?(N=this.cache[m],this.canvasFactory.reset(N,l,M)):(N=this.canvasFactory.create(l,M),this.cache[m]=N),N}delete(m){delete this.cache[m]}clear(){for(const m in this.cache){const l=this.cache[m];this.canvasFactory.destroy(l),delete this.cache[m]}}}function f(O,m,l,M,N,o,v,R,F,U){const[H,V,Y,Z,X,re]=(0,p.getCurrentTransform)(O);if(V===0&&Y===0){const te=v*H+X,ae=Math.round(te),Q=R*Z+re,B=Math.round(Q),j=(v+F)*H+X,ee=Math.abs(Math.round(j)-ae)||1,oe=(R+U)*Z+re,fe=Math.abs(Math.round(oe)-B)||1;return O.setTransform(Math.sign(H),0,0,Math.sign(Z),ae,B),O.drawImage(m,l,M,N,o,0,0,ee,fe),O.setTransform(H,V,Y,Z,X,re),[ee,fe]}if(H===0&&Z===0){const te=R*Y+X,ae=Math.round(te),Q=v*V+re,B=Math.round(Q),j=(R+U)*Y+X,ee=Math.abs(Math.round(j)-ae)||1,oe=(v+F)*V+re,fe=Math.abs(Math.round(oe)-B)||1;return O.setTransform(0,Math.sign(V),Math.sign(Y),0,ae,B),O.drawImage(m,l,M,N,o,0,0,fe,ee),O.setTransform(H,V,Y,Z,X,re),[fe,ee]}O.drawImage(m,l,M,N,o,v,R,F,U);const ce=Math.hypot(H,V),z=Math.hypot(Y,Z);return[ce*F,z*U]}function L(O){const{width:m,height:l}=O;if(m>s||l>s)return null;const M=1e3,N=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=m+1;let v=new Uint8Array(o*(l+1)),R,F,U;const H=m+7&-8;let V=new Uint8Array(H*l),Y=0;for(const z of O.data){let te=128;for(;te>0;)V[Y++]=z&te?0:255,te>>=1}let Z=0;for(Y=0,V[Y]!==0&&(v[0]=1,++Z),F=1;F<m;F++)V[Y]!==V[Y+1]&&(v[F]=V[Y]?2:1,++Z),Y++;for(V[Y]!==0&&(v[F]=2,++Z),R=1;R<l;R++){Y=R*H,U=R*o,V[Y-H]!==V[Y]&&(v[U]=V[Y]?1:8,++Z);let z=(V[Y]?4:0)+(V[Y-H]?8:0);for(F=1;F<m;F++)z=(z>>2)+(V[Y+1]?4:0)+(V[Y-H+1]?8:0),N[z]&&(v[U+F]=N[z],++Z),Y++;if(V[Y-H]!==V[Y]&&(v[U+F]=V[Y]?2:4,++Z),Z>M)return null}for(Y=H*(l-1),U=R*o,V[Y]!==0&&(v[U]=8,++Z),F=1;F<m;F++)V[Y]!==V[Y+1]&&(v[U+F]=V[Y]?4:8,++Z),Y++;if(V[Y]!==0&&(v[U+F]=4,++Z),Z>M)return null;const X=new Int32Array([0,o,-1,0,-o,0,0,0,1]),re=new Path2D;for(R=0;Z&&R<=l;R++){let z=R*o;const te=z+m;for(;z<te&&!v[z];)z++;if(z===te)continue;re.moveTo(z%o,R);const ae=z;let Q=v[z];do{const B=X[Q];do z+=B;while(!v[z]);const j=v[z];j!==5&&j!==10?(Q=j,v[z]=0):(Q=j&51*Q>>4,v[z]&=Q>>2|Q<<2),re.lineTo(z%o,z/o|0),v[z]||--Z}while(ae!==z);--R}return V=null,v=null,function(z){z.save(),z.scale(1/m,-1/l),z.translate(0,-l),z.fill(re),z.beginPath(),z.restore()}}class S{constructor(m,l){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,m,l])}clone(){const m=Object.create(this);return m.clipBox=this.clipBox.slice(),m}setCurrentPoint(m,l){this.x=m,this.y=l}updatePathMinMax(m,l,M){[l,M]=r.Util.applyTransform([l,M],m),this.minX=Math.min(this.minX,l),this.minY=Math.min(this.minY,M),this.maxX=Math.max(this.maxX,l),this.maxY=Math.max(this.maxY,M)}updateRectMinMax(m,l){const M=r.Util.applyTransform(l,m),N=r.Util.applyTransform(l.slice(2),m);this.minX=Math.min(this.minX,M[0],N[0]),this.minY=Math.min(this.minY,M[1],N[1]),this.maxX=Math.max(this.maxX,M[0],N[0]),this.maxY=Math.max(this.maxY,M[1],N[1])}updateScalingPathMinMax(m,l){r.Util.scaleMinMax(m,l),this.minX=Math.min(this.minX,l[0]),this.maxX=Math.max(this.maxX,l[1]),this.minY=Math.min(this.minY,l[2]),this.maxY=Math.max(this.maxY,l[3])}updateCurvePathMinMax(m,l,M,N,o,v,R,F,U,H){const V=r.Util.bezierBoundingBox(l,M,N,o,v,R,F,U);if(H){H[0]=Math.min(H[0],V[0],V[2]),H[1]=Math.max(H[1],V[0],V[2]),H[2]=Math.min(H[2],V[1],V[3]),H[3]=Math.max(H[3],V[1],V[3]);return}this.updateRectMinMax(m,V)}getPathBoundingBox(m=w.PathType.FILL,l=null){const M=[this.minX,this.minY,this.maxX,this.maxY];if(m===w.PathType.STROKE){l||(0,r.unreachable)("Stroke bounding box must include transform.");const N=r.Util.singularValueDecompose2dScale(l),o=N[0]*this.lineWidth/2,v=N[1]*this.lineWidth/2;M[0]-=o,M[1]-=v,M[2]+=o,M[3]+=v}return M}updateClipFromPath(){const m=r.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(m||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(m){this.clipBox=m,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(m=w.PathType.FILL,l=null){return r.Util.intersect(this.clipBox,this.getPathBoundingBox(m,l))}}function A(O,m){if(typeof ImageData<"u"&&m instanceof ImageData){O.putImageData(m,0,0);return}const l=m.height,M=m.width,N=l%h,o=(l-N)/h,v=N===0?o:o+1,R=O.createImageData(M,h);let F=0,U;const H=m.data,V=R.data;let Y,Z,X,re;if(m.kind===r.ImageKind.GRAYSCALE_1BPP){const ce=H.byteLength,z=new Uint32Array(V.buffer,0,V.byteLength>>2),te=z.length,ae=M+7>>3,Q=4294967295,B=r.FeatureTest.isLittleEndian?4278190080:255;for(Y=0;Y<v;Y++){for(X=Y<o?h:N,U=0,Z=0;Z<X;Z++){const j=ce-F;let ee=0;const oe=j>ae?M:j*8-7,fe=oe&-8;let de=0,ie=0;for(;ee<fe;ee+=8)ie=H[F++],z[U++]=ie&128?Q:B,z[U++]=ie&64?Q:B,z[U++]=ie&32?Q:B,z[U++]=ie&16?Q:B,z[U++]=ie&8?Q:B,z[U++]=ie&4?Q:B,z[U++]=ie&2?Q:B,z[U++]=ie&1?Q:B;for(;ee<oe;ee++)de===0&&(ie=H[F++],de=128),z[U++]=ie&de?Q:B,de>>=1}for(;U<te;)z[U++]=0;O.putImageData(R,0,Y*h)}}else if(m.kind===r.ImageKind.RGBA_32BPP){for(Z=0,re=M*h*4,Y=0;Y<o;Y++)V.set(H.subarray(F,F+re)),F+=re,O.putImageData(R,0,Z),Z+=h;Y<v&&(re=M*N*4,V.set(H.subarray(F,F+re)),O.putImageData(R,0,Z))}else if(m.kind===r.ImageKind.RGB_24BPP)for(X=h,re=M*X,Y=0;Y<v;Y++){for(Y>=o&&(X=N,re=M*X),U=0,Z=re;Z--;)V[U++]=H[F++],V[U++]=H[F++],V[U++]=H[F++],V[U++]=255;O.putImageData(R,0,Y*h)}else throw new Error(`bad image kind: ${m.kind}`)}function n(O,m){if(m.bitmap){O.drawImage(m.bitmap,0,0);return}const l=m.height,M=m.width,N=l%h,o=(l-N)/h,v=N===0?o:o+1,R=O.createImageData(M,h);let F=0;const U=m.data,H=R.data;for(let V=0;V<v;V++){const Y=V<o?h:N;({srcPos:F}=(0,P.convertBlackAndWhiteToRGBA)({src:U,srcPos:F,dest:H,width:M,height:Y,nonBlackColor:0})),O.putImageData(R,0,V*h)}}function a(O,m){const l=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const M of l)O[M]!==void 0&&(m[M]=O[M]);O.setLineDash!==void 0&&(m.setLineDash(O.getLineDash()),m.lineDashOffset=O.lineDashOffset)}function C(O){O.strokeStyle=O.fillStyle="#000000",O.fillRule="nonzero",O.globalAlpha=1,O.lineWidth=1,O.lineCap="butt",O.lineJoin="miter",O.miterLimit=10,O.globalCompositeOperation="source-over",O.font="10px sans-serif",O.setLineDash!==void 0&&(O.setLineDash([]),O.lineDashOffset=0),y.isNodeJS||(O.filter="none")}function x(O,m,l,M){const N=O.length;for(let o=3;o<N;o+=4){const v=O[o];if(v===0)O[o-3]=m,O[o-2]=l,O[o-1]=M;else if(v<255){const R=255-v;O[o-3]=O[o-3]*v+m*R>>8,O[o-2]=O[o-2]*v+l*R>>8,O[o-1]=O[o-1]*v+M*R>>8}}}function T(O,m,l){const M=O.length,N=1/255;for(let o=3;o<M;o+=4){const v=l?l[O[o]]:O[o];m[o]=m[o]*v*N|0}}function D(O,m,l){const M=O.length;for(let N=3;N<M;N+=4){const o=O[N-3]*77+O[N-2]*152+O[N-1]*28;m[N]=l?m[N]*l[o>>8]>>8:m[N]*o>>16}}function $(O,m,l,M,N,o,v,R,F,U,H){const V=!!o,Y=V?o[0]:0,Z=V?o[1]:0,X=V?o[2]:0;let re;N==="Luminosity"?re=D:re=T;const z=Math.min(M,Math.ceil(1048576/l));for(let te=0;te<M;te+=z){const ae=Math.min(z,M-te),Q=O.getImageData(R-U,te+(F-H),l,ae),B=m.getImageData(R,te+F,l,ae);V&&x(Q.data,Y,Z,X),re(Q.data,B.data,v),m.putImageData(B,R,te+F)}}function W(O,m,l,M){const N=M[0],o=M[1],v=M[2]-N,R=M[3]-o;v===0||R===0||($(m.context,l,v,R,m.subtype,m.backdrop,m.transferMap,N,o,m.offsetX,m.offsetY),O.save(),O.globalAlpha=1,O.globalCompositeOperation="source-over",O.setTransform(1,0,0,1,0,0),O.drawImage(l.canvas,0,0),O.restore())}function se(O,m){const l=r.Util.singularValueDecompose2dScale(O);l[0]=Math.fround(l[0]),l[1]=Math.fround(l[1]);const M=Math.fround((globalThis.devicePixelRatio||1)*p.PixelsPerInch.PDF_TO_CSS_UNITS);return m!==void 0?m:l[0]<=M||l[1]<=M}const ne=["butt","round","square"],q=["miter","round","bevel"],G={},I={};class k{constructor(m,l,M,N,o,{optionalContentConfig:v,markedContentStack:R=null},F,U){this.ctx=m,this.current=new S(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=l,this.objs=M,this.canvasFactory=N,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=R||[],this.optionalContentConfig=v,this.cachedCanvases=new d(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=F,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=U,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(m,l=null){return typeof m=="string"?m.startsWith("g_")?this.commonObjs.get(m):this.objs.get(m):l}beginDrawing({transform:m,viewport:l,transparency:M=!1,background:N=null}){const o=this.ctx.canvas.width,v=this.ctx.canvas.height,R=this.ctx.fillStyle;if(this.ctx.fillStyle=N||"#ffffff",this.ctx.fillRect(0,0,o,v),this.ctx.fillStyle=R,M){const F=this.cachedCanvases.getCanvas("transparent",o,v);this.compositeCtx=this.ctx,this.transparentCanvas=F.canvas,this.ctx=F.context,this.ctx.save(),this.ctx.transform(...(0,p.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),C(this.ctx),m&&(this.ctx.transform(...m),this.outputScaleX=m[0],this.outputScaleY=m[0]),this.ctx.transform(...l.transform),this.viewportScale=l.scale,this.baseTransform=(0,p.getCurrentTransform)(this.ctx)}executeOperatorList(m,l,M,N){const o=m.argsArray,v=m.fnArray;let R=l||0;const F=o.length;if(F===R)return R;const U=F-R>g&&typeof M=="function",H=U?Date.now()+_:0;let V=0;const Y=this.commonObjs,Z=this.objs;let X;for(;;){if(N!==void 0&&R===N.nextBreakPoint)return N.breakIt(R,M),R;if(X=v[R],X!==r.OPS.dependency)this[X].apply(this,o[R]);else for(const re of o[R]){const ce=re.startsWith("g_")?Y:Z;if(!ce.has(re))return ce.get(re,M),R}if(R++,R===F)return R;if(U&&++V>g){if(Date.now()>H)return M(),R;V=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const m of this._cachedBitmapsMap.values()){for(const l of m.values())typeof HTMLCanvasElement<"u"&&l instanceof HTMLCanvasElement&&(l.width=l.height=0);m.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const m=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(m!=="none"){const l=this.ctx.filter;this.ctx.filter=m,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=l}}}_scaleImage(m,l){const M=m.width,N=m.height;let o=Math.max(Math.hypot(l[0],l[1]),1),v=Math.max(Math.hypot(l[2],l[3]),1),R=M,F=N,U="prescale1",H,V;for(;o>2&&R>1||v>2&&F>1;){let Y=R,Z=F;o>2&&R>1&&(Y=R>=16384?Math.floor(R/2)-1||1:Math.ceil(R/2),o/=R/Y),v>2&&F>1&&(Z=F>=16384?Math.floor(F/2)-1||1:Math.ceil(F)/2,v/=F/Z),H=this.cachedCanvases.getCanvas(U,Y,Z),V=H.context,V.clearRect(0,0,Y,Z),V.drawImage(m,0,0,R,F,0,0,Y,Z),m=H.canvas,R=Y,F=Z,U=U==="prescale1"?"prescale2":"prescale1"}return{img:m,paintWidth:R,paintHeight:F}}_createMaskCanvas(m){const l=this.ctx,{width:M,height:N}=m,o=this.current.fillColor,v=this.current.patternFill,R=(0,p.getCurrentTransform)(l);let F,U,H,V;if((m.bitmap||m.data)&&m.count>1){const ee=m.bitmap||m.data.buffer;U=JSON.stringify(v?R:[R.slice(0,4),o]),F=this._cachedBitmapsMap.get(ee),F||(F=new Map,this._cachedBitmapsMap.set(ee,F));const oe=F.get(U);if(oe&&!v){const fe=Math.round(Math.min(R[0],R[2])+R[4]),de=Math.round(Math.min(R[1],R[3])+R[5]);return{canvas:oe,offsetX:fe,offsetY:de}}H=oe}H||(V=this.cachedCanvases.getCanvas("maskCanvas",M,N),n(V.context,m));let Y=r.Util.transform(R,[1/M,0,0,-1/N,0,0]);Y=r.Util.transform(Y,[1,0,0,1,0,-N]);const Z=r.Util.applyTransform([0,0],Y),X=r.Util.applyTransform([M,N],Y),re=r.Util.normalizeRect([Z[0],Z[1],X[0],X[1]]),ce=Math.round(re[2]-re[0])||1,z=Math.round(re[3]-re[1])||1,te=this.cachedCanvases.getCanvas("fillCanvas",ce,z),ae=te.context,Q=Math.min(Z[0],X[0]),B=Math.min(Z[1],X[1]);ae.translate(-Q,-B),ae.transform(...Y),H||(H=this._scaleImage(V.canvas,(0,p.getCurrentTransformInverse)(ae)),H=H.img,F&&v&&F.set(U,H)),ae.imageSmoothingEnabled=se((0,p.getCurrentTransform)(ae),m.interpolate),f(ae,H,0,0,H.width,H.height,0,0,M,N),ae.globalCompositeOperation="source-in";const j=r.Util.transform((0,p.getCurrentTransformInverse)(ae),[1,0,0,1,-Q,-B]);return ae.fillStyle=v?o.getPattern(l,this,j,w.PathType.FILL):o,ae.fillRect(0,0,M,N),F&&!v&&(this.cachedCanvases.delete("fillCanvas"),F.set(U,te.canvas)),{canvas:te.canvas,offsetX:Math.round(Q),offsetY:Math.round(B)}}setLineWidth(m){m!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=m,this.ctx.lineWidth=m}setLineCap(m){this.ctx.lineCap=ne[m]}setLineJoin(m){this.ctx.lineJoin=q[m]}setMiterLimit(m){this.ctx.miterLimit=m}setDash(m,l){const M=this.ctx;M.setLineDash!==void 0&&(M.setLineDash(m),M.lineDashOffset=l)}setRenderingIntent(m){}setFlatness(m){}setGState(m){for(const[l,M]of m)switch(l){case"LW":this.setLineWidth(M);break;case"LC":this.setLineCap(M);break;case"LJ":this.setLineJoin(M);break;case"ML":this.setMiterLimit(M);break;case"D":this.setDash(M[0],M[1]);break;case"RI":this.setRenderingIntent(M);break;case"FL":this.setFlatness(M);break;case"Font":this.setFont(M[0],M[1]);break;case"CA":this.current.strokeAlpha=M;break;case"ca":this.current.fillAlpha=M,this.ctx.globalAlpha=M;break;case"BM":this.ctx.globalCompositeOperation=M;break;case"SMask":this.current.activeSMask=M?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(M);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const m=this.inSMaskMode;this.current.activeSMask&&!m?this.beginSMaskMode():!this.current.activeSMask&&m&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const m=this.ctx.canvas.width,l=this.ctx.canvas.height,M="smaskGroupAt"+this.groupLevel,N=this.cachedCanvases.getCanvas(M,m,l);this.suspendedCtx=this.ctx,this.ctx=N.context;const o=this.ctx;o.setTransform(...(0,p.getCurrentTransform)(this.suspendedCtx)),a(this.suspendedCtx,o),b(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),a(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(m){if(!this.current.activeSMask)return;m?(m[0]=Math.floor(m[0]),m[1]=Math.floor(m[1]),m[2]=Math.ceil(m[2]),m[3]=Math.ceil(m[3])):m=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const l=this.current.activeSMask,M=this.suspendedCtx;W(M,l,this.ctx,m),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(a(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const m=this.current;this.stateStack.push(m),this.current=m.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),a(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(m,l,M,N,o,v){this.ctx.transform(m,l,M,N,o,v),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(m,l,M){const N=this.ctx,o=this.current;let v=o.x,R=o.y,F,U;const H=(0,p.getCurrentTransform)(N),V=H[0]===0&&H[3]===0||H[1]===0&&H[2]===0,Y=V?M.slice(0):null;for(let Z=0,X=0,re=m.length;Z<re;Z++)switch(m[Z]|0){case r.OPS.rectangle:v=l[X++],R=l[X++];const ce=l[X++],z=l[X++],te=v+ce,ae=R+z;N.moveTo(v,R),ce===0||z===0?N.lineTo(te,ae):(N.lineTo(te,R),N.lineTo(te,ae),N.lineTo(v,ae)),V||o.updateRectMinMax(H,[v,R,te,ae]),N.closePath();break;case r.OPS.moveTo:v=l[X++],R=l[X++],N.moveTo(v,R),V||o.updatePathMinMax(H,v,R);break;case r.OPS.lineTo:v=l[X++],R=l[X++],N.lineTo(v,R),V||o.updatePathMinMax(H,v,R);break;case r.OPS.curveTo:F=v,U=R,v=l[X+4],R=l[X+5],N.bezierCurveTo(l[X],l[X+1],l[X+2],l[X+3],v,R),o.updateCurvePathMinMax(H,F,U,l[X],l[X+1],l[X+2],l[X+3],v,R,Y),X+=6;break;case r.OPS.curveTo2:F=v,U=R,N.bezierCurveTo(v,R,l[X],l[X+1],l[X+2],l[X+3]),o.updateCurvePathMinMax(H,F,U,v,R,l[X],l[X+1],l[X+2],l[X+3],Y),v=l[X+2],R=l[X+3],X+=4;break;case r.OPS.curveTo3:F=v,U=R,v=l[X+2],R=l[X+3],N.bezierCurveTo(l[X],l[X+1],v,R,v,R),o.updateCurvePathMinMax(H,F,U,l[X],l[X+1],v,R,v,R,Y),X+=4;break;case r.OPS.closePath:N.closePath();break}V&&o.updateScalingPathMinMax(H,Y),o.setCurrentPoint(v,R)}closePath(){this.ctx.closePath()}stroke(m=!0){const l=this.ctx,M=this.current.strokeColor;l.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof M=="object"&&M?.getPattern?(l.save(),l.strokeStyle=M.getPattern(l,this,(0,p.getCurrentTransformInverse)(l),w.PathType.STROKE),this.rescaleAndStroke(!1),l.restore()):this.rescaleAndStroke(!0)),m&&this.consumePath(this.current.getClippedPathBoundingBox()),l.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(m=!0){const l=this.ctx,M=this.current.fillColor,N=this.current.patternFill;let o=!1;N&&(l.save(),l.fillStyle=M.getPattern(l,this,(0,p.getCurrentTransformInverse)(l),w.PathType.FILL),o=!0);const v=this.current.getClippedPathBoundingBox();this.contentVisible&&v!==null&&(this.pendingEOFill?(l.fill("evenodd"),this.pendingEOFill=!1):l.fill()),o&&l.restore(),m&&this.consumePath(v)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=G}eoClip(){this.pendingClip=I}beginText(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const m=this.pendingTextPaths,l=this.ctx;if(m===void 0){l.beginPath();return}l.save(),l.beginPath();for(const M of m)l.setTransform(...M.transform),l.translate(M.x,M.y),M.addToPath(l,M.fontSize);l.restore(),l.clip(),l.beginPath(),delete this.pendingTextPaths}setCharSpacing(m){this.current.charSpacing=m}setWordSpacing(m){this.current.wordSpacing=m}setHScale(m){this.current.textHScale=m/100}setLeading(m){this.current.leading=-m}setFont(m,l){const M=this.commonObjs.get(m),N=this.current;if(!M)throw new Error(`Can't find font for ${m}`);if(N.fontMatrix=M.fontMatrix||r.FONT_IDENTITY_MATRIX,(N.fontMatrix[0]===0||N.fontMatrix[3]===0)&&(0,r.warn)("Invalid font matrix for font "+m),l<0?(l=-l,N.fontDirection=-1):N.fontDirection=1,this.current.font=M,this.current.fontSize=l,M.isType3Font)return;const o=M.loadedName||"sans-serif";let v="normal";M.black?v="900":M.bold&&(v="bold");const R=M.italic?"italic":"normal",F=`"${o}", ${M.fallbackName}`;let U=l;l<E?U=E:l>c&&(U=c),this.current.fontSizeScale=l/U,this.ctx.font=`${R} ${v} ${U}px ${F}`}setTextRenderingMode(m){this.current.textRenderingMode=m}setTextRise(m){this.current.textRise=m}moveText(m,l){this.current.x=this.current.lineX+=m,this.current.y=this.current.lineY+=l}setLeadingMoveText(m,l){this.setLeading(-l),this.moveText(m,l)}setTextMatrix(m,l,M,N,o,v){this.current.textMatrix=[m,l,M,N,o,v],this.current.textMatrixScale=Math.hypot(m,l),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(m,l,M,N){const o=this.ctx,v=this.current,R=v.font,F=v.textRenderingMode,U=v.fontSize/v.fontSizeScale,H=F&r.TextRenderingMode.FILL_STROKE_MASK,V=!!(F&r.TextRenderingMode.ADD_TO_PATH_FLAG),Y=v.patternFill&&!R.missingFile;let Z;(R.disableFontFace||V||Y)&&(Z=R.getPathGenerator(this.commonObjs,m)),R.disableFontFace||Y?(o.save(),o.translate(l,M),o.beginPath(),Z(o,U),N&&o.setTransform(...N),(H===r.TextRenderingMode.FILL||H===r.TextRenderingMode.FILL_STROKE)&&o.fill(),(H===r.TextRenderingMode.STROKE||H===r.TextRenderingMode.FILL_STROKE)&&o.stroke(),o.restore()):((H===r.TextRenderingMode.FILL||H===r.TextRenderingMode.FILL_STROKE)&&o.fillText(m,l,M),(H===r.TextRenderingMode.STROKE||H===r.TextRenderingMode.FILL_STROKE)&&o.strokeText(m,l,M)),V&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,p.getCurrentTransform)(o),x:l,y:M,fontSize:U,addToPath:Z})}get isFontSubpixelAAEnabled(){const{context:m}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);m.scale(1.5,1),m.fillText("I",0,10);const l=m.getImageData(0,0,10,10).data;let M=!1;for(let N=3;N<l.length;N+=4)if(l[N]>0&&l[N]<255){M=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",M)}showText(m){const l=this.current,M=l.font;if(M.isType3Font)return this.showType3Text(m);const N=l.fontSize;if(N===0)return;const o=this.ctx,v=l.fontSizeScale,R=l.charSpacing,F=l.wordSpacing,U=l.fontDirection,H=l.textHScale*U,V=m.length,Y=M.vertical,Z=Y?1:-1,X=M.defaultVMetrics,re=N*l.fontMatrix[0],ce=l.textRenderingMode===r.TextRenderingMode.FILL&&!M.disableFontFace&&!l.patternFill;o.save(),o.transform(...l.textMatrix),o.translate(l.x,l.y+l.textRise),U>0?o.scale(H,-1):o.scale(H,1);let z;if(l.patternFill){o.save();const j=l.fillColor.getPattern(o,this,(0,p.getCurrentTransformInverse)(o),w.PathType.FILL);z=(0,p.getCurrentTransform)(o),o.restore(),o.fillStyle=j}let te=l.lineWidth;const ae=l.textMatrixScale;if(ae===0||te===0){const j=l.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;(j===r.TextRenderingMode.STROKE||j===r.TextRenderingMode.FILL_STROKE)&&(te=this.getSinglePixelWidth())}else te/=ae;if(v!==1&&(o.scale(v,v),te/=v),o.lineWidth=te,M.isInvalidPDFjsFont){const j=[];let ee=0;for(const oe of m)j.push(oe.unicode),ee+=oe.width;o.fillText(j.join(""),0,0),l.x+=ee*re*H,o.restore(),this.compose();return}let Q=0,B;for(B=0;B<V;++B){const j=m[B];if(typeof j=="number"){Q+=Z*j*N/1e3;continue}let ee=!1;const oe=(j.isSpace?F:0)+R,fe=j.fontChar,de=j.accent;let ie,le,pe=j.width;if(Y){const _e=j.vmetric||X,ye=-(j.vmetric?_e[1]:pe*.5)*re,Se=_e[2]*re;pe=_e?-_e[0]:pe,ie=ye/v,le=(Q+Se)/v}else ie=Q/v,le=0;if(M.remeasure&&pe>0){const _e=o.measureText(fe).width*1e3/N*v;if(pe<_e&&this.isFontSubpixelAAEnabled){const ye=pe/_e;ee=!0,o.save(),o.scale(ye,1),ie/=ye}else pe!==_e&&(ie+=(pe-_e)/2e3*N/v)}if(this.contentVisible&&(j.isInFont||M.missingFile)){if(ce&&!de)o.fillText(fe,ie,le);else if(this.paintChar(fe,ie,le,z),de){const _e=ie+N*de.offset.x/v,ye=le-N*de.offset.y/v;this.paintChar(de.fontChar,_e,ye,z)}}let me;Y?me=pe*re-oe*U:me=pe*re+oe*U,Q+=me,ee&&o.restore()}Y?l.y-=Q:l.x+=Q*H,o.restore(),this.compose()}showType3Text(m){const l=this.ctx,M=this.current,N=M.font,o=M.fontSize,v=M.fontDirection,R=N.vertical?1:-1,F=M.charSpacing,U=M.wordSpacing,H=M.textHScale*v,V=M.fontMatrix||r.FONT_IDENTITY_MATRIX,Y=m.length,Z=M.textRenderingMode===r.TextRenderingMode.INVISIBLE;let X,re,ce,z;if(!(Z||o===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,l.save(),l.transform(...M.textMatrix),l.translate(M.x,M.y),l.scale(H,v),X=0;X<Y;++X){if(re=m[X],typeof re=="number"){z=R*re*o/1e3,this.ctx.translate(z,0),M.x+=z*H;continue}const te=(re.isSpace?U:0)+F,ae=N.charProcOperatorList[re.operatorListId];if(!ae){(0,r.warn)(`Type3 character "${re.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=re,this.save(),l.scale(o,o),l.transform(...V),this.executeOperatorList(ae),this.restore()),ce=r.Util.applyTransform([re.width,0],V)[0]*o+te,l.translate(ce,0),M.x+=ce*H}l.restore(),this.processingType3=null}}setCharWidth(m,l){}setCharWidthAndBounds(m,l,M,N,o,v){this.ctx.rect(M,N,o-M,v-N),this.ctx.clip(),this.endPath()}getColorN_Pattern(m){let l;if(m[0]==="TilingPattern"){const M=m[1],N=this.baseTransform||(0,p.getCurrentTransform)(this.ctx),o={createCanvasGraphics:v=>new k(v,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};l=new w.TilingPattern(m,M,this.ctx,o,N)}else l=this._getPattern(m[1],m[2]);return l}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(m,l,M){const N=r.Util.makeHexColor(m,l,M);this.ctx.strokeStyle=N,this.current.strokeColor=N}setFillRGBColor(m,l,M){const N=r.Util.makeHexColor(m,l,M);this.ctx.fillStyle=N,this.current.fillColor=N,this.current.patternFill=!1}_getPattern(m,l=null){let M;return this.cachedPatterns.has(m)?M=this.cachedPatterns.get(m):(M=(0,w.getShadingPattern)(this.getObject(m)),this.cachedPatterns.set(m,M)),l&&(M.matrix=l),M}shadingFill(m){if(!this.contentVisible)return;const l=this.ctx;this.save();const M=this._getPattern(m);l.fillStyle=M.getPattern(l,this,(0,p.getCurrentTransformInverse)(l),w.PathType.SHADING);const N=(0,p.getCurrentTransformInverse)(l);if(N){const o=l.canvas,v=o.width,R=o.height,F=r.Util.applyTransform([0,0],N),U=r.Util.applyTransform([0,R],N),H=r.Util.applyTransform([v,0],N),V=r.Util.applyTransform([v,R],N),Y=Math.min(F[0],U[0],H[0],V[0]),Z=Math.min(F[1],U[1],H[1],V[1]),X=Math.max(F[0],U[0],H[0],V[0]),re=Math.max(F[1],U[1],H[1],V[1]);this.ctx.fillRect(Y,Z,X-Y,re-Z)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,r.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,r.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(m,l){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(m)&&m.length===6&&this.transform(...m),this.baseTransform=(0,p.getCurrentTransform)(this.ctx),l)){const M=l[2]-l[0],N=l[3]-l[1];this.ctx.rect(l[0],l[1],M,N),this.current.updateRectMinMax((0,p.getCurrentTransform)(this.ctx),l),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(m){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const l=this.ctx;m.isolated||(0,r.info)("TODO: Support non-isolated groups."),m.knockout&&(0,r.warn)("Knockout groups not supported.");const M=(0,p.getCurrentTransform)(l);if(m.matrix&&l.transform(...m.matrix),!m.bbox)throw new Error("Bounding box is required.");let N=r.Util.getAxialAlignedBoundingBox(m.bbox,(0,p.getCurrentTransform)(l));const o=[0,0,l.canvas.width,l.canvas.height];N=r.Util.intersect(N,o)||[0,0,0,0];const v=Math.floor(N[0]),R=Math.floor(N[1]);let F=Math.max(Math.ceil(N[2])-v,1),U=Math.max(Math.ceil(N[3])-R,1),H=1,V=1;F>i&&(H=F/i,F=i),U>i&&(V=U/i,U=i),this.current.startNewPathAndClipBox([0,0,F,U]);let Y="groupAt"+this.groupLevel;m.smask&&(Y+="_smask_"+this.smaskCounter++%2);const Z=this.cachedCanvases.getCanvas(Y,F,U),X=Z.context;X.scale(1/H,1/V),X.translate(-v,-R),X.transform(...M),m.smask?this.smaskStack.push({canvas:Z.canvas,context:X,offsetX:v,offsetY:R,scaleX:H,scaleY:V,subtype:m.smask.subtype,backdrop:m.smask.backdrop,transferMap:m.smask.transferMap||null,startTransformInverse:null}):(l.setTransform(1,0,0,1,0,0),l.translate(v,R),l.scale(H,V),l.save()),a(l,X),this.ctx=X,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(l),this.groupLevel++}endGroup(m){if(!this.contentVisible)return;this.groupLevel--;const l=this.ctx,M=this.groupStack.pop();if(this.ctx=M,this.ctx.imageSmoothingEnabled=!1,m.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const N=(0,p.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...N);const o=r.Util.getAxialAlignedBoundingBox([0,0,l.canvas.width,l.canvas.height],N);this.ctx.drawImage(l.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(m,l,M,N,o){if(this.#e(),C(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(l)&&l.length===4){const v=l[2]-l[0],R=l[3]-l[1];if(o&&this.annotationCanvasMap){M=M.slice(),M[4]-=l[0],M[5]-=l[1],l=l.slice(),l[0]=l[1]=0,l[2]=v,l[3]=R;const[F,U]=r.Util.singularValueDecompose2dScale((0,p.getCurrentTransform)(this.ctx)),{viewportScale:H}=this,V=Math.ceil(v*this.outputScaleX*H),Y=Math.ceil(R*this.outputScaleY*H);this.annotationCanvas=this.canvasFactory.create(V,Y);const{canvas:Z,context:X}=this.annotationCanvas;this.annotationCanvasMap.set(m,Z),this.annotationCanvas.savedCtx=this.ctx,this.ctx=X,this.ctx.save(),this.ctx.setTransform(F,0,0,-U,0,R*U),C(this.ctx)}else C(this.ctx),this.ctx.rect(l[0],l[1],v,R),this.ctx.clip(),this.endPath()}this.current=new S(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...M),this.transform(...N)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(m){if(!this.contentVisible)return;const l=m.count;m=this.getObject(m.data,m),m.count=l;const M=this.ctx,N=this.processingType3;if(N&&(N.compiled===void 0&&(N.compiled=L(m)),N.compiled)){N.compiled(M);return}const o=this._createMaskCanvas(m),v=o.canvas;M.save(),M.setTransform(1,0,0,1,0,0),M.drawImage(v,o.offsetX,o.offsetY),M.restore(),this.compose()}paintImageMaskXObjectRepeat(m,l,M=0,N=0,o,v){if(!this.contentVisible)return;m=this.getObject(m.data,m);const R=this.ctx;R.save();const F=(0,p.getCurrentTransform)(R);R.transform(l,M,N,o,0,0);const U=this._createMaskCanvas(m);R.setTransform(1,0,0,1,U.offsetX-F[4],U.offsetY-F[5]);for(let H=0,V=v.length;H<V;H+=2){const Y=r.Util.transform(F,[l,M,N,o,v[H],v[H+1]]),[Z,X]=r.Util.applyTransform([0,0],Y);R.drawImage(U.canvas,Z,X)}R.restore(),this.compose()}paintImageMaskXObjectGroup(m){if(!this.contentVisible)return;const l=this.ctx,M=this.current.fillColor,N=this.current.patternFill;for(const o of m){const{data:v,width:R,height:F,transform:U}=o,H=this.cachedCanvases.getCanvas("maskCanvas",R,F),V=H.context;V.save();const Y=this.getObject(v,o);n(V,Y),V.globalCompositeOperation="source-in",V.fillStyle=N?M.getPattern(V,this,(0,p.getCurrentTransformInverse)(l),w.PathType.FILL):M,V.fillRect(0,0,R,F),V.restore(),l.save(),l.transform(...U),l.scale(1,-1),f(l,H.canvas,0,0,R,F,0,-1,1,1),l.restore()}this.compose()}paintImageXObject(m){if(!this.contentVisible)return;const l=this.getObject(m);if(!l){(0,r.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(l)}paintImageXObjectRepeat(m,l,M,N){if(!this.contentVisible)return;const o=this.getObject(m);if(!o){(0,r.warn)("Dependent image isn't ready yet");return}const v=o.width,R=o.height,F=[];for(let U=0,H=N.length;U<H;U+=2)F.push({transform:[l,0,0,M,N[U],N[U+1]],x:0,y:0,w:v,h:R});this.paintInlineImageXObjectGroup(o,F)}applyTransferMapsToCanvas(m){return this.current.transferMaps!=="none"&&(m.filter=this.current.transferMaps,m.drawImage(m.canvas,0,0),m.filter="none"),m.canvas}applyTransferMapsToBitmap(m){if(this.current.transferMaps==="none")return m.bitmap;const{bitmap:l,width:M,height:N}=m,o=this.cachedCanvases.getCanvas("inlineImage",M,N),v=o.context;return v.filter=this.current.transferMaps,v.drawImage(l,0,0),v.filter="none",o.canvas}paintInlineImageXObject(m){if(!this.contentVisible)return;const l=m.width,M=m.height,N=this.ctx;this.save(),y.isNodeJS||(N.filter="none"),N.scale(1/l,-1/M);let o;if(m.bitmap)o=this.applyTransferMapsToBitmap(m);else if(typeof HTMLElement=="function"&&m instanceof HTMLElement||!m.data)o=m;else{const F=this.cachedCanvases.getCanvas("inlineImage",l,M).context;A(F,m),o=this.applyTransferMapsToCanvas(F)}const v=this._scaleImage(o,(0,p.getCurrentTransformInverse)(N));N.imageSmoothingEnabled=se((0,p.getCurrentTransform)(N),m.interpolate),f(N,v.img,0,0,v.paintWidth,v.paintHeight,0,-M,l,M),this.compose(),this.restore()}paintInlineImageXObjectGroup(m,l){if(!this.contentVisible)return;const M=this.ctx;let N;if(m.bitmap)N=m.bitmap;else{const o=m.width,v=m.height,F=this.cachedCanvases.getCanvas("inlineImage",o,v).context;A(F,m),N=this.applyTransferMapsToCanvas(F)}for(const o of l)M.save(),M.transform(...o.transform),M.scale(1,-1),f(M,N,o.x,o.y,o.w,o.h,0,-1,1,1),M.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(m){}markPointProps(m,l){}beginMarkedContent(m){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(m,l){m==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(l)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(m){const l=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(m);const M=this.ctx;this.pendingClip&&(l||(this.pendingClip===I?M.clip("evenodd"):M.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),M.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const m=(0,p.getCurrentTransform)(this.ctx);if(m[1]===0&&m[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(m[0]),Math.abs(m[3]));else{const l=Math.abs(m[0]*m[3]-m[2]*m[1]),M=Math.hypot(m[0],m[2]),N=Math.hypot(m[1],m[3]);this._cachedGetSinglePixelWidth=Math.max(M,N)/l}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:m}=this.current,l=(0,p.getCurrentTransform)(this.ctx);let M,N;if(l[1]===0&&l[2]===0){const o=Math.abs(l[0]),v=Math.abs(l[3]);if(m===0)M=1/o,N=1/v;else{const R=o*m,F=v*m;M=R<1?1/R:1,N=F<1?1/F:1}}else{const o=Math.abs(l[0]*l[3]-l[2]*l[1]),v=Math.hypot(l[0],l[1]),R=Math.hypot(l[2],l[3]);if(m===0)M=R/o,N=v/o;else{const F=m*o;M=R>F?R/F:1,N=v>F?v/F:1}}this._cachedScaleForStroking=[M,N]}return this._cachedScaleForStroking}rescaleAndStroke(m){const{ctx:l}=this,{lineWidth:M}=this.current,[N,o]=this.getScaleForStroking();if(l.lineWidth=M||1,N===1&&o===1){l.stroke();return}let v,R,F;m&&(v=(0,p.getCurrentTransform)(l),R=l.getLineDash().slice(),F=l.lineDashOffset),l.scale(N,o);const U=Math.max(N,o);l.setLineDash(l.getLineDash().map(H=>H/U)),l.lineDashOffset/=U,l.stroke(),m&&(l.setTransform(...v),l.setLineDash(R),l.lineDashOffset=F)}isContentVisible(){for(let m=this.markedContentStack.length-1;m>=0;m--)if(!this.markedContentStack[m].visible)return!1;return!0}}e.CanvasGraphics=k;for(const O in r.OPS)k.prototype[O]!==void 0&&(k.prototype[r.OPS[O]]=k.prototype[O])}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=s;var r=u(1),p=u(6);const w={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=w;function P(d,f){if(!f)return;const L=f[2]-f[0],S=f[3]-f[1],A=new Path2D;A.rect(f[0],f[1],L,S),d.clip(A)}class y{constructor(){this.constructor===y&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class E extends y{constructor(f){super(),this._type=f[1],this._bbox=f[2],this._colorStops=f[3],this._p0=f[4],this._p1=f[5],this._r0=f[6],this._r1=f[7],this.matrix=null}_createGradient(f){let L;this._type==="axial"?L=f.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(L=f.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const S of this._colorStops)L.addColorStop(S[0],S[1]);return L}getPattern(f,L,S,A){let n;if(A===w.STROKE||A===w.FILL){const a=L.current.getClippedPathBoundingBox(A,(0,p.getCurrentTransform)(f))||[0,0,0,0],C=Math.ceil(a[2]-a[0])||1,x=Math.ceil(a[3]-a[1])||1,T=L.cachedCanvases.getCanvas("pattern",C,x,!0),D=T.context;D.clearRect(0,0,D.canvas.width,D.canvas.height),D.beginPath(),D.rect(0,0,D.canvas.width,D.canvas.height),D.translate(-a[0],-a[1]),S=r.Util.transform(S,[1,0,0,1,a[0],a[1]]),D.transform(...L.baseTransform),this.matrix&&D.transform(...this.matrix),P(D,this._bbox),D.fillStyle=this._createGradient(D),D.fill(),n=f.createPattern(T.canvas,"no-repeat");const $=new DOMMatrix(S);n.setTransform($)}else P(f,this._bbox),n=this._createGradient(f);return n}}function c(d,f,L,S,A,n,a,C){const x=f.coords,T=f.colors,D=d.data,$=d.width*4;let W;x[L+1]>x[S+1]&&(W=L,L=S,S=W,W=n,n=a,a=W),x[S+1]>x[A+1]&&(W=S,S=A,A=W,W=a,a=C,C=W),x[L+1]>x[S+1]&&(W=L,L=S,S=W,W=n,n=a,a=W);const se=(x[L]+f.offsetX)*f.scaleX,ne=(x[L+1]+f.offsetY)*f.scaleY,q=(x[S]+f.offsetX)*f.scaleX,G=(x[S+1]+f.offsetY)*f.scaleY,I=(x[A]+f.offsetX)*f.scaleX,k=(x[A+1]+f.offsetY)*f.scaleY;if(ne>=k)return;const O=T[n],m=T[n+1],l=T[n+2],M=T[a],N=T[a+1],o=T[a+2],v=T[C],R=T[C+1],F=T[C+2],U=Math.round(ne),H=Math.round(k);let V,Y,Z,X,re,ce,z,te;for(let ae=U;ae<=H;ae++){if(ae<G){let oe;ae<ne?oe=0:oe=(ne-ae)/(ne-G),V=se-(se-q)*oe,Y=O-(O-M)*oe,Z=m-(m-N)*oe,X=l-(l-o)*oe}else{let oe;ae>k?oe=1:G===k?oe=0:oe=(G-ae)/(G-k),V=q-(q-I)*oe,Y=M-(M-v)*oe,Z=N-(N-R)*oe,X=o-(o-F)*oe}let Q;ae<ne?Q=0:ae>k?Q=1:Q=(ne-ae)/(ne-k),re=se-(se-I)*Q,ce=O-(O-v)*Q,z=m-(m-R)*Q,te=l-(l-F)*Q;const B=Math.round(Math.min(V,re)),j=Math.round(Math.max(V,re));let ee=$*ae+B*4;for(let oe=B;oe<=j;oe++)Q=(V-oe)/(V-re),Q<0?Q=0:Q>1&&(Q=1),D[ee++]=Y-(Y-ce)*Q|0,D[ee++]=Z-(Z-z)*Q|0,D[ee++]=X-(X-te)*Q|0,D[ee++]=255}}function i(d,f,L){const S=f.coords,A=f.colors;let n,a;switch(f.type){case"lattice":const C=f.verticesPerRow,x=Math.floor(S.length/C)-1,T=C-1;for(n=0;n<x;n++){let D=n*C;for(let $=0;$<T;$++,D++)c(d,L,S[D],S[D+1],S[D+C],A[D],A[D+1],A[D+C]),c(d,L,S[D+C+1],S[D+1],S[D+C],A[D+C+1],A[D+1],A[D+C])}break;case"triangles":for(n=0,a=S.length;n<a;n+=3)c(d,L,S[n],S[n+1],S[n+2],A[n],A[n+1],A[n+2]);break;default:throw new Error("illegal figure")}}class _ extends y{constructor(f){super(),this._coords=f[2],this._colors=f[3],this._figures=f[4],this._bounds=f[5],this._bbox=f[7],this._background=f[8],this.matrix=null}_createMeshCanvas(f,L,S){const C=Math.floor(this._bounds[0]),x=Math.floor(this._bounds[1]),T=Math.ceil(this._bounds[2])-C,D=Math.ceil(this._bounds[3])-x,$=Math.min(Math.ceil(Math.abs(T*f[0]*1.1)),3e3),W=Math.min(Math.ceil(Math.abs(D*f[1]*1.1)),3e3),se=T/$,ne=D/W,q={coords:this._coords,colors:this._colors,offsetX:-C,offsetY:-x,scaleX:1/se,scaleY:1/ne},G=$+4,I=W+4,k=S.getCanvas("mesh",G,I,!1),O=k.context,m=O.createImageData($,W);if(L){const M=m.data;for(let N=0,o=M.length;N<o;N+=4)M[N]=L[0],M[N+1]=L[1],M[N+2]=L[2],M[N+3]=255}for(const M of this._figures)i(m,M,q);return O.putImageData(m,2,2),{canvas:k.canvas,offsetX:C-2*se,offsetY:x-2*ne,scaleX:se,scaleY:ne}}getPattern(f,L,S,A){P(f,this._bbox);let n;if(A===w.SHADING)n=r.Util.singularValueDecompose2dScale((0,p.getCurrentTransform)(f));else if(n=r.Util.singularValueDecompose2dScale(L.baseTransform),this.matrix){const C=r.Util.singularValueDecompose2dScale(this.matrix);n=[n[0]*C[0],n[1]*C[1]]}const a=this._createMeshCanvas(n,A===w.SHADING?null:this._background,L.cachedCanvases);return A!==w.SHADING&&(f.setTransform(...L.baseTransform),this.matrix&&f.transform(...this.matrix)),f.translate(a.offsetX,a.offsetY),f.scale(a.scaleX,a.scaleY),f.createPattern(a.canvas,"no-repeat")}}class g extends y{getPattern(){return"hotpink"}}function s(d){switch(d[0]){case"RadialAxial":return new E(d);case"Mesh":return new _(d);case"Dummy":return new g}throw new Error(`Unknown IR type: ${d[0]}`)}const h={COLORED:1,UNCOLORED:2};class b{static MAX_PATTERN_SIZE=3e3;constructor(f,L,S,A,n){this.operatorList=f[2],this.matrix=f[3]||[1,0,0,1,0,0],this.bbox=f[4],this.xstep=f[5],this.ystep=f[6],this.paintType=f[7],this.tilingType=f[8],this.color=L,this.ctx=S,this.canvasGraphicsFactory=A,this.baseTransform=n}createPatternCanvas(f){const L=this.operatorList,S=this.bbox,A=this.xstep,n=this.ystep,a=this.paintType,C=this.tilingType,x=this.color,T=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+C);const D=S[0],$=S[1],W=S[2],se=S[3],ne=r.Util.singularValueDecompose2dScale(this.matrix),q=r.Util.singularValueDecompose2dScale(this.baseTransform),G=[ne[0]*q[0],ne[1]*q[1]],I=this.getSizeAndScale(A,this.ctx.canvas.width,G[0]),k=this.getSizeAndScale(n,this.ctx.canvas.height,G[1]),O=f.cachedCanvases.getCanvas("pattern",I.size,k.size,!0),m=O.context,l=T.createCanvasGraphics(m);l.groupLevel=f.groupLevel,this.setFillAndStrokeStyleToContext(l,a,x);let M=D,N=$,o=W,v=se;return D<0&&(M=0,o+=Math.abs(D)),$<0&&(N=0,v+=Math.abs($)),m.translate(-(I.scale*M),-(k.scale*N)),l.transform(I.scale,0,0,k.scale,0,0),m.save(),this.clipBbox(l,M,N,o,v),l.baseTransform=(0,p.getCurrentTransform)(l.ctx),l.executeOperatorList(L),l.endDrawing(),{canvas:O.canvas,scaleX:I.scale,scaleY:k.scale,offsetX:M,offsetY:N}}getSizeAndScale(f,L,S){f=Math.abs(f);const A=Math.max(b.MAX_PATTERN_SIZE,L);let n=Math.ceil(f*S);return n>=A?n=A:S=n/f,{scale:S,size:n}}clipBbox(f,L,S,A,n){const a=A-L,C=n-S;f.ctx.rect(L,S,a,C),f.current.updateRectMinMax((0,p.getCurrentTransform)(f.ctx),[L,S,A,n]),f.clip(),f.endPath()}setFillAndStrokeStyleToContext(f,L,S){const A=f.ctx,n=f.current;switch(L){case h.COLORED:const a=this.ctx;A.fillStyle=a.fillStyle,A.strokeStyle=a.strokeStyle,n.fillColor=a.fillStyle,n.strokeColor=a.strokeStyle;break;case h.UNCOLORED:const C=r.Util.makeHexColor(S[0],S[1],S[2]);A.fillStyle=C,A.strokeStyle=C,n.fillColor=C,n.strokeColor=C;break;default:throw new r.FormatError(`Unsupported paint type: ${L}`)}}getPattern(f,L,S,A){let n=S;A!==w.SHADING&&(n=r.Util.transform(n,L.baseTransform),this.matrix&&(n=r.Util.transform(n,this.matrix)));const a=this.createPatternCanvas(L);let C=new DOMMatrix(n);C=C.translate(a.offsetX,a.offsetY),C=C.scale(1/a.scaleX,1/a.scaleY);const x=f.createPattern(a.canvas,"repeat");return x.setTransform(C),x}}e.TilingPattern=b}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=w,e.convertToRGBA=p,e.grayToRGBA=y;var r=u(1);function p(E){switch(E.kind){case r.ImageKind.GRAYSCALE_1BPP:return w(E);case r.ImageKind.RGB_24BPP:return P(E)}return null}function w({src:E,srcPos:c=0,dest:i,width:_,height:g,nonBlackColor:s=4294967295,inverseDecode:h=!1}){const b=r.FeatureTest.isLittleEndian?4278190080:255,[d,f]=h?[s,b]:[b,s],L=_>>3,S=_&7,A=E.length;i=new Uint32Array(i.buffer);let n=0;for(let a=0;a<g;a++){for(const x=c+L;c<x;c++){const T=c<A?E[c]:255;i[n++]=T&128?f:d,i[n++]=T&64?f:d,i[n++]=T&32?f:d,i[n++]=T&16?f:d,i[n++]=T&8?f:d,i[n++]=T&4?f:d,i[n++]=T&2?f:d,i[n++]=T&1?f:d}if(S===0)continue;const C=c<A?E[c++]:255;for(let x=0;x<S;x++)i[n++]=C&1<<7-x?f:d}return{srcPos:c,destPos:n}}function P({src:E,srcPos:c=0,dest:i,destPos:_=0,width:g,height:s}){let h=0;const b=E.length>>2,d=new Uint32Array(E.buffer,c,b);if(r.FeatureTest.isLittleEndian){for(;h<b-2;h+=3,_+=4){const f=d[h],L=d[h+1],S=d[h+2];i[_]=f|4278190080,i[_+1]=f>>>24|L<<8|4278190080,i[_+2]=L>>>16|S<<16|4278190080,i[_+3]=S>>>8|4278190080}for(let f=h*4,L=E.length;f<L;f+=3)i[_++]=E[f]|E[f+1]<<8|E[f+2]<<16|4278190080}else{for(;h<b-2;h+=3,_+=4){const f=d[h],L=d[h+1],S=d[h+2];i[_]=f|255,i[_+1]=f<<24|L>>>8|255,i[_+2]=L<<16|S>>>16|255,i[_+3]=S<<8|255}for(let f=h*4,L=E.length;f<L;f+=3)i[_++]=E[f]<<24|E[f+1]<<16|E[f+2]<<8|255}return{srcPos:c,destPos:_}}function y(E,c){if(r.FeatureTest.isLittleEndian)for(let i=0,_=E.length;i<_;i++)c[i]=E[i]*65793|4278190080;else for(let i=0,_=E.length;i<_;i++)c[i]=E[i]*16843008|255}}),((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const u=Object.create(null);e.GlobalWorkerOptions=u,u.workerPort=null,u.workerSrc=""}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var r=u(1);const p={DATA:1,ERROR:2},w={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function P(E){switch(E instanceof Error||typeof E=="object"&&E!==null||(0,r.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),E.name){case"AbortException":return new r.AbortException(E.message);case"MissingPDFException":return new r.MissingPDFException(E.message);case"PasswordException":return new r.PasswordException(E.message,E.code);case"UnexpectedResponseException":return new r.UnexpectedResponseException(E.message,E.status);case"UnknownErrorException":return new r.UnknownErrorException(E.message,E.details);default:return new r.UnknownErrorException(E.message,E.toString())}}class y{constructor(c,i,_){this.sourceName=c,this.targetName=i,this.comObj=_,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=g=>{const s=g.data;if(s.targetName!==this.sourceName)return;if(s.stream){this.#t(s);return}if(s.callback){const b=s.callbackId,d=this.callbackCapabilities[b];if(!d)throw new Error(`Cannot resolve callback ${b}`);if(delete this.callbackCapabilities[b],s.callback===p.DATA)d.resolve(s.data);else if(s.callback===p.ERROR)d.reject(P(s.reason));else throw new Error("Unexpected callback case");return}const h=this.actionHandler[s.action];if(!h)throw new Error(`Unknown action from worker: ${s.action}`);if(s.callbackId){const b=this.sourceName,d=s.sourceName;new Promise(function(f){f(h(s.data))}).then(function(f){_.postMessage({sourceName:b,targetName:d,callback:p.DATA,callbackId:s.callbackId,data:f})},function(f){_.postMessage({sourceName:b,targetName:d,callback:p.ERROR,callbackId:s.callbackId,reason:P(f)})});return}if(s.streamId){this.#e(s);return}h(s.data)},_.addEventListener("message",this._onComObjOnMessage)}on(c,i){const _=this.actionHandler;if(_[c])throw new Error(`There is already an actionName called "${c}"`);_[c]=i}send(c,i,_){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:c,data:i},_)}sendWithPromise(c,i,_){const g=this.callbackId++,s=new r.PromiseCapability;this.callbackCapabilities[g]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:c,callbackId:g,data:i},_)}catch(h){s.reject(h)}return s.promise}sendWithStream(c,i,_,g){const s=this.streamId++,h=this.sourceName,b=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const L=new r.PromiseCapability;return this.streamControllers[s]={controller:f,startCall:L,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:h,targetName:b,action:c,streamId:s,data:i,desiredSize:f.desiredSize},g),L.promise},pull:f=>{const L=new r.PromiseCapability;return this.streamControllers[s].pullCall=L,d.postMessage({sourceName:h,targetName:b,stream:w.PULL,streamId:s,desiredSize:f.desiredSize}),L.promise},cancel:f=>{(0,r.assert)(f instanceof Error,"cancel must have a valid reason");const L=new r.PromiseCapability;return this.streamControllers[s].cancelCall=L,this.streamControllers[s].isClosed=!0,d.postMessage({sourceName:h,targetName:b,stream:w.CANCEL,streamId:s,reason:P(f)}),L.promise}},_)}#e(c){const i=c.streamId,_=this.sourceName,g=c.sourceName,s=this.comObj,h=this,b=this.actionHandler[c.action],d={enqueue(f,L=1,S){if(this.isCancelled)return;const A=this.desiredSize;this.desiredSize-=L,A>0&&this.desiredSize<=0&&(this.sinkCapability=new r.PromiseCapability,this.ready=this.sinkCapability.promise),s.postMessage({sourceName:_,targetName:g,stream:w.ENQUEUE,streamId:i,chunk:f},S)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:_,targetName:g,stream:w.CLOSE,streamId:i}),delete h.streamSinks[i])},error(f){(0,r.assert)(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:_,targetName:g,stream:w.ERROR,streamId:i,reason:P(f)}))},sinkCapability:new r.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:c.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[i]=d,new Promise(function(f){f(b(c.data,d))}).then(function(){s.postMessage({sourceName:_,targetName:g,stream:w.START_COMPLETE,streamId:i,success:!0})},function(f){s.postMessage({sourceName:_,targetName:g,stream:w.START_COMPLETE,streamId:i,reason:P(f)})})}#t(c){const i=c.streamId,_=this.sourceName,g=c.sourceName,s=this.comObj,h=this.streamControllers[i],b=this.streamSinks[i];switch(c.stream){case w.START_COMPLETE:c.success?h.startCall.resolve():h.startCall.reject(P(c.reason));break;case w.PULL_COMPLETE:c.success?h.pullCall.resolve():h.pullCall.reject(P(c.reason));break;case w.PULL:if(!b){s.postMessage({sourceName:_,targetName:g,stream:w.PULL_COMPLETE,streamId:i,success:!0});break}b.desiredSize<=0&&c.desiredSize>0&&b.sinkCapability.resolve(),b.desiredSize=c.desiredSize,new Promise(function(d){d(b.onPull?.())}).then(function(){s.postMessage({sourceName:_,targetName:g,stream:w.PULL_COMPLETE,streamId:i,success:!0})},function(d){s.postMessage({sourceName:_,targetName:g,stream:w.PULL_COMPLETE,streamId:i,reason:P(d)})});break;case w.ENQUEUE:if((0,r.assert)(h,"enqueue should have stream controller"),h.isClosed)break;h.controller.enqueue(c.chunk);break;case w.CLOSE:if((0,r.assert)(h,"close should have stream controller"),h.isClosed)break;h.isClosed=!0,h.controller.close(),this.#n(h,i);break;case w.ERROR:(0,r.assert)(h,"error should have stream controller"),h.controller.error(P(c.reason)),this.#n(h,i);break;case w.CANCEL_COMPLETE:c.success?h.cancelCall.resolve():h.cancelCall.reject(P(c.reason)),this.#n(h,i);break;case w.CANCEL:if(!b)break;new Promise(function(d){d(b.onCancel?.(P(c.reason)))}).then(function(){s.postMessage({sourceName:_,targetName:g,stream:w.CANCEL_COMPLETE,streamId:i,success:!0})},function(d){s.postMessage({sourceName:_,targetName:g,stream:w.CANCEL_COMPLETE,streamId:i,reason:P(d)})}),b.sinkCapability.reject(P(c.reason)),b.isCancelled=!0,delete this.streamSinks[i];break;default:throw new Error("Unexpected stream case")}}async#n(c,i){await Promise.allSettled([c.startCall?.promise,c.pullCall?.promise,c.cancelCall?.promise]),delete this.streamControllers[i]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}e.MessageHandler=y}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var r=u(1);class p{#e;#t;constructor({parsedData:P,rawData:y}){this.#e=P,this.#t=y}getRaw(){return this.#t}get(P){return this.#e.get(P)??null}getAll(){return(0,r.objectFromMap)(this.#e)}has(P){return this.#e.has(P)}}e.Metadata=p}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var r=u(1),p=u(8);const w=Symbol("INTERNAL");class P{#e=!0;constructor(c,i){this.name=c,this.intent=i}get visible(){return this.#e}_setVisible(c,i){c!==w&&(0,r.unreachable)("Internal method `_setVisible` called."),this.#e=i}}class y{#e=null;#t=new Map;#n=null;#i=null;constructor(c){if(this.name=null,this.creator=null,c!==null){this.name=c.name,this.creator=c.creator,this.#i=c.order;for(const i of c.groups)this.#t.set(i.id,new P(i.name,i.intent));if(c.baseState==="OFF")for(const i of this.#t.values())i._setVisible(w,!1);for(const i of c.on)this.#t.get(i)._setVisible(w,!0);for(const i of c.off)this.#t.get(i)._setVisible(w,!1);this.#n=this.getHash()}}#s(c){const i=c.length;if(i<2)return!0;const _=c[0];for(let g=1;g<i;g++){const s=c[g];let h;if(Array.isArray(s))h=this.#s(s);else if(this.#t.has(s))h=this.#t.get(s).visible;else return(0,r.warn)(`Optional content group not found: ${s}`),!0;switch(_){case"And":if(!h)return!1;break;case"Or":if(h)return!0;break;case"Not":return!h;default:return!0}}return _==="And"}isVisible(c){if(this.#t.size===0)return!0;if(!c)return(0,r.warn)("Optional content group not defined."),!0;if(c.type==="OCG")return this.#t.has(c.id)?this.#t.get(c.id).visible:((0,r.warn)(`Optional content group not found: ${c.id}`),!0);if(c.type==="OCMD"){if(c.expression)return this.#s(c.expression);if(!c.policy||c.policy==="AnyOn"){for(const i of c.ids){if(!this.#t.has(i))return(0,r.warn)(`Optional content group not found: ${i}`),!0;if(this.#t.get(i).visible)return!0}return!1}else if(c.policy==="AllOn"){for(const i of c.ids){if(!this.#t.has(i))return(0,r.warn)(`Optional content group not found: ${i}`),!0;if(!this.#t.get(i).visible)return!1}return!0}else if(c.policy==="AnyOff"){for(const i of c.ids){if(!this.#t.has(i))return(0,r.warn)(`Optional content group not found: ${i}`),!0;if(!this.#t.get(i).visible)return!0}return!1}else if(c.policy==="AllOff"){for(const i of c.ids){if(!this.#t.has(i))return(0,r.warn)(`Optional content group not found: ${i}`),!0;if(this.#t.get(i).visible)return!1}return!0}return(0,r.warn)(`Unknown optional content policy ${c.policy}.`),!0}return(0,r.warn)(`Unknown group type ${c.type}.`),!0}setVisibility(c,i=!0){if(!this.#t.has(c)){(0,r.warn)(`Optional content group not found: ${c}`);return}this.#t.get(c)._setVisible(w,!!i),this.#e=null}get hasInitialVisibility(){return this.getHash()===this.#n}getOrder(){return this.#t.size?this.#i?this.#i.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?(0,r.objectFromMap)(this.#t):null}getGroup(c){return this.#t.get(c)||null}getHash(){if(this.#e!==null)return this.#e;const c=new p.MurmurHash3_64;for(const[i,_]of this.#t)c.update(`${i}:${_.visible}`);return this.#e=c.hexdigest()}}e.OptionalContentConfig=y}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var r=u(1),p=u(6);class w{constructor({length:c,initialData:i,progressiveDone:_=!1,contentDispositionFilename:g=null,disableRange:s=!1,disableStream:h=!1},b){if((0,r.assert)(b,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=_,this._contentDispositionFilename=g,i?.length>0){const d=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=b,this._isStreamingSupported=!h,this._isRangeSupported=!s,this._contentLength=c,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),this._pdfDataRangeTransport.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),this._pdfDataRangeTransport.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:c,chunk:i}){const _=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;if(c===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(_):this._queuedChunks.push(_);else{const g=this._rangeReaders.some(function(s){return s._begin!==c?!1:(s._enqueue(_),!0)});(0,r.assert)(g,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(c){c.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:c.loaded}):this._fullRequestReader?.onProgress?.({loaded:c.loaded,total:c.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(c){const i=this._rangeReaders.indexOf(c);i>=0&&this._rangeReaders.splice(i,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const c=this._queuedChunks;return this._queuedChunks=null,new P(this,c,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(c,i){if(i<=this._progressiveDataLength)return null;const _=new y(this,c,i);return this._pdfDataRangeTransport.requestDataRange(c,i),this._rangeReaders.push(_),_}cancelAllRequests(c){this._fullRequestReader?.cancel(c);for(const i of this._rangeReaders.slice(0))i.cancel(c);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=w;class P{constructor(c,i,_=!1,g=null){this._stream=c,this._done=_||!1,this._filename=(0,p.isPdfFile)(g)?g:null,this._queuedChunks=i||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),c._fullRequestReader=this,this.onProgress=null}_enqueue(c){this._done||(this._requests.length>0?this._requests.shift().resolve({value:c,done:!1}):this._queuedChunks.push(c),this._loaded+=c.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const c=new r.PromiseCapability;return this._requests.push(c),c.promise}cancel(c){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class y{constructor(c,i,_){this._stream=c,this._begin=i,this._end=_,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(c){if(!this._done){if(this._requests.length===0)this._queuedChunk=c;else{this._requests.shift().resolve({value:c,done:!1});for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const c=new r.PromiseCapability;return this._requests.push(c),c.promise}cancel(c){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class u{static textContent(p){const w=[],P={items:w,styles:Object.create(null)};function y(E){if(!E)return;let c=null;const i=E.name;if(i==="#text")c=E.value;else if(u.shouldBuildText(i))E?.attributes?.textContent?c=E.attributes.textContent:E.value&&(c=E.value);else return;if(c!==null&&w.push({str:c}),!!E.children)for(const _ of E.children)y(_)}return y(p),P}static shouldBuildText(p){return!(p==="textarea"||p==="input"||p==="option"||p==="select")}}e.XfaText=u}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var r=u(7);const p=function(c){return new Promise((i,_)=>{require$$5.readFile(c,(s,h)=>{if(s||!h){_(new Error(s));return}i(new Uint8Array(h))})})};class w extends r.BaseFilterFactory{}e.NodeFilterFactory=w;class P extends r.BaseCanvasFactory{_createCanvas(i,_){return require$$5.createCanvas(i,_)}}e.NodeCanvasFactory=P;class y extends r.BaseCMapReaderFactory{_fetchData(i,_){return p(i).then(g=>({cMapData:g,compressionType:_}))}}e.NodeCMapReaderFactory=y;class E extends r.BaseStandardFontDataFactory{_fetchData(i){return p(i)}}e.NodeStandardFontDataFactory=E}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var r=u(1),p=u(22);const w=require$$5,P=require$$5,y=require$$5,E=require$$5,c=/^file:\/\/\/[a-zA-Z]:\//;function i(S){const A=E.parse(S);return A.protocol==="file:"||A.host?A:/^[a-z]:[/\\]/i.test(S)?E.parse(`file:///${S}`):(A.host||(A.protocol="file:"),A)}class _{constructor(A){this.source=A,this.url=i(A.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&A.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new f(this):new b(this),this._fullRequestReader}getRangeReader(A,n){if(n<=this._progressiveDataLength)return null;const a=this.isFsUrl?new L(this,A,n):new d(this,A,n);return this._rangeRequestReaders.push(a),a}cancelAllRequests(A){this._fullRequestReader?.cancel(A);for(const n of this._rangeRequestReaders.slice(0))n.cancel(A)}}e.PDFNodeStream=_;class g{constructor(A){this._url=A.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=A.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=new r.PromiseCapability,this._headersCapability=new r.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const A=this._readableStream.read();return A===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=A.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(A).buffer,done:!1})}cancel(A){if(!this._readableStream){this._error(A);return}this._readableStream.destroy(A)}_error(A){this._storedError=A,this._readCapability.resolve()}_setReadableStream(A){this._readableStream=A,A.on("readable",()=>{this._readCapability.resolve()}),A.on("end",()=>{A.destroy(),this._done=!0,this._readCapability.resolve()}),A.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class s{constructor(A){this._url=A.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new r.PromiseCapability;const n=A.source;this._isStreamingSupported=!n.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const A=this._readableStream.read();return A===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=A.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(A).buffer,done:!1})}cancel(A){if(!this._readableStream){this._error(A);return}this._readableStream.destroy(A)}_error(A){this._storedError=A,this._readCapability.resolve()}_setReadableStream(A){this._readableStream=A,A.on("readable",()=>{this._readCapability.resolve()}),A.on("end",()=>{A.destroy(),this._done=!0,this._readCapability.resolve()}),A.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function h(S,A){return{protocol:S.protocol,auth:S.auth,host:S.hostname,port:S.port,path:S.path,method:"GET",headers:A}}class b extends g{constructor(A){super(A);const n=a=>{if(a.statusCode===404){const D=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=D,this._headersCapability.reject(D);return}this._headersCapability.resolve(),this._setReadableStream(a);const C=D=>this._readableStream.headers[D.toLowerCase()],{allowRangeRequests:x,suggestedLength:T}=(0,p.validateRangeRequestCapabilities)({getResponseHeader:C,isHttp:A.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=x,this._contentLength=T||this._contentLength,this._filename=(0,p.extractFilenameFromHeader)(C)};this._request=null,this._url.protocol==="http:"?this._request=P.request(h(this._url,A.httpHeaders),n):this._request=y.request(h(this._url,A.httpHeaders),n),this._request.on("error",a=>{this._storedError=a,this._headersCapability.reject(a)}),this._request.end()}}class d extends s{constructor(A,n,a){super(A),this._httpHeaders={};for(const x in A.httpHeaders){const T=A.httpHeaders[x];T!==void 0&&(this._httpHeaders[x]=T)}this._httpHeaders.Range=`bytes=${n}-${a-1}`;const C=x=>{if(x.statusCode===404){const T=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=T;return}this._setReadableStream(x)};this._request=null,this._url.protocol==="http:"?this._request=P.request(h(this._url,this._httpHeaders),C):this._request=y.request(h(this._url,this._httpHeaders),C),this._request.on("error",x=>{this._storedError=x}),this._request.end()}}class f extends g{constructor(A){super(A);let n=decodeURIComponent(this._url.path);c.test(this._url.href)&&(n=n.replace(/^\//,"")),w.lstat(n,(a,C)=>{if(a){a.code==="ENOENT"&&(a=new r.MissingPDFException(`Missing PDF "${n}".`)),this._storedError=a,this._headersCapability.reject(a);return}this._contentLength=C.size,this._setReadableStream(w.createReadStream(n)),this._headersCapability.resolve()})}}class L extends s{constructor(A,n,a){super(A);let C=decodeURIComponent(this._url.path);c.test(this._url.href)&&(C=C.replace(/^\//,"")),this._setReadableStream(w.createReadStream(C,{start:n,end:a-1}))}}}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=E,e.extractFilenameFromHeader=y,e.validateRangeRequestCapabilities=P,e.validateResponseStatus=c;var r=u(1),p=u(23),w=u(6);function P({getResponseHeader:i,isHttp:_,rangeChunkSize:g,disableRange:s}){const h={allowRangeRequests:!1,suggestedLength:void 0},b=parseInt(i("Content-Length"),10);return!Number.isInteger(b)||(h.suggestedLength=b,b<=2*g)||s||!_||i("Accept-Ranges")!=="bytes"||(i("Content-Encoding")||"identity")!=="identity"||(h.allowRangeRequests=!0),h}function y(i){const _=i("Content-Disposition");if(_){let g=(0,p.getFilenameFromContentDispositionHeader)(_);if(g.includes("%"))try{g=decodeURIComponent(g)}catch{}if((0,w.isPdfFile)(g))return g}return null}function E(i,_){return i===404||i===0&&_.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+_+'".'):new r.UnexpectedResponseException(`Unexpected server response (${i}) while retrieving PDF "${_}".`,i)}function c(i){return i===200||i===206}}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=p;var r=u(1);function p(w){let P=!0,y=E("filename\\*","i").exec(w);if(y){y=y[1];let b=g(y);return b=unescape(b),b=s(b),b=h(b),i(b)}if(y=_(w),y){const b=h(y);return i(b)}if(y=E("filename","i").exec(w),y){y=y[1];let b=g(y);return b=h(b),i(b)}function E(b,d){return new RegExp("(?:^|;)\\s*"+b+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function c(b,d){if(b){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(b,{fatal:!0}),L=(0,r.stringToBytes)(d);d=f.decode(L),P=!1}catch{}}return d}function i(b){return P&&/[\x80-\xff]/.test(b)&&(b=c("utf-8",b),P&&(b=c("iso-8859-1",b))),b}function _(b){const d=[];let f;const L=E("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=L.exec(b))!==null;){let[,A,n,a]=f;if(A=parseInt(A,10),A in d){if(A===0)break;continue}d[A]=[n,a]}const S=[];for(let A=0;A<d.length&&A in d;++A){let[n,a]=d[A];a=g(a),n&&(a=unescape(a),A===0&&(a=s(a))),S.push(a)}return S.join("")}function g(b){if(b.startsWith('"')){const d=b.slice(1).split('\\"');for(let f=0;f<d.length;++f){const L=d[f].indexOf('"');L!==-1&&(d[f]=d[f].slice(0,L),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}b=d.join('"')}return b}function s(b){const d=b.indexOf("'");if(d===-1)return b;const f=b.slice(0,d),S=b.slice(d+1).replace(/^[^']*'/,"");return c(f,S)}function h(b){return!b.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(b)?b:b.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,L,S){if(L==="q"||L==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(A,n){return String.fromCharCode(parseInt(n,16))}),c(f,S);try{S=atob(S)}catch{}return c(f,S)})}return""}}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var r=u(1),p=u(22);const w=200,P=206;function y(g){const s=g.response;return typeof s!="string"?s:(0,r.stringToBytes)(s).buffer}class E{constructor(s,h={}){this.url=s,this.isHttp=/^https?:/i.test(s),this.httpHeaders=this.isHttp&&h.httpHeaders||Object.create(null),this.withCredentials=h.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(s,h,b){const d={begin:s,end:h};for(const f in b)d[f]=b[f];return this.request(d)}requestFull(s){return this.request(s)}request(s){const h=new XMLHttpRequest,b=this.currXhrId++,d=this.pendingRequests[b]={xhr:h};h.open("GET",this.url),h.withCredentials=this.withCredentials;for(const f in this.httpHeaders){const L=this.httpHeaders[f];L!==void 0&&h.setRequestHeader(f,L)}return this.isHttp&&"begin"in s&&"end"in s?(h.setRequestHeader("Range",`bytes=${s.begin}-${s.end-1}`),d.expectedStatus=P):d.expectedStatus=w,h.responseType="arraybuffer",s.onError&&(h.onerror=function(f){s.onError(h.status)}),h.onreadystatechange=this.onStateChange.bind(this,b),h.onprogress=this.onProgress.bind(this,b),d.onHeadersReceived=s.onHeadersReceived,d.onDone=s.onDone,d.onError=s.onError,d.onProgress=s.onProgress,h.send(null),b}onProgress(s,h){const b=this.pendingRequests[s];b&&b.onProgress?.(h)}onStateChange(s,h){const b=this.pendingRequests[s];if(!b)return;const d=b.xhr;if(d.readyState>=2&&b.onHeadersReceived&&(b.onHeadersReceived(),delete b.onHeadersReceived),d.readyState!==4||!(s in this.pendingRequests))return;if(delete this.pendingRequests[s],d.status===0&&this.isHttp){b.onError?.(d.status);return}const f=d.status||w;if(!(f===w&&b.expectedStatus===P)&&f!==b.expectedStatus){b.onError?.(d.status);return}const S=y(d);if(f===P){const A=d.getResponseHeader("Content-Range"),n=/bytes (\d+)-(\d+)\/(\d+)/.exec(A);b.onDone({begin:parseInt(n[1],10),chunk:S})}else S?b.onDone({begin:0,chunk:S}):b.onError?.(d.status)}getRequestXhr(s){return this.pendingRequests[s].xhr}isPendingRequest(s){return s in this.pendingRequests}abortRequest(s){const h=this.pendingRequests[s].xhr;delete this.pendingRequests[s],h.abort()}}class c{constructor(s){this._source=s,this._manager=new E(s.url,{httpHeaders:s.httpHeaders,withCredentials:s.withCredentials}),this._rangeChunkSize=s.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(s){const h=this._rangeRequestReaders.indexOf(s);h>=0&&this._rangeRequestReaders.splice(h,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new i(this._manager,this._source),this._fullRequestReader}getRangeReader(s,h){const b=new _(this._manager,s,h);return b.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(b),b}cancelAllRequests(s){this._fullRequestReader?.cancel(s);for(const h of this._rangeRequestReaders.slice(0))h.cancel(s)}}e.PDFNetworkStream=c;class i{constructor(s,h){this._manager=s;const b={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=h.url,this._fullRequestId=s.requestFull(b),this._headersReceivedCapability=new r.PromiseCapability,this._disableRange=h.disableRange||!1,this._contentLength=h.length,this._rangeChunkSize=h.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const s=this._fullRequestId,h=this._manager.getRequestXhr(s),b=L=>h.getResponseHeader(L),{allowRangeRequests:d,suggestedLength:f}=(0,p.validateRangeRequestCapabilities)({getResponseHeader:b,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});d&&(this._isRangeSupported=!0),this._contentLength=f||this._contentLength,this._filename=(0,p.extractFilenameFromHeader)(b),this._isRangeSupported&&this._manager.abortRequest(s),this._headersReceivedCapability.resolve()}_onDone(s){if(s&&(this._requests.length>0?this._requests.shift().resolve({value:s.chunk,done:!1}):this._cachedChunks.push(s.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(s){this._storedError=(0,p.createResponseStatusError)(s,this._url),this._headersReceivedCapability.reject(this._storedError);for(const h of this._requests)h.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(s){this.onProgress?.({loaded:s.loaded,total:s.lengthComputable?s.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const s=new r.PromiseCapability;return this._requests.push(s),s.promise}cancel(s){this._done=!0,this._headersReceivedCapability.reject(s);for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class _{constructor(s,h,b){this._manager=s;const d={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=s.url,this._requestId=s.requestRange(h,b,d),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(s){const h=s.chunk;this._requests.length>0?this._requests.shift().resolve({value:h,done:!1}):this._queuedChunk=h,this._done=!0;for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(s){this._storedError=(0,p.createResponseStatusError)(s,this._url);for(const h of this._requests)h.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(s){this.isStreamingSupported||this.onProgress?.({loaded:s.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const h=this._queuedChunk;return this._queuedChunk=null,{value:h,done:!1}}if(this._done)return{value:void 0,done:!0};const s=new r.PromiseCapability;return this._requests.push(s),s.promise}cancel(s){this._done=!0;for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var r=u(1),p=u(22);function w(_,g,s){return{method:"GET",headers:_,signal:s.signal,mode:"cors",credentials:g?"include":"same-origin",redirect:"follow"}}function P(_){const g=new Headers;for(const s in _){const h=_[s];h!==void 0&&g.append(s,h)}return g}function y(_){return _ instanceof Uint8Array?_.buffer:_ instanceof ArrayBuffer?_:((0,r.warn)(`getArrayBuffer - unexpected data format: ${_}`),new Uint8Array(_).buffer)}class E{constructor(g){this.source=g,this.isHttp=/^https?:/i.test(g.url),this.httpHeaders=this.isHttp&&g.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new c(this),this._fullRequestReader}getRangeReader(g,s){if(s<=this._progressiveDataLength)return null;const h=new i(this,g,s);return this._rangeRequestReaders.push(h),h}cancelAllRequests(g){this._fullRequestReader?.cancel(g);for(const s of this._rangeRequestReaders.slice(0))s.cancel(g)}}e.PDFFetchStream=E;class c{constructor(g){this._stream=g,this._reader=null,this._loaded=0,this._filename=null;const s=g.source;this._withCredentials=s.withCredentials||!1,this._contentLength=s.length,this._headersCapability=new r.PromiseCapability,this._disableRange=s.disableRange||!1,this._rangeChunkSize=s.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!s.disableStream,this._isRangeSupported=!s.disableRange,this._headers=P(this._stream.httpHeaders);const h=s.url;fetch(h,w(this._headers,this._withCredentials,this._abortController)).then(b=>{if(!(0,p.validateResponseStatus)(b.status))throw(0,p.createResponseStatusError)(b.status,h);this._reader=b.body.getReader(),this._headersCapability.resolve();const d=S=>b.headers.get(S),{allowRangeRequests:f,suggestedLength:L}=(0,p.validateRangeRequestCapabilities)({getResponseHeader:d,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=f,this._contentLength=L||this._contentLength,this._filename=(0,p.extractFilenameFromHeader)(d),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:g,done:s}=await this._reader.read();return s?{value:g,done:s}:(this._loaded+=g.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:y(g),done:!1})}cancel(g){this._reader?.cancel(g),this._abortController.abort()}}class i{constructor(g,s,h){this._stream=g,this._reader=null,this._loaded=0;const b=g.source;this._withCredentials=b.withCredentials||!1,this._readCapability=new r.PromiseCapability,this._isStreamingSupported=!b.disableStream,this._abortController=new AbortController,this._headers=P(this._stream.httpHeaders),this._headers.append("Range",`bytes=${s}-${h-1}`);const d=b.url;fetch(d,w(this._headers,this._withCredentials,this._abortController)).then(f=>{if(!(0,p.validateResponseStatus)(f.status))throw(0,p.createResponseStatusError)(f.status,d);this._readCapability.resolve(),this._reader=f.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:g,done:s}=await this._reader.read();return s?{value:g,done:s}:(this._loaded+=g.byteLength,this.onProgress?.({loaded:this._loaded}),{value:y(g),done:!1})}cancel(g){this._reader?.cancel(g),this._abortController.abort()}}}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=b,e.updateTextLayer=d;var r=u(1),p=u(6);const w=1e5,P=30,y=.8,E=new Map;function c(f,L){let S;if(L&&r.FeatureTest.isOffscreenCanvasSupported)S=new OffscreenCanvas(f,f).getContext("2d",{alpha:!1});else{const A=document.createElement("canvas");A.width=A.height=f,S=A.getContext("2d",{alpha:!1})}return S}function i(f,L){const S=E.get(f);if(S)return S;const A=c(P,L);A.font=`${P}px ${f}`;const n=A.measureText("");let a=n.fontBoundingBoxAscent,C=Math.abs(n.fontBoundingBoxDescent);if(a){const T=a/(a+C);return E.set(f,T),A.canvas.width=A.canvas.height=0,T}A.strokeStyle="red",A.clearRect(0,0,P,P),A.strokeText("g",0,0);let x=A.getImageData(0,0,P,P).data;C=0;for(let T=x.length-1-3;T>=0;T-=4)if(x[T]>0){C=Math.ceil(T/4/P);break}A.clearRect(0,0,P,P),A.strokeText("A",0,P),x=A.getImageData(0,0,P,P).data,a=0;for(let T=0,D=x.length;T<D;T+=4)if(x[T]>0){a=P-Math.floor(T/4/P);break}if(A.canvas.width=A.canvas.height=0,a){const T=a/(a+C);return E.set(f,T),T}return E.set(f,y),y}function _(f,L,S){const A=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:L.str!=="",hasEOL:L.hasEOL,fontSize:0};f._textDivs.push(A);const a=r.Util.transform(f._transform,L.transform);let C=Math.atan2(a[1],a[0]);const x=S[L.fontName];x.vertical&&(C+=Math.PI/2);const T=Math.hypot(a[2],a[3]),D=T*i(x.fontFamily,f._isOffscreenCanvasSupported);let $,W;C===0?($=a[4],W=a[5]-D):($=a[4]+D*Math.sin(C),W=a[5]-D*Math.cos(C));const se="calc(var(--scale-factor)*",ne=A.style;f._container===f._rootContainer?(ne.left=`${(100*$/f._pageWidth).toFixed(2)}%`,ne.top=`${(100*W/f._pageHeight).toFixed(2)}%`):(ne.left=`${se}${$.toFixed(2)}px)`,ne.top=`${se}${W.toFixed(2)}px)`),ne.fontSize=`${se}${T.toFixed(2)}px)`,ne.fontFamily=x.fontFamily,n.fontSize=T,A.setAttribute("role","presentation"),A.textContent=L.str,A.dir=L.dir,f._fontInspectorEnabled&&(A.dataset.fontName=L.fontName),C!==0&&(n.angle=C*(180/Math.PI));let q=!1;if(L.str.length>1)q=!0;else if(L.str!==" "&&L.transform[0]!==L.transform[3]){const G=Math.abs(L.transform[0]),I=Math.abs(L.transform[3]);G!==I&&Math.max(G,I)/Math.min(G,I)>1.5&&(q=!0)}q&&(n.canvasWidth=x.vertical?L.height:L.width),f._textDivProperties.set(A,n),f._isReadableStream&&f._layoutText(A)}function g(f){const{div:L,scale:S,properties:A,ctx:n,prevFontSize:a,prevFontFamily:C}=f,{style:x}=L;let T="";if(A.canvasWidth!==0&&A.hasText){const{fontFamily:D}=x,{canvasWidth:$,fontSize:W}=A;(a!==W||C!==D)&&(n.font=`${W*S}px ${D}`,f.prevFontSize=W,f.prevFontFamily=D);const{width:se}=n.measureText(L.textContent);se>0&&(T=`scaleX(${$*S/se})`)}A.angle!==0&&(T=`rotate(${A.angle}deg) ${T}`),T.length>0&&(x.transform=T)}function s(f){if(f._canceled)return;const L=f._textDivs,S=f._capability;if(L.length>w){S.resolve();return}if(!f._isReadableStream)for(const n of L)f._layoutText(n);S.resolve()}class h{constructor({textContentSource:L,container:S,viewport:A,textDivs:n,textDivProperties:a,textContentItemsStr:C,isOffscreenCanvasSupported:x}){this._textContentSource=L,this._isReadableStream=L instanceof ReadableStream,this._container=this._rootContainer=S,this._textDivs=n||[],this._textContentItemsStr=C||[],this._isOffscreenCanvasSupported=x,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=a||new WeakMap,this._canceled=!1,this._capability=new r.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:A.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:c(0,x)};const{pageWidth:T,pageHeight:D,pageX:$,pageY:W}=A.rawDims;this._transform=[1,0,0,-1,-$,W+D],this._pageWidth=T,this._pageHeight=D,(0,p.setLayerDimensions)(S,A),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new r.AbortException("TextLayer task cancelled."))}_processItems(L,S){for(const A of L){if(A.str===void 0){if(A.type==="beginMarkedContentProps"||A.type==="beginMarkedContent"){const n=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),A.id!==null&&this._container.setAttribute("id",`${A.id}`),n.append(this._container)}else A.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(A.str),_(this,A,S)}}_layoutText(L){const S=this._layoutTextParams.properties=this._textDivProperties.get(L);if(this._layoutTextParams.div=L,g(this._layoutTextParams),S.hasText&&this._container.append(L),S.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),this._container.append(A)}}_render(){const L=new r.PromiseCapability;let S=Object.create(null);if(this._isReadableStream){const A=()=>{this._reader.read().then(({value:n,done:a})=>{if(a){L.resolve();return}Object.assign(S,n.styles),this._processItems(n.items,S),A()},L.reject)};this._reader=this._textContentSource.getReader(),A()}else if(this._textContentSource){const{items:A,styles:n}=this._textContentSource;this._processItems(A,n),L.resolve()}else throw new Error('No "textContentSource" parameter specified.');L.promise.then(()=>{S=null,s(this)},this._capability.reject)}}e.TextLayerRenderTask=h;function b(f){!f.textContentSource&&(f.textContent||f.textContentStream)&&((0,p.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),f.textContentSource=f.textContent||f.textContentStream);const{container:L,viewport:S}=f,A=getComputedStyle(L),n=A.getPropertyValue("visibility"),a=parseFloat(A.getPropertyValue("--scale-factor"));n==="visible"&&(!a||Math.abs(a-S.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const C=new h(f);return C._render(),C}function d({container:f,viewport:L,textDivs:S,textDivProperties:A,isOffscreenCanvasSupported:n,mustRotate:a=!0,mustRescale:C=!0}){if(a&&(0,p.setLayerDimensions)(f,{rotation:L.rotation}),C){const x=c(0,n),D={prevFontSize:null,prevFontFamily:null,div:null,scale:L.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:x};for(const $ of S)D.properties=A.get($),D.div=$,g(D)}}}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var r=u(1),p=u(5),w=u(28),P=u(29),y=u(6);class E{#e;#t=!1;#n=this.pointerup.bind(this);#i=this.pointerdown.bind(this);#s=new Map;#l=!1;#u=!1;#r;static _initialized=!1;constructor(i){E._initialized||(E._initialized=!0,w.FreeTextEditor.initialize(i.l10n),P.InkEditor.initialize(i.l10n)),i.uiManager.registerEditorTypes([w.FreeTextEditor,P.InkEditor]),this.#r=i.uiManager,this.pageIndex=i.pageIndex,this.div=i.div,this.#e=i.accessibilityManager,this.#r.addLayer(this)}get isEmpty(){return this.#s.size===0}updateToolbar(i){this.#r.updateToolbar(i)}updateMode(i=this.#r.getMode()){this.#f(),i===r.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),this.#r.unselectAll(),i!==r.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",i===r.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",i===r.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(i){if(!i&&this.#r.getMode()!==r.AnnotationEditorType.INK)return;if(!i){for(const g of this.#s.values())if(g.isEmpty()){g.setInBackground();return}}this.#c({offsetX:0,offsetY:0}).setInBackground()}setEditingState(i){this.#r.setEditingState(i)}addCommands(i){this.#r.addCommands(i)}enable(){this.div.style.pointerEvents="auto";for(const i of this.#s.values())i.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const i of this.#s.values())i.disableEditing();this.#f(),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(i){this.#r.getActive()!==i&&this.#r.setActiveEditor(i)}enableClick(){this.div.addEventListener("pointerdown",this.#i),this.div.addEventListener("pointerup",this.#n)}disableClick(){this.div.removeEventListener("pointerdown",this.#i),this.div.removeEventListener("pointerup",this.#n)}attach(i){this.#s.set(i.id,i)}detach(i){this.#s.delete(i.id),this.#e?.removePointerInTextLayer(i.contentDiv)}remove(i){this.#r.removeEditor(i),this.detach(i),i.div.style.display="none",setTimeout(()=>{i.div.style.display="",i.div.remove(),i.isAttachedToDOM=!1,document.activeElement===document.body&&this.#r.focusMainContainer()},0),this.#u||this.addInkEditorIfNeeded(!1)}#a(i){i.parent!==this&&(this.attach(i),i.parent?.detach(i),i.setParent(this),i.div&&i.isAttachedToDOM&&(i.div.remove(),this.div.append(i.div)))}add(i){if(this.#a(i),this.#r.addEditor(i),this.attach(i),!i.isAttachedToDOM){const _=i.render();this.div.append(_),i.isAttachedToDOM=!0}this.moveEditorInDOM(i),i.onceAdded(),this.#r.addToAnnotationStorage(i)}moveEditorInDOM(i){this.#e?.moveElementInDOM(this.div,i.div,i.contentDiv,!0)}addOrRebuild(i){i.needsToBeRebuilt()?i.rebuild():this.add(i)}addANewEditor(i){const _=()=>{this.addOrRebuild(i)},g=()=>{i.remove()};this.addCommands({cmd:_,undo:g,mustExec:!0})}addUndoableEditor(i){const _=()=>{this.addOrRebuild(i)},g=()=>{i.remove()};this.addCommands({cmd:_,undo:g,mustExec:!1})}getNextId(){return this.#r.getId()}#h(i){switch(this.#r.getMode()){case r.AnnotationEditorType.FREETEXT:return new w.FreeTextEditor(i);case r.AnnotationEditorType.INK:return new P.InkEditor(i)}return null}deserialize(i){switch(i.annotationType){case r.AnnotationEditorType.FREETEXT:return w.FreeTextEditor.deserialize(i,this,this.#r);case r.AnnotationEditorType.INK:return P.InkEditor.deserialize(i,this,this.#r)}return null}#c(i){const _=this.getNextId(),g=this.#h({parent:this,id:_,x:i.offsetX,y:i.offsetY,uiManager:this.#r});return g&&this.add(g),g}setSelected(i){this.#r.setSelected(i)}toggleSelected(i){this.#r.toggleSelected(i)}isSelected(i){return this.#r.isSelected(i)}unselect(i){this.#r.unselect(i)}pointerup(i){const{isMac:_}=r.FeatureTest.platform;if(!(i.button!==0||i.ctrlKey&&_)&&i.target===this.div&&this.#l){if(this.#l=!1,!this.#t){this.#t=!0;return}this.#c(i)}}pointerdown(i){const{isMac:_}=r.FeatureTest.platform;if(i.button!==0||i.ctrlKey&&_||i.target!==this.div)return;this.#l=!0;const g=this.#r.getActive();this.#t=!g||g.isEmpty()}drop(i){const _=i.dataTransfer.getData("text/plain"),g=this.#r.getEditor(_);if(!g)return;i.preventDefault(),i.dataTransfer.dropEffect="move",this.#a(g);const s=this.div.getBoundingClientRect(),h=i.clientX-s.x,b=i.clientY-s.y;g.translate(h-g.startX,b-g.startY),this.moveEditorInDOM(g),g.div.focus()}dragover(i){i.preventDefault()}destroy(){this.#r.getActive()?.parent===this&&this.#r.setActiveEditor(null);for(const i of this.#s.values())this.#e?.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,this.#s.clear(),this.#r.removeLayer(this)}#f(){this.#u=!0;for(const i of this.#s.values())i.isEmpty()&&i.remove();this.#u=!1}render({viewport:i}){this.viewport=i,(0,y.setLayerDimensions)(this.div,i),(0,p.bindEvents)(this,this.div,["dragover","drop"]);for(const _ of this.#r.getEditors(this.pageIndex))this.add(_);this.updateMode()}update({viewport:i}){this.#r.commitOrRemove(),this.viewport=i,(0,y.setLayerDimensions)(this.div,{rotation:i.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:i,pageHeight:_}=this.viewport.rawDims;return[i,_]}}e.AnnotationEditorLayer=E}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var r=u(1),p=u(5),w=u(4);class P extends w.AnnotationEditor{#e=this.editorDivBlur.bind(this);#t=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#i=this.editorDivKeydown.bind(this);#s;#l="";#u=`${this.id}-editor`;#r=!1;#a;static _freeTextDefaultContent="";static _l10nPromise;static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static _keyboardManager=new p.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],P.prototype.commitOrRemove]]);static _type="freetext";constructor(E){super({...E,name:"freeTextEditor"}),this.#s=E.color||P._defaultColor||w.AnnotationEditor._defaultLineColor,this.#a=E.fontSize||P._defaultFontSize}static initialize(E){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(i=>[i,E.get(i)]));const c=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(c.getPropertyValue("--freetext-padding"))}static updateDefaultParams(E,c){switch(E){case r.AnnotationEditorParamsType.FREETEXT_SIZE:P._defaultFontSize=c;break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:P._defaultColor=c;break}}updateParams(E,c){switch(E){case r.AnnotationEditorParamsType.FREETEXT_SIZE:this.#h(c);break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:this.#c(c);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,P._defaultFontSize],[r.AnnotationEditorParamsType.FREETEXT_COLOR,P._defaultColor||w.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,this.#a],[r.AnnotationEditorParamsType.FREETEXT_COLOR,this.#s]]}#h(E){const c=_=>{this.editorDiv.style.fontSize=`calc(${_}px * var(--scale-factor))`,this.translate(0,-(_-this.#a)*this.parentScale),this.#a=_,this.#o()},i=this.#a;this.addCommands({cmd:()=>{c(E)},undo:()=>{c(i)},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#c(E){const c=this.#s;this.addCommands({cmd:()=>{this.#s=this.editorDiv.style.color=E},undo:()=>{this.#s=this.editorDiv.style.color=c},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}getInitialTranslation(){const E=this.parentScale;return[-P._internalPadding*E,-(P._internalPadding+this.#a)*E]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(r.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#i),this.editorDiv.addEventListener("focus",this.#t),this.editorDiv.addEventListener("blur",this.#e),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#u),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",this.#i),this.editorDiv.removeEventListener("focus",this.#t),this.editorDiv.removeEventListener("blur",this.#e),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(E){super.focusin(E),E.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}#f(){const E=this.editorDiv.getElementsByTagName("div");if(E.length===0)return this.editorDiv.innerText;const c=[];for(const i of E)c.push(i.innerText.replace(/\r\n?|\n/,""));return c.join(`
`)}#o(){const[E,c]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:_,div:g}=this,s=g.style.display;g.style.display="hidden",_.div.append(this.div),i=g.getBoundingClientRect(),g.remove(),g.style.display=s}this.width=i.width/E,this.height=i.height/c}commit(){this.isInEditMode()&&(super.commit(),this.#r||(this.#r=!0,this.parent.addUndoableEditor(this)),this.disableEditMode(),this.#l=this.#f().trimEnd(),this.#o())}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(E){this.enableEditMode(),this.editorDiv.focus()}keydown(E){E.target===this.div&&E.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(E){P._keyboardManager.exec(this,E)}editorDivFocus(E){this.isEditing=!0}editorDivBlur(E){this.isEditing=!1}editorDivInput(E){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let E,c;this.width&&(E=this.x,c=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#u),this.enableEditing(),P._l10nPromise.get("editor_free_text2_aria_label").then(_=>this.editorDiv?.setAttribute("aria-label",_)),P._l10nPromise.get("free_text2_default_content").then(_=>this.editorDiv?.setAttribute("default-content",_)),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#a}px * var(--scale-factor))`,i.color=this.#s,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,p.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[_,g]=this.parentDimensions;this.setAt(E*_,c*g,this.width*_,this.height*g);for(const s of this.#l.split(`
`)){const h=document.createElement("div");h.append(s?document.createTextNode(s):document.createElement("br")),this.editorDiv.append(h)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(E,c,i){const _=super.deserialize(E,c,i);return _.#a=E.fontSize,_.#s=r.Util.makeHexColor(...E.color),_.#l=E.value,_}serialize(){if(this.isEmpty())return null;const E=P._internalPadding*this.parentScale,c=this.getRect(E,E),i=w.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#s);return{annotationType:r.AnnotationEditorType.FREETEXT,color:i,fontSize:this.#a,value:this.#l,pageIndex:this.pageIndex,rect:c,rotation:this.rotation}}}e.FreeTextEditor=P}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0,Object.defineProperty(e,"fitCurve",{enumerable:!0,get:function(){return w.fitCurve}});var r=u(1),p=u(4),w=u(30),P=u(5);const y=16;class E extends p.AnnotationEditor{#e=0;#t=0;#n=0;#i=this.canvasPointermove.bind(this);#s=this.canvasPointerleave.bind(this);#l=this.canvasPointerup.bind(this);#u=this.canvasPointerdown.bind(this);#r=!1;#a=!1;#h=null;#c=null;#f=0;#o=0;#d=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _l10nPromise;static _type="ink";constructor(i){super({...i,name:"inkEditor"}),this.color=i.color||null,this.thickness=i.thickness||null,this.opacity=i.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(i){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(_=>[_,i.get(_)]))}static updateDefaultParams(i,_){switch(i){case r.AnnotationEditorParamsType.INK_THICKNESS:E._defaultThickness=_;break;case r.AnnotationEditorParamsType.INK_COLOR:E._defaultColor=_;break;case r.AnnotationEditorParamsType.INK_OPACITY:E._defaultOpacity=_/100;break}}updateParams(i,_){switch(i){case r.AnnotationEditorParamsType.INK_THICKNESS:this.#g(_);break;case r.AnnotationEditorParamsType.INK_COLOR:this.#b(_);break;case r.AnnotationEditorParamsType.INK_OPACITY:this.#v(_);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,E._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,E._defaultColor||p.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(E._defaultOpacity*100)]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||E._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,this.color||E._defaultColor||p.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??E._defaultOpacity))]]}#g(i){const _=this.thickness;this.addCommands({cmd:()=>{this.thickness=i,this.#I()},undo:()=>{this.thickness=_,this.#I()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#b(i){const _=this.color;this.addCommands({cmd:()=>{this.color=i,this.#p()},undo:()=>{this.color=_,this.#p()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#v(i){i/=100;const _=this.opacity;this.addCommands({cmd:()=>{this.opacity=i,this.#p()},undo:()=>{this.opacity=_,this.#p()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(this.#w(),this.#_()),this.isAttachedToDOM||(this.parent.add(this),this.#S()),this.#I())}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#c.disconnect(),this.#c=null,super.remove())}setParent(i){!this.parent&&i?this._uiManager.removeShouldRescale(this):this.parent&&i===null&&this._uiManager.addShouldRescale(this),super.setParent(i)}onScaleChanging(){const[i,_]=this.parentDimensions,g=this.width*i,s=this.height*_;this.setDimensions(g,s)}enableEditMode(){this.#r||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",this.#u),this.canvas.addEventListener("pointerup",this.#l))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#u),this.canvas.removeEventListener("pointerup",this.#l))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#C(){const{parentRotation:i,parentDimensions:[_,g]}=this;switch(i){case 90:return[0,g,g,_];case 180:return[_,g,_,g];case 270:return[_,0,g,_];default:return[0,0,_,g]}}#E(){const{ctx:i,color:_,opacity:g,thickness:s,parentScale:h,scaleFactor:b}=this;i.lineWidth=s*h/b,i.lineCap="round",i.lineJoin="round",i.miterLimit=10,i.strokeStyle=`${_}${(0,P.opacityToHex)(g)}`}#T(i,_){this.isEditing=!0,this.#a||(this.#a=!0,this.#S(),this.thickness||=E._defaultThickness,this.color||=E._defaultColor||p.AnnotationEditor._defaultLineColor,this.opacity??=E._defaultOpacity),this.currentPath.push([i,_]),this.#h=null,this.#E(),this.ctx.beginPath(),this.ctx.moveTo(i,_),this.#d=()=>{this.#d&&(this.#h&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):this.#p(),this.ctx.lineTo(...this.#h),this.#h=null,this.ctx.stroke()),window.requestAnimationFrame(this.#d))},window.requestAnimationFrame(this.#d)}#y(i,_){const[g,s]=this.currentPath.at(-1);i===g&&_===s||(this.currentPath.push([i,_]),this.#h=[i,_])}#A(i,_){this.ctx.closePath(),this.#d=null,i=Math.min(Math.max(i,0),this.canvas.width),_=Math.min(Math.max(_,0),this.canvas.height);const[g,s]=this.currentPath.at(-1);(i!==g||_!==s)&&this.currentPath.push([i,_]);let h;if(this.currentPath.length!==1)h=(0,w.fitCurve)(this.currentPath,30,null);else{const L=[i,_];h=[[L,L.slice(),L.slice(),L]]}const b=E.#R(h);this.currentPath.length=0;const d=()=>{this.paths.push(h),this.bezierPath2D.push(b),this.rebuild()},f=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#w(),this.#_()),this.#I())};this.addCommands({cmd:d,undo:f,mustExec:!0})}#p(){if(this.isEmpty()){this.#P();return}this.#E();const{canvas:i,ctx:_}=this;_.setTransform(1,0,0,1,0,0),_.clearRect(0,0,i.width,i.height),this.#P();for(const g of this.bezierPath2D)_.stroke(g)}commit(){this.#r||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#r=!0,this.div.classList.add("disabled"),this.#I(!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(i){super.focusin(i),this.enableEditMode()}canvasPointerdown(i){i.button!==0||!this.isInEditMode()||this.#r||(this.setInForeground(),i.type!=="mouse"&&this.div.focus(),i.stopPropagation(),this.canvas.addEventListener("pointerleave",this.#s),this.canvas.addEventListener("pointermove",this.#i),this.#T(i.offsetX,i.offsetY))}canvasPointermove(i){i.stopPropagation(),this.#y(i.offsetX,i.offsetY)}canvasPointerup(i){i.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(i.stopPropagation(),this.#L(i),this.setInBackground())}canvasPointerleave(i){this.#L(i),this.setInBackground()}#L(i){this.#A(i.offsetX,i.offsetY),this.canvas.removeEventListener("pointerleave",this.#s),this.canvas.removeEventListener("pointermove",this.#i),this.addToAnnotationStorage()}#w(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",E._l10nPromise.get("editor_ink_canvas_aria_label").then(i=>this.canvas?.setAttribute("aria-label",i)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#_(){this.#c=new ResizeObserver(i=>{const _=i[0].contentRect;_.width&&_.height&&this.setDimensions(_.width,_.height)}),this.#c.observe(this.div)}render(){if(this.div)return this.div;let i,_;this.width&&(i=this.x,_=this.y),super.render(),E._l10nPromise.get("editor_ink2_aria_label").then(d=>this.div?.setAttribute("aria-label",d));const[g,s,h,b]=this.#C();if(this.setAt(g,s,0,0),this.setDims(h,b),this.#w(),this.width){const[d,f]=this.parentDimensions;this.setAt(i*d,_*f,this.width*d,this.height*f),this.#a=!0,this.#S(),this.setDims(this.width*d,this.height*f),this.#p(),this.#N(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#_(),this.div}#S(){if(!this.#a)return;const[i,_]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*i),this.canvas.height=Math.ceil(this.height*_),this.#P()}setDimensions(i,_){const g=Math.round(i),s=Math.round(_);if(this.#f===g&&this.#o===s)return;this.#f=g,this.#o=s,this.canvas.style.visibility="hidden",this.#e&&Math.abs(this.#e-i/_)>.01&&(_=Math.ceil(i/this.#e),this.setDims(i,_));const[h,b]=this.parentDimensions;this.width=i/h,this.height=_/b,this.#r&&this.#m(i,_),this.#S(),this.#p(),this.canvas.style.visibility="visible",this.fixDims()}#m(i,_){const g=this.#F(),s=(i-g)/this.#n,h=(_-g)/this.#t;this.scaleFactor=Math.min(s,h)}#P(){const i=this.#F()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+i,this.translationY*this.scaleFactor+i)}static#R(i){const _=new Path2D;for(let g=0,s=i.length;g<s;g++){const[h,b,d,f]=i[g];g===0&&_.moveTo(...h),_.bezierCurveTo(b[0],b[1],d[0],d[1],f[0],f[1])}return _}#O(i,_,g,s){const b=[],d=this.thickness/2;let f,L;for(const S of this.paths){f=[],L=[];for(let A=0,n=S.length;A<n;A++){const[a,C,x,T]=S[A],D=i*(a[0]+_)+d,$=s-i*(a[1]+g)-d,W=i*(C[0]+_)+d,se=s-i*(C[1]+g)-d,ne=i*(x[0]+_)+d,q=s-i*(x[1]+g)-d,G=i*(T[0]+_)+d,I=s-i*(T[1]+g)-d;A===0&&(f.push(D,$),L.push(D,$)),f.push(W,se,ne,q,G,I),this.#x(D,$,W,se,ne,q,G,I,4,L)}b.push({bezier:f,points:L})}return b}#x(i,_,g,s,h,b,d,f,L,S){if(this.#M(i,_,g,s,h,b,d,f)){S.push(d,f);return}for(let A=1;A<L-1;A++){const n=A/L,a=1-n;let C=n*i+a*g,x=n*_+a*s,T=n*g+a*h,D=n*s+a*b;const $=n*h+a*d,W=n*b+a*f;C=n*C+a*T,x=n*x+a*D,T=n*T+a*$,D=n*D+a*W,C=n*C+a*T,x=n*x+a*D,S.push(C,x)}S.push(d,f)}#M(i,_,g,s,h,b,d,f){const S=(3*g-2*i-d)**2,A=(3*s-2*_-f)**2,n=(3*h-i-2*d)**2,a=(3*b-_-2*f)**2;return Math.max(S,n)+Math.max(A,a)<=10}#k(){let i=1/0,_=-1/0,g=1/0,s=-1/0;for(const h of this.paths)for(const[b,d,f,L]of h){const S=r.Util.bezierBoundingBox(...b,...d,...f,...L);i=Math.min(i,S[0]),g=Math.min(g,S[1]),_=Math.max(_,S[2]),s=Math.max(s,S[3])}return[i,g,_,s]}#F(){return this.#r?Math.ceil(this.thickness*this.parentScale):0}#I(i=!1){if(this.isEmpty())return;if(!this.#r){this.#p();return}const _=this.#k(),g=this.#F();this.#n=Math.max(y,_[2]-_[0]),this.#t=Math.max(y,_[3]-_[1]);const s=Math.ceil(g+this.#n*this.scaleFactor),h=Math.ceil(g+this.#t*this.scaleFactor),[b,d]=this.parentDimensions;this.width=s/b,this.height=h/d,this.#e=s/h,this.#N();const f=this.translationX,L=this.translationY;this.translationX=-_[0],this.translationY=-_[1],this.#S(),this.#p(),this.#f=s,this.#o=h,this.setDims(s,h);const S=i?g/this.scaleFactor/2:0;this.translate(f-this.translationX-S,L-this.translationY-S)}#N(){const{style:i}=this.div;this.#e>=1?(i.minHeight=`${y}px`,i.minWidth=`${Math.round(this.#e*y)}px`):(i.minWidth=`${y}px`,i.minHeight=`${Math.round(y/this.#e)}px`)}static deserialize(i,_,g){const s=super.deserialize(i,_,g);s.thickness=i.thickness,s.color=r.Util.makeHexColor(...i.color),s.opacity=i.opacity;const[h,b]=s.pageDimensions,d=s.width*h,f=s.height*b,L=s.parentScale,S=i.thickness/2;s.#e=d/f,s.#r=!0,s.#f=Math.round(d),s.#o=Math.round(f);for(const{bezier:n}of i.paths){const a=[];s.paths.push(a);let C=L*(n[0]-S),x=L*(f-n[1]-S);for(let D=2,$=n.length;D<$;D+=6){const W=L*(n[D]-S),se=L*(f-n[D+1]-S),ne=L*(n[D+2]-S),q=L*(f-n[D+3]-S),G=L*(n[D+4]-S),I=L*(f-n[D+5]-S);a.push([[C,x],[W,se],[ne,q],[G,I]]),C=G,x=I}const T=this.#R(a);s.bezierPath2D.push(T)}const A=s.#k();return s.#n=Math.max(y,A[2]-A[0]),s.#t=Math.max(y,A[3]-A[1]),s.#m(d,f),s}serialize(){if(this.isEmpty())return null;const i=this.getRect(0,0),_=this.rotation%180===0?i[3]-i[1]:i[2]-i[0],g=p.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:r.AnnotationEditorType.INK,color:g,thickness:this.thickness,opacity:this.opacity,paths:this.#O(this.scaleFactor/this.parentScale,this.translationX,this.translationY,_),pageIndex:this.pageIndex,rect:i,rotation:this.rotation}}}e.InkEditor=E}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fitCurve=void 0;const r=u(31);e.fitCurve=r}),(t=>{function e(h,b,d){if(!Array.isArray(h))throw new TypeError("First argument should be an array");if(h.forEach(A=>{if(!Array.isArray(A)||A.some(n=>typeof n!="number")||A.length!==h[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),h=h.filter((A,n)=>n===0||!A.every((a,C)=>a===h[n-1][C])),h.length<2)return[];const f=h.length,L=_(h[1],h[0]),S=_(h[f-2],h[f-1]);return u(h,L,S,b,d)}function u(h,b,d,f,L){var A,n,a,C,x,T,D,$,W,se,ne,q,G;if(h.length===2)return q=g.vectorLen(g.subtract(h[0],h[1]))/3,A=[h[0],g.addArrays(h[0],g.mulItems(b,q)),g.addArrays(h[1],g.mulItems(d,q)),h[1]],[A];if(n=y(h),[A,C,T]=r(h,n,n,b,d,L),C===0||C<f)return[A];if(C<f*f)for(a=n,x=C,D=T,G=0;G<20;G++){if(a=w(A,h,a),[A,C,T]=r(h,n,a,b,d,L),C<f)return[A];if(T===D){let I=C/x;if(I>.9999&&I<1.0001)break}x=C,D=T}return ne=[],$=g.subtract(h[T-1],h[T+1]),$.every(I=>I===0)&&($=g.subtract(h[T-1],h[T]),[$[0],$[1]]=[-$[1],$[0]]),W=g.normalize($),se=g.mulItems(W,-1),ne=ne.concat(u(h.slice(0,T+1),b,W,f,L)),ne=ne.concat(u(h.slice(T),se,d,f,L)),ne}function r(h,b,d,f,L,S){var A,n,a;return A=p(h,d,f,L),[n,a]=E(h,A,b),S&&S({bez:A,points:h,params:b,maxErr:n,maxPoint:a}),[A,n,a]}function p(h,b,d,f){var L,S,A,n,a,C,x,T,D,$,W,se,ne,q,G,I,k,O=h[0],m=h[h.length-1];for(L=[O,null,null,m],S=g.zeros_Xx2x2(b.length),ne=0,q=b.length;ne<q;ne++)I=b[ne],k=1-I,A=S[ne],A[0]=g.mulItems(d,3*I*(k*k)),A[1]=g.mulItems(f,3*k*(I*I));for(n=[[0,0],[0,0]],a=[0,0],ne=0,q=h.length;ne<q;ne++)I=b[ne],A=S[ne],n[0][0]+=g.dot(A[0],A[0]),n[0][1]+=g.dot(A[0],A[1]),n[1][0]+=g.dot(A[0],A[1]),n[1][1]+=g.dot(A[1],A[1]),G=g.subtract(h[ne],s.q([O,O,m,m],I)),a[0]+=g.dot(A[0],G),a[1]+=g.dot(A[1],G);return C=n[0][0]*n[1][1]-n[1][0]*n[0][1],x=n[0][0]*a[1]-n[1][0]*a[0],T=a[0]*n[1][1]-a[1]*n[0][1],D=C===0?0:T/C,$=C===0?0:x/C,se=g.vectorLen(g.subtract(O,m)),W=1e-6*se,D<W||$<W?(L[1]=g.addArrays(O,g.mulItems(d,se/3)),L[2]=g.addArrays(m,g.mulItems(f,se/3))):(L[1]=g.addArrays(O,g.mulItems(d,D)),L[2]=g.addArrays(m,g.mulItems(f,$))),L}function w(h,b,d){return d.map((f,L)=>P(h,b[L],f))}function P(h,b,d){var f=g.subtract(s.q(h,d),b),L=s.qprime(h,d),S=g.mulMatrix(f,L),A=g.sum(g.squareItems(L))+2*g.mulMatrix(f,s.qprimeprime(h,d));return A===0?d:d-S/A}function y(h){var b=[],d,f,L;return h.forEach((S,A)=>{d=A?f+g.vectorLen(g.subtract(S,L)):0,b.push(d),f=d,L=S}),b=b.map(S=>S/f),b}function E(h,b,d){var f,L,S,A,n,a,C,x;L=0,S=Math.floor(h.length/2);const T=c(b,10);for(n=0,a=h.length;n<a;n++)C=h[n],x=i(b,d[n],T,10),A=g.subtract(s.q(b,x),C),f=A[0]*A[0]+A[1]*A[1],f>L&&(L=f,S=n);return[L,S]}var c=function(h,b){for(var d,f=[0],L=h[0],S=0,A=1;A<=b;A++)d=s.q(h,A/b),S+=g.vectorLen(g.subtract(d,L)),f.push(S),L=d;return f=f.map(n=>n/S),f};function i(h,b,d,f){if(b<0)return 0;if(b>1)return 1;for(var L,S,A,n,a,C=1;C<=f;C++)if(b<=d[C]){n=(C-1)/f,A=C/f,S=d[C-1],L=d[C],a=(b-S)/(L-S)*(A-n)+n;break}return a}function _(h,b){return g.normalize(g.subtract(h,b))}class g{static zeros_Xx2x2(b){for(var d=[];b--;)d.push([0,0]);return d}static mulItems(b,d){return b.map(f=>f*d)}static mulMatrix(b,d){return b.reduce((f,L,S)=>f+L*d[S],0)}static subtract(b,d){return b.map((f,L)=>f-d[L])}static addArrays(b,d){return b.map((f,L)=>f+d[L])}static addItems(b,d){return b.map(f=>f+d)}static sum(b){return b.reduce((d,f)=>d+f)}static dot(b,d){return g.mulMatrix(b,d)}static vectorLen(b){return Math.hypot(...b)}static divItems(b,d){return b.map(f=>f/d)}static squareItems(b){return b.map(d=>d*d)}static normalize(b){return this.divItems(b,this.vectorLen(b))}}class s{static q(b,d){var f=1-d,L=g.mulItems(b[0],f*f*f),S=g.mulItems(b[1],3*f*f*d),A=g.mulItems(b[2],3*f*d*d),n=g.mulItems(b[3],d*d*d);return g.addArrays(g.addArrays(L,S),g.addArrays(A,n))}static qprime(b,d){var f=1-d,L=g.mulItems(g.subtract(b[1],b[0]),3*f*f),S=g.mulItems(g.subtract(b[2],b[1]),6*f*d),A=g.mulItems(g.subtract(b[3],b[2]),3*d*d);return g.addArrays(g.addArrays(L,S),A)}static qprimeprime(b,d){return g.addArrays(g.mulItems(g.addArrays(g.subtract(b[2],g.mulItems(b[1],2)),b[0]),6*(1-d)),g.mulItems(g.addArrays(g.subtract(b[3],g.mulItems(b[2],2)),b[1]),6*d))}}t.exports=e,t.exports.fitCubic=u,t.exports.createTangent=_}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var r=u(1),p=u(6),w=u(3),P=u(33),y=u(34);const E=1e3,c=9,i=new WeakSet;function _(N){return{width:N[2]-N[0],height:N[3]-N[1]}}class g{static create(o){switch(o.data.annotationType){case r.AnnotationType.LINK:return new h(o);case r.AnnotationType.TEXT:return new b(o);case r.AnnotationType.WIDGET:switch(o.data.fieldType){case"Tx":return new f(o);case"Btn":return o.data.radioButton?new S(o):o.data.checkBox?new L(o):new A(o);case"Ch":return new n(o)}return new d(o);case r.AnnotationType.POPUP:return new a(o);case r.AnnotationType.FREETEXT:return new x(o);case r.AnnotationType.LINE:return new T(o);case r.AnnotationType.SQUARE:return new D(o);case r.AnnotationType.CIRCLE:return new $(o);case r.AnnotationType.POLYLINE:return new W(o);case r.AnnotationType.CARET:return new ne(o);case r.AnnotationType.INK:return new q(o);case r.AnnotationType.POLYGON:return new se(o);case r.AnnotationType.HIGHLIGHT:return new G(o);case r.AnnotationType.UNDERLINE:return new I(o);case r.AnnotationType.SQUIGGLY:return new k(o);case r.AnnotationType.STRIKEOUT:return new O(o);case r.AnnotationType.STAMP:return new m(o);case r.AnnotationType.FILEATTACHMENT:return new l(o);default:return new s(o)}}}class s{constructor(o,{isRenderable:v=!1,ignoreBorder:R=!1,createQuadrilaterals:F=!1}={}){this.isRenderable=v,this.data=o.data,this.layer=o.layer,this.page=o.page,this.viewport=o.viewport,this.linkService=o.linkService,this.downloadManager=o.downloadManager,this.imageResourcesPath=o.imageResourcesPath,this.renderForms=o.renderForms,this.svgFactory=o.svgFactory,this.annotationStorage=o.annotationStorage,this.enableScripting=o.enableScripting,this.hasJSActions=o.hasJSActions,this._fieldObjects=o.fieldObjects,v&&(this.container=this._createContainer(R)),F&&(this.quadrilaterals=this._createQuadrilaterals(R))}_createContainer(o=!1){const{data:v,page:R,viewport:F}=this,U=document.createElement("section");U.setAttribute("data-annotation-id",v.id),v.noRotate&&U.classList.add("norotate");const{pageWidth:H,pageHeight:V,pageX:Y,pageY:Z}=F.rawDims,{width:X,height:re}=_(v.rect),ce=r.Util.normalizeRect([v.rect[0],R.view[3]-v.rect[1]+R.view[1],v.rect[2],R.view[3]-v.rect[3]+R.view[1]]);if(!o&&v.borderStyle.width>0){U.style.borderWidth=`${v.borderStyle.width}px`;const te=v.borderStyle.horizontalCornerRadius,ae=v.borderStyle.verticalCornerRadius;if(te>0||ae>0){const B=`calc(${te}px * var(--scale-factor)) / calc(${ae}px * var(--scale-factor))`;U.style.borderRadius=B}else if(this instanceof S){const B=`calc(${X}px * var(--scale-factor)) / calc(${re}px * var(--scale-factor))`;U.style.borderRadius=B}switch(v.borderStyle.style){case r.AnnotationBorderStyleType.SOLID:U.style.borderStyle="solid";break;case r.AnnotationBorderStyleType.DASHED:U.style.borderStyle="dashed";break;case r.AnnotationBorderStyleType.BEVELED:(0,r.warn)("Unimplemented border style: beveled");break;case r.AnnotationBorderStyleType.INSET:(0,r.warn)("Unimplemented border style: inset");break;case r.AnnotationBorderStyleType.UNDERLINE:U.style.borderBottomStyle="solid";break}const Q=v.borderColor||null;Q?U.style.borderColor=r.Util.makeHexColor(Q[0]|0,Q[1]|0,Q[2]|0):U.style.borderWidth=0}U.style.left=`${100*(ce[0]-Y)/H}%`,U.style.top=`${100*(ce[1]-Z)/V}%`;const{rotation:z}=v;return v.hasOwnCanvas||z===0?(U.style.width=`${100*X/H}%`,U.style.height=`${100*re/V}%`):this.setRotation(z,U),U}setRotation(o,v=this.container){const{pageWidth:R,pageHeight:F}=this.viewport.rawDims,{width:U,height:H}=_(this.data.rect);let V,Y;o%180===0?(V=100*U/R,Y=100*H/F):(V=100*H/R,Y=100*U/F),v.style.width=`${V}%`,v.style.height=`${Y}%`,v.setAttribute("data-main-rotation",(360-o)%360)}get _commonActions(){const o=(v,R,F)=>{const U=F.detail[v];F.target.style[R]=P.ColorConverters[`${U[0]}_HTML`](U.slice(1))};return(0,r.shadow)(this,"_commonActions",{display:v=>{const R=v.detail.display%2===1;this.container.style.visibility=R?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:R,print:v.detail.display===0||v.detail.display===3})},print:v=>{this.annotationStorage.setValue(this.data.id,{print:v.detail.print})},hidden:v=>{this.container.style.visibility=v.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:v.detail.hidden})},focus:v=>{setTimeout(()=>v.target.focus({preventScroll:!1}),0)},userName:v=>{v.target.title=v.detail.userName},readonly:v=>{v.detail.readonly?v.target.setAttribute("readonly",""):v.target.removeAttribute("readonly")},required:v=>{this._setRequired(v.target,v.detail.required)},bgColor:v=>{o("bgColor","backgroundColor",v)},fillColor:v=>{o("fillColor","backgroundColor",v)},fgColor:v=>{o("fgColor","color",v)},textColor:v=>{o("textColor","color",v)},borderColor:v=>{o("borderColor","borderColor",v)},strokeColor:v=>{o("strokeColor","borderColor",v)},rotation:v=>{const R=v.detail.rotation;this.setRotation(R),this.annotationStorage.setValue(this.data.id,{rotation:R})}})}_dispatchEventFromSandbox(o,v){const R=this._commonActions;for(const F of Object.keys(v.detail))(o[F]||R[F])?.(v)}_setDefaultPropertiesFromJS(o){if(!this.enableScripting)return;const v=this.annotationStorage.getRawValue(this.data.id);if(!v)return;const R=this._commonActions;for(const[F,U]of Object.entries(v)){const H=R[F];if(H){const V={detail:{[F]:U},target:o};H(V),delete v[F]}}}_createQuadrilaterals(o=!1){if(!this.data.quadPoints)return null;const v=[],R=this.data.rect;for(const F of this.data.quadPoints)this.data.rect=[F[2].x,F[2].y,F[1].x,F[1].y],v.push(this._createContainer(o));return this.data.rect=R,v}_createPopup(o,v){let R=this.container;this.quadrilaterals&&(o||=this.quadrilaterals,R=this.quadrilaterals[0]),o||(o=document.createElement("div"),o.classList.add("popupTriggerArea"),R.append(o));const U=new C({container:R,trigger:o,color:v.color,titleObj:v.titleObj,modificationDate:v.modificationDate,contentsObj:v.contentsObj,richText:v.richText,hideWrapper:!0}).render();U.style.left="100%",R.append(U)}_renderQuadrilaterals(o){for(const v of this.quadrilaterals)v.classList.add(o);return this.quadrilaterals}render(){(0,r.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(o,v=null){const R=[];if(this._fieldObjects){const F=this._fieldObjects[o];if(F)for(const{page:U,id:H,exportValues:V}of F){if(U===-1||H===v)continue;const Y=typeof V=="string"?V:null,Z=document.querySelector(`[data-element-id="${H}"]`);if(Z&&!i.has(Z)){(0,r.warn)(`_getElementsByName - element not allowed: ${H}`);continue}R.push({id:H,exportValue:Y,domElement:Z})}return R}for(const F of document.getElementsByName(o)){const{exportValue:U}=F,H=F.getAttribute("data-element-id");H!==v&&i.has(F)&&R.push({id:H,exportValue:U,domElement:F})}return R}}class h extends s{constructor(o,v=null){super(o,{isRenderable:!0,ignoreBorder:!!v?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=o.data.isTooltipOnly}render(){const{data:o,linkService:v}=this,R=document.createElement("a");R.setAttribute("data-element-id",o.id);let F=!1;return o.url?(v.addLinkAttributes(R,o.url,o.newWindow),F=!0):o.action?(this._bindNamedAction(R,o.action),F=!0):o.attachment?(this._bindAttachment(R,o.attachment),F=!0):o.setOCGState?(this.#t(R,o.setOCGState),F=!0):o.dest?(this._bindLink(R,o.dest),F=!0):(o.actions&&(o.actions.Action||o.actions["Mouse Up"]||o.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(R,o),F=!0),o.resetForm?(this._bindResetFormAction(R,o.resetForm),F=!0):this.isTooltipOnly&&!F&&(this._bindLink(R,""),F=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((U,H)=>{const V=H===0?R:R.cloneNode();return U.append(V),U}):(this.container.classList.add("linkAnnotation"),F&&this.container.append(R),this.container)}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(o,v){o.href=this.linkService.getDestinationHash(v),o.onclick=()=>(v&&this.linkService.goToDestination(v),!1),(v||v==="")&&this.#e()}_bindNamedAction(o,v){o.href=this.linkService.getAnchorUrl(""),o.onclick=()=>(this.linkService.executeNamedAction(v),!1),this.#e()}_bindAttachment(o,v){o.href=this.linkService.getAnchorUrl(""),o.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,v.content,v.filename),!1),this.#e()}#t(o,v){o.href=this.linkService.getAnchorUrl(""),o.onclick=()=>(this.linkService.executeSetOCGState(v),!1),this.#e()}_bindJSAction(o,v){o.href=this.linkService.getAnchorUrl("");const R=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const F of Object.keys(v.actions)){const U=R.get(F);U&&(o[U]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:v.id,name:F}}),!1))}o.onclick||(o.onclick=()=>!1),this.#e()}_bindResetFormAction(o,v){const R=o.onclick;if(R||(o.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){(0,r.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),R||(o.onclick=()=>!1);return}o.onclick=()=>{R?.();const{fields:F,refs:U,include:H}=v,V=[];if(F.length!==0||U.length!==0){const X=new Set(U);for(const re of F){const ce=this._fieldObjects[re]||[];for(const{id:z}of ce)X.add(z)}for(const re of Object.values(this._fieldObjects))for(const ce of re)X.has(ce.id)===H&&V.push(ce)}else for(const X of Object.values(this._fieldObjects))V.push(...X);const Y=this.annotationStorage,Z=[];for(const X of V){const{id:re}=X;switch(Z.push(re),X.type){case"text":{const z=X.defaultValue||"";Y.setValue(re,{value:z});break}case"checkbox":case"radiobutton":{const z=X.defaultValue===X.exportValues;Y.setValue(re,{value:z});break}case"combobox":case"listbox":{const z=X.defaultValue||"";Y.setValue(re,{value:z});break}default:continue}const ce=document.querySelector(`[data-element-id="${re}"]`);if(ce){if(!i.has(ce)){(0,r.warn)(`_bindResetFormAction - element not allowed: ${re}`);continue}}else continue;ce.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Z,name:"ResetForm"}}),!1}}}class b extends s{constructor(o){const v=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:v})}render(){this.container.classList.add("textAnnotation");const o=document.createElement("img");return o.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",o.alt="[{{type}} Annotation]",o.dataset.l10nId="text_annotation_type",o.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(o,this.data),this.container.append(o),this.container}}class d extends s{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(o){this.data.hasOwnCanvas&&(o.previousSibling?.nodeName==="CANVAS"&&(o.previousSibling.hidden=!0),o.hidden=!1)}_getKeyModifier(o){const{isWin:v,isMac:R}=r.FeatureTest.platform;return v&&o.ctrlKey||R&&o.metaKey}_setEventListener(o,v,R,F){v.includes("mouse")?o.addEventListener(v,U=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:R,value:F(U),shift:U.shiftKey,modifier:this._getKeyModifier(U)}})}):o.addEventListener(v,U=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:R,value:F(U)}})})}_setEventListeners(o,v,R){for(const[F,U]of v)(U==="Action"||this.data.actions?.[U])&&this._setEventListener(o,F,U,R)}_setBackgroundColor(o){const v=this.data.backgroundColor||null;o.style.backgroundColor=v===null?"transparent":r.Util.makeHexColor(v[0],v[1],v[2])}_setTextStyle(o){const v=["left","center","right"],{fontColor:R}=this.data.defaultAppearanceData,F=this.data.defaultAppearanceData.fontSize||c,U=o.style;let H;const V=2,Y=Z=>Math.round(10*Z)/10;if(this.data.multiLine){const Z=Math.abs(this.data.rect[3]-this.data.rect[1]-V),X=Math.round(Z/(r.LINE_FACTOR*F))||1,re=Z/X;H=Math.min(F,Y(re/r.LINE_FACTOR))}else{const Z=Math.abs(this.data.rect[3]-this.data.rect[1]-V);H=Math.min(F,Y(Z/r.LINE_FACTOR))}U.fontSize=`calc(${H}px * var(--scale-factor))`,U.color=r.Util.makeHexColor(R[0],R[1],R[2]),this.data.textAlignment!==null&&(U.textAlign=v[this.data.textAlignment])}_setRequired(o,v){v?o.setAttribute("required",!0):o.removeAttribute("required"),o.setAttribute("aria-required",v)}}class f extends d{constructor(o){const v=o.renderForms||!o.data.hasAppearance&&!!o.data.fieldValue;super(o,{isRenderable:v})}setPropertyOnSiblings(o,v,R,F){const U=this.annotationStorage;for(const H of this._getElementsByName(o.name,o.id))H.domElement&&(H.domElement[v]=R),U.setValue(H.id,{[F]:R})}render(){const o=this.annotationStorage,v=this.data.id;this.container.classList.add("textWidgetAnnotation");let R=null;if(this.renderForms){const F=o.getValue(v,{value:this.data.fieldValue});let U=F.formattedValue||F.value||"";const H=o.getValue(v,{charLimit:this.data.maxLen}).charLimit;H&&U.length>H&&(U=U.slice(0,H));const V={userValue:U,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(R=document.createElement("textarea"),R.textContent=U,this.data.doNotScroll&&(R.style.overflowY="hidden")):(R=document.createElement("input"),R.type="text",R.setAttribute("value",U),this.data.doNotScroll&&(R.style.overflowX="hidden")),this.data.hasOwnCanvas&&(R.hidden=!0),i.add(R),R.setAttribute("data-element-id",v),R.disabled=this.data.readOnly,R.name=this.data.fieldName,R.tabIndex=E,this._setRequired(R,this.data.required),H&&(R.maxLength=H),R.addEventListener("input",Z=>{o.setValue(v,{value:Z.target.value}),this.setPropertyOnSiblings(R,"value",Z.target.value,"value")}),R.addEventListener("resetform",Z=>{const X=this.data.defaultFieldValue??"";R.value=V.userValue=X,V.formattedValue=null});let Y=Z=>{const{formattedValue:X}=V;X!=null&&(Z.target.value=X),Z.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){R.addEventListener("focus",X=>{const{target:re}=X;V.userValue&&(re.value=V.userValue),V.lastCommittedValue=re.value,V.commitKey=1}),R.addEventListener("updatefromsandbox",X=>{this.showElementAndHideCanvas(X.target);const re={value(ce){V.userValue=ce.detail.value??"",o.setValue(v,{value:V.userValue.toString()}),ce.target.value=V.userValue},formattedValue(ce){const{formattedValue:z}=ce.detail;V.formattedValue=z,z!=null&&ce.target!==document.activeElement&&(ce.target.value=z),o.setValue(v,{formattedValue:z})},selRange(ce){ce.target.setSelectionRange(...ce.detail.selRange)},charLimit:ce=>{const{charLimit:z}=ce.detail,{target:te}=ce;if(z===0){te.removeAttribute("maxLength");return}te.setAttribute("maxLength",z);let ae=V.userValue;!ae||ae.length<=z||(ae=ae.slice(0,z),te.value=V.userValue=ae,o.setValue(v,{value:ae}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:v,name:"Keystroke",value:ae,willCommit:!0,commitKey:1,selStart:te.selectionStart,selEnd:te.selectionEnd}}))}};this._dispatchEventFromSandbox(re,X)}),R.addEventListener("keydown",X=>{V.commitKey=1;let re=-1;if(X.key==="Escape"?re=0:X.key==="Enter"&&!this.data.multiLine?re=2:X.key==="Tab"&&(V.commitKey=3),re===-1)return;const{value:ce}=X.target;V.lastCommittedValue!==ce&&(V.lastCommittedValue=ce,V.userValue=ce,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:v,name:"Keystroke",value:ce,willCommit:!0,commitKey:re,selStart:X.target.selectionStart,selEnd:X.target.selectionEnd}}))});const Z=Y;Y=null,R.addEventListener("blur",X=>{if(!X.relatedTarget)return;const{value:re}=X.target;V.userValue=re,V.lastCommittedValue!==re&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:v,name:"Keystroke",value:re,willCommit:!0,commitKey:V.commitKey,selStart:X.target.selectionStart,selEnd:X.target.selectionEnd}}),Z(X)}),this.data.actions?.Keystroke&&R.addEventListener("beforeinput",X=>{V.lastCommittedValue=null;const{data:re,target:ce}=X,{value:z,selectionStart:te,selectionEnd:ae}=ce;let Q=te,B=ae;switch(X.inputType){case"deleteWordBackward":{const j=z.substring(0,te).match(/\w*[^\w]*$/);j&&(Q-=j[0].length);break}case"deleteWordForward":{const j=z.substring(te).match(/^[^\w]*\w*/);j&&(B+=j[0].length);break}case"deleteContentBackward":te===ae&&(Q-=1);break;case"deleteContentForward":te===ae&&(B+=1);break}X.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:v,name:"Keystroke",value:z,change:re||"",willCommit:!1,selStart:Q,selEnd:B}})}),this._setEventListeners(R,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],X=>X.target.value)}if(Y&&R.addEventListener("blur",Y),this.data.comb){const X=(this.data.rect[2]-this.data.rect[0])/H;R.classList.add("comb"),R.style.letterSpacing=`calc(${X}px * var(--scale-factor) - 1ch)`}}else R=document.createElement("div"),R.textContent=this.data.fieldValue,R.style.verticalAlign="middle",R.style.display="table-cell";return this._setTextStyle(R),this._setBackgroundColor(R),this._setDefaultPropertiesFromJS(R),this.container.append(R),this.container}}class L extends d{constructor(o){super(o,{isRenderable:o.renderForms})}render(){const o=this.annotationStorage,v=this.data,R=v.id;let F=o.getValue(R,{value:v.exportValue===v.fieldValue}).value;typeof F=="string"&&(F=F!=="Off",o.setValue(R,{value:F})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const U=document.createElement("input");return i.add(U),U.setAttribute("data-element-id",R),U.disabled=v.readOnly,this._setRequired(U,this.data.required),U.type="checkbox",U.name=v.fieldName,F&&U.setAttribute("checked",!0),U.setAttribute("exportValue",v.exportValue),U.tabIndex=E,U.addEventListener("change",H=>{const{name:V,checked:Y}=H.target;for(const Z of this._getElementsByName(V,R)){const X=Y&&Z.exportValue===v.exportValue;Z.domElement&&(Z.domElement.checked=X),o.setValue(Z.id,{value:X})}o.setValue(R,{value:Y})}),U.addEventListener("resetform",H=>{const V=v.defaultFieldValue||"Off";H.target.checked=V===v.exportValue}),this.enableScripting&&this.hasJSActions&&(U.addEventListener("updatefromsandbox",H=>{const V={value(Y){Y.target.checked=Y.detail.value!=="Off",o.setValue(R,{value:Y.target.checked})}};this._dispatchEventFromSandbox(V,H)}),this._setEventListeners(U,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],H=>H.target.checked)),this._setBackgroundColor(U),this._setDefaultPropertiesFromJS(U),this.container.append(U),this.container}}class S extends d{constructor(o){super(o,{isRenderable:o.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const o=this.annotationStorage,v=this.data,R=v.id;let F=o.getValue(R,{value:v.fieldValue===v.buttonValue}).value;typeof F=="string"&&(F=F!==v.buttonValue,o.setValue(R,{value:F}));const U=document.createElement("input");if(i.add(U),U.setAttribute("data-element-id",R),U.disabled=v.readOnly,this._setRequired(U,this.data.required),U.type="radio",U.name=v.fieldName,F&&U.setAttribute("checked",!0),U.tabIndex=E,U.addEventListener("change",H=>{const{name:V,checked:Y}=H.target;for(const Z of this._getElementsByName(V,R))o.setValue(Z.id,{value:!1});o.setValue(R,{value:Y})}),U.addEventListener("resetform",H=>{const V=v.defaultFieldValue;H.target.checked=V!=null&&V===v.buttonValue}),this.enableScripting&&this.hasJSActions){const H=v.buttonValue;U.addEventListener("updatefromsandbox",V=>{const Y={value:Z=>{const X=H===Z.detail.value;for(const re of this._getElementsByName(Z.target.name)){const ce=X&&re.id===R;re.domElement&&(re.domElement.checked=ce),o.setValue(re.id,{value:ce})}}};this._dispatchEventFromSandbox(Y,V)}),this._setEventListeners(U,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],V=>V.target.checked)}return this._setBackgroundColor(U),this._setDefaultPropertiesFromJS(U),this.container.append(U),this.container}}class A extends h{constructor(o){super(o,{ignoreBorder:o.data.hasAppearance})}render(){const o=super.render();o.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(o.title=this.data.alternativeText);const v=o.lastChild;return this.enableScripting&&this.hasJSActions&&v&&(this._setDefaultPropertiesFromJS(v),v.addEventListener("updatefromsandbox",R=>{this._dispatchEventFromSandbox({},R)})),o}}class n extends d{constructor(o){super(o,{isRenderable:o.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const o=this.annotationStorage,v=this.data.id,R=o.getValue(v,{value:this.data.fieldValue}),F=document.createElement("select");i.add(F),F.setAttribute("data-element-id",v),F.disabled=this.data.readOnly,this._setRequired(F,this.data.required),F.name=this.data.fieldName,F.tabIndex=E;let U=this.data.combo&&this.data.options.length>0;this.data.combo||(F.size=this.data.options.length,this.data.multiSelect&&(F.multiple=!0)),F.addEventListener("resetform",X=>{const re=this.data.defaultFieldValue;for(const ce of F.options)ce.selected=ce.value===re});for(const X of this.data.options){const re=document.createElement("option");re.textContent=X.displayValue,re.value=X.exportValue,R.value.includes(X.exportValue)&&(re.setAttribute("selected",!0),U=!1),F.append(re)}let H=null;if(U){const X=document.createElement("option");X.value=" ",X.setAttribute("hidden",!0),X.setAttribute("selected",!0),F.prepend(X),H=()=>{X.remove(),F.removeEventListener("input",H),H=null},F.addEventListener("input",H)}const V=X=>{const re=X?"value":"textContent",{options:ce,multiple:z}=F;return z?Array.prototype.filter.call(ce,te=>te.selected).map(te=>te[re]):ce.selectedIndex===-1?null:ce[ce.selectedIndex][re]};let Y=V(!1);const Z=X=>{const re=X.target.options;return Array.prototype.map.call(re,ce=>({displayValue:ce.textContent,exportValue:ce.value}))};return this.enableScripting&&this.hasJSActions?(F.addEventListener("updatefromsandbox",X=>{const re={value(ce){H?.();const z=ce.detail.value,te=new Set(Array.isArray(z)?z:[z]);for(const ae of F.options)ae.selected=te.has(ae.value);o.setValue(v,{value:V(!0)}),Y=V(!1)},multipleSelection(ce){F.multiple=!0},remove(ce){const z=F.options,te=ce.detail.remove;z[te].selected=!1,F.remove(te),z.length>0&&Array.prototype.findIndex.call(z,Q=>Q.selected)===-1&&(z[0].selected=!0),o.setValue(v,{value:V(!0),items:Z(ce)}),Y=V(!1)},clear(ce){for(;F.length!==0;)F.remove(0);o.setValue(v,{value:null,items:[]}),Y=V(!1)},insert(ce){const{index:z,displayValue:te,exportValue:ae}=ce.detail.insert,Q=F.children[z],B=document.createElement("option");B.textContent=te,B.value=ae,Q?Q.before(B):F.append(B),o.setValue(v,{value:V(!0),items:Z(ce)}),Y=V(!1)},items(ce){const{items:z}=ce.detail;for(;F.length!==0;)F.remove(0);for(const te of z){const{displayValue:ae,exportValue:Q}=te,B=document.createElement("option");B.textContent=ae,B.value=Q,F.append(B)}F.options.length>0&&(F.options[0].selected=!0),o.setValue(v,{value:V(!0),items:Z(ce)}),Y=V(!1)},indices(ce){const z=new Set(ce.detail.indices);for(const te of ce.target.options)te.selected=z.has(te.index);o.setValue(v,{value:V(!0)}),Y=V(!1)},editable(ce){ce.target.disabled=!ce.detail.editable}};this._dispatchEventFromSandbox(re,X)}),F.addEventListener("input",X=>{const re=V(!0);o.setValue(v,{value:re}),X.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:v,name:"Keystroke",value:Y,changeEx:re,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(F,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],X=>X.target.value)):F.addEventListener("input",function(X){o.setValue(v,{value:V(!0)})}),this.data.combo&&this._setTextStyle(F),this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class a extends s{static IGNORE_TYPES=new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]);constructor(o){const{data:v}=o,R=!a.IGNORE_TYPES.has(v.parentType)&&!!(v.titleObj?.str||v.contentsObj?.str||v.richText?.str);super(o,{isRenderable:R})}render(){this.container.classList.add("popupAnnotation");const o=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(o.length===0)return this.container;const v=new C({container:this.container,trigger:Array.from(o),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),R=this.page,F=r.Util.normalizeRect([this.data.parentRect[0],R.view[3]-this.data.parentRect[1]+R.view[1],this.data.parentRect[2],R.view[3]-this.data.parentRect[3]+R.view[1]]),U=F[0]+this.data.parentRect[2]-this.data.parentRect[0],H=F[1],{pageWidth:V,pageHeight:Y,pageX:Z,pageY:X}=this.viewport.rawDims;return this.container.style.left=`${100*(U-Z)/V}%`,this.container.style.top=`${100*(H-X)/Y}%`,this.container.append(v.render()),this.container}}class C{constructor(o){this.container=o.container,this.trigger=o.trigger,this.color=o.color,this.titleObj=o.titleObj,this.modificationDate=o.modificationDate,this.contentsObj=o.contentsObj,this.richText=o.richText,this.hideWrapper=o.hideWrapper||!1,this.pinned=!1}render(){const v=document.createElement("div");v.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?v:this.container,this.hideElement.hidden=!0;const R=document.createElement("div");R.classList.add("popup");const F=this.color;if(F){const V=.7*(255-F[0])+F[0],Y=.7*(255-F[1])+F[1],Z=.7*(255-F[2])+F[2];R.style.backgroundColor=r.Util.makeHexColor(V|0,Y|0,Z|0)}const U=document.createElement("h1");U.dir=this.titleObj.dir,U.textContent=this.titleObj.str,R.append(U);const H=p.PDFDateString.toDateObject(this.modificationDate);if(H){const V=document.createElement("span");V.classList.add("popupDate"),V.textContent="{{date}}, {{time}}",V.dataset.l10nId="annotation_date_string",V.dataset.l10nArgs=JSON.stringify({date:H.toLocaleDateString(),time:H.toLocaleTimeString()}),R.append(V)}if(this.richText?.str&&(!this.contentsObj?.str||this.contentsObj.str===this.richText.str))y.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:R}),R.lastChild.classList.add("richText","popupContent");else{const V=this._formatContents(this.contentsObj);R.append(V)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const V of this.trigger)V.addEventListener("click",this._toggle.bind(this)),V.addEventListener("mouseover",this._show.bind(this,!1)),V.addEventListener("mouseout",this._hide.bind(this,!1));return R.addEventListener("click",this._hide.bind(this,!0)),v.append(R),v}_formatContents({str:o,dir:v}){const R=document.createElement("p");R.classList.add("popupContent"),R.dir=v;const F=o.split(/(?:\r\n?|\n)/);for(let U=0,H=F.length;U<H;++U){const V=F[U];R.append(document.createTextNode(V)),U<H-1&&R.append(document.createElement("br"))}return R}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(o=!1){o&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(o=!0){o&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class x extends s{constructor(o){const v=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:v,ignoreBorder:!0}),this.textContent=o.data.textContent}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const o=document.createElement("div");o.classList.add("annotationTextContent"),o.setAttribute("role","comment");for(const v of this.textContent){const R=document.createElement("span");R.textContent=v,o.append(R)}this.container.append(o)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class T extends s{constructor(o){const v=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:v,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const o=this.data,{width:v,height:R}=_(o.rect),F=this.svgFactory.create(v,R,!0),U=this.svgFactory.createElement("svg:line");return U.setAttribute("x1",o.rect[2]-o.lineCoordinates[0]),U.setAttribute("y1",o.rect[3]-o.lineCoordinates[1]),U.setAttribute("x2",o.rect[2]-o.lineCoordinates[2]),U.setAttribute("y2",o.rect[3]-o.lineCoordinates[3]),U.setAttribute("stroke-width",o.borderStyle.width||1),U.setAttribute("stroke","transparent"),U.setAttribute("fill","transparent"),F.append(U),this.container.append(F),this._createPopup(U,o),this.container}}class D extends s{constructor(o){const v=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:v,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const o=this.data,{width:v,height:R}=_(o.rect),F=this.svgFactory.create(v,R,!0),U=o.borderStyle.width,H=this.svgFactory.createElement("svg:rect");return H.setAttribute("x",U/2),H.setAttribute("y",U/2),H.setAttribute("width",v-U),H.setAttribute("height",R-U),H.setAttribute("stroke-width",U||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),F.append(H),this.container.append(F),this._createPopup(H,o),this.container}}class $ extends s{constructor(o){const v=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:v,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const o=this.data,{width:v,height:R}=_(o.rect),F=this.svgFactory.create(v,R,!0),U=o.borderStyle.width,H=this.svgFactory.createElement("svg:ellipse");return H.setAttribute("cx",v/2),H.setAttribute("cy",R/2),H.setAttribute("rx",v/2-U/2),H.setAttribute("ry",R/2-U/2),H.setAttribute("stroke-width",U||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),F.append(H),this.container.append(F),this._createPopup(H,o),this.container}}class W extends s{constructor(o){const v=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:v,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const o=this.data,{width:v,height:R}=_(o.rect),F=this.svgFactory.create(v,R,!0);let U=[];for(const V of o.vertices){const Y=V.x-o.rect[0],Z=o.rect[3]-V.y;U.push(Y+","+Z)}U=U.join(" ");const H=this.svgFactory.createElement(this.svgElementName);return H.setAttribute("points",U),H.setAttribute("stroke-width",o.borderStyle.width||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),F.append(H),this.container.append(F),this._createPopup(H,o),this.container}}class se extends W{constructor(o){super(o),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ne extends s{constructor(o){const v=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:v,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class q extends s{constructor(o){const v=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:v,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const o=this.data,{width:v,height:R}=_(o.rect),F=this.svgFactory.create(v,R,!0);for(const U of o.inkLists){let H=[];for(const Y of U){const Z=Y.x-o.rect[0],X=o.rect[3]-Y.y;H.push(`${Z},${X}`)}H=H.join(" ");const V=this.svgFactory.createElement(this.svgElementName);V.setAttribute("points",H),V.setAttribute("stroke-width",o.borderStyle.width||1),V.setAttribute("stroke","transparent"),V.setAttribute("fill","transparent"),this._createPopup(V,o),F.append(V)}return this.container.append(F),this.container}}class G extends s{constructor(o){const v=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:v,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}class I extends s{constructor(o){const v=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:v,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}class k extends s{constructor(o){const v=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:v,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}class O extends s{constructor(o){const v=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:v,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}class m extends s{constructor(o){const v=!!(o.data.hasPopup||o.data.titleObj?.str||o.data.contentsObj?.str||o.data.richText?.str);super(o,{isRenderable:v,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class l extends s{constructor(o){super(o,{isRenderable:!0});const{filename:v,content:R}=this.data.file;this.filename=(0,p.getFilenameFromUrl)(v,!0),this.content=R,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:v,content:R})}render(){this.container.classList.add("fileAttachmentAnnotation");let o;return this.data.hasAppearance?o=document.createElement("div"):(o=document.createElement("img"),o.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),o.classList.add("popupTriggerArea"),o.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(o,this.data),this.container.append(o),this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class M{static#e(o,v,R,F){const U=o.firstChild||o;U.id=`${p.AnnotationPrefix}${v}`,R.append(o),F?.moveElementInDOM(R,o,U,!1)}static render(o){const{annotations:v,div:R,viewport:F,accessibilityManager:U}=o;(0,p.setLayerDimensions)(R,F);const H={data:null,layer:R,page:o.page,viewport:F,linkService:o.linkService,downloadManager:o.downloadManager,imageResourcesPath:o.imageResourcesPath||"",renderForms:o.renderForms!==!1,svgFactory:new p.DOMSVGFactory,annotationStorage:o.annotationStorage||new w.AnnotationStorage,enableScripting:o.enableScripting===!0,hasJSActions:o.hasJSActions,fieldObjects:o.fieldObjects};let V=0;for(const Y of v){if(Y.noHTML)continue;if(Y.annotationType!==r.AnnotationType.POPUP){const{width:re,height:ce}=_(Y.rect);if(re<=0||ce<=0)continue}H.data=Y;const Z=g.create(H);if(!Z.isRenderable)continue;const X=Z.render();if(Y.hidden&&(X.style.visibility="hidden"),Array.isArray(X))for(const re of X)re.style.zIndex=V++,M.#e(re,Y.id,R,U);else X.style.zIndex=V++,Z instanceof a?R.prepend(X):M.#e(X,Y.id,R,U)}this.#t(R,o.annotationCanvasMap)}static update(o){const{annotationCanvasMap:v,div:R,viewport:F}=o;(0,p.setLayerDimensions)(R,{rotation:F.rotation}),this.#t(R,v),R.hidden=!1}static#t(o,v){if(v){for(const[R,F]of v){const U=o.querySelector(`[data-annotation-id="${R}"]`);if(!U)continue;const{firstChild:H}=U;H?H.nodeName==="CANVAS"?H.replaceWith(F):H.before(F):U.append(F)}v.clear()}}}e.AnnotationLayer=M}),((t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function u(p){return Math.floor(Math.max(0,Math.min(1,p))*255).toString(16).padStart(2,"0")}class r{static CMYK_G([w,P,y,E]){return["G",1-Math.min(1,.3*w+.59*y+.11*P+E)]}static G_CMYK([w]){return["CMYK",0,0,0,1-w]}static G_RGB([w]){return["RGB",w,w,w]}static G_HTML([w]){const P=u(w);return`#${P}${P}${P}`}static RGB_G([w,P,y]){return["G",.3*w+.59*P+.11*y]}static RGB_HTML([w,P,y]){const E=u(w),c=u(P),i=u(y);return`#${E}${c}${i}`}static T_HTML(){return"#00000000"}static CMYK_RGB([w,P,y,E]){return["RGB",1-Math.min(1,w+E),1-Math.min(1,y+E),1-Math.min(1,P+E)]}static CMYK_HTML(w){const P=this.CMYK_RGB(w).slice(1);return this.RGB_HTML(P)}static RGB_CMYK([w,P,y]){const E=1-w,c=1-P,i=1-y,_=Math.min(E,c,i);return["CMYK",E,c,i,_]}}e.ColorConverters=r}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var r=u(19);class p{static setupStorage(P,y,E,c,i){const _=c.getValue(y,{value:null});switch(E.name){case"textarea":if(_.value!==null&&(P.textContent=_.value),i==="print")break;P.addEventListener("input",g=>{c.setValue(y,{value:g.target.value})});break;case"input":if(E.attributes.type==="radio"||E.attributes.type==="checkbox"){if(_.value===E.attributes.xfaOn?P.setAttribute("checked",!0):_.value===E.attributes.xfaOff&&P.removeAttribute("checked"),i==="print")break;P.addEventListener("change",g=>{c.setValue(y,{value:g.target.checked?g.target.getAttribute("xfaOn"):g.target.getAttribute("xfaOff")})})}else{if(_.value!==null&&P.setAttribute("value",_.value),i==="print")break;P.addEventListener("input",g=>{c.setValue(y,{value:g.target.value})})}break;case"select":if(_.value!==null)for(const g of E.children)g.attributes.value===_.value&&(g.attributes.selected=!0);P.addEventListener("input",g=>{const s=g.target.options,h=s.selectedIndex===-1?"":s[s.selectedIndex].value;c.setValue(y,{value:h})});break}}static setAttributes({html:P,element:y,storage:E=null,intent:c,linkService:i}){const{attributes:_}=y,g=P instanceof HTMLAnchorElement;_.type==="radio"&&(_.name=`${_.name}-${c}`);for(const[s,h]of Object.entries(_))if(h!=null)switch(s){case"class":h.length&&P.setAttribute(s,h.join(" "));break;case"dataId":break;case"id":P.setAttribute("data-element-id",h);break;case"style":Object.assign(P.style,h);break;case"textContent":P.textContent=h;break;default:(!g||s!=="href"&&s!=="newWindow")&&P.setAttribute(s,h)}g&&i.addLinkAttributes(P,_.href,_.newWindow),E&&_.dataId&&this.setupStorage(P,_.dataId,y,E)}static render(P){const y=P.annotationStorage,E=P.linkService,c=P.xfaHtml,i=P.intent||"display",_=document.createElement(c.name);c.attributes&&this.setAttributes({html:_,element:c,intent:i,linkService:E});const g=[[c,-1,_]],s=P.div;if(s.append(_),P.viewport){const b=`matrix(${P.viewport.transform.join(",")})`;s.style.transform=b}i!=="richText"&&s.setAttribute("class","xfaLayer xfaFont");const h=[];for(;g.length>0;){const[b,d,f]=g.at(-1);if(d+1===b.children.length){g.pop();continue}const L=b.children[++g.at(-1)[1]];if(L===null)continue;const{name:S}=L;if(S==="#text"){const n=document.createTextNode(L.value);h.push(n),f.append(n);continue}let A;if(L?.attributes?.xmlns?A=document.createElementNS(L.attributes.xmlns,S):A=document.createElement(S),f.append(A),L.attributes&&this.setAttributes({html:A,element:L,storage:y,intent:i,linkService:E}),L.children&&L.children.length>0)g.push([L,-1,A]);else if(L.value){const n=document.createTextNode(L.value);r.XfaText.shouldBuildText(S)&&h.push(n),A.append(n)}}for(const b of s.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))b.setAttribute("readOnly",!0);return{textDivs:h}}static update(P){const y=`matrix(${P.viewport.transform.join(",")})`;P.div.style.transform=y,P.div.hidden=!1}}e.XfaLayer=p}),((t,e,u)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var r=u(6),p=u(1),w=u(10);let P=class{constructor(){(0,p.unreachable)("Not implemented: SVGGraphics")}};e.SVGGraphics=P;{let b=function(n){let a=[];const C=[];for(const x of n){if(x.fn==="save"){a.push({fnId:92,fn:"group",items:[]}),C.push(a),a=a.at(-1).items;continue}x.fn==="restore"?a=C.pop():a.push(x)}return a},d=function(n){if(Number.isInteger(n))return n.toString();const a=n.toFixed(10);let C=a.length-1;if(a[C]!=="0")return a;do C--;while(a[C]==="0");return a.substring(0,a[C]==="."?C:C+1)},f=function(n){if(n[4]===0&&n[5]===0){if(n[1]===0&&n[2]===0)return n[0]===1&&n[3]===1?"":`scale(${d(n[0])} ${d(n[3])})`;if(n[0]===n[3]&&n[1]===-n[2]){const a=Math.acos(n[0])*180/Math.PI;return`rotate(${d(a)})`}}else if(n[0]===1&&n[1]===0&&n[2]===0&&n[3]===1)return`translate(${d(n[4])} ${d(n[5])})`;return`matrix(${d(n[0])} ${d(n[1])} ${d(n[2])} ${d(n[3])} ${d(n[4])} ${d(n[5])})`};const y={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},E="http://www.w3.org/XML/1998/namespace",c="http://www.w3.org/1999/xlink",i=["butt","round","square"],_=["miter","round","bevel"],g=function(n,a="",C=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!C)return URL.createObjectURL(new Blob([n],{type:a}));const x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let T=`data:${a};base64,`;for(let D=0,$=n.length;D<$;D+=3){const W=n[D]&255,se=n[D+1]&255,ne=n[D+2]&255,q=W>>2,G=(W&3)<<4|se>>4,I=D+1<$?(se&15)<<2|ne>>6:64,k=D+2<$?ne&63:64;T+=x[q]+x[G]+x[I]+x[k]}return T},s=(function(){const n=new Uint8Array([137,80,78,71,13,10,26,10]),a=12,C=new Int32Array(256);for(let ne=0;ne<256;ne++){let q=ne;for(let G=0;G<8;G++)q&1?q=3988292384^q>>1&2147483647:q=q>>1&2147483647;C[ne]=q}function x(ne,q,G){let I=-1;for(let k=q;k<G;k++){const O=(I^ne[k])&255,m=C[O];I=I>>>8^m}return I^-1}function T(ne,q,G,I){let k=I;const O=q.length;G[k]=O>>24&255,G[k+1]=O>>16&255,G[k+2]=O>>8&255,G[k+3]=O&255,k+=4,G[k]=ne.charCodeAt(0)&255,G[k+1]=ne.charCodeAt(1)&255,G[k+2]=ne.charCodeAt(2)&255,G[k+3]=ne.charCodeAt(3)&255,k+=4,G.set(q,k),k+=q.length;const m=x(G,I+4,k);G[k]=m>>24&255,G[k+1]=m>>16&255,G[k+2]=m>>8&255,G[k+3]=m&255}function D(ne,q,G){let I=1,k=0;for(let O=q;O<G;++O)I=(I+(ne[O]&255))%65521,k=(k+I)%65521;return k<<16|I}function $(ne){if(!w.isNodeJS)return W(ne);try{let q;parseInt(process.versions.node)>=8?q=ne:q=Buffer.from(ne);const G=require$$5.deflateSync(q,{level:9});return G instanceof Uint8Array?G:new Uint8Array(G)}catch(q){(0,p.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+q)}return W(ne)}function W(ne){let q=ne.length;const G=65535,I=Math.ceil(q/G),k=new Uint8Array(2+q+I*5+4);let O=0;k[O++]=120,k[O++]=156;let m=0;for(;q>G;)k[O++]=0,k[O++]=255,k[O++]=255,k[O++]=0,k[O++]=0,k.set(ne.subarray(m,m+G),O),O+=G,m+=G,q-=G;k[O++]=1,k[O++]=q&255,k[O++]=q>>8&255,k[O++]=~q&65535&255,k[O++]=(~q&65535)>>8&255,k.set(ne.subarray(m),O),O+=ne.length-m;const l=D(ne,0,ne.length);return k[O++]=l>>24&255,k[O++]=l>>16&255,k[O++]=l>>8&255,k[O++]=l&255,k}function se(ne,q,G,I){const k=ne.width,O=ne.height;let m,l,M;const N=ne.data;switch(q){case p.ImageKind.GRAYSCALE_1BPP:l=0,m=1,M=k+7>>3;break;case p.ImageKind.RGB_24BPP:l=2,m=8,M=k*3;break;case p.ImageKind.RGBA_32BPP:l=6,m=8,M=k*4;break;default:throw new Error("invalid format")}const o=new Uint8Array((1+M)*O);let v=0,R=0;for(let Z=0;Z<O;++Z)o[v++]=0,o.set(N.subarray(R,R+M),v),R+=M,v+=M;if(q===p.ImageKind.GRAYSCALE_1BPP&&I){v=0;for(let Z=0;Z<O;Z++){v++;for(let X=0;X<M;X++)o[v++]^=255}}const F=new Uint8Array([k>>24&255,k>>16&255,k>>8&255,k&255,O>>24&255,O>>16&255,O>>8&255,O&255,m,l,0,0,0]),U=$(o),H=n.length+a*3+F.length+U.length,V=new Uint8Array(H);let Y=0;return V.set(n,Y),Y+=n.length,T("IHDR",F,V,Y),Y+=a+F.length,T("IDATA",U,V,Y),Y+=a+U.length,T("IEND",new Uint8Array(0),V,Y),g(V,"image/png",G)}return function(q,G,I){const k=q.kind===void 0?p.ImageKind.GRAYSCALE_1BPP:q.kind;return se(q,k,G,I)}})();class h{constructor(){this.fontSizeScale=1,this.fontWeight=y.fontWeight,this.fontSize=0,this.textMatrix=p.IDENTITY_MATRIX,this.fontMatrix=p.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=p.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=y.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(a,C){this.x=a,this.y=C}}let L=0,S=0,A=0;e.SVGGraphics=P=class{constructor(n,a,C=!1){(0,r.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new r.DOMSVGFactory,this.current=new h,this.transformMatrix=p.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=n,this.objs=a,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!C,this._operatorIdMapping=[];for(const x in p.OPS)this._operatorIdMapping[p.OPS[x]]=x}getObject(n,a=null){return typeof n=="string"?n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n):a}save(){this.transformStack.push(this.transformMatrix);const n=this.current;this.extraStack.push(n),this.current=n.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(n){this.save(),this.executeOpTree(n),this.restore()}loadDependencies(n){const a=n.fnArray,C=n.argsArray;for(let x=0,T=a.length;x<T;x++)if(a[x]===p.OPS.dependency)for(const D of C[x]){const $=D.startsWith("g_")?this.commonObjs:this.objs,W=new Promise(se=>{$.get(D,se)});this.current.dependencies.push(W)}return Promise.all(this.current.dependencies)}transform(n,a,C,x,T,D){const $=[n,a,C,x,T,D];this.transformMatrix=p.Util.transform(this.transformMatrix,$),this.tgrp=null}getSVG(n,a){this.viewport=a;const C=this._initialize(a);return this.loadDependencies(n).then(()=>(this.transformMatrix=p.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(n)),C))}convertOpList(n){const a=this._operatorIdMapping,C=n.argsArray,x=n.fnArray,T=[];for(let D=0,$=x.length;D<$;D++){const W=x[D];T.push({fnId:W,fn:a[W],args:C[D]})}return b(T)}executeOpTree(n){for(const a of n){const C=a.fn,x=a.fnId,T=a.args;switch(x|0){case p.OPS.beginText:this.beginText();break;case p.OPS.dependency:break;case p.OPS.setLeading:this.setLeading(T);break;case p.OPS.setLeadingMoveText:this.setLeadingMoveText(T[0],T[1]);break;case p.OPS.setFont:this.setFont(T);break;case p.OPS.showText:this.showText(T[0]);break;case p.OPS.showSpacedText:this.showText(T[0]);break;case p.OPS.endText:this.endText();break;case p.OPS.moveText:this.moveText(T[0],T[1]);break;case p.OPS.setCharSpacing:this.setCharSpacing(T[0]);break;case p.OPS.setWordSpacing:this.setWordSpacing(T[0]);break;case p.OPS.setHScale:this.setHScale(T[0]);break;case p.OPS.setTextMatrix:this.setTextMatrix(T[0],T[1],T[2],T[3],T[4],T[5]);break;case p.OPS.setTextRise:this.setTextRise(T[0]);break;case p.OPS.setTextRenderingMode:this.setTextRenderingMode(T[0]);break;case p.OPS.setLineWidth:this.setLineWidth(T[0]);break;case p.OPS.setLineJoin:this.setLineJoin(T[0]);break;case p.OPS.setLineCap:this.setLineCap(T[0]);break;case p.OPS.setMiterLimit:this.setMiterLimit(T[0]);break;case p.OPS.setFillRGBColor:this.setFillRGBColor(T[0],T[1],T[2]);break;case p.OPS.setStrokeRGBColor:this.setStrokeRGBColor(T[0],T[1],T[2]);break;case p.OPS.setStrokeColorN:this.setStrokeColorN(T);break;case p.OPS.setFillColorN:this.setFillColorN(T);break;case p.OPS.shadingFill:this.shadingFill(T[0]);break;case p.OPS.setDash:this.setDash(T[0],T[1]);break;case p.OPS.setRenderingIntent:this.setRenderingIntent(T[0]);break;case p.OPS.setFlatness:this.setFlatness(T[0]);break;case p.OPS.setGState:this.setGState(T[0]);break;case p.OPS.fill:this.fill();break;case p.OPS.eoFill:this.eoFill();break;case p.OPS.stroke:this.stroke();break;case p.OPS.fillStroke:this.fillStroke();break;case p.OPS.eoFillStroke:this.eoFillStroke();break;case p.OPS.clip:this.clip("nonzero");break;case p.OPS.eoClip:this.clip("evenodd");break;case p.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case p.OPS.paintImageXObject:this.paintImageXObject(T[0]);break;case p.OPS.paintInlineImageXObject:this.paintInlineImageXObject(T[0]);break;case p.OPS.paintImageMaskXObject:this.paintImageMaskXObject(T[0]);break;case p.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(T[0],T[1]);break;case p.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case p.OPS.closePath:this.closePath();break;case p.OPS.closeStroke:this.closeStroke();break;case p.OPS.closeFillStroke:this.closeFillStroke();break;case p.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case p.OPS.nextLine:this.nextLine();break;case p.OPS.transform:this.transform(T[0],T[1],T[2],T[3],T[4],T[5]);break;case p.OPS.constructPath:this.constructPath(T[0],T[1]);break;case p.OPS.endPath:this.endPath();break;case 92:this.group(a.items);break;default:(0,p.warn)(`Unimplemented operator ${C}`);break}}}setWordSpacing(n){this.current.wordSpacing=n}setCharSpacing(n){this.current.charSpacing=n}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(n,a,C,x,T,D){const $=this.current;$.textMatrix=$.lineMatrix=[n,a,C,x,T,D],$.textMatrixScale=Math.hypot(n,a),$.x=$.lineX=0,$.y=$.lineY=0,$.xcoords=[],$.ycoords=[],$.tspan=this.svgFactory.createElement("svg:tspan"),$.tspan.setAttributeNS(null,"font-family",$.fontFamily),$.tspan.setAttributeNS(null,"font-size",`${d($.fontSize)}px`),$.tspan.setAttributeNS(null,"y",d(-$.y)),$.txtElement=this.svgFactory.createElement("svg:text"),$.txtElement.append($.tspan)}beginText(){const n=this.current;n.x=n.lineX=0,n.y=n.lineY=0,n.textMatrix=p.IDENTITY_MATRIX,n.lineMatrix=p.IDENTITY_MATRIX,n.textMatrixScale=1,n.tspan=this.svgFactory.createElement("svg:tspan"),n.txtElement=this.svgFactory.createElement("svg:text"),n.txtgrp=this.svgFactory.createElement("svg:g"),n.xcoords=[],n.ycoords=[]}moveText(n,a){const C=this.current;C.x=C.lineX+=n,C.y=C.lineY+=a,C.xcoords=[],C.ycoords=[],C.tspan=this.svgFactory.createElement("svg:tspan"),C.tspan.setAttributeNS(null,"font-family",C.fontFamily),C.tspan.setAttributeNS(null,"font-size",`${d(C.fontSize)}px`),C.tspan.setAttributeNS(null,"y",d(-C.y))}showText(n){const a=this.current,C=a.font,x=a.fontSize;if(x===0)return;const T=a.fontSizeScale,D=a.charSpacing,$=a.wordSpacing,W=a.fontDirection,se=a.textHScale*W,ne=C.vertical,q=ne?1:-1,G=C.defaultVMetrics,I=x*a.fontMatrix[0];let k=0;for(const l of n){if(l===null){k+=W*$;continue}else if(typeof l=="number"){k+=q*l*x/1e3;continue}const M=(l.isSpace?$:0)+D,N=l.fontChar;let o,v,R=l.width;if(ne){let U;const H=l.vmetric||G;U=l.vmetric?H[1]:R*.5,U=-U*I;const V=H[2]*I;R=H?-H[0]:R,o=U/T,v=(k+V)/T}else o=k/T,v=0;(l.isInFont||C.missingFile)&&(a.xcoords.push(a.x+o),ne&&a.ycoords.push(-a.y+v),a.tspan.textContent+=N);let F;ne?F=R*I-M*W:F=R*I+M*W,k+=F}a.tspan.setAttributeNS(null,"x",a.xcoords.map(d).join(" ")),ne?a.tspan.setAttributeNS(null,"y",a.ycoords.map(d).join(" ")):a.tspan.setAttributeNS(null,"y",d(-a.y)),ne?a.y-=k:a.x+=k*se,a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size",`${d(a.fontSize)}px`),a.fontStyle!==y.fontStyle&&a.tspan.setAttributeNS(null,"font-style",a.fontStyle),a.fontWeight!==y.fontWeight&&a.tspan.setAttributeNS(null,"font-weight",a.fontWeight);const O=a.textRenderingMode&p.TextRenderingMode.FILL_STROKE_MASK;if(O===p.TextRenderingMode.FILL||O===p.TextRenderingMode.FILL_STROKE?(a.fillColor!==y.fillColor&&a.tspan.setAttributeNS(null,"fill",a.fillColor),a.fillAlpha<1&&a.tspan.setAttributeNS(null,"fill-opacity",a.fillAlpha)):a.textRenderingMode===p.TextRenderingMode.ADD_TO_PATH?a.tspan.setAttributeNS(null,"fill","transparent"):a.tspan.setAttributeNS(null,"fill","none"),O===p.TextRenderingMode.STROKE||O===p.TextRenderingMode.FILL_STROKE){const l=1/(a.textMatrixScale||1);this._setStrokeAttributes(a.tspan,l)}let m=a.textMatrix;a.textRise!==0&&(m=m.slice(),m[5]+=a.textRise),a.txtElement.setAttributeNS(null,"transform",`${f(m)} scale(${d(se)}, -1)`),a.txtElement.setAttributeNS(E,"xml:space","preserve"),a.txtElement.append(a.tspan),a.txtgrp.append(a.txtElement),this._ensureTransformGroup().append(a.txtElement)}setLeadingMoveText(n,a){this.setLeading(-a),this.moveText(n,a)}addFontStyle(n){if(!n.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const a=g(n.data,n.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${n.loadedName}"; src: url(${a}); }
`}setFont(n){const a=this.current,C=this.commonObjs.get(n[0]);let x=n[1];a.font=C,this.embedFonts&&!C.missingFile&&!this.embeddedFonts[C.loadedName]&&(this.addFontStyle(C),this.embeddedFonts[C.loadedName]=C),a.fontMatrix=C.fontMatrix||p.FONT_IDENTITY_MATRIX;let T="normal";C.black?T="900":C.bold&&(T="bold");const D=C.italic?"italic":"normal";x<0?(x=-x,a.fontDirection=-1):a.fontDirection=1,a.fontSize=x,a.fontFamily=C.loadedName,a.fontWeight=T,a.fontStyle=D,a.tspan=this.svgFactory.createElement("svg:tspan"),a.tspan.setAttributeNS(null,"y",d(-a.y)),a.xcoords=[],a.ycoords=[]}endText(){const n=this.current;n.textRenderingMode&p.TextRenderingMode.ADD_TO_PATH_FLAG&&n.txtElement?.hasChildNodes()&&(n.element=n.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(n){n>0&&(this.current.lineWidth=n)}setLineCap(n){this.current.lineCap=i[n]}setLineJoin(n){this.current.lineJoin=_[n]}setMiterLimit(n){this.current.miterLimit=n}setStrokeAlpha(n){this.current.strokeAlpha=n}setStrokeRGBColor(n,a,C){this.current.strokeColor=p.Util.makeHexColor(n,a,C)}setFillAlpha(n){this.current.fillAlpha=n}setFillRGBColor(n,a,C){this.current.fillColor=p.Util.makeHexColor(n,a,C),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(n){this.current.strokeColor=this._makeColorN_Pattern(n)}setFillColorN(n){this.current.fillColor=this._makeColorN_Pattern(n)}shadingFill(n){const a=this.viewport.width,C=this.viewport.height,x=p.Util.inverseTransform(this.transformMatrix),T=p.Util.applyTransform([0,0],x),D=p.Util.applyTransform([0,C],x),$=p.Util.applyTransform([a,0],x),W=p.Util.applyTransform([a,C],x),se=Math.min(T[0],D[0],$[0],W[0]),ne=Math.min(T[1],D[1],$[1],W[1]),q=Math.max(T[0],D[0],$[0],W[0]),G=Math.max(T[1],D[1],$[1],W[1]),I=this.svgFactory.createElement("svg:rect");I.setAttributeNS(null,"x",se),I.setAttributeNS(null,"y",ne),I.setAttributeNS(null,"width",q-se),I.setAttributeNS(null,"height",G-ne),I.setAttributeNS(null,"fill",this._makeShadingPattern(n)),this.current.fillAlpha<1&&I.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(I)}_makeColorN_Pattern(n){return n[0]==="TilingPattern"?this._makeTilingPattern(n):this._makeShadingPattern(n)}_makeTilingPattern(n){const a=n[1],C=n[2],x=n[3]||p.IDENTITY_MATRIX,[T,D,$,W]=n[4],se=n[5],ne=n[6],q=n[7],G=`shading${A++}`,[I,k,O,m]=p.Util.normalizeRect([...p.Util.applyTransform([T,D],x),...p.Util.applyTransform([$,W],x)]),[l,M]=p.Util.singularValueDecompose2dScale(x),N=se*l,o=ne*M,v=this.svgFactory.createElement("svg:pattern");v.setAttributeNS(null,"id",G),v.setAttributeNS(null,"patternUnits","userSpaceOnUse"),v.setAttributeNS(null,"width",N),v.setAttributeNS(null,"height",o),v.setAttributeNS(null,"x",`${I}`),v.setAttributeNS(null,"y",`${k}`);const R=this.svg,F=this.transformMatrix,U=this.current.fillColor,H=this.current.strokeColor,V=this.svgFactory.create(O-I,m-k);if(this.svg=V,this.transformMatrix=x,q===2){const Y=p.Util.makeHexColor(...a);this.current.fillColor=Y,this.current.strokeColor=Y}return this.executeOpTree(this.convertOpList(C)),this.svg=R,this.transformMatrix=F,this.current.fillColor=U,this.current.strokeColor=H,v.append(V.childNodes[0]),this.defs.append(v),`url(#${G})`}_makeShadingPattern(n){switch(typeof n=="string"&&(n=this.objs.get(n)),n[0]){case"RadialAxial":const a=`shading${A++}`,C=n[3];let x;switch(n[1]){case"axial":const T=n[4],D=n[5];x=this.svgFactory.createElement("svg:linearGradient"),x.setAttributeNS(null,"id",a),x.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),x.setAttributeNS(null,"x1",T[0]),x.setAttributeNS(null,"y1",T[1]),x.setAttributeNS(null,"x2",D[0]),x.setAttributeNS(null,"y2",D[1]);break;case"radial":const $=n[4],W=n[5],se=n[6],ne=n[7];x=this.svgFactory.createElement("svg:radialGradient"),x.setAttributeNS(null,"id",a),x.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),x.setAttributeNS(null,"cx",W[0]),x.setAttributeNS(null,"cy",W[1]),x.setAttributeNS(null,"r",ne),x.setAttributeNS(null,"fx",$[0]),x.setAttributeNS(null,"fy",$[1]),x.setAttributeNS(null,"fr",se);break;default:throw new Error(`Unknown RadialAxial type: ${n[1]}`)}for(const T of C){const D=this.svgFactory.createElement("svg:stop");D.setAttributeNS(null,"offset",T[0]),D.setAttributeNS(null,"stop-color",T[1]),x.append(D)}return this.defs.append(x),`url(#${a})`;case"Mesh":return(0,p.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${n[0]}`)}}setDash(n,a){this.current.dashArray=n,this.current.dashPhase=a}constructPath(n,a){const C=this.current;let x=C.x,T=C.y,D=[],$=0;for(const W of n)switch(W|0){case p.OPS.rectangle:x=a[$++],T=a[$++];const se=a[$++],ne=a[$++],q=x+se,G=T+ne;D.push("M",d(x),d(T),"L",d(q),d(T),"L",d(q),d(G),"L",d(x),d(G),"Z");break;case p.OPS.moveTo:x=a[$++],T=a[$++],D.push("M",d(x),d(T));break;case p.OPS.lineTo:x=a[$++],T=a[$++],D.push("L",d(x),d(T));break;case p.OPS.curveTo:x=a[$+4],T=a[$+5],D.push("C",d(a[$]),d(a[$+1]),d(a[$+2]),d(a[$+3]),d(x),d(T)),$+=6;break;case p.OPS.curveTo2:D.push("C",d(x),d(T),d(a[$]),d(a[$+1]),d(a[$+2]),d(a[$+3])),x=a[$+2],T=a[$+3],$+=4;break;case p.OPS.curveTo3:x=a[$+2],T=a[$+3],D.push("C",d(a[$]),d(a[$+1]),d(x),d(T),d(x),d(T)),$+=4;break;case p.OPS.closePath:D.push("Z");break}D=D.join(" "),C.path&&n.length>0&&n[0]!==p.OPS.rectangle&&n[0]!==p.OPS.moveTo?D=C.path.getAttributeNS(null,"d")+D:(C.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(C.path)),C.path.setAttributeNS(null,"d",D),C.path.setAttributeNS(null,"fill","none"),C.element=C.path,C.setCurrentPoint(x,T)}endPath(){const n=this.current;if(n.path=null,!this.pendingClip)return;if(!n.element){this.pendingClip=null;return}const a=`clippath${L++}`,C=this.svgFactory.createElement("svg:clipPath");C.setAttributeNS(null,"id",a),C.setAttributeNS(null,"transform",f(this.transformMatrix));const x=n.element.cloneNode(!0);if(this.pendingClip==="evenodd"?x.setAttributeNS(null,"clip-rule","evenodd"):x.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,C.append(x),this.defs.append(C),n.activeClipUrl){n.clipGroup=null;for(const T of this.extraStack)T.clipGroup=null;C.setAttributeNS(null,"clip-path",n.activeClipUrl)}n.activeClipUrl=`url(#${a})`,this.tgrp=null}clip(n){this.pendingClip=n}closePath(){const n=this.current;if(n.path){const a=`${n.path.getAttributeNS(null,"d")}Z`;n.path.setAttributeNS(null,"d",a)}}setLeading(n){this.current.leading=-n}setTextRise(n){this.current.textRise=n}setTextRenderingMode(n){this.current.textRenderingMode=n}setHScale(n){this.current.textHScale=n/100}setRenderingIntent(n){}setFlatness(n){}setGState(n){for(const[a,C]of n)switch(a){case"LW":this.setLineWidth(C);break;case"LC":this.setLineCap(C);break;case"LJ":this.setLineJoin(C);break;case"ML":this.setMiterLimit(C);break;case"D":this.setDash(C[0],C[1]);break;case"RI":this.setRenderingIntent(C);break;case"FL":this.setFlatness(C);break;case"Font":this.setFont(C);break;case"CA":this.setStrokeAlpha(C);break;case"ca":this.setFillAlpha(C);break;default:(0,p.warn)(`Unimplemented graphic state operator ${a}`);break}}fill(){const n=this.current;n.element&&(n.element.setAttributeNS(null,"fill",n.fillColor),n.element.setAttributeNS(null,"fill-opacity",n.fillAlpha),this.endPath())}stroke(){const n=this.current;n.element&&(this._setStrokeAttributes(n.element),n.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(n,a=1){const C=this.current;let x=C.dashArray;a!==1&&x.length>0&&(x=x.map(function(T){return a*T})),n.setAttributeNS(null,"stroke",C.strokeColor),n.setAttributeNS(null,"stroke-opacity",C.strokeAlpha),n.setAttributeNS(null,"stroke-miterlimit",d(C.miterLimit)),n.setAttributeNS(null,"stroke-linecap",C.lineCap),n.setAttributeNS(null,"stroke-linejoin",C.lineJoin),n.setAttributeNS(null,"stroke-width",d(a*C.lineWidth)+"px"),n.setAttributeNS(null,"stroke-dasharray",x.map(d).join(" ")),n.setAttributeNS(null,"stroke-dashoffset",d(a*C.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x","0"),n.setAttributeNS(null,"y","0"),n.setAttributeNS(null,"width","1px"),n.setAttributeNS(null,"height","1px"),n.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(n)}paintImageXObject(n){const a=this.getObject(n);if(!a){(0,p.warn)(`Dependent image with object ID ${n} is not ready yet`);return}this.paintInlineImageXObject(a)}paintInlineImageXObject(n,a){const C=n.width,x=n.height,T=s(n,this.forceDataSchema,!!a),D=this.svgFactory.createElement("svg:rect");D.setAttributeNS(null,"x","0"),D.setAttributeNS(null,"y","0"),D.setAttributeNS(null,"width",d(C)),D.setAttributeNS(null,"height",d(x)),this.current.element=D,this.clip("nonzero");const $=this.svgFactory.createElement("svg:image");$.setAttributeNS(c,"xlink:href",T),$.setAttributeNS(null,"x","0"),$.setAttributeNS(null,"y",d(-x)),$.setAttributeNS(null,"width",d(C)+"px"),$.setAttributeNS(null,"height",d(x)+"px"),$.setAttributeNS(null,"transform",`scale(${d(1/C)} ${d(-1/x)})`),a?a.append($):this._ensureTransformGroup().append($)}paintImageMaskXObject(n){const a=this.getObject(n.data,n);if(a.bitmap){(0,p.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const C=this.current,x=a.width,T=a.height,D=C.fillColor;C.maskId=`mask${S++}`;const $=this.svgFactory.createElement("svg:mask");$.setAttributeNS(null,"id",C.maskId);const W=this.svgFactory.createElement("svg:rect");W.setAttributeNS(null,"x","0"),W.setAttributeNS(null,"y","0"),W.setAttributeNS(null,"width",d(x)),W.setAttributeNS(null,"height",d(T)),W.setAttributeNS(null,"fill",D),W.setAttributeNS(null,"mask",`url(#${C.maskId})`),this.defs.append($),this._ensureTransformGroup().append(W),this.paintInlineImageXObject(a,$)}paintFormXObjectBegin(n,a){if(Array.isArray(n)&&n.length===6&&this.transform(n[0],n[1],n[2],n[3],n[4],n[5]),a){const C=a[2]-a[0],x=a[3]-a[1],T=this.svgFactory.createElement("svg:rect");T.setAttributeNS(null,"x",a[0]),T.setAttributeNS(null,"y",a[1]),T.setAttributeNS(null,"width",d(C)),T.setAttributeNS(null,"height",d(x)),this.current.element=T,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(n){const a=this.svgFactory.create(n.width,n.height),C=this.svgFactory.createElement("svg:defs");a.append(C),this.defs=C;const x=this.svgFactory.createElement("svg:g");return x.setAttributeNS(null,"transform",f(n.transform)),a.append(x),this.svg=x,a}_ensureClipGroup(){if(!this.current.clipGroup){const n=this.svgFactory.createElement("svg:g");n.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(n),this.current.clipGroup=n}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",f(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}})],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var u=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](u,u.exports,__w_pdfjs_require__),u.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return w.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return P.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return y.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return E.GlobalWorkerOptions}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return u.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return u.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(t,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return c.SVGGraphics}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return i.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return u.build}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return u.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(t,"isDataScheme",{enumerable:!0,get:function(){return r.isDataScheme}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(t,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return p.renderTextLayer}}),Object.defineProperty(t,"setLayerDimensions",{enumerable:!0,get:function(){return r.setLayerDimensions}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"updateTextLayer",{enumerable:!0,get:function(){return p.updateTextLayer}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return u.version}});var e=__w_pdfjs_require__(1),u=__w_pdfjs_require__(2),r=__w_pdfjs_require__(6),p=__w_pdfjs_require__(26),w=__w_pdfjs_require__(27),P=__w_pdfjs_require__(5),y=__w_pdfjs_require__(32),E=__w_pdfjs_require__(14),c=__w_pdfjs_require__(35),i=__w_pdfjs_require__(34)})(),__webpack_exports__})())})(pdf)),pdf.exports}var pdfExports=requirePdf(),pdf_viewer={exports:{}},hasRequiredPdf_viewer;function requirePdf_viewer(){return hasRequiredPdf_viewer||(hasRequiredPdf_viewer=1,(function(t,e){(function(r,p){t.exports=p()})(globalThis,()=>(()=>{var u=[,((P,y,E)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.SimpleLinkService=y.PDFLinkService=y.LinkTarget=void 0;var c=E(2);const i="noopener noreferrer nofollow",_={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};y.LinkTarget=_;function g(b,{url:d,target:f,rel:L,enabled:S=!0}={}){if(!d||typeof d!="string")throw new Error('A valid "url" parameter must provided.');const A=(0,c.removeNullCharacters)(d);S?b.href=b.title=A:(b.href="",b.title=`Disabled: ${A}`,b.onclick=()=>!1);let n="";switch(f){case _.NONE:break;case _.SELF:n="_self";break;case _.BLANK:n="_blank";break;case _.PARENT:n="_parent";break;case _.TOP:n="_top";break}b.target=n,b.rel=typeof L=="string"?L:i}class s{#e=new Map;constructor({eventBus:d,externalLinkTarget:f=null,externalLinkRel:L=null,ignoreDestinationZoom:S=!1}={}){this.eventBus=d,this.externalLinkTarget=f,this.externalLinkRel=L,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=S,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(d,f=null){this.baseUrl=f,this.pdfDocument=d,this.#e.clear()}setViewer(d){this.pdfViewer=d}setHistory(d){this.pdfHistory=d}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(d){this.pdfViewer.currentPageNumber=d}get rotation(){return this.pdfViewer.pagesRotation}set rotation(d){this.pdfViewer.pagesRotation=d}get isInPresentationMode(){return this.pdfViewer.isInPresentationMode}#t(d,f=null,L){const S=L[0];let A;if(typeof S=="object"&&S!==null){if(A=this._cachedPageNumber(S),!A){this.pdfDocument.getPageIndex(S).then(n=>{this.cachePageRef(n+1,S),this.#t(d,f,L)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${S}" is not a valid page reference, for dest="${d}".`)});return}}else if(Number.isInteger(S))A=S+1;else{console.error(`PDFLinkService.#goToDestinationHelper: "${S}" is not a valid destination reference, for dest="${d}".`);return}if(!A||A<1||A>this.pagesCount){console.error(`PDFLinkService.#goToDestinationHelper: "${A}" is not a valid page number, for dest="${d}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:f,explicitDest:L,pageNumber:A})),this.pdfViewer.scrollPageIntoView({pageNumber:A,destArray:L,ignoreDestinationZoom:this._ignoreDestinationZoom})}async goToDestination(d){if(!this.pdfDocument)return;let f,L;if(typeof d=="string"?(f=d,L=await this.pdfDocument.getDestination(d)):(f=null,L=await d),!Array.isArray(L)){console.error(`PDFLinkService.goToDestination: "${L}" is not a valid destination array, for dest="${d}".`);return}this.#t(d,f,L)}goToPage(d){if(!this.pdfDocument)return;const f=typeof d=="string"&&this.pdfViewer.pageLabelToPageNumber(d)||d|0;if(!(Number.isInteger(f)&&f>0&&f<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${d}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(f)),this.pdfViewer.scrollPageIntoView({pageNumber:f})}addLinkAttributes(d,f,L=!1){g(d,{url:f,target:L?_.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(d){if(typeof d=="string"){if(d.length>0)return this.getAnchorUrl("#"+escape(d))}else if(Array.isArray(d)){const f=JSON.stringify(d);if(f.length>0)return this.getAnchorUrl("#"+escape(f))}return this.getAnchorUrl("")}getAnchorUrl(d){return this.baseUrl?this.baseUrl+d:d}setHash(d){if(!this.pdfDocument)return;let f,L;if(d.includes("=")){const S=(0,c.parseQueryString)(d);if(S.has("search")){const A=S.get("search").replaceAll('"',""),n=S.get("phrase")==="true";this.eventBus.dispatch("findfromurlhash",{source:this,query:n?A:A.match(/\S+/g)})}if(S.has("page")&&(f=S.get("page")|0||1),S.has("zoom")){const A=S.get("zoom").split(","),n=A[0],a=parseFloat(n);n.includes("Fit")?n==="Fit"||n==="FitB"?L=[null,{name:n}]:n==="FitH"||n==="FitBH"||n==="FitV"||n==="FitBV"?L=[null,{name:n},A.length>1?A[1]|0:null]:n==="FitR"?A.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):L=[null,{name:n},A[1]|0,A[2]|0,A[3]|0,A[4]|0]:console.error(`PDFLinkService.setHash: "${n}" is not a valid zoom value.`):L=[null,{name:"XYZ"},A.length>1?A[1]|0:null,A.length>2?A[2]|0:null,a?a/100:n]}L?this.pdfViewer.scrollPageIntoView({pageNumber:f||this.page,destArray:L,allowNegativeOffset:!0}):f&&(this.page=f),S.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:S.get("pagemode")}),S.has("nameddest")&&this.goToDestination(S.get("nameddest"))}else{L=unescape(d);try{L=JSON.parse(L),Array.isArray(L)||(L=L.toString())}catch{}if(typeof L=="string"||s.#n(L)){this.goToDestination(L);return}console.error(`PDFLinkService.setHash: "${unescape(d)}" is not a valid destination.`)}}executeNamedAction(d){switch(d){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break}this.eventBus.dispatch("namedaction",{source:this,action:d})}async executeSetOCGState(d){const f=this.pdfDocument,L=await this.pdfViewer.optionalContentConfigPromise;if(f!==this.pdfDocument)return;let S;for(const A of d.state){switch(A){case"ON":case"OFF":case"Toggle":S=A;continue}switch(S){case"ON":L.setVisibility(A,!0);break;case"OFF":L.setVisibility(A,!1);break;case"Toggle":const n=L.getGroup(A);n&&L.setVisibility(A,!n.visible);break}}this.pdfViewer.optionalContentConfigPromise=Promise.resolve(L)}cachePageRef(d,f){if(!f)return;const L=f.gen===0?`${f.num}R`:`${f.num}R${f.gen}`;this.#e.set(L,d)}_cachedPageNumber(d){if(!d)return null;const f=d.gen===0?`${d.num}R`:`${d.num}R${d.gen}`;return this.#e.get(f)||null}isPageVisible(d){return this.pdfViewer.isPageVisible(d)}isPageCached(d){return this.pdfViewer.isPageCached(d)}static#n(d){if(!Array.isArray(d))return!1;const f=d.length;if(f<2)return!1;const L=d[0];if(!(typeof L=="object"&&Number.isInteger(L.num)&&Number.isInteger(L.gen))&&!(Number.isInteger(L)&&L>=0))return!1;const S=d[1];if(!(typeof S=="object"&&typeof S.name=="string"))return!1;let A=!0;switch(S.name){case"XYZ":if(f!==5)return!1;break;case"Fit":case"FitB":return f===2;case"FitH":case"FitBH":case"FitV":case"FitBV":if(f!==3)return!1;break;case"FitR":if(f!==6)return!1;A=!1;break;default:return!1}for(let n=2;n<f;n++){const a=d[n];if(!(typeof a=="number"||A&&a===null))return!1}return!0}}y.PDFLinkService=s;class h{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(d){}get rotation(){return 0}set rotation(d){}get isInPresentationMode(){return!1}async goToDestination(d){}goToPage(d){}addLinkAttributes(d,f,L=!1){g(d,{url:f,enabled:this.externalLinkEnabled})}getDestinationHash(d){return"#"}getAnchorUrl(d){return"#"}setHash(d){}executeNamedAction(d){}executeSetOCGState(d){}cachePageRef(d,f){}isPageVisible(d){return!0}isPageCached(d){return!0}}y.SimpleLinkService=h}),((P,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.animationStarted=y.VERTICAL_PADDING=y.UNKNOWN_SCALE=y.TextLayerMode=y.SpreadMode=y.SidebarView=y.ScrollMode=y.SCROLLBAR_PADDING=y.RenderingStates=y.ProgressBar=y.PresentationModeState=y.OutputScale=y.MIN_SCALE=y.MAX_SCALE=y.MAX_AUTO_SCALE=y.DEFAULT_SCALE_VALUE=y.DEFAULT_SCALE_DELTA=y.DEFAULT_SCALE=y.CursorTool=y.AutoPrintRegExp=void 0,y.apiPageLayoutToViewerModes=X,y.apiPageModeToSidebarView=re,y.approximateFraction=G,y.backtrackBeforeAllVisibleElements=O,y.binarySearchFirstItem=q,y.docStyle=void 0,y.getActiveOrFocusedElement=Z,y.getPageSizeInches=k,y.getVisibleElements=m,y.isPortraitOrientation=F,y.isValidRotation=o,y.isValidScrollMode=v,y.isValidSpreadMode=R,y.noContextMenuHandler=l,y.normalizeWheelEventDelta=N,y.normalizeWheelEventDirection=M,y.parseQueryString=W,y.removeNullCharacters=ne,y.roundToDivide=I,y.scrollIntoView=D,y.toggleCheckedBtn=ce,y.watchScroll=$;const E="auto";y.DEFAULT_SCALE_VALUE=E;const c=1;y.DEFAULT_SCALE=c;const i=1.1;y.DEFAULT_SCALE_DELTA=i;const _=.1;y.MIN_SCALE=_;const g=10;y.MAX_SCALE=g;const s=0;y.UNKNOWN_SCALE=s;const h=1.25;y.MAX_AUTO_SCALE=h;const b=40;y.SCROLLBAR_PADDING=b;const d=5;y.VERTICAL_PADDING=d;const f={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};y.RenderingStates=f;const L={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};y.PresentationModeState=L;const S={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};y.SidebarView=S;const A={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2};y.TextLayerMode=A;const n={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};y.ScrollMode=n;const a={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};y.SpreadMode=a;const C={SELECT:0,HAND:1,ZOOM:2};y.CursorTool=C;const x=/\bprint\s*\(/;y.AutoPrintRegExp=x;class T{constructor(){const te=window.devicePixelRatio||1;this.sx=te,this.sy=te}get scaled(){return this.sx!==1||this.sy!==1}}y.OutputScale=T;function D(z,te,ae=!1){let Q=z.offsetParent;if(!Q){console.error("offsetParent is not set -- cannot scroll");return}let B=z.offsetTop+z.clientTop,j=z.offsetLeft+z.clientLeft;for(;Q.clientHeight===Q.scrollHeight&&Q.clientWidth===Q.scrollWidth||ae&&(Q.classList.contains("markedContent")||getComputedStyle(Q).overflow==="hidden");)if(B+=Q.offsetTop,j+=Q.offsetLeft,Q=Q.offsetParent,!Q)return;te&&(te.top!==void 0&&(B+=te.top),te.left!==void 0&&(j+=te.left,Q.scrollLeft=j)),Q.scrollTop=B}function $(z,te){const ae=function(j){B||(B=window.requestAnimationFrame(function(){B=null;const oe=z.scrollLeft,fe=Q.lastX;oe!==fe&&(Q.right=oe>fe),Q.lastX=oe;const de=z.scrollTop,ie=Q.lastY;de!==ie&&(Q.down=de>ie),Q.lastY=de,te(Q)}))},Q={right:!0,down:!0,lastX:z.scrollLeft,lastY:z.scrollTop,_eventHandler:ae};let B=null;return z.addEventListener("scroll",ae,!0),Q}function W(z){const te=new Map;for(const[ae,Q]of new URLSearchParams(z))te.set(ae.toLowerCase(),Q);return te}const se=/[\x01-\x1F]/g;function ne(z,te=!1){return typeof z!="string"?(console.error("The argument must be a string."),z):(te&&(z=z.replaceAll(se," ")),z.replaceAll("\0",""))}function q(z,te,ae=0){let Q=ae,B=z.length-1;if(B<0||!te(z[B]))return z.length;if(te(z[Q]))return Q;for(;Q<B;){const j=Q+B>>1,ee=z[j];te(ee)?B=j:Q=j+1}return Q}function G(z){if(Math.floor(z)===z)return[z,1];const te=1/z,ae=8;if(te>ae)return[1,ae];if(Math.floor(te)===te)return[1,te];const Q=z>1?te:z;let B=0,j=1,ee=1,oe=1;for(;;){const de=B+ee,ie=j+oe;if(ie>ae)break;Q<=de/ie?(ee=de,oe=ie):(B=de,j=ie)}let fe;return Q-B/j<ee/oe-Q?fe=Q===z?[B,j]:[j,B]:fe=Q===z?[ee,oe]:[oe,ee],fe}function I(z,te){const ae=z%te;return ae===0?z:Math.round(z-ae+te)}function k({view:z,userUnit:te,rotate:ae}){const[Q,B,j,ee]=z,oe=ae%180!==0,fe=(j-Q)/72*te,de=(ee-B)/72*te;return{width:oe?de:fe,height:oe?fe:de}}function O(z,te,ae){if(z<2)return z;let Q=te[z].div,B=Q.offsetTop+Q.clientTop;B>=ae&&(Q=te[z-1].div,B=Q.offsetTop+Q.clientTop);for(let j=z-2;j>=0&&(Q=te[j].div,!(Q.offsetTop+Q.clientTop+Q.clientHeight<=B));--j)z=j;return z}function m({scrollEl:z,views:te,sortByVisibility:ae=!1,horizontal:Q=!1,rtl:B=!1}){const j=z.scrollTop,ee=j+z.clientHeight,oe=z.scrollLeft,fe=oe+z.clientWidth;function de(ue){const J=ue.div;return J.offsetTop+J.clientTop+J.clientHeight>j}function ie(ue){const J=ue.div,K=J.offsetLeft+J.clientLeft,he=K+J.clientWidth;return B?K<fe:he>oe}const le=[],pe=new Set,me=te.length;let _e=q(te,Q?ie:de);_e>0&&_e<me&&!Q&&(_e=O(_e,te,j));let ye=Q?fe:-1;for(let ue=_e;ue<me;ue++){const J=te[ue],K=J.div,he=K.offsetLeft+K.clientLeft,ge=K.offsetTop+K.clientTop,be=K.clientWidth,ve=K.clientHeight,we=he+be,Ce=ge+ve;if(ye===-1)Ce>=ee&&(ye=Ce);else if((Q?he:ge)>ye)break;if(Ce<=j||ge>=ee||we<=oe||he>=fe)continue;const Le=Math.max(0,j-ge)+Math.max(0,Ce-ee),Ae=Math.max(0,oe-he)+Math.max(0,we-fe),Re=(ve-Le)/ve,Te=(be-Ae)/be,Me=Re*Te*100|0;le.push({id:J.id,x:he,y:ge,view:J,percent:Me,widthPercent:Te*100|0}),pe.add(J.id)}const Se=le[0],Oe=le.at(-1);return ae&&le.sort(function(ue,J){const K=ue.percent-J.percent;return Math.abs(K)>.001?-K:ue.id-J.id}),{first:Se,last:Oe,views:le,ids:pe}}function l(z){z.preventDefault()}function M(z){let te=Math.hypot(z.deltaX,z.deltaY);const ae=Math.atan2(z.deltaY,z.deltaX);return-.25*Math.PI<ae&&ae<.75*Math.PI&&(te=-te),te}function N(z){const te=z.deltaMode;let ae=M(z);const Q=30,B=30;return te===WheelEvent.DOM_DELTA_PIXEL?ae/=Q*B:te===WheelEvent.DOM_DELTA_LINE&&(ae/=B),ae}function o(z){return Number.isInteger(z)&&z%90===0}function v(z){return Number.isInteger(z)&&Object.values(n).includes(z)&&z!==n.UNKNOWN}function R(z){return Number.isInteger(z)&&Object.values(a).includes(z)&&z!==a.UNKNOWN}function F(z){return z.width<=z.height}const U=new Promise(function(z){window.requestAnimationFrame(z)});y.animationStarted=U;const H=document.documentElement.style;y.docStyle=H;function V(z,te,ae){return Math.min(Math.max(z,te),ae)}class Y{#e=null;#t=null;#n=0;#i=null;#s=!0;constructor(te){this.#e=te.classList,this.#i=te.style}get percent(){return this.#n}set percent(te){if(this.#n=V(te,0,100),isNaN(te)){this.#e.add("indeterminate");return}this.#e.remove("indeterminate"),this.#i.setProperty("--progressBar-percent",`${this.#n}%`)}setWidth(te){if(!te)return;const Q=te.parentNode.offsetWidth-te.offsetWidth;Q>0&&this.#i.setProperty("--progressBar-end-offset",`${Q}px`)}setDisableAutoFetch(te=5e3){isNaN(this.#n)||(this.#t&&clearTimeout(this.#t),this.show(),this.#t=setTimeout(()=>{this.#t=null,this.hide()},te))}hide(){this.#s&&(this.#s=!1,this.#e.add("hidden"))}show(){this.#s||(this.#s=!0,this.#e.remove("hidden"))}}y.ProgressBar=Y;function Z(){let z=document,te=z.activeElement||z.querySelector(":focus");for(;te?.shadowRoot;)z=te.shadowRoot,te=z.activeElement||z.querySelector(":focus");return te}function X(z){let te=n.VERTICAL,ae=a.NONE;switch(z){case"SinglePage":te=n.PAGE;break;case"OneColumn":break;case"TwoPageLeft":te=n.PAGE;case"TwoColumnLeft":ae=a.ODD;break;case"TwoPageRight":te=n.PAGE;case"TwoColumnRight":ae=a.EVEN;break}return{scrollMode:te,spreadMode:ae}}function re(z){switch(z){case"UseNone":return S.NONE;case"UseThumbs":return S.THUMBS;case"UseOutlines":return S.OUTLINE;case"UseAttachments":return S.ATTACHMENTS;case"UseOC":return S.LAYERS}return S.NONE}function ce(z,te,ae=null){z.classList.toggle("toggled",te),z.setAttribute("aria-checked",te),ae?.classList.toggle("hidden",!te)}}),((P,y,E)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.AnnotationLayerBuilder=void 0;var c=E(4),i=E(5),_=E(2);class g{#e=0;#t=null;constructor({pageDiv:h,pdfPage:b,linkService:d,downloadManager:f,annotationStorage:L=null,imageResourcesPath:S="",renderForms:A=!0,l10n:n=i.NullL10n,enableScripting:a=!1,hasJSActionsPromise:C=null,fieldObjectsPromise:x=null,annotationCanvasMap:T=null,accessibilityManager:D=null}){this.pageDiv=h,this.pdfPage=b,this.linkService=d,this.downloadManager=f,this.imageResourcesPath=S,this.renderForms=A,this.l10n=n,this.annotationStorage=L,this.enableScripting=a,this._hasJSActionsPromise=C||Promise.resolve(!1),this._fieldObjectsPromise=x||Promise.resolve(null),this._annotationCanvasMap=T,this._accessibilityManager=D,this.div=null,this._cancelled=!1,this._eventBus=d.eventBus}async render(h,b="display"){if(this.div){if(this._cancelled||this.#e===0)return;c.AnnotationLayer.update({viewport:h.clone({dontFlip:!0}),div:this.div,annotationCanvasMap:this._annotationCanvasMap});return}const[d,f,L]=await Promise.all([this.pdfPage.getAnnotations({intent:b}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(!this._cancelled){if(this.#e=d.length,this.div=document.createElement("div"),this.div.className="annotationLayer",this.pageDiv.append(this.div),this.#e===0){this.hide();return}c.AnnotationLayer.render({viewport:h.clone({dontFlip:!0}),div:this.div,annotations:d,page:this.pdfPage,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:f,fieldObjects:L,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager}),this.l10n.translate(this.div),this.linkService.isInPresentationMode&&this.#n(_.PresentationModeState.FULLSCREEN),this.#t||(this.#t=S=>{this.#n(S.state)},this._eventBus?._on("presentationmodechanged",this.#t))}}cancel(){this._cancelled=!0,this.#t&&(this._eventBus?._off("presentationmodechanged",this.#t),this.#t=null)}hide(){this.div&&(this.div.hidden=!0)}#n(h){if(!this.div)return;let b=!1;switch(h){case _.PresentationModeState.FULLSCREEN:b=!0;break;case _.PresentationModeState.NORMAL:break;default:return}for(const d of this.div.childNodes)d.hasAttribute("data-internal-link")||(d.inert=b)}}y.AnnotationLayerBuilder=g}),(P=>{let y;typeof window<"u"&&window["pdfjs-dist/build/pdf"]?y=window["pdfjs-dist/build/pdf"]:y=requirePdf(),P.exports=y}),((P,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.NullL10n=void 0,y.fixupLangCode=_,y.getL10nFallback=c;const E={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image"};E.print_progress_percent="{{progress}}%";function c(h,b){switch(h){case"find_match_count":h=`find_match_count[${b.total===1?"one":"other"}]`;break;case"find_match_count_limit":h=`find_match_count_limit[${b.limit===1?"one":"other"}]`;break}return E[h]||""}const i={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};function _(h){return i[h?.toLowerCase()]||h}function g(h,b){return b?h.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(d,f)=>f in b?b[f]:"{{"+f+"}}"):h}const s={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(h,b=null,d=c(h,b)){return g(d,b)},async translate(h){}};y.NullL10n=s}),((P,y,E)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.DownloadManager=void 0;var c=E(4);function i(g,s){const h=document.createElement("a");if(!h.click)throw new Error('DownloadManager: "a.click()" is not supported.');h.href=g,h.target="_parent","download"in h&&(h.download=s),(document.body||document.documentElement).append(h),h.click(),h.remove()}class _{#e=new WeakMap;downloadUrl(s,h,b){if(!(0,c.createValidAbsoluteUrl)(s,"http://example.com")){console.error(`downloadUrl - not a valid URL: ${s}`);return}i(s+"#pdfjs.action=download",h)}downloadData(s,h,b){const d=URL.createObjectURL(new Blob([s],{type:b}));i(d,h)}openOrDownloadData(s,h,b){const f=(0,c.isPdfFile)(b)?"application/pdf":"";return this.downloadData(h,b,f),!1}download(s,h,b,d){const f=URL.createObjectURL(s);i(f,b)}}y.DownloadManager=_}),((P,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.WaitOnType=y.EventBus=y.AutomationEventBus=void 0,y.waitOnEventOrTimeout=c;const E={EVENT:"event",TIMEOUT:"timeout"};y.WaitOnType=E;function c({target:g,name:s,delay:h=0}){return new Promise(function(b,d){if(typeof g!="object"||!(s&&typeof s=="string")||!(Number.isInteger(h)&&h>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function f(n){g instanceof i?g._off(s,L):g.removeEventListener(s,L),A&&clearTimeout(A),b(n)}const L=f.bind(null,E.EVENT);g instanceof i?g._on(s,L):g.addEventListener(s,L);const S=f.bind(null,E.TIMEOUT),A=setTimeout(S,h)})}class i{#e=Object.create(null);on(s,h,b=null){this._on(s,h,{external:!0,once:b?.once})}off(s,h,b=null){this._off(s,h,{external:!0,once:b?.once})}dispatch(s,h){const b=this.#e[s];if(!b||b.length===0)return;let d;for(const{listener:f,external:L,once:S}of b.slice(0)){if(S&&this._off(s,f),L){(d||=[]).push(f);continue}f(h)}if(d){for(const f of d)f(h);d=null}}_on(s,h,b=null){(this.#e[s]||=[]).push({listener:h,external:b?.external===!0,once:b?.once===!0})}_off(s,h,b=null){const d=this.#e[s];if(d){for(let f=0,L=d.length;f<L;f++)if(d[f].listener===h){d.splice(f,1);return}}}}y.EventBus=i;class _ extends i{dispatch(s,h){throw new Error("Not implemented: AutomationEventBus.dispatch")}}y.AutomationEventBus=_}),((P,y,E)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.GenericL10n=void 0,E(9);var c=E(5);const i=document.webL10n;class _{constructor(s){this._lang=s,this._ready=new Promise((h,b)=>{i.setLanguage((0,c.fixupLangCode)(s),()=>{h(i)})})}async getLanguage(){return(await this._ready).getLanguage()}async getDirection(){return(await this._ready).getDirection()}async get(s,h=null,b=(0,c.getL10nFallback)(s,h)){return(await this._ready).get(s,h,b)}async translate(s){return(await this._ready).translate(s)}}y.GenericL10n=_}),(()=>{document.webL10n=(function(P,y,E){var c={},i="",_="textContent",g="",s={},h="loading",b=!0;function d(){return y.querySelectorAll('link[type="application/l10n"]')}function f(){var q=y.querySelector('script[type="application/l10n"]');return q?JSON.parse(q.innerHTML):null}function L(q){return q?q.querySelectorAll("*[data-l10n-id]"):[]}function S(q){if(!q)return{};var G=q.getAttribute("data-l10n-id"),I=q.getAttribute("data-l10n-args"),k={};if(I)try{k=JSON.parse(I)}catch{console.warn("could not parse arguments for #"+G)}return{id:G,args:k}}function A(q,G,I){G=G||function(m){},I=I||function(){};var k=new XMLHttpRequest;k.open("GET",q,b),k.overrideMimeType&&k.overrideMimeType("text/plain; charset=utf-8"),k.onreadystatechange=function(){k.readyState==4&&(k.status==200||k.status===0?G(k.responseText):I())},k.onerror=I,k.ontimeout=I;try{k.send(null)}catch{I()}}function n(q,G,I,k){var O=q.replace(/[^\/]*$/,"")||"./";function m(M){return M.lastIndexOf("\\")<0?M:M.replace(/\\\\/g,"\\").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function l(M,N){var o={},v=/^\s*|\s*$/,R=/^\s*#|^\s*$/,F=/^\s*\[(.*)\]\s*$/,U=/^\s*@import\s+url\((.*)\)\s*$/i,H=/^([^=\s]*)\s*=\s*(.+)$/;function V(Z,X,re){var ce=Z.replace(v,"").split(/[\r\n]+/),z="*",te=G.split("-",1)[0],ae=!1,Q="";function B(){for(;;){if(!ce.length){re();return}var j=ce.shift();if(!R.test(j)){if(X){if(Q=F.exec(j),Q){z=Q[1].toLowerCase(),ae=z!=="*"&&z!==G&&z!==te;continue}else if(ae)continue;if(Q=U.exec(j),Q){Y(O+Q[1],B);return}}var ee=j.match(H);ee&&ee.length==3&&(o[ee[1]]=m(ee[2]))}}}B()}function Y(Z,X){A(Z,function(re){V(re,!1,X)},function(){console.warn(Z+" not found."),X()})}V(M,!0,function(){N(o)})}A(q,function(M){i+=M,l(M,function(N){for(var o in N){var v,R,F=o.lastIndexOf(".");F>0?(v=o.substring(0,F),R=o.substring(F+1)):(v=o,R=_),c[v]||(c[v]={}),c[v][R]=N[o]}I&&I()})},k)}function a(q,G){q&&(q=q.toLowerCase()),G=G||function(){},C(),g=q;var I=d(),k=I.length;if(k===0){var O=f();if(O&&O.locales&&O.default_locale){if(console.log("using the embedded JSON directory, early way out"),c=O.locales[q],!c){var m=O.default_locale.toLowerCase();for(var l in O.locales)if(l=l.toLowerCase(),l===q){c=O.locales[q];break}else l===m&&(c=O.locales[m])}G()}else console.log("no resource to load, early way out");h="complete";return}var M=null,N=0;M=function(){N++,N>=k&&(G(),h="complete")};function o(F){var U=F.href;this.load=function(H,V){n(U,H,V,function(){console.warn(U+" not found."),console.warn('"'+H+'" resource not found'),g="",V()})}}for(var v=0;v<k;v++){var R=new o(I[v]);R.load(q,M)}}function C(){c={},i="",g=""}function x(q){var G={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3};function I(l,M){return M.indexOf(l)!==-1}function k(l,M,N){return M<=l&&l<=N}var O={0:function(l){return"other"},1:function(l){return k(l%100,3,10)?"few":l===0?"zero":k(l%100,11,99)?"many":l==2?"two":l==1?"one":"other"},2:function(l){return l!==0&&l%10===0?"many":l==2?"two":l==1?"one":"other"},3:function(l){return l==1?"one":"other"},4:function(l){return k(l,0,1)?"one":"other"},5:function(l){return k(l,0,2)&&l!=2?"one":"other"},6:function(l){return l===0?"zero":l%10==1&&l%100!=11?"one":"other"},7:function(l){return l==2?"two":l==1?"one":"other"},8:function(l){return k(l,3,6)?"few":k(l,7,10)?"many":l==2?"two":l==1?"one":"other"},9:function(l){return l===0||l!=1&&k(l%100,1,19)?"few":l==1?"one":"other"},10:function(l){return k(l%10,2,9)&&!k(l%100,11,19)?"few":l%10==1&&!k(l%100,11,19)?"one":"other"},11:function(l){return k(l%10,2,4)&&!k(l%100,12,14)?"few":l%10===0||k(l%10,5,9)||k(l%100,11,14)?"many":l%10==1&&l%100!=11?"one":"other"},12:function(l){return k(l,2,4)?"few":l==1?"one":"other"},13:function(l){return k(l%10,2,4)&&!k(l%100,12,14)?"few":l!=1&&k(l%10,0,1)||k(l%10,5,9)||k(l%100,12,14)?"many":l==1?"one":"other"},14:function(l){return k(l%100,3,4)?"few":l%100==2?"two":l%100==1?"one":"other"},15:function(l){return l===0||k(l%100,2,10)?"few":k(l%100,11,19)?"many":l==1?"one":"other"},16:function(l){return l%10==1&&l!=11?"one":"other"},17:function(l){return l==3?"few":l===0?"zero":l==6?"many":l==2?"two":l==1?"one":"other"},18:function(l){return l===0?"zero":k(l,0,2)&&l!==0&&l!=2?"one":"other"},19:function(l){return k(l,2,10)?"few":k(l,0,1)?"one":"other"},20:function(l){return(k(l%10,3,4)||l%10==9)&&!(k(l%100,10,19)||k(l%100,70,79)||k(l%100,90,99))?"few":l%1e6===0&&l!==0?"many":l%10==2&&!I(l%100,[12,72,92])?"two":l%10==1&&!I(l%100,[11,71,91])?"one":"other"},21:function(l){return l===0?"zero":l==1?"one":"other"},22:function(l){return k(l,0,1)||k(l,11,99)?"one":"other"},23:function(l){return k(l%10,1,2)||l%20===0?"one":"other"},24:function(l){return k(l,3,10)||k(l,13,19)?"few":I(l,[2,12])?"two":I(l,[1,11])?"one":"other"}},m=G[q.replace(/-.*$/,"")];return m in O?O[m]:(console.warn("plural form unknown for ["+q+"]"),function(){return"other"})}s.plural=function(q,G,I,k){var O=parseFloat(G);if(isNaN(O)||k!=_)return q;s._pluralRules||(s._pluralRules=x(g));var m="["+s._pluralRules(O)+"]";return O===0&&I+"[zero]"in c?q=c[I+"[zero]"][k]:O==1&&I+"[one]"in c?q=c[I+"[one]"][k]:O==2&&I+"[two]"in c?q=c[I+"[two]"][k]:I+m in c?q=c[I+m][k]:I+"[other]"in c&&(q=c[I+"[other]"][k]),q};function T(q,G,I){var k=c[q];if(!k){if(console.warn("#"+q+" is undefined."),!I)return null;k=I}var O={};for(var m in k){var l=k[m];l=D(l,G,q,m),l=$(l,G,q),O[m]=l}return O}function D(q,G,I,k){var O=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/,m=O.exec(q);if(!m||!m.length)return q;var l=m[1],M=m[2],N;if(G&&M in G?N=G[M]:M in c&&(N=c[M]),l in s){var o=s[l];q=o(q,N,I,k)}return q}function $(q,G,I){var k=/\{\{\s*(.+?)\s*\}\}/g;return q.replace(k,function(O,m){return G&&m in G?G[m]:m in c?c[m]:(console.log("argument {{"+m+"}} for #"+I+" is undefined."),O)})}function W(q){var G=S(q);if(G.id){var I=T(G.id,G.args);if(!I){console.warn("#"+G.id+" is undefined.");return}if(I[_]){if(se(q)===0)q[_]=I[_];else{for(var k=q.childNodes,O=!1,m=0,l=k.length;m<l;m++)k[m].nodeType===3&&/\S/.test(k[m].nodeValue)&&(O?k[m].nodeValue="":(k[m].nodeValue=I[_],O=!0));if(!O){var M=y.createTextNode(I[_]);q.prepend(M)}}delete I[_]}for(var N in I)q[N]=I[N]}}function se(q){if(q.children)return q.children.length;if(typeof q.childElementCount<"u")return q.childElementCount;for(var G=0,I=0;I<q.childNodes.length;I++)G+=q.nodeType===1?1:0;return G}function ne(q){q=q||y.documentElement;for(var G=L(q),I=G.length,k=0;k<I;k++)W(G[k]);W(q)}return{get:function(q,G,I){var k=q.lastIndexOf("."),O=_;k>0&&(O=q.substring(k+1),q=q.substring(0,k));var m;I&&(m={},m[O]=I);var l=T(q,G,m);return l&&O in l?l[O]:"{{"+q+"}}"},getData:function(){return c},getText:function(){return i},getLanguage:function(){return g},setLanguage:function(q,G){a(q,function(){G&&G()})},getDirection:function(){var q=["ar","he","fa","ps","ur"],G=g.split("-",1)[0];return q.indexOf(G)>=0?"rtl":"ltr"},translate:ne,getReadyState:function(){return h},ready:function(q){if(q)h=="complete"||h=="interactive"?P.setTimeout(function(){q()}):y.addEventListener&&y.addEventListener("localized",function G(){y.removeEventListener("localized",G),q()});else return}}})(window,document)}),((P,y,E)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.PDFFindController=y.FindState=void 0;var c=E(2),i=E(11),_=E(4);const g={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};y.FindState=g;const s=250,h=-50,b=-400,d={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},f=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let L;const S=new RegExp("\\p{M}+","gu"),A=new RegExp("([.*+?^${}()|[\\]\\\\])|(\\p{P})|(\\s+)|(\\p{M})|(\\p{L})","gu"),n=new RegExp("([^\\p{M}])\\p{M}*$","u"),a=new RegExp("^\\p{M}*([^\\p{M}])","u"),C=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,x=new Map,T="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",D=new Map;let $=null,W=null;function se(G){const I=[];let k;for(;(k=C.exec(G))!==null;){let{index:H}=k;for(const V of k[0]){let Y=x.get(V);Y||(Y=V.normalize("NFD").length,x.set(V,Y)),I.push([Y,H++])}}let O;if(I.length===0&&$)O=$;else if(I.length>0&&W)O=W;else{const H=Object.keys(d).join(""),V=(0,i.getNormalizeWithNFKC)(),X=`([${H}])|([${V}])|((?:゙|゚)\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|((?:\\p{Ideographic}|[぀-ヿ])\\n)|(\\n)`;I.length===0?O=$=new RegExp(X+"|(\\u0000)","gum"):O=W=new RegExp(X+`|(${T})`,"gum")}const m=[];for(;(k=S.exec(G))!==null;)m.push([k[0].length,k.index]);let l=G.normalize("NFD");const M=[[0,0]];let N=0,o=0,v=0,R=0,F=0,U=!1;return l=l.replace(O,(H,V,Y,Z,X,re,ce,z,te,ae)=>{if(ae-=R,V){const Q=d[V],B=Q.length;for(let j=1;j<B;j++)M.push([ae-v+j,v-j]);return v-=B-1,Q}if(Y){let Q=D.get(Y);Q||(Q=Y.normalize("NFKC"),D.set(Y,Q));const B=Q.length;for(let j=1;j<B;j++)M.push([ae-v+j,v-j]);return v-=B-1,Q}if(Z)return U=!0,ae+F===m[N]?.[1]?++N:(M.push([ae-1-v+1,v-1]),v-=1,R+=1),M.push([ae-v+1,v]),R+=1,F+=1,Z.charAt(0);if(X){const Q=X.endsWith(`
`),B=Q?X.length-2:X.length;U=!0;let j=B;ae+F===m[N]?.[1]&&(j-=m[N][0],++N);for(let ee=1;ee<=j;ee++)M.push([ae-1-v+ee,v-ee]);return v-=j,R+=j,Q?(ae+=B-1,M.push([ae-v+1,1+v]),v+=1,R+=1,F+=1,X.slice(0,B)):X}if(re){const Q=re.length-2;return M.push([ae-v+Q,1+v]),v+=1,R+=1,F+=1,re.slice(0,-2)}if(ce){const Q=ce.length-1;return M.push([ae-v+Q,v]),R+=1,F+=1,ce.slice(0,-1)}if(z)return M.push([ae-v+1,v-1]),v-=1,R+=1,F+=1," ";if(ae+F===I[o]?.[1]){const Q=I[o][0]-1;++o;for(let B=1;B<=Q;B++)M.push([ae-(v-B),v-B]);v-=Q,R+=Q}return te}),M.push([l.length,v]),[l,M,U]}function ne(G,I,k){if(!G)return[I,k];const O=I,m=I+k-1;let l=(0,c.binarySearchFirstItem)(G,R=>R[0]>=O);G[l][0]>O&&--l;let M=(0,c.binarySearchFirstItem)(G,R=>R[0]>=m,l);G[M][0]>m&&--M;const N=O+G[l][1],v=m+G[M][1]+1-N;return[N,v]}class q{#e=null;#t=!0;#n=0;constructor({linkService:I,eventBus:k,updateMatchesCountOnProgress:O=!0}){this._linkService=I,this._eventBus=k,this.#t=O,this.#s(),k._on("find",this.#i.bind(this)),k._on("findbarclose",this.#T.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this.#e}setDocument(I){this._pdfDocument&&this.#s(),I&&(this._pdfDocument=I,this._firstPageCapability.resolve())}#i(I){if(!I)return;I.phraseSearch===!1&&(console.error("The `phraseSearch`-parameter was removed, please provide an Array of strings in the `query`-parameter instead."),typeof I.query=="string"&&(I.query=I.query.match(/\S+/g)));const k=this._pdfDocument,{type:O}=I;(this.#e===null||this.#u(I))&&(this._dirtyMatch=!0),this.#e=I,O!=="highlightallchange"&&this.#p(g.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||k&&this._pdfDocument!==k)return;this.#f();const m=!this._highlightMatches,l=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),O?this._dirtyMatch?this.#g():O==="again"?(this.#g(),m&&this.#e.highlightAll&&this.#d()):O==="highlightallchange"?(l?this.#g():this._highlightMatches=!0,this.#d()):this.#g():this._findTimeout=setTimeout(()=>{this.#g(),this._findTimeout=null},s)})}scrollMatchIntoView({element:I=null,selectedLeft:k=0,pageIndex:O=-1,matchIndex:m=-1}){if(!this._scrollMatches||!I)return;if(m===-1||m!==this._selected.matchIdx)return;if(O===-1||O!==this._selected.pageIdx)return;this._scrollMatches=!1;const l={top:h,left:k+b};(0,c.scrollIntoView)(I,l,!0)}#s(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this.#n=0,this.#e=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=new _.PromiseCapability}get#l(){const{query:I}=this.#e;return typeof I=="string"?(I!==this._rawQuery&&(this._rawQuery=I,[this._normalizedQuery]=se(I)),this._normalizedQuery):(I||[]).filter(k=>!!k).map(k=>se(k)[0])}#u(I){const k=I.query,O=this.#e.query,m=typeof k;if(m!==typeof O)return!0;if(m==="string"){if(k!==O)return!0}else if(JSON.stringify(k)!==JSON.stringify(O))return!0;switch(I.type){case"again":const M=this._selected.pageIdx+1,N=this._linkService;return M>=1&&M<=N.pagesCount&&M!==N.page&&!N.isPageVisible(M);case"highlightallchange":return!1}return!0}#r(I,k,O){let m=I.slice(0,k).match(n);if(m){const l=I.charCodeAt(k),M=m[1].charCodeAt(0);if((0,i.getCharacterType)(l)===(0,i.getCharacterType)(M))return!1}if(m=I.slice(k+O).match(a),m){const l=I.charCodeAt(k+O-1),M=m[1].charCodeAt(0);if((0,i.getCharacterType)(l)===(0,i.getCharacterType)(M))return!1}return!0}#a(I,k,O,m){const l=this._pageMatches[O]=[],M=this._pageMatchesLength[O]=[];if(!I)return;const N=this._pageDiffs[O];let o;for(;(o=I.exec(m))!==null;){if(k&&!this.#r(m,o.index,o[0].length))continue;const[v,R]=ne(N,o.index,o[0].length);R&&(l.push(v),M.push(R))}}#h(I,k){const{matchDiacritics:O}=this.#e;let m=!1;I=I.replaceAll(A,(M,N,o,v,R,F)=>N?`[ ]*\\${N}[ ]*`:o?`[ ]*${o}[ ]*`:v?"[ ]+":O?R||F:R?f.has(R.charCodeAt(0))?R:"":k?(m=!0,`${F}\\p{M}*`):F);const l="[ ]*";return I.endsWith(l)&&(I=I.slice(0,I.length-l.length)),O&&k&&(L||=String.fromCharCode(...f),m=!0,I=`${I}(?=[${L}]|[^\\p{M}]|$)`),[m,I]}#c(I){let k=this.#l;if(k.length===0)return;const{caseSensitive:O,entireWord:m}=this.#e,l=this._pageContents[I],M=this._hasDiacritics[I];let N=!1;typeof k=="string"?[N,k]=this.#h(k,M):k=k.sort().reverse().map(R=>{const[F,U]=this.#h(R,M);return N||=F,`(${U})`}).join("|");const o=`g${N?"u":""}${O?"":"i"}`;k=k?new RegExp(k,o):null,this.#a(k,m,I,l),this.#e.highlightAll&&this.#o(I),this._resumePageIdx===I&&(this._resumePageIdx=null,this.#v());const v=this._pageMatches[I].length;this._matchesCountTotal+=v,this.#t?v>0&&this.#A():++this.#n===this._linkService.pagesCount&&this.#A()}#f(){if(this._extractTextPromises.length>0)return;let I=Promise.resolve();const k={disableNormalization:!0};for(let O=0,m=this._linkService.pagesCount;O<m;O++){const l=new _.PromiseCapability;this._extractTextPromises[O]=l.promise,I=I.then(()=>this._pdfDocument.getPage(O+1).then(M=>M.getTextContent(k)).then(M=>{const N=[];for(const o of M.items)N.push(o.str),o.hasEOL&&N.push(`
`);[this._pageContents[O],this._pageDiffs[O],this._hasDiacritics[O]]=se(N.join("")),l.resolve()},M=>{console.error(`Unable to get text content for page ${O+1}`,M),this._pageContents[O]="",this._pageDiffs[O]=null,this._hasDiacritics[O]=!1,l.resolve()}))}}#o(I){this._scrollMatches&&this._selected.pageIdx===I&&(this._linkService.page=I+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:I})}#d(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}#g(){const I=this.#e.findPrevious,k=this._linkService.page-1,O=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=k,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this.#n=0,this._matchesCountTotal=0,this.#d();for(let M=0;M<O;M++)this._pendingFindMatches.has(M)||(this._pendingFindMatches.add(M),this._extractTextPromises[M].then(()=>{this._pendingFindMatches.delete(M),this.#c(M)}))}if(this.#l.length===0){this.#p(g.FOUND);return}if(this._resumePageIdx)return;const l=this._offset;if(this._pagesToSearch=O,l.matchIdx!==null){const M=this._pageMatches[l.pageIdx].length;if(!I&&l.matchIdx+1<M||I&&l.matchIdx>0){l.matchIdx=I?l.matchIdx-1:l.matchIdx+1,this.#E(!0);return}this.#C(I)}this.#v()}#b(I){const k=this._offset,O=I.length,m=this.#e.findPrevious;return O?(k.matchIdx=m?O-1:0,this.#E(!0),!0):(this.#C(m),k.wrapped&&(k.matchIdx=null,this._pagesToSearch<0)?(this.#E(!1),!0):!1)}#v(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let I=null;do{const k=this._offset.pageIdx;if(I=this._pageMatches[k],!I){this._resumePageIdx=k;break}}while(!this.#b(I))}#C(I){const k=this._offset,O=this._linkService.pagesCount;k.pageIdx=I?k.pageIdx-1:k.pageIdx+1,k.matchIdx=null,this._pagesToSearch--,(k.pageIdx>=O||k.pageIdx<0)&&(k.pageIdx=I?O-1:0,k.wrapped=!0)}#E(I=!1){let k=g.NOT_FOUND;const O=this._offset.wrapped;if(this._offset.wrapped=!1,I){const m=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,k=O?g.WRAPPED:g.FOUND,m!==-1&&m!==this._selected.pageIdx&&this.#o(m)}this.#p(k,this.#e.findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,this.#o(this._selected.pageIdx))}#T(I){const k=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||k&&this._pdfDocument!==k||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this.#p(g.FOUND),this._highlightMatches=!1,this.#d())})}#y(){const{pageIdx:I,matchIdx:k}=this._selected;let O=0,m=this._matchesCountTotal;if(k!==-1){for(let l=0;l<I;l++)O+=this._pageMatches[l]?.length||0;O+=k+1}return(O<1||O>m)&&(O=m=0),{current:O,total:m}}#A(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this.#y()})}#p(I,k=!1){!this.#t&&(this.#n!==this._linkService.pagesCount||I===g.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:I,previous:k,matchesCount:this.#y(),rawQuery:this.#e?.query??null})}}y.PDFFindController=q}),((P,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.CharacterType=void 0,y.getCharacterType=S,y.getNormalizeWithNFKC=n;const E={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};y.CharacterType=E;function c(a){return a<11904}function i(a){return(a&65408)===0}function _(a){return a>=97&&a<=122||a>=65&&a<=90}function g(a){return a>=48&&a<=57}function s(a){return a===32||a===9||a===13||a===10}function h(a){return a>=13312&&a<=40959||a>=63744&&a<=64255}function b(a){return a>=12448&&a<=12543}function d(a){return a>=12352&&a<=12447}function f(a){return a>=65376&&a<=65439}function L(a){return(a&65408)===3584}function S(a){return c(a)?i(a)?s(a)?E.SPACE:_(a)||g(a)||a===95?E.ALPHA_LETTER:E.PUNCT:L(a)?E.THAI_LETTER:a===160?E.SPACE:E.ALPHA_LETTER:h(a)?E.HAN_LETTER:b(a)?E.KATAKANA_LETTER:d(a)?E.HIRAGANA_LETTER:f(a)?E.HALFWIDTH_KATAKANA_LETTER:E.ALPHA_LETTER}let A;function n(){return A||=" ¨ª¯²-µ¸-º¼-¾Ĳ-ĳĿ-ŀŉſǄ-ǌǱ-ǳʰ-ʸ˘-˝ˠ-ˤʹͺ;΄-΅·ϐ-ϖϰ-ϲϴ-ϵϹևٵ-ٸक़-य़ড়-ঢ়য়ਲ਼ਸ਼ਖ਼-ਜ਼ਫ਼ଡ଼-ଢ଼ำຳໜ-ໝ༌གྷཌྷདྷབྷཛྷཀྵჼᴬ-ᴮᴰ-ᴺᴼ-ᵍᵏ-ᵪᵸᶛ-ᶿẚ-ẛάέήίόύώΆ᾽-῁ΈΉ῍-῏ΐΊ῝-῟ΰΎ῭-`ΌΏ´-῾ - ‑‗․-… ″-‴‶-‷‼‾⁇-⁉⁗ ⁰-ⁱ⁴-₎ₐ-ₜ₨℀-℃℅-ℇ℉-ℓℕ-№ℙ-ℝ℠-™ℤΩℨK-ℭℯ-ℱℳ-ℹ℻-⅀ⅅ-ⅉ⅐-ⅿ↉∬-∭∯-∰〈-〉①-⓪⨌⩴-⩶⫝̸ⱼ-ⱽⵯ⺟⻳⼀-⿕　〶〸-〺゛-゜ゟヿㄱ-ㆎ㆒-㆟㈀-㈞㈠-㉇㉐-㉾㊀-㏿ꚜ-ꚝꝰꟲ-ꟴꟸ-ꟹꭜ-ꭟꭩ豈-嗀塚晴凞-羽蘒諸逸-都飯-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-זּטּ-לּמּנּ-סּףּ-פּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷼︐-︙︰-﹄﹇-﹒﹔-﹦﹨-﹫ﹰ-ﹲﹴﹶ-ﻼ！-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ￠-￦",A}}),((P,y,E)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.PDFHistory=void 0,y.isDestArraysEqual=f,y.isDestHashesEqual=d;var c=E(2),i=E(7);const _=1e3,g=50,s=1e3;function h(){return document.location.hash}class b{constructor({linkService:S,eventBus:A}){this.linkService=S,this.eventBus=A,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",n=>{this._isPagesLoaded=!!n.pagesCount},{once:!0})})}initialize({fingerprint:S,resetHistory:A=!1,updateUrl:n=!1}){if(!S||typeof S!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();const a=this._fingerprint!==""&&this._fingerprint!==S;this._fingerprint=S,this._updateUrl=n===!0,this._initialized=!0,this._bindEvents();const C=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=h(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(C,!0)||A){const{hash:T,page:D,rotation:$}=this._parseCurrentHash(!0);if(!T||a||A){this._pushOrReplaceState(null,!0);return}this._pushOrReplaceState({hash:T,page:D,rotation:$},!0);return}const x=C.destination;this._updateInternalState(x,C.uid,!0),x.rotation!==void 0&&(this._initialRotation=x.rotation),x.dest?(this._initialBookmark=JSON.stringify(x.dest),this._destination.page=null):x.hash?this._initialBookmark=x.hash:x.page&&(this._initialBookmark=`page=${x.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:S=null,explicitDest:A,pageNumber:n}){if(!this._initialized)return;if(S&&typeof S!="string"){console.error(`PDFHistory.push: "${S}" is not a valid namedDest parameter.`);return}else if(Array.isArray(A)){if(!this._isValidPage(n)&&(n!==null||this._destination)){console.error(`PDFHistory.push: "${n}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${A}" is not a valid explicitDest parameter.`);return}const a=S||JSON.stringify(A);if(!a)return;let C=!1;if(this._destination&&(d(this._destination.hash,a)||f(this._destination.dest,A))){if(this._destination.page)return;C=!0}this._popStateInProgress&&!C||(this._pushOrReplaceState({dest:A,hash:a,page:n,rotation:this.linkService.rotation},C),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(S){if(this._initialized){if(!this._isValidPage(S)){console.error(`PDFHistory.pushPage: "${S}" is not a valid page number.`);return}this._destination?.page!==S&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${S}`,page:S,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const S=window.history.state;this._isValidState(S)&&S.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const S=window.history.state;this._isValidState(S)&&S.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(S,A=!1){const n=A||!this._destination,a={fingerprint:this._fingerprint,uid:n?this._uid:this._uid+1,destination:S};this._updateInternalState(S,a.uid);let C;if(this._updateUrl&&S?.hash){const x=document.location.href.split("#")[0];x.startsWith("file://")||(C=`${x}#${S.hash}`)}n?window.history.replaceState(a,"",C):window.history.pushState(a,"",C)}_tryPushCurrentPosition(S=!1){if(!this._position)return;let A=this._position;if(S&&(A=Object.assign(Object.create(null),this._position),A.temporary=!0),!this._destination){this._pushOrReplaceState(A);return}if(this._destination.temporary){this._pushOrReplaceState(A,!0);return}if(this._destination.hash===A.hash||!this._destination.page&&this._numPositionUpdates<=g)return;let n=!1;if(this._destination.page>=A.first&&this._destination.page<=A.page){if(this._destination.dest!==void 0||!this._destination.first)return;n=!0}this._pushOrReplaceState(A,n)}_isValidPage(S){return Number.isInteger(S)&&S>0&&S<=this.linkService.pagesCount}_isValidState(S,A=!1){if(!S)return!1;if(S.fingerprint!==this._fingerprint)if(A){if(typeof S.fingerprint!="string"||S.fingerprint.length!==this._fingerprint.length)return!1;const[n]=performance.getEntriesByType("navigation");if(n?.type!=="reload")return!1}else return!1;return!(!Number.isInteger(S.uid)||S.uid<0||S.destination===null||typeof S.destination!="object")}_updateInternalState(S,A,n=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),n&&S?.temporary&&delete S.temporary,this._destination=S,this._uid=A,this._maxUid=Math.max(this._maxUid,A),this._numPositionUpdates=0}_parseCurrentHash(S=!1){const A=unescape(h()).substring(1),n=(0,c.parseQueryString)(A),a=n.get("nameddest")||"";let C=n.get("page")|0;return(!this._isValidPage(C)||S&&a.length>0)&&(C=null),{hash:A,page:C,rotation:this.linkService.rotation}}_updateViewarea({location:S}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:S.pdfOpenParams.substring(1),page:this.linkService.page,first:S.pageNumber,rotation:S.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},s))}_popState({state:S}){const A=h(),n=this._currentHash!==A;if(this._currentHash=A,!S){this._uid++;const{hash:C,page:x,rotation:T}=this._parseCurrentHash();this._pushOrReplaceState({hash:C,page:x,rotation:T},!0);return}if(!this._isValidState(S))return;this._popStateInProgress=!0,n&&(this._blockHashChange++,(0,i.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:_}).then(()=>{this._blockHashChange--}));const a=S.destination;this._updateInternalState(a,S.uid,!0),(0,c.isValidRotation)(a.rotation)&&(this.linkService.rotation=a.rotation),a.dest?this.linkService.goToDestination(a.dest):a.hash?this.linkService.setHash(a.hash):a.page&&(this.linkService.page=a.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}y.PDFHistory=b;function d(L,S){return typeof L!="string"||typeof S!="string"?!1:L===S||(0,c.parseQueryString)(L).get("nameddest")===S}function f(L,S){function A(n,a){if(typeof n!=typeof a||Array.isArray(n)||Array.isArray(a))return!1;if(n!==null&&typeof n=="object"&&a!==null){if(Object.keys(n).length!==Object.keys(a).length)return!1;for(const C in n)if(!A(n[C],a[C]))return!1;return!0}return n===a||Number.isNaN(n)&&Number.isNaN(a)}if(!(Array.isArray(L)&&Array.isArray(S))||L.length!==S.length)return!1;for(let n=0,a=L.length;n<a;n++)if(!A(L[n],S[n]))return!1;return!0}}),((P,y,E)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.PDFPageView=void 0;var c=E(4),i=E(2),_=E(14),g=E(3),s=E(15),h=E(5),b=E(1),d=E(16),f=E(17),L=E(18),S=E(19),A=E(20);const n=s.compatibilityParams.maxCanvasPixels||16777216,a=()=>({annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new b.SimpleLinkService}});class C{#e=c.AnnotationMode.ENABLE_FORMS;#t=null;#n=null;#i=null;#s=null;#l=i.RenderingStates.INITIAL;#u=i.TextLayerMode.ENABLE;#r={initialOptionalContent:!0,regularAnnotations:!0};#a=new WeakMap;constructor(T){const D=T.container,$=T.defaultViewport;this.id=T.id,this.renderingId="page"+this.id,this.#t=T.layerProperties||a,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=T.scale||i.DEFAULT_SCALE,this.viewport=$,this.pdfPageRotate=$.rotation,this._optionalContentConfigPromise=T.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.#u=T.textLayerMode??i.TextLayerMode.ENABLE,this.#e=T.annotationMode??c.AnnotationMode.ENABLE_FORMS,this.imageResourcesPath=T.imageResourcesPath||"",this.useOnlyCssZoom=T.useOnlyCssZoom||!1,this.isOffscreenCanvasSupported=T.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=T.maxCanvasPixels||n,this.pageColors=T.pageColors||null,this.eventBus=T.eventBus,this.renderingQueue=T.renderingQueue,this.l10n=T.l10n||h.NullL10n,this.renderTask=null,this.resume=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const W=document.createElement("div");if(W.className="page",W.setAttribute("data-page-number",this.id),W.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(se=>{W.setAttribute("aria-label",se)}),this.div=W,this.#h(),D?.append(W),this._isStandalone){D?.style.setProperty("--scale-factor",this.scale*c.PixelsPerInch.PDF_TO_CSS_UNITS);const{optionalContentConfigPromise:se}=T;se&&se.then(ne=>{se===this._optionalContentConfigPromise&&(this.#r.initialOptionalContent=ne.hasInitialVisibility)})}}get renderingState(){return this.#l}set renderingState(T){if(T!==this.#l)switch(this.#l=T,this.#n&&(clearTimeout(this.#n),this.#n=null),T){case i.RenderingStates.PAUSED:this.div.classList.remove("loading");break;case i.RenderingStates.RUNNING:this.div.classList.add("loadingIcon"),this.#n=setTimeout(()=>{this.div.classList.add("loading"),this.#n=null},0);break;case i.RenderingStates.INITIAL:case i.RenderingStates.FINISHED:this.div.classList.remove("loadingIcon","loading");break}}#h(){const{viewport:T}=this;if(this.pdfPage){if(this.#i===T.rotation)return;this.#i=T.rotation}(0,c.setLayerDimensions)(this.div,T,!0,!1)}setPdfPage(T){this.pdfPage=T,this.pdfPageRotate=T.rotate;const D=(this.rotation+this.pdfPageRotate)%360;this.viewport=T.getViewport({scale:this.scale*c.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:D}),this.#h(),this.reset()}destroy(){this.reset(),this.pdfPage?.cleanup()}get _textHighlighter(){return(0,c.shadow)(this,"_textHighlighter",new L.TextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus,findController:this.#t().findController}))}async#c(){let T=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(D){console.error(`#renderAnnotationLayer: "${D}".`),T=D}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:T})}}async#f(){let T=null;try{await this.annotationEditorLayer.render(this.viewport,"display")}catch(D){console.error(`#renderAnnotationEditorLayer: "${D}".`),T=D}finally{this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error:T})}}async#o(){let T=null;try{const D=await this.xfaLayer.render(this.viewport,"display");D?.textDivs&&this._textHighlighter&&this.#b(D.textDivs)}catch(D){console.error(`#renderXfaLayer: "${D}".`),T=D}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:T})}}async#d(){const{pdfPage:T,textLayer:D,viewport:$}=this;if(!D)return;let W=null;try{if(!D.renderingDone){const se=T.streamTextContent({includeMarkedContent:!0,disableNormalization:!0});D.setTextContentSource(se)}await D.render($)}catch(se){if(se instanceof c.AbortException)return;console.error(`#renderTextLayer: "${se}".`),W=se}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.id,numTextDivs:D.numTextDivs,error:W}),this.#g()}async#g(){if(!this.textLayer)return;this.structTreeLayer||=new d.StructTreeLayerBuilder;const T=await(this.structTreeLayer.renderingDone?null:this.pdfPage.getStructTree()),D=this.structTreeLayer?.render(T);D&&this.canvas?.append(D),this.structTreeLayer?.show()}async#b(T){const D=await this.pdfPage.getTextContent(),$=[];for(const W of D.items)$.push(W.str);this._textHighlighter.setTextMapping(T,$),this._textHighlighter.enable()}_resetZoomLayer(T=!1){if(!this.zoomLayer)return;const D=this.zoomLayer.firstChild;this.#a.delete(D),D.width=0,D.height=0,T&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:T=!1,keepAnnotationLayer:D=!1,keepAnnotationEditorLayer:$=!1,keepXfaLayer:W=!1,keepTextLayer:se=!1}={}){this.cancelRendering({keepAnnotationLayer:D,keepAnnotationEditorLayer:$,keepXfaLayer:W,keepTextLayer:se}),this.renderingState=i.RenderingStates.INITIAL;const ne=this.div,q=ne.childNodes,G=T&&this.zoomLayer||null,I=D&&this.annotationLayer?.div||null,k=$&&this.annotationEditorLayer?.div||null,O=W&&this.xfaLayer?.div||null,m=se&&this.textLayer?.div||null;for(let l=q.length-1;l>=0;l--){const M=q[l];switch(M){case G:case I:case k:case O:case m:continue}M.remove()}ne.removeAttribute("data-loaded"),I&&this.annotationLayer.hide(),k&&this.annotationEditorLayer.hide(),O&&this.xfaLayer.hide(),m&&this.textLayer.hide(),this.structTreeLayer?.hide(),G||(this.canvas&&(this.#a.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}update({scale:T=0,rotation:D=null,optionalContentConfigPromise:$=null,drawingDelay:W=-1}){this.scale=T||this.scale,typeof D=="number"&&(this.rotation=D),$ instanceof Promise&&(this._optionalContentConfigPromise=$,$.then(I=>{$===this._optionalContentConfigPromise&&(this.#r.initialOptionalContent=I.hasInitialVisibility)}));const se=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:this.scale*c.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:se}),this.#h(),this._isStandalone&&this.div.parentNode?.style.setProperty("--scale-factor",this.viewport.scale);let ne=!1;if(this.canvas&&this.maxCanvasPixels>0){const{width:I,height:k}=this.viewport,{sx:O,sy:m}=this.outputScale;(Math.floor(I)*O|0)*(Math.floor(k)*m|0)>this.maxCanvasPixels&&(ne=!0)}const q=this.useOnlyCssZoom||this.hasRestrictedScaling&&ne,G=!q&&W>=0&&W<1e3;if(this.canvas){if(G||q){G&&this.renderingState!==i.RenderingStates.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:W}),this.renderingState=i.RenderingStates.FINISHED),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!G,hideTextLayer:G}),this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this.#s});return}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:T=!1,keepAnnotationEditorLayer:D=!1,keepXfaLayer:$=!1,keepTextLayer:W=!1,cancelExtraDelay:se=0}={}){this.renderTask&&(this.renderTask.cancel(se),this.renderTask=null),this.resume=null,this.textLayer&&(!W||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationLayer&&(!T||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!D||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!$||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this._textHighlighter?.disable())}cssTransform({target:T,redrawAnnotationLayer:D=!1,redrawAnnotationEditorLayer:$=!1,redrawXfaLayer:W=!1,redrawTextLayer:se=!1,hideTextLayer:ne=!1}){if(!T.hasAttribute("zooming")){T.setAttribute("zooming",!0);const{style:G}=T;G.width=G.height=""}const q=this.#a.get(T);if(this.viewport!==q){const G=this.viewport.rotation-q.rotation,I=Math.abs(G);let k=1,O=1;if(I===90||I===270){const{width:m,height:l}=this.viewport;k=l/m,O=m/l}T.style.transform=`rotate(${G}deg) scale(${k}, ${O})`}D&&this.annotationLayer&&this.#c(),$&&this.annotationEditorLayer&&this.#f(),W&&this.xfaLayer&&this.#o(),this.textLayer&&(ne?(this.textLayer.hide(),this.structTreeLayer?.hide()):se&&this.#d())}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(T,D){return this.viewport.convertToPdfPoint(T,D)}async#v(T,D=null){if(T===this.renderTask&&(this.renderTask=null),D instanceof c.RenderingCancelledException){this.#s=null;return}if(this.#s=D,this.renderingState=i.RenderingStates.FINISHED,this._resetZoomLayer(!0),this.#r.regularAnnotations=!T.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:this.#s}),D)throw D}async draw(){this.renderingState!==i.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:T,l10n:D,pageColors:$,pdfPage:W,viewport:se}=this;if(!W)throw this.renderingState=i.RenderingStates.FINISHED,new Error("pdfPage is not loaded");this.renderingState=i.RenderingStates.RUNNING;const ne=document.createElement("div");if(ne.classList.add("canvasWrapper"),T.append(ne),!this.textLayer&&this.#u!==i.TextLayerMode.DISABLE&&!W.isPureXfa&&(this._accessibilityManager||=new f.TextAccessibilityManager,this.textLayer=new S.TextLayerBuilder({highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,enablePermissions:this.#u===i.TextLayerMode.ENABLE_PERMISSIONS}),T.append(this.textLayer.div)),!this.annotationLayer&&this.#e!==c.AnnotationMode.DISABLE){const{annotationStorage:V,downloadManager:Y,enableScripting:Z,fieldObjectsPromise:X,hasJSActionsPromise:re,linkService:ce}=this.#t();this._annotationCanvasMap||=new Map,this.annotationLayer=new g.AnnotationLayerBuilder({pageDiv:T,pdfPage:W,annotationStorage:V,imageResourcesPath:this.imageResourcesPath,renderForms:this.#e===c.AnnotationMode.ENABLE_FORMS,linkService:ce,downloadManager:Y,l10n:D,enableScripting:Z,hasJSActionsPromise:re,fieldObjectsPromise:X,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager})}const q=V=>{if(m?.(!1),this.renderingQueue&&!this.renderingQueue.isHighestPriority(this)){this.renderingState=i.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=i.RenderingStates.RUNNING,V()};return}V()},{width:G,height:I}=se,k=document.createElement("canvas");k.setAttribute("role","presentation"),k.hidden=!0;const O=!!($?.background&&$?.foreground);let m=V=>{(!O||V)&&(k.hidden=!1,m=null)};ne.append(k),this.canvas=k;const l=k.getContext("2d",{alpha:!1}),M=this.outputScale=new i.OutputScale;if(this.useOnlyCssZoom){const V=se.clone({scale:c.PixelsPerInch.PDF_TO_CSS_UNITS});M.sx*=V.width/G,M.sy*=V.height/I}if(this.maxCanvasPixels>0){const V=G*I,Y=Math.sqrt(this.maxCanvasPixels/V);M.sx>Y||M.sy>Y?(M.sx=Y,M.sy=Y,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const N=(0,i.approximateFraction)(M.sx),o=(0,i.approximateFraction)(M.sy);k.width=(0,i.roundToDivide)(G*M.sx,N[0]),k.height=(0,i.roundToDivide)(I*M.sy,o[0]);const{style:v}=k;v.width=(0,i.roundToDivide)(G,N[1])+"px",v.height=(0,i.roundToDivide)(I,o[1])+"px",this.#a.set(k,se);const R=M.scaled?[M.sx,0,0,M.sy,0,0]:null,F={canvasContext:l,transform:R,viewport:se,annotationMode:this.#e,optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:$},U=this.renderTask=this.pdfPage.render(F);U.onContinue=q;const H=U.promise.then(async()=>{if(m?.(!0),await this.#v(U),this.#d(),this.annotationLayer&&await this.#c(),!this.annotationEditorLayer){const{annotationEditorUIManager:V}=this.#t();if(!V)return;this.annotationEditorLayer=new _.AnnotationEditorLayerBuilder({uiManager:V,pageDiv:T,pdfPage:W,l10n:D,accessibilityManager:this._accessibilityManager})}this.#f()},V=>(V instanceof c.RenderingCancelledException||m?.(!0),this.#v(U,V)));if(W.isPureXfa){if(this.xfaLayer)this.xfaLayer.div&&T.append(this.xfaLayer.div);else{const{annotationStorage:V,linkService:Y}=this.#t();this.xfaLayer=new A.XfaLayerBuilder({pageDiv:T,pdfPage:W,annotationStorage:V,linkService:Y})}this.#o()}return T.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),H}setPageLabel(T){this.pageLabel=typeof T=="string"?T:null,this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{initialOptionalContent:T,regularAnnotations:D}=this.#r;return T&&D?this.canvas:null}}y.PDFPageView=C}),((P,y,E)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.AnnotationEditorLayerBuilder=void 0;var c=E(4),i=E(5);class _{#e;constructor(s){this.pageDiv=s.pageDiv,this.pdfPage=s.pdfPage,this.accessibilityManager=s.accessibilityManager,this.l10n=s.l10n||i.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,this.#e=s.uiManager}async render(s,h="display"){if(h!=="display"||this._cancelled)return;const b=s.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:b}),this.show();return}const d=this.div=document.createElement("div");d.className="annotationEditorLayer",d.tabIndex=0,d.hidden=!0,this.pageDiv.append(d),this.annotationEditorLayer=new c.AnnotationEditorLayer({uiManager:this.#e,div:d,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:b});const f={viewport:b,div:d,annotations:null,intent:h};this.annotationEditorLayer.render(f),this.show()}cancel(){this._cancelled=!0,this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isEmpty||(this.div.hidden=!1)}}y.AnnotationEditorLayerBuilder=_}),((P,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.compatibilityParams=y.OptionKind=y.AppOptions=void 0;const E=Object.create(null);y.compatibilityParams=E;{const s=navigator.userAgent||"",h=navigator.platform||"",b=navigator.maxTouchPoints||1,d=/Android/.test(s),f=/\b(iPad|iPhone|iPod)(?=;)/.test(s)||h==="MacIntel"&&b>1;(function(){(f||d)&&(E.maxCanvasPixels=5242880)})()}const c={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};y.OptionKind=c;const i={annotationEditorMode:{value:0,kind:c.VIEWER+c.PREFERENCE},annotationMode:{value:2,kind:c.VIEWER+c.PREFERENCE},cursorToolOnLoad:{value:0,kind:c.VIEWER+c.PREFERENCE},defaultZoomDelay:{value:400,kind:c.VIEWER+c.PREFERENCE},defaultZoomValue:{value:"",kind:c.VIEWER+c.PREFERENCE},disableHistory:{value:!1,kind:c.VIEWER},disablePageLabels:{value:!1,kind:c.VIEWER+c.PREFERENCE},enableFloatingToolbar:{value:!1,kind:c.VIEWER+c.PREFERENCE},enablePermissions:{value:!1,kind:c.VIEWER+c.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:c.VIEWER+c.PREFERENCE},enableScripting:{value:!0,kind:c.VIEWER+c.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:c.VIEWER},externalLinkTarget:{value:0,kind:c.VIEWER+c.PREFERENCE},historyUpdateUrl:{value:!1,kind:c.VIEWER+c.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:c.VIEWER+c.PREFERENCE},imageResourcesPath:{value:"./images/",kind:c.VIEWER},maxCanvasPixels:{value:16777216,kind:c.VIEWER},forcePageColors:{value:!1,kind:c.VIEWER+c.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:c.VIEWER+c.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:c.VIEWER+c.PREFERENCE},pdfBugEnabled:{value:!1,kind:c.VIEWER+c.PREFERENCE},printResolution:{value:150,kind:c.VIEWER},sidebarViewOnLoad:{value:-1,kind:c.VIEWER+c.PREFERENCE},scrollModeOnLoad:{value:-1,kind:c.VIEWER+c.PREFERENCE},spreadModeOnLoad:{value:-1,kind:c.VIEWER+c.PREFERENCE},textLayerMode:{value:1,kind:c.VIEWER+c.PREFERENCE},useOnlyCssZoom:{value:!1,kind:c.VIEWER+c.PREFERENCE},viewerCssTheme:{value:0,kind:c.VIEWER+c.PREFERENCE},viewOnLoad:{value:0,kind:c.VIEWER+c.PREFERENCE},cMapPacked:{value:!0,kind:c.API},cMapUrl:{value:"../web/cmaps/",kind:c.API},disableAutoFetch:{value:!1,kind:c.API+c.PREFERENCE},disableFontFace:{value:!1,kind:c.API+c.PREFERENCE},disableRange:{value:!1,kind:c.API+c.PREFERENCE},disableStream:{value:!1,kind:c.API+c.PREFERENCE},docBaseUrl:{value:"",kind:c.API},enableXfa:{value:!0,kind:c.API+c.PREFERENCE},fontExtraProperties:{value:!1,kind:c.API},isEvalSupported:{value:!0,kind:c.API},isOffscreenCanvasSupported:{value:!0,kind:c.API},maxImageSize:{value:-1,kind:c.API},pdfBug:{value:!1,kind:c.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:c.API},verbosity:{value:1,kind:c.API},workerPort:{value:null,kind:c.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:c.WORKER}};i.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:c.VIEWER},i.disablePreferences={value:!1,kind:c.VIEWER},i.locale={value:navigator.language||"en-US",kind:c.VIEWER},i.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:c.VIEWER};const _=Object.create(null);class g{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(h){const b=_[h];if(b!==void 0)return b;const d=i[h];if(d!==void 0)return E[h]??d.value}static getAll(h=null){const b=Object.create(null);for(const d in i){const f=i[d];if(h){if((h&f.kind)===0)continue;if(h===c.PREFERENCE){const S=f.value,A=typeof S;if(A==="boolean"||A==="string"||A==="number"&&Number.isInteger(S)){b[d]=S;continue}throw new Error(`Invalid type for preference: ${d}`)}}const L=_[d];b[d]=L!==void 0?L:E[d]??f.value}return b}static set(h,b){_[h]=b}static setAll(h){for(const b in h)_[b]=h[b]}static remove(h){delete _[h]}}y.AppOptions=g,g._hasUserOptions=function(){return Object.keys(_).length>0}}),((P,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.StructTreeLayerBuilder=void 0;const E={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},c=/^H(\d+)$/;class i{#e=void 0;get renderingDone(){return this.#e!==void 0}render(g){if(this.#e!==void 0)return this.#e;const s=this.#n(g);return s?.classList.add("structTree"),this.#e=s}hide(){this.#e&&!this.#e.hidden&&(this.#e.hidden=!0)}show(){this.#e?.hidden&&(this.#e.hidden=!1)}#t(g,s){g.alt!==void 0&&s.setAttribute("aria-label",g.alt),g.id!==void 0&&s.setAttribute("aria-owns",g.id),g.lang!==void 0&&s.setAttribute("lang",g.lang)}#n(g){if(!g)return null;const s=document.createElement("span");if("role"in g){const{role:h}=g,b=h.match(c);b?(s.setAttribute("role","heading"),s.setAttribute("aria-level",b[1])):E[h]&&s.setAttribute("role",E[h])}if(this.#t(g,s),g.children)if(g.children.length===1&&"id"in g.children[0])this.#t(g.children[0],s);else for(const h of g.children)s.append(this.#n(h));return s}}y.StructTreeLayerBuilder=i}),((P,y,E)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.TextAccessibilityManager=void 0;var c=E(2);class i{#e=!1;#t=null;#n=new Map;#i=new Map;setTextMapping(g){this.#t=g}static#s(g,s){const h=g.getBoundingClientRect(),b=s.getBoundingClientRect();if(h.width===0&&h.height===0)return 1;if(b.width===0&&b.height===0)return-1;const d=h.y,f=h.y+h.height,L=h.y+h.height/2,S=b.y,A=b.y+b.height,n=b.y+b.height/2;if(L<=S&&n>=f)return-1;if(n<=d&&L>=A)return 1;const a=h.x+h.width/2,C=b.x+b.width/2;return a-C}enable(){if(this.#e)throw new Error("TextAccessibilityManager is already enabled.");if(!this.#t)throw new Error("Text divs and strings have not been set.");if(this.#e=!0,this.#t=this.#t.slice(),this.#t.sort(i.#s),this.#n.size>0){const g=this.#t;for(const[s,h]of this.#n){if(!document.getElementById(s)){this.#n.delete(s);continue}this.#l(s,g[h])}}for(const[g,s]of this.#i)this.addPointerInTextLayer(g,s);this.#i.clear()}disable(){this.#e&&(this.#i.clear(),this.#t=null,this.#e=!1)}removePointerInTextLayer(g){if(!this.#e){this.#i.delete(g);return}const s=this.#t;if(!s||s.length===0)return;const{id:h}=g,b=this.#n.get(h);if(b===void 0)return;const d=s[b];this.#n.delete(h);let f=d.getAttribute("aria-owns");f?.includes(h)&&(f=f.split(" ").filter(L=>L!==h).join(" "),f?d.setAttribute("aria-owns",f):(d.removeAttribute("aria-owns"),d.setAttribute("role","presentation")))}#l(g,s){const h=s.getAttribute("aria-owns");h?.includes(g)||s.setAttribute("aria-owns",h?`${h} ${g}`:g),s.removeAttribute("role")}addPointerInTextLayer(g,s){const{id:h}=g;if(!h)return;if(!this.#e){this.#i.set(g,s);return}s&&this.removePointerInTextLayer(g);const b=this.#t;if(!b||b.length===0)return;const d=(0,c.binarySearchFirstItem)(b,L=>i.#s(g,L)<0),f=Math.max(0,d-1);this.#l(h,b[f]),this.#n.set(h,f)}moveElementInDOM(g,s,h,b){if(this.addPointerInTextLayer(h,b),!g.hasChildNodes()){g.append(s);return}const d=Array.from(g.childNodes).filter(S=>S!==s);if(d.length===0)return;const f=h||s,L=(0,c.binarySearchFirstItem)(d,S=>i.#s(f,S)<0);L===0?d[0].before(s):d[L-1].after(s)}}y.TextAccessibilityManager=i}),((P,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.TextHighlighter=void 0;class E{constructor({findController:i,eventBus:_,pageIndex:g}){this.findController=i,this.matches=[],this.eventBus=_,this.pageIdx=g,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(i,_){this.textDivs=i,this.textContentItemsStr=_}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=i=>{(i.pageIndex===this.pageIdx||i.pageIndex===-1)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null),this._updateMatches(!0))}_convertMatches(i,_){if(!i)return[];const{textContentItemsStr:g}=this;let s=0,h=0;const b=g.length-1,d=[];for(let f=0,L=i.length;f<L;f++){let S=i[f];for(;s!==b&&S>=h+g[s].length;)h+=g[s].length,s++;s===g.length&&console.error("Could not find a matching mapping");const A={begin:{divIdx:s,offset:S-h}};for(S+=_[f];s!==b&&S>h+g[s].length;)h+=g[s].length,s++;A.end={divIdx:s,offset:S-h},d.push(A)}return d}_renderMatches(i){if(i.length===0)return;const{findController:_,pageIdx:g}=this,{textContentItemsStr:s,textDivs:h}=this,b=g===_.selected.pageIdx,d=_.selected.matchIdx,f=_.state.highlightAll;let L=null;const S={offset:void 0};function A(D,$){const W=D.divIdx;return h[W].textContent="",n(W,0,D.offset,$)}function n(D,$,W,se){let ne=h[D];if(ne.nodeType===Node.TEXT_NODE){const I=document.createElement("span");ne.before(I),I.append(ne),h[D]=I,ne=I}const q=s[D].substring($,W),G=document.createTextNode(q);if(se){const I=document.createElement("span");return I.className=`${se} appended`,I.append(G),ne.append(I),se.includes("selected")?I.offsetLeft:0}return ne.append(G),0}let a=d,C=a+1;if(f)a=0,C=i.length;else if(!b)return;let x=-1,T=-1;for(let D=a;D<C;D++){const $=i[D],W=$.begin;if(W.divIdx===x&&W.offset===T)continue;x=W.divIdx,T=W.offset;const se=$.end,ne=b&&D===d,q=ne?" selected":"";let G=0;if(!L||W.divIdx!==L.divIdx?(L!==null&&n(L.divIdx,L.offset,S.offset),A(W)):n(L.divIdx,L.offset,W.offset),W.divIdx===se.divIdx)G=n(W.divIdx,W.offset,se.offset,"highlight"+q);else{G=n(W.divIdx,W.offset,S.offset,"highlight begin"+q);for(let I=W.divIdx+1,k=se.divIdx;I<k;I++)h[I].className="highlight middle"+q;A(se,"highlight end"+q)}L=se,ne&&_.scrollMatchIntoView({element:h[W.divIdx],selectedLeft:G,pageIndex:g,matchIndex:d})}L&&n(L.divIdx,L.offset,S.offset)}_updateMatches(i=!1){if(!this.enabled&&!i)return;const{findController:_,matches:g,pageIdx:s}=this,{textContentItemsStr:h,textDivs:b}=this;let d=-1;for(const S of g){const A=Math.max(d,S.begin.divIdx);for(let n=A,a=S.end.divIdx;n<=a;n++){const C=b[n];C.textContent=h[n],C.className=""}d=S.end.divIdx+1}if(!_?.highlightMatches||i)return;const f=_.pageMatches[s]||null,L=_.pageMatchesLength[s]||null;this.matches=this._convertMatches(f,L),this._renderMatches(this.matches)}}y.TextHighlighter=E}),((P,y,E)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.TextLayerBuilder=void 0;var c=E(4),i=E(2);class _{#e=!1;#t=0;#n=0;#i=null;constructor({highlighter:s=null,accessibilityManager:h=null,isOffscreenCanvasSupported:b=!0,enablePermissions:d=!1}){this.textContentItemsStr=[],this.renderingDone=!1,this.textDivs=[],this.textDivProperties=new WeakMap,this.textLayerRenderTask=null,this.highlighter=s,this.accessibilityManager=h,this.isOffscreenCanvasSupported=b,this.#e=d===!0,this.div=document.createElement("div"),this.div.className="textLayer",this.hide()}#s(){this.renderingDone=!0;const s=document.createElement("div");s.className="endOfContent",this.div.append(s),this.#l()}get numTextDivs(){return this.textDivs.length}async render(s){if(!this.#i)throw new Error('No "textContentSource" parameter specified.');const h=s.scale*(globalThis.devicePixelRatio||1),{rotation:b}=s;if(this.renderingDone){const d=b!==this.#t,f=h!==this.#n;(d||f)&&(this.hide(),(0,c.updateTextLayer)({container:this.div,viewport:s,textDivs:this.textDivs,textDivProperties:this.textDivProperties,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,mustRescale:f,mustRotate:d}),this.#n=h,this.#t=b),this.show();return}this.cancel(),this.highlighter?.setTextMapping(this.textDivs,this.textContentItemsStr),this.accessibilityManager?.setTextMapping(this.textDivs),this.textLayerRenderTask=(0,c.renderTextLayer)({textContentSource:this.#i,container:this.div,viewport:s,textDivs:this.textDivs,textDivProperties:this.textDivProperties,textContentItemsStr:this.textContentItemsStr,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported}),await this.textLayerRenderTask.promise,this.#s(),this.#n=h,this.#t=b,this.show(),this.accessibilityManager?.enable()}hide(){this.div.hidden||(this.highlighter?.disable(),this.div.hidden=!0)}show(){this.div.hidden&&this.renderingDone&&(this.div.hidden=!1,this.highlighter?.enable())}cancel(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.highlighter?.disable(),this.accessibilityManager?.disable(),this.textContentItemsStr.length=0,this.textDivs.length=0,this.textDivProperties=new WeakMap}setTextContentSource(s){this.cancel(),this.#i=s}#l(){const{div:s}=this;s.addEventListener("mousedown",h=>{const b=s.querySelector(".endOfContent");if(!b)return;let d=h.target!==s;if(d&&=getComputedStyle(b).getPropertyValue("-moz-user-select")!=="none",d){const f=s.getBoundingClientRect(),L=Math.max(0,(h.pageY-f.top)/f.height);b.style.top=(L*100).toFixed(2)+"%"}b.classList.add("active")}),s.addEventListener("mouseup",()=>{const h=s.querySelector(".endOfContent");h&&(h.style.top="",h.classList.remove("active"))}),s.addEventListener("copy",h=>{if(!this.#e){const b=document.getSelection();h.clipboardData.setData("text/plain",(0,i.removeNullCharacters)((0,c.normalizeUnicode)(b.toString())))}h.preventDefault(),h.stopPropagation()})}}y.TextLayerBuilder=_}),((P,y,E)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.XfaLayerBuilder=void 0;var c=E(4);class i{constructor({pageDiv:g,pdfPage:s,annotationStorage:h=null,linkService:b,xfaHtml:d=null}){this.pageDiv=g,this.pdfPage=s,this.annotationStorage=h,this.linkService=b,this.xfaHtml=d,this.div=null,this._cancelled=!1}async render(g,s="display"){if(s==="print"){const d={viewport:g.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:s},f=document.createElement("div");return this.pageDiv.append(f),d.div=f,c.XfaLayer.render(d)}const h=await this.pdfPage.getXfa();if(this._cancelled||!h)return{textDivs:[]};const b={viewport:g.clone({dontFlip:!0}),div:this.div,xfaHtml:h,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:s};return this.div?c.XfaLayer.update(b):(this.div=document.createElement("div"),this.pageDiv.append(this.div),b.div=this.div,c.XfaLayer.render(b))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}y.XfaLayerBuilder=i}),((P,y,E)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.PDFScriptingManager=void 0;var c=E(2),i=E(4);class _{constructor({eventBus:s,sandboxBundleSrc:h=null,scriptingFactory:b=null,docPropertiesLookup:d=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._ready=!1,this._eventBus=s,this._sandboxBundleSrc=h,this._scriptingFactory=b,this._docPropertiesLookup=d,this._scriptingFactory||window.addEventListener("updatefromsandbox",f=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:f.detail})})}setViewer(s){this._pdfViewer=s}async setDocument(s){if(this._pdfDocument&&await this._destroyScripting(),this._pdfDocument=s,!s)return;const[h,b,d]=await Promise.all([s.getFieldObjects(),s.getCalculationOrderIds(),s.getJSActions()]);if(!h&&!d){await this._destroyScripting();return}if(s===this._pdfDocument){try{this._scripting=this._createScripting()}catch(f){console.error(`PDFScriptingManager.setDocument: "${f?.message}".`),await this._destroyScripting();return}this._internalEvents.set("updatefromsandbox",f=>{f?.source===window&&this._updateFromSandbox(f.detail)}),this._internalEvents.set("dispatcheventinsandbox",f=>{this._scripting?.dispatchEventInSandbox(f.detail)}),this._internalEvents.set("pagechanging",({pageNumber:f,previous:L})=>{f!==L&&(this._dispatchPageClose(L),this._dispatchPageOpen(f))}),this._internalEvents.set("pagerendered",({pageNumber:f})=>{this._pageOpenPending.has(f)&&f===this._pdfViewer.currentPageNumber&&this._dispatchPageOpen(f)}),this._internalEvents.set("pagesdestroy",async f=>{await this._dispatchPageClose(this._pdfViewer.currentPageNumber),await this._scripting?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),this._closeCapability?.resolve()});for(const[f,L]of this._internalEvents)this._eventBus._on(f,L);try{const f=await this._getDocProperties();if(s!==this._pdfDocument)return;await this._scripting.createSandbox({objects:h,calculationOrder:b,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...f,actions:d}}),this._eventBus.dispatch("sandboxcreated",{source:this})}catch(f){console.error(`PDFScriptingManager.setDocument: "${f?.message}".`),await this._destroyScripting();return}await this._scripting?.dispatchEventInSandbox({id:"doc",name:"Open"}),await this._dispatchPageOpen(this._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{s===this._pdfDocument&&(this._ready=!0)})}}async dispatchWillSave(s){return this._scripting?.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(s){return this._scripting?.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(s){return this._scripting?.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}async dispatchDidPrint(s){return this._scripting?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get destroyPromise(){return this._destroyCapability?.promise||null}get ready(){return this._ready}get _internalEvents(){return(0,i.shadow)(this,"_internalEvents",new Map)}get _pageOpenPending(){return(0,i.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,i.shadow)(this,"_visitedPages",new Map)}async _updateFromSandbox(s){const h=this._pdfViewer.isInPresentationMode||this._pdfViewer.isChangingPresentationMode,{id:b,siblings:d,command:f,value:L}=s;if(!b){switch(f){case"clear":console.clear();break;case"error":console.error(L);break;case"layout":{if(h)return;const A=(0,c.apiPageLayoutToViewerModes)(L);this._pdfViewer.spreadMode=A.spreadMode;break}case"page-num":this._pdfViewer.currentPageNumber=L+1;break;case"print":await this._pdfViewer.pagesPromise,this._eventBus.dispatch("print",{source:this});break;case"println":console.log(L);break;case"zoom":if(h)return;this._pdfViewer.currentScaleValue=L;break;case"SaveAs":this._eventBus.dispatch("download",{source:this});break;case"FirstPage":this._pdfViewer.currentPageNumber=1;break;case"LastPage":this._pdfViewer.currentPageNumber=this._pdfViewer.pagesCount;break;case"NextPage":this._pdfViewer.nextPage();break;case"PrevPage":this._pdfViewer.previousPage();break;case"ZoomViewIn":if(h)return;this._pdfViewer.increaseScale();break;case"ZoomViewOut":if(h)return;this._pdfViewer.decreaseScale();break}return}if(h&&s.focus)return;delete s.id,delete s.siblings;const S=d?[b,...d]:[b];for(const A of S){const n=document.querySelector(`[data-element-id="${A}"]`);n?n.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:s})):this._pdfDocument?.annotationStorage.setValue(A,s)}}async _dispatchPageOpen(s,h=!1){const b=this._pdfDocument,d=this._visitedPages;if(h&&(this._closeCapability=new i.PromiseCapability),!this._closeCapability)return;const f=this._pdfViewer.getPageView(s-1);if(f?.renderingState!==c.RenderingStates.FINISHED){this._pageOpenPending.add(s);return}this._pageOpenPending.delete(s);const L=(async()=>{const S=await(d.has(s)?null:f.pdfPage?.getJSActions());b===this._pdfDocument&&await this._scripting?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:s,actions:S})})();d.set(s,L)}async _dispatchPageClose(s){const h=this._pdfDocument,b=this._visitedPages;if(!this._closeCapability||this._pageOpenPending.has(s))return;const d=b.get(s);d&&(b.set(s,null),await d,h===this._pdfDocument&&await this._scripting?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:s}))}async _getDocProperties(){if(this._docPropertiesLookup)return this._docPropertiesLookup(this._pdfDocument);const{docPropertiesLookup:s}=E(22);return s(this._pdfDocument)}_createScripting(){if(this._destroyCapability=new i.PromiseCapability,this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:s}=E(22);return new s(this._sandboxBundleSrc)}async _destroyScripting(){if(!this._scripting){this._pdfDocument=null,this._destroyCapability?.resolve();return}this._closeCapability&&(await Promise.race([this._closeCapability.promise,new Promise(s=>{setTimeout(s,1e3)})]).catch(s=>{}),this._closeCapability=null),this._pdfDocument=null;try{await this._scripting.destroySandbox()}catch{}for(const[s,h]of this._internalEvents)this._eventBus._off(s,h);this._internalEvents.clear(),this._pageOpenPending.clear(),this._visitedPages.clear(),this._scripting=null,this._ready=!1,this._destroyCapability?.resolve()}}y.PDFScriptingManager=_}),((P,y,E)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.GenericScripting=void 0,y.docPropertiesLookup=i;var c=E(4);async function i(g){const h="".split("#")[0];let{info:b,metadata:d,contentDispositionFilename:f,contentLength:L}=await g.getMetadata();if(!L){const{length:S}=await g.getDownloadInfo();L=S}return{...b,baseURL:h,filesize:L,filename:f||(0,c.getPdfFilenameFromUrl)(""),metadata:d?.getRaw(),authors:d?.get("dc:creator"),numPages:g.numPages,URL:""}}class _{constructor(s){this._ready=(0,c.loadScript)(s,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}async createSandbox(s){(await this._ready).create(s)}async dispatchEventInSandbox(s){const h=await this._ready;setTimeout(()=>h.dispatchEvent(s),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}y.GenericScripting=_}),((P,y,E)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.PDFSinglePageViewer=void 0;var c=E(2),i=E(24);class _ extends i.PDFViewer{_resetView(){super._resetView(),this._scrollMode=c.ScrollMode.PAGE,this._spreadMode=c.SpreadMode.NONE}set scrollMode(s){}_updateScrollMode(){}set spreadMode(s){}_updateSpreadMode(){}}y.PDFSinglePageViewer=_}),((P,y,E)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.PagesCountLimit=y.PDFViewer=y.PDFPageViewBuffer=void 0;var c=E(4),i=E(2),_=E(5),g=E(13),s=E(25),h=E(1);const b=10,d={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};y.PagesCountLimit=d;function f(A){return Object.values(c.AnnotationEditorType).includes(A)&&A!==c.AnnotationEditorType.DISABLE}class L{#e=new Set;#t=0;constructor(n){this.#t=n}push(n){const a=this.#e;a.has(n)&&a.delete(n),a.add(n),a.size>this.#t&&this.#n()}resize(n,a=null){this.#t=n;const C=this.#e;if(a){const x=C.size;let T=1;for(const D of C)if(a.has(D.id)&&(C.delete(D),C.add(D)),++T>x)break}for(;C.size>this.#t;)this.#n()}has(n){return this.#e.has(n)}[Symbol.iterator](){return this.#e.keys()}#n(){const n=this.#e.keys().next().value;n?.destroy(),this.#e.delete(n)}}y.PDFPageViewBuffer=L;class S{#e=null;#t=c.AnnotationEditorType.NONE;#n=null;#i=c.AnnotationMode.ENABLE_FORMS;#s=null;#l=null;#u=!1;#r=!1;#a=null;#h=!1;#c=0;#f=new ResizeObserver(this.#O.bind(this));#o=null;#d=null;#g=null;#b=i.TextLayerMode.ENABLE;constructor(n){const a="3.6.172";if(c.version!==a)throw new Error(`The API version "${c.version}" does not match the Viewer version "${a}".`);if(this.container=n.container,this.viewer=n.viewer||n.container.firstElementChild,this.container?.tagName!=="DIV"||this.viewer?.tagName!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");this.#f.observe(this.container),this.eventBus=n.eventBus,this.linkService=n.linkService||new h.SimpleLinkService,this.downloadManager=n.downloadManager||null,this.findController=n.findController||null,this._scriptingManager=n.scriptingManager||null,this.#b=n.textLayerMode??i.TextLayerMode.ENABLE,this.#i=n.annotationMode??c.AnnotationMode.ENABLE_FORMS,this.#t=n.annotationEditorMode??c.AnnotationEditorType.NONE,this.imageResourcesPath=n.imageResourcesPath||"",this.enablePrintAutoRotate=n.enablePrintAutoRotate||!1,this.removePageBorders=n.removePageBorders||!1,this.useOnlyCssZoom=n.useOnlyCssZoom||!1,this.isOffscreenCanvasSupported=n.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=n.maxCanvasPixels,this.l10n=n.l10n||_.NullL10n,this.#u=n.enablePermissions||!1,this.pageColors=n.pageColors||null,this.pageColors&&!(CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground))&&((this.pageColors.background||this.pageColors.foreground)&&console.warn("PDFViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!n.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new s.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=n.renderingQueue,this.scroll=(0,i.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=i.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.#R()}get pagesCount(){return this._pages.length}getPageView(n){return this._pages[n]}get pageViewsReady(){return this._pagesCapability.settled&&this._pages.every(n=>n?.pdfPage)}get renderForms(){return this.#i===c.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(n){if(!Number.isInteger(n))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(n,!0)||console.error(`currentPageNumber: "${n}" is not a valid page.`))}_setCurrentPageNumber(n,a=!1){if(this._currentPageNumber===n)return a&&this.#S(),!0;if(!(0<n&&n<=this.pagesCount))return!1;const C=this._currentPageNumber;return this._currentPageNumber=n,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:n,pageLabel:this._pageLabels?.[n-1]??null,previous:C}),a&&this.#S(),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(n){if(!this.pdfDocument)return;let a=n|0;if(this._pageLabels){const C=this._pageLabels.indexOf(n);C>=0&&(a=C+1)}this._setCurrentPageNumber(a,!0)||console.error(`currentPageLabel: "${n}" is not a valid page.`)}get currentScale(){return this._currentScale!==i.UNKNOWN_SCALE?this._currentScale:i.DEFAULT_SCALE}set currentScale(n){if(isNaN(n))throw new Error("Invalid numeric scale.");this.pdfDocument&&this.#_(n,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(n){this.pdfDocument&&this.#_(n,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(n){if(!(0,i.isValidRotation)(n))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(n%=360,n<0&&(n+=360),this._pagesRotation===n))return;this._pagesRotation=n;const a=this._currentPageNumber;this.refresh(!0,{rotation:n}),this._currentScaleValue&&this.#_(this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:n,pageNumber:a}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}#v(){const n=this;return{get annotationEditorUIManager(){return n.#n},get annotationStorage(){return n.pdfDocument?.annotationStorage},get downloadManager(){return n.downloadManager},get enableScripting(){return!!n._scriptingManager},get fieldObjectsPromise(){return n.pdfDocument?.getFieldObjects()},get findController(){return n.findController},get hasJSActionsPromise(){return n.pdfDocument?.hasJSActions()},get linkService(){return n.linkService}}}#C(n){const a={annotationEditorMode:this.#t,annotationMode:this.#i,textLayerMode:this.#b};return n&&(!n.includes(c.PermissionFlag.COPY)&&this.#b===i.TextLayerMode.ENABLE&&(a.textLayerMode=i.TextLayerMode.ENABLE_PERMISSIONS),n.includes(c.PermissionFlag.MODIFY_CONTENTS)||(a.annotationEditorMode=c.AnnotationEditorType.DISABLE),!n.includes(c.PermissionFlag.MODIFY_ANNOTATIONS)&&!n.includes(c.PermissionFlag.FILL_INTERACTIVE_FORMS)&&this.#i===c.AnnotationMode.ENABLE_FORMS&&(a.annotationMode=c.AnnotationMode.ENABLE)),a}#E(){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return Promise.resolve();const n=new Promise(a=>{this.#d=()=>{document.visibilityState==="hidden"&&(a(),document.removeEventListener("visibilitychange",this.#d),this.#d=null)},document.addEventListener("visibilitychange",this.#d)});return Promise.race([this._onePageRenderedCapability.promise,n])}async getAllText(){const n=[],a=[];for(let C=1,x=this.pdfDocument.numPages;C<=x;++C){if(this.#h)return null;a.length=0;const T=await this.pdfDocument.getPage(C),{items:D}=await T.getTextContent();for(const $ of D)$.str&&a.push($.str),$.hasEOL&&a.push(`
`);n.push((0,i.removeNullCharacters)(a.join("")))}return n.join(`
`)}#T(n,a){const C=document.getSelection(),{focusNode:x,anchorNode:T}=C;if(T&&x&&C.containsNode(this.#a)){if(this.#r||n===i.TextLayerMode.ENABLE_PERMISSIONS){a.preventDefault(),a.stopPropagation();return}this.#r=!0;const D=this.container.style.cursor;this.container.style.cursor="wait";const $=W=>this.#h=W.key==="Escape";window.addEventListener("keydown",$),this.getAllText().then(async W=>{W!==null&&await navigator.clipboard.writeText(W)}).catch(W=>{console.warn(`Something goes wrong when extracting the text: ${W.message}`)}).finally(()=>{this.#r=!1,this.#h=!1,window.removeEventListener("keydown",$),this.container.style.cursor=D}),a.preventDefault(),a.stopPropagation()}}setDocument(n){if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController?.setDocument(null),this._scriptingManager?.setDocument(null),this.#n&&(this.#n.destroy(),this.#n=null)),this.pdfDocument=n,!n)return;const a=n.numPages,C=n.getPage(1),x=n.getOptionalContentConfig(),T=this.#u?n.getPermissions():Promise.resolve();if(a>d.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const D=this._scrollMode=i.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:D})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:a})},()=>{}),this._onBeforeDraw=D=>{const $=this._pages[D.pageNumber-1];$&&this.#e.push($)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=D=>{D.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:D.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,this.#d&&(document.removeEventListener("visibilitychange",this.#d),this.#d=null))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([C,T]).then(([D,$])=>{if(n!==this.pdfDocument)return;this._firstPageCapability.resolve(D),this._optionalContentConfigPromise=x;const{annotationEditorMode:W,annotationMode:se,textLayerMode:ne}=this.#C($);if(ne!==i.TextLayerMode.DISABLE){const m=this.#a=document.createElement("div");m.id="hiddenCopyElement",this.viewer.before(m)}if(W!==c.AnnotationEditorType.DISABLE){const m=W;n.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):f(m)?(this.#n=new c.AnnotationEditorUIManager(this.container,this.eventBus,n?.annotationStorage),m!==c.AnnotationEditorType.NONE&&this.#n.updateMode(m)):console.error(`Invalid AnnotationEditor mode: ${m}`)}const q=this.#v.bind(this),G=this._scrollMode===i.ScrollMode.PAGE?null:this.viewer,I=this.currentScale,k=D.getViewport({scale:I*c.PixelsPerInch.PDF_TO_CSS_UNITS});this.viewer.style.setProperty("--scale-factor",k.scale);for(let m=1;m<=a;++m){const l=new g.PDFPageView({container:G,eventBus:this.eventBus,id:m,scale:I,defaultViewport:k.clone(),optionalContentConfigPromise:x,renderingQueue:this.renderingQueue,textLayerMode:ne,annotationMode:se,imageResourcesPath:this.imageResourcesPath,useOnlyCssZoom:this.useOnlyCssZoom,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n,layerProperties:q});this._pages.push(l)}const O=this._pages[0];O&&(O.setPdfPage(D),this.linkService.cachePageRef(1,D.ref)),this._scrollMode===i.ScrollMode.PAGE?this.#y():this._spreadMode!==i.SpreadMode.NONE&&this._updateSpreadMode(),this.#E().then(async()=>{if(this.findController?.setDocument(n),this._scriptingManager?.setDocument(n),this.#a&&(this.#l=this.#T.bind(this,ne),document.addEventListener("copy",this.#l)),this.#n&&this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:this.#t}),n.loadingParams.disableAutoFetch||a>d.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let m=a-1;if(m<=0){this._pagesCapability.resolve();return}for(let l=2;l<=a;++l){const M=n.getPage(l).then(N=>{const o=this._pages[l-1];o.pdfPage||o.setPdfPage(N),this.linkService.cachePageRef(l,N.ref),--m===0&&this._pagesCapability.resolve()},N=>{console.error(`Unable to get page ${l} to initialize viewer`,N),--m===0&&this._pagesCapability.resolve()});l%d.PAUSE_EAGER_PAGE_INIT===0&&await M}}),this.eventBus.dispatch("pagesinit",{source:this}),n.getMetadata().then(({info:m})=>{n===this.pdfDocument&&m.Language&&(this.viewer.lang=m.Language)}),this.defaultRenderingQueue&&this.update()}).catch(D=>{console.error("Unable to initialize viewer",D),this._pagesCapability.reject(D)})}setPageLabels(n){if(this.pdfDocument){n?Array.isArray(n)&&this.pdfDocument.numPages===n.length?this._pageLabels=n:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let a=0,C=this._pages.length;a<C;a++)this._pages[a].setPageLabel(this._pageLabels?.[a]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=i.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,this.#e=new L(b),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=new c.PromiseCapability,this._onePageRenderedCapability=new c.PromiseCapability,this._pagesCapability=new c.PromiseCapability,this._scrollMode=i.ScrollMode.VERTICAL,this._previousScrollMode=i.ScrollMode.UNKNOWN,this._spreadMode=i.SpreadMode.NONE,this.#o={previousPageNumber:1,scrollDown:!0,pages:[]},this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),this.#d&&(document.removeEventListener("visibilitychange",this.#d),this.#d=null),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.#a&&(document.removeEventListener("copy",this.#l),this.#l=null,this.#a.remove(),this.#a=null)}#y(){if(this._scrollMode!==i.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const n=this._currentPageNumber,a=this.#o,C=this.viewer;if(C.textContent="",a.pages.length=0,this._spreadMode===i.SpreadMode.NONE&&!this.isInPresentationMode){const x=this._pages[n-1];C.append(x.div),a.pages.push(x)}else{const x=new Set,T=this._spreadMode-1;T===-1?x.add(n-1):n%2!==T?(x.add(n-1),x.add(n)):(x.add(n-2),x.add(n-1));const D=document.createElement("div");if(D.className="spread",this.isInPresentationMode){const $=document.createElement("div");$.className="dummyPage",D.append($)}for(const $ of x){const W=this._pages[$];W&&(D.append(W.div),a.pages.push(W))}C.append(D)}a.scrollDown=n>=a.previousPageNumber,a.previousPageNumber=n}_scrollUpdate(){this.pagesCount!==0&&this.update()}#A(n,a=null){const{div:C,id:x}=n;if(this._currentPageNumber!==x&&this._setCurrentPageNumber(x),this._scrollMode===i.ScrollMode.PAGE&&(this.#y(),this.update()),!a&&!this.isInPresentationMode){const T=C.offsetLeft+C.clientLeft,D=T+C.clientWidth,{scrollLeft:$,clientWidth:W}=this.container;(this._scrollMode===i.ScrollMode.HORIZONTAL||T<$||D>$+W)&&(a={left:0,top:0})}(0,i.scrollIntoView)(C,a),!this._currentScaleValue&&this._location&&(this._location=null)}#p(n){return n===this._currentScale||Math.abs(n-this._currentScale)<1e-15}#L(n,a,{noScroll:C=!1,preset:x=!1,drawingDelay:T=-1}){if(this._currentScaleValue=a.toString(),this.#p(n)){x&&this.eventBus.dispatch("scalechanging",{source:this,scale:n,presetValue:a});return}this.viewer.style.setProperty("--scale-factor",n*c.PixelsPerInch.PDF_TO_CSS_UNITS);const D=T>=0&&T<1e3;if(this.refresh(!0,{scale:n,drawingDelay:D?T:-1}),D&&(this.#g=setTimeout(()=>{this.#g=null,this.refresh()},T)),this._currentScale=n,!C){let $=this._currentPageNumber,W;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&($=this._location.pageNumber,W=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:$,destArray:W,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:n,presetValue:x?a:void 0}),this.defaultRenderingQueue&&this.update()}get#w(){return this._spreadMode!==i.SpreadMode.NONE&&this._scrollMode!==i.ScrollMode.HORIZONTAL?2:1}#_(n,a){let C=parseFloat(n);if(C>0)a.preset=!1,this.#L(C,n,a);else{const x=this._pages[this._currentPageNumber-1];if(!x)return;let T=i.SCROLLBAR_PADDING,D=i.VERTICAL_PADDING;this.isInPresentationMode?(T=D=4,this._spreadMode!==i.SpreadMode.NONE&&(T*=2)):this.removePageBorders?T=D=0:this._scrollMode===i.ScrollMode.HORIZONTAL&&([T,D]=[D,T]);const $=(this.container.clientWidth-T)/x.width*x.scale/this.#w,W=(this.container.clientHeight-D)/x.height*x.scale;switch(n){case"page-actual":C=1;break;case"page-width":C=$;break;case"page-height":C=W;break;case"page-fit":C=Math.min($,W);break;case"auto":const se=(0,i.isPortraitOrientation)(x)?$:Math.min(W,$);C=Math.min(i.MAX_AUTO_SCALE,se);break;default:console.error(`#setScale: "${n}" is an unknown zoom value.`);return}a.preset=!0,this.#L(C,n,a)}}#S(){const n=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this.#_(this._currentScaleValue,{noScroll:!0}),this.#A(n)}pageLabelToPageNumber(n){if(!this._pageLabels)return null;const a=this._pageLabels.indexOf(n);return a<0?null:a+1}scrollPageIntoView({pageNumber:n,destArray:a=null,allowNegativeOffset:C=!1,ignoreDestinationZoom:x=!1}){if(!this.pdfDocument)return;const T=Number.isInteger(n)&&this._pages[n-1];if(!T){console.error(`scrollPageIntoView: "${n}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!a){this._setCurrentPageNumber(n,!0);return}let D=0,$=0,W=0,se=0,ne,q;const G=T.rotation%180!==0,I=(G?T.height:T.width)/T.scale/c.PixelsPerInch.PDF_TO_CSS_UNITS,k=(G?T.width:T.height)/T.scale/c.PixelsPerInch.PDF_TO_CSS_UNITS;let O=0;switch(a[1].name){case"XYZ":D=a[2],$=a[3],O=a[4],D=D!==null?D:0,$=$!==null?$:k;break;case"Fit":case"FitB":O="page-fit";break;case"FitH":case"FitBH":$=a[2],O="page-width",$===null&&this._location?(D=this._location.left,$=this._location.top):(typeof $!="number"||$<0)&&($=k);break;case"FitV":case"FitBV":D=a[2],W=I,se=k,O="page-height";break;case"FitR":D=a[2],$=a[3],W=a[4]-D,se=a[5]-$;let N=i.SCROLLBAR_PADDING,o=i.VERTICAL_PADDING;this.removePageBorders&&(N=o=0),ne=(this.container.clientWidth-N)/W/c.PixelsPerInch.PDF_TO_CSS_UNITS,q=(this.container.clientHeight-o)/se/c.PixelsPerInch.PDF_TO_CSS_UNITS,O=Math.min(Math.abs(ne),Math.abs(q));break;default:console.error(`scrollPageIntoView: "${a[1].name}" is not a valid destination type.`);return}if(x||(O&&O!==this._currentScale?this.currentScaleValue=O:this._currentScale===i.UNKNOWN_SCALE&&(this.currentScaleValue=i.DEFAULT_SCALE_VALUE)),O==="page-fit"&&!a[4]){this.#A(T);return}const m=[T.viewport.convertToViewportPoint(D,$),T.viewport.convertToViewportPoint(D+W,$+se)];let l=Math.min(m[0][0],m[1][0]),M=Math.min(m[0][1],m[1][1]);C||(l=Math.max(l,0),M=Math.max(M,0)),this.#A(T,{left:l,top:M})}_updateLocation(n){const a=this._currentScale,C=this._currentScaleValue,x=parseFloat(C)===a?Math.round(a*1e4)/100:C,T=n.id,D=this._pages[T-1],$=this.container,W=D.getPagePoint($.scrollLeft-n.x,$.scrollTop-n.y),se=Math.round(W[0]),ne=Math.round(W[1]);let q=`#page=${T}`;this.isInPresentationMode||(q+=`&zoom=${x},${se},${ne}`),this._location={pageNumber:T,scale:x,top:ne,left:se,rotation:this._pagesRotation,pdfOpenParams:q}}update(){const n=this._getVisiblePages(),a=n.views,C=a.length;if(C===0)return;const x=Math.max(b,2*C+1);this.#e.resize(x,n.ids),this.renderingQueue.renderHighestPriority(n);const T=this._spreadMode===i.SpreadMode.NONE&&(this._scrollMode===i.ScrollMode.PAGE||this._scrollMode===i.ScrollMode.VERTICAL),D=this._currentPageNumber;let $=!1;for(const W of a){if(W.percent<100)break;if(W.id===D&&T){$=!0;break}}this._setCurrentPageNumber($?D:a[0].id),this._updateLocation(n.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(n){return this.container.contains(n)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===i.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===i.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const n=this._scrollMode===i.ScrollMode.PAGE?this.#o.pages:this._pages,a=this._scrollMode===i.ScrollMode.HORIZONTAL,C=a&&this._isContainerRtl;return(0,i.getVisibleElements)({scrollEl:this.container,views:n,sortByVisibility:!0,horizontal:a,rtl:C})}isPageVisible(n){return this.pdfDocument?Number.isInteger(n)&&n>0&&n<=this.pagesCount?this._getVisiblePages().ids.has(n):(console.error(`isPageVisible: "${n}" is not a valid page.`),!1):!1}isPageCached(n){if(!this.pdfDocument)return!1;if(!(Number.isInteger(n)&&n>0&&n<=this.pagesCount))return console.error(`isPageCached: "${n}" is not a valid page.`),!1;const a=this._pages[n-1];return this.#e.has(a)}cleanup(){for(const n of this._pages)n.renderingState!==i.RenderingStates.FINISHED&&n.reset()}_cancelRendering(){for(const n of this._pages)n.cancelRendering()}async#m(n){if(n.pdfPage)return n.pdfPage;try{const a=await this.pdfDocument.getPage(n.id);return n.pdfPage||n.setPdfPage(a),this.linkService._cachedPageNumber?.(a.ref)||this.linkService.cachePageRef(n.id,a.ref),a}catch(a){return console.error("Unable to get page for page view",a),null}}#P(n){if(n.first?.id===1)return!0;if(n.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case i.ScrollMode.PAGE:return this.#o.scrollDown;case i.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}forceRendering(n){const a=n||this._getVisiblePages(),C=this.#P(a),x=this._spreadMode!==i.SpreadMode.NONE&&this._scrollMode!==i.ScrollMode.HORIZONTAL,T=this.renderingQueue.getHighestPriority(a,this._pages,C,x);return T?(this.#m(T).then(()=>{this.renderingQueue.renderView(T)}),!0):!1}get hasEqualPageSizes(){const n=this._pages[0];for(let a=1,C=this._pages.length;a<C;++a){const x=this._pages[a];if(x.width!==n.width||x.height!==n.height)return!1}return!0}getPagesOverview(){let n;return this._pages.map(a=>{const C=a.pdfPage.getViewport({scale:1}),x=(0,i.isPortraitOrientation)(C);if(n===void 0)n=x;else if(this.enablePrintAutoRotate&&x!==n)return{width:C.height,height:C.width,rotation:(C.rotation-90)%360};return{width:C.width,height:C.height,rotation:C.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(n){if(!(n instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${n}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=n,this.refresh(!1,{optionalContentConfigPromise:n}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:n}))}get scrollMode(){return this._scrollMode}set scrollMode(n){if(this._scrollMode!==n){if(!(0,i.isValidScrollMode)(n))throw new Error(`Invalid scroll mode: ${n}`);this.pagesCount>d.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=n,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:n}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(n=null){const a=this._scrollMode,C=this.viewer;C.classList.toggle("scrollHorizontal",a===i.ScrollMode.HORIZONTAL),C.classList.toggle("scrollWrapped",a===i.ScrollMode.WRAPPED),!(!this.pdfDocument||!n)&&(a===i.ScrollMode.PAGE?this.#y():this._previousScrollMode===i.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#_(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(n,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(n){if(this._spreadMode!==n){if(!(0,i.isValidSpreadMode)(n))throw new Error(`Invalid spread mode: ${n}`);this._spreadMode=n,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:n}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(n=null){if(!this.pdfDocument)return;const a=this.viewer,C=this._pages;if(this._scrollMode===i.ScrollMode.PAGE)this.#y();else if(a.textContent="",this._spreadMode===i.SpreadMode.NONE)for(const x of this._pages)a.append(x.div);else{const x=this._spreadMode-1;let T=null;for(let D=0,$=C.length;D<$;++D)T===null?(T=document.createElement("div"),T.className="spread",a.append(T)):D%2===x&&(T=T.cloneNode(!1),a.append(T)),T.append(C[D].div)}n&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#_(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(n,!0),this.update())}_getPageAdvance(n,a=!1){switch(this._scrollMode){case i.ScrollMode.WRAPPED:{const{views:C}=this._getVisiblePages(),x=new Map;for(const{id:T,y:D,percent:$,widthPercent:W}of C){if($===0||W<100)continue;let se=x.get(D);se||x.set(D,se||=[]),se.push(T)}for(const T of x.values()){const D=T.indexOf(n);if(D===-1)continue;const $=T.length;if($===1)break;if(a)for(let W=D-1,se=0;W>=se;W--){const ne=T[W],q=T[W+1]-1;if(ne<q)return n-q}else for(let W=D+1,se=$;W<se;W++){const ne=T[W],q=T[W-1]+1;if(ne>q)return q-n}if(a){const W=T[0];if(W<n)return n-W+1}else{const W=T[$-1];if(W>n)return W-n+1}break}break}case i.ScrollMode.HORIZONTAL:break;case i.ScrollMode.PAGE:case i.ScrollMode.VERTICAL:{if(this._spreadMode===i.SpreadMode.NONE)break;const C=this._spreadMode-1;if(a&&n%2!==C)break;if(!a&&n%2===C)break;const{views:x}=this._getVisiblePages(),T=a?n-1:n+1;for(const{id:D,percent:$,widthPercent:W}of x)if(D===T){if($>0&&W===100)return 2;break}break}}return 1}nextPage(){const n=this._currentPageNumber,a=this.pagesCount;if(n>=a)return!1;const C=this._getPageAdvance(n,!1)||1;return this.currentPageNumber=Math.min(n+C,a),!0}previousPage(){const n=this._currentPageNumber;if(n<=1)return!1;const a=this._getPageAdvance(n,!0)||1;return this.currentPageNumber=Math.max(n-a,1),!0}increaseScale({drawingDelay:n,scaleFactor:a,steps:C}={}){if(!this.pdfDocument)return;let x=this._currentScale;if(a>1)x=Math.round(x*a*100)/100;else{C??=1;do x=Math.ceil((x*i.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--C>0&&x<i.MAX_SCALE)}this.#_(Math.min(i.MAX_SCALE,x),{noScroll:!1,drawingDelay:n})}decreaseScale({drawingDelay:n,scaleFactor:a,steps:C}={}){if(!this.pdfDocument)return;let x=this._currentScale;if(a>0&&a<1)x=Math.round(x*a*100)/100;else{C??=1;do x=Math.floor((x/i.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--C>0&&x>i.MIN_SCALE)}this.#_(Math.max(i.MIN_SCALE,x),{noScroll:!1,drawingDelay:n})}#R(n=this.container.clientHeight){n!==this.#c&&(this.#c=n,i.docStyle.setProperty("--viewer-container-height",`${n}px`))}#O(n){for(const a of n)if(a.target===this.container){this.#R(Math.floor(a.borderBoxSize[0].blockSize)),this.#s=null;break}}get containerTopLeft(){return this.#s||=[this.container.offsetTop,this.container.offsetLeft]}get annotationEditorMode(){return this.#n?this.#t:c.AnnotationEditorType.DISABLE}set annotationEditorMode(n){if(!this.#n)throw new Error("The AnnotationEditor is not enabled.");if(this.#t!==n){if(!f(n))throw new Error(`Invalid AnnotationEditor mode: ${n}`);this.pdfDocument&&(this.#t=n,this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:n}),this.#n.updateMode(n))}}set annotationEditorParams({type:n,value:a}){if(!this.#n)throw new Error("The AnnotationEditor is not enabled.");this.#n.updateParams(n,a)}refresh(n=!1,a=Object.create(null)){if(this.pdfDocument){for(const C of this._pages)C.update(a);this.#g!==null&&(clearTimeout(this.#g),this.#g=null),n||this.update()}}}y.PDFViewer=S}),((P,y,E)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.PDFRenderingQueue=void 0;var c=E(4),i=E(2);const _=3e4;class g{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(h){this.pdfViewer=h}setThumbnailViewer(h){this.pdfThumbnailViewer=h}isHighestPriority(h){return this.highestPriorityPage===h.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(h){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(h)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),_)))}getHighestPriority(h,b,d,f=!1){const L=h.views,S=L.length;if(S===0)return null;for(let x=0;x<S;x++){const T=L[x].view;if(!this.isViewFinished(T))return T}const A=h.first.id,n=h.last.id;if(n-A+1>S){const x=h.ids;for(let T=1,D=n-A;T<D;T++){const $=d?A+T:n-T;if(x.has($))continue;const W=b[$-1];if(!this.isViewFinished(W))return W}}let a=d?n:A-2,C=b[a];return C&&!this.isViewFinished(C)||f&&(a+=d?1:-1,C=b[a],C&&!this.isViewFinished(C))?C:null}isViewFinished(h){return h.renderingState===i.RenderingStates.FINISHED}renderView(h){switch(h.renderingState){case i.RenderingStates.FINISHED:return!1;case i.RenderingStates.PAUSED:this.highestPriorityPage=h.renderingId,h.resume();break;case i.RenderingStates.RUNNING:this.highestPriorityPage=h.renderingId;break;case i.RenderingStates.INITIAL:this.highestPriorityPage=h.renderingId,h.draw().finally(()=>{this.renderHighestPriority()}).catch(b=>{b instanceof c.RenderingCancelledException||console.error(`renderView: "${b}"`)});break}return!0}}y.PDFRenderingQueue=g})],r={};function p(P){var y=r[P];if(y!==void 0)return y.exports;var E=r[P]={exports:{}};return u[P](E,E.exports,p),E.exports}var w={};return(()=>{var P=w;Object.defineProperty(P,"__esModule",{value:!0}),Object.defineProperty(P,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return c.AnnotationLayerBuilder}}),P.DefaultXfaLayerFactory=P.DefaultTextLayerFactory=P.DefaultStructTreeLayerFactory=P.DefaultAnnotationLayerFactory=void 0,Object.defineProperty(P,"DownloadManager",{enumerable:!0,get:function(){return i.DownloadManager}}),Object.defineProperty(P,"EventBus",{enumerable:!0,get:function(){return _.EventBus}}),Object.defineProperty(P,"GenericL10n",{enumerable:!0,get:function(){return g.GenericL10n}}),Object.defineProperty(P,"LinkTarget",{enumerable:!0,get:function(){return y.LinkTarget}}),Object.defineProperty(P,"NullL10n",{enumerable:!0,get:function(){return s.NullL10n}}),Object.defineProperty(P,"PDFFindController",{enumerable:!0,get:function(){return h.PDFFindController}}),Object.defineProperty(P,"PDFHistory",{enumerable:!0,get:function(){return b.PDFHistory}}),Object.defineProperty(P,"PDFLinkService",{enumerable:!0,get:function(){return y.PDFLinkService}}),Object.defineProperty(P,"PDFPageView",{enumerable:!0,get:function(){return d.PDFPageView}}),Object.defineProperty(P,"PDFScriptingManager",{enumerable:!0,get:function(){return f.PDFScriptingManager}}),Object.defineProperty(P,"PDFSinglePageViewer",{enumerable:!0,get:function(){return L.PDFSinglePageViewer}}),Object.defineProperty(P,"PDFViewer",{enumerable:!0,get:function(){return S.PDFViewer}}),Object.defineProperty(P,"ProgressBar",{enumerable:!0,get:function(){return E.ProgressBar}}),Object.defineProperty(P,"RenderingStates",{enumerable:!0,get:function(){return E.RenderingStates}}),Object.defineProperty(P,"ScrollMode",{enumerable:!0,get:function(){return E.ScrollMode}}),Object.defineProperty(P,"SimpleLinkService",{enumerable:!0,get:function(){return y.SimpleLinkService}}),Object.defineProperty(P,"SpreadMode",{enumerable:!0,get:function(){return E.SpreadMode}}),Object.defineProperty(P,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return A.StructTreeLayerBuilder}}),Object.defineProperty(P,"TextLayerBuilder",{enumerable:!0,get:function(){return n.TextLayerBuilder}}),Object.defineProperty(P,"XfaLayerBuilder",{enumerable:!0,get:function(){return a.XfaLayerBuilder}}),Object.defineProperty(P,"parseQueryString",{enumerable:!0,get:function(){return E.parseQueryString}});var y=p(1),E=p(2),c=p(3),i=p(6),_=p(7),g=p(8),s=p(5),h=p(10),b=p(12),d=p(13),f=p(21),L=p(23),S=p(24),A=p(16),n=p(19),a=p(20);class C{constructor(){throw new Error("The `DefaultAnnotationLayerFactory` has been removed, please use the `annotationMode` option when initializing the `PDFPageView`-instance to control AnnotationLayer rendering.")}}P.DefaultAnnotationLayerFactory=C;class x{constructor(){throw new Error("The `DefaultStructTreeLayerFactory` has been removed, this functionality is automatically enabled when the TextLayer is used.")}}P.DefaultStructTreeLayerFactory=x;class T{constructor(){throw new Error("The `DefaultTextLayerFactory` has been removed, please use the `textLayerMode` option when initializing the `PDFPageView`-instance to control TextLayer rendering.")}}P.DefaultTextLayerFactory=T;class D{constructor(){throw new Error("The `DefaultXfaLayerFactory` has been removed, please use the `enableXfa` option when calling the `getDocument`-function to control XfaLayer rendering.")}}P.DefaultXfaLayerFactory=D})(),w})())})(pdf_viewer)),pdf_viewer.exports}var pdf_viewerExports=requirePdf_viewer();pdfExports.GlobalWorkerOptions.workerSrc="/static/pdfjs/pdf.worker.min.js";const _sfc_main=vue.defineComponent({name:"DocumentEditor",components:{ToolbarPagination:_sfc_main$1,ToolbarRotation:_sfc_main$2,ToolbarZoom:_sfc_main$3,ToolbarAnnotation:_sfc_main$4},setup(){const{t}=useI18n();return{t}},props:{value:{type:String,required:!0},baseUrl:{type:String,required:!0},pagination:{type:Boolean,default:!0},zoom:{type:Boolean,default:!0},comment:{type:Boolean,default:!0},highlight:{type:Boolean,default:!0},rotation:{type:Boolean,default:!0},save:{type:Boolean,default:!0},getFileUrl:{type:String,default:null}},data(){return{token:this.value,rotations:{},highlightingColor:"",commentingColor:"",loading:!0,error:"",currentPage:1,currentZoom:"",hasAnnotations:!1,savingInProgress:!1,interval:null,pages:1,pdfDocument:void 0,viewer:void 0}},computed:{hasBeenRotated(){return this.rotations&&Object.keys(this.rotations).length!==0},needsToBeSaved(){return this.hasBeenRotated||this.hasAnnotations}},mounted(){this.pdfDocument=void 0,this.getFile();const t=["changeCurrentPage","rotate","zoomIn","zoomOut","setScale","setHighlight","setCommenting","save"];for(const e of t)this.$el.addEventListener(e,(u=>{this[e](u.detail)}))},unmounted(){this.stopWatchingAnnotations()},methods:{getFile:async function(){if(this.token==="FileInfectedException")this.error=this.t("view_entry.file_infected");else try{let t;this.getFileUrl?t=this.getFileUrl:t=(await doRequest(`${this.baseUrl}metadata/${this.token}`)).url;const e=await pdfExports.getDocument(t).promise,u=new pdf_viewerExports.PDFViewer({container:this.$refs.viewerContainer,eventBus:new pdf_viewerExports.EventBus,viewer:this.$refs.pdfViewer});u.setDocument(e),u.eventBus.on("pagechanging",p=>{this.currentPage=p.pageNumber;const w=new CustomEvent("pageChange",{detail:{pageNumber:p.pageNumber}});this.$el.dispatchEvent(w)}),u.eventBus.on("pagesinit",()=>{this.currentZoom=u.currentScaleValue="auto"}),this.pages=e.numPages;const r=new CustomEvent("numPages",{detail:{numPages:e.numPages}});this.$el.dispatchEvent(r),this.pdfDocument=vue.markRaw(e),this.viewer=vue.markRaw(u)}catch(t){this.error=t.message}this.loading=!1},rotate(t){(this.viewer?.getPageView(this.currentPage-1)).update({rotation:t}),this.viewer?.update(),t!==0?this.rotations[this.currentPage-1]=t:delete this.rotations[this.currentPage-1]},changeCurrentPage(t){this.viewer.currentPageNumber=t},zoomIn(){const t=this.viewer;t.increaseScale({scaleFactor:1.1}),this.currentZoom=t.currentScale.toString()},zoomOut(){const t=this.viewer;t.decreaseScale({scaleFactor:1.1}),this.currentZoom=t.currentScale.toString()},setScale(t){this.viewer.currentScaleValue=t,this.currentZoom=t},startWatchingAnnotations:function(){this.interval||(this.interval=window.setInterval(()=>this.updateNeedsToBeSaved(),500))},stopWatchingAnnotations:function(){this.interval&&window.clearInterval(this.interval),this.interval=null},setHighlight(t){const e=this.viewer;this.commentingColor="",this.highlightingColor=t,t?(this.startWatchingAnnotations(),e.annotationEditorMode=pdfExports.AnnotationEditorType.INK,e.annotationEditorParams={type:pdfExports.AnnotationEditorParamsType.INK_THICKNESS,value:10},e.annotationEditorParams={type:pdfExports.AnnotationEditorParamsType.INK_OPACITY,value:50},e.annotationEditorParams={type:pdfExports.AnnotationEditorParamsType.INK_COLOR,value:t}):(this.stopWatchingAnnotations(),e.annotationEditorMode=pdfExports.AnnotationEditorType.NONE)},setCommenting(t){const e=this.viewer;this.highlightingColor="",this.commentingColor=t,t?(this.startWatchingAnnotations(),e.annotationEditorMode=pdfExports.AnnotationEditorType.FREETEXT,e.annotationEditorParams={type:pdfExports.AnnotationEditorParamsType.FREETEXT_SIZE,value:10},e.annotationEditorParams={type:pdfExports.AnnotationEditorParamsType.FREETEXT_COLOR,value:t}):(this.stopWatchingAnnotations(),e.annotationEditorMode=pdfExports.AnnotationEditorType.NONE)},updateNeedsToBeSaved(){this.hasAnnotations=!!this.pdfDocument&&this.pdfDocument.annotationStorage.size>0},async saveDocument(){if(!this.needsToBeSaved)return!1;this.savingInProgress=!0,this.setCommenting("");const t=await this.pdfDocument.saveDocument(),e=new Blob([t],{type:"application/pdf"}),u=new FormData;u.append("file",e),u.append("rotations",JSON.stringify(vue.toRaw(this.rotations)));try{const r=await doRequest(`${this.baseUrl}save-editor/${this.token}`,{method:"POST",headers:void 0,body:u});this.rotations={},this.hasAnnotations=!1,this.token=r.token,this.getFile()}catch(r){this.error=r.message}this.savingInProgress=!1}}}),_export_sfc=(t,e)=>{const u=t.__vccOpts||t;for(const[r,p]of e)u[r]=p;return u},_hoisted_1={class:"editor-container"},_hoisted_2={class:"wrapper"},_hoisted_3={ref:"viewerContainer",class:"viewerContainer",tabindex:"0"},_hoisted_4={class:"pdfViewer",ref:"pdfViewer"},_hoisted_5={class:"btn-toolbar",role:"toolbar"},_hoisted_6={key:0,class:"text-danger"};function _sfc_render(t,e,u,r,p,w){const P=vue.resolveComponent("ToolbarPagination"),y=vue.resolveComponent("ToolbarRotation"),E=vue.resolveComponent("ToolbarZoom"),c=vue.resolveComponent("ToolbarAnnotation");return vue.openBlock(),vue.createElementBlock("div",_hoisted_1,[vue.createElementVNode("div",_hoisted_2,[vue.createElementVNode("div",_hoisted_3,[vue.createElementVNode("div",_hoisted_4,null,512)],512)]),vue.createElementVNode("div",_hoisted_5,[t.pages&&t.pagination?(vue.openBlock(),vue.createBlock(P,{key:0,"current-page":t.currentPage,pages:t.pages,onOnChangeCurrentPage:t.changeCurrentPage},null,8,["current-page","pages","onOnChangeCurrentPage"])):vue.createCommentVNode("",!0),t.rotation?(vue.openBlock(),vue.createBlock(y,{key:1,"current-rotation":t.rotations[t.currentPage-1]||0,onOnRotate:t.rotate},null,8,["current-rotation","onOnRotate"])):vue.createCommentVNode("",!0),t.zoom&&t.currentZoom?(vue.openBlock(),vue.createBlock(E,{key:2,"current-zoom":t.currentZoom,onOnZoomIn:t.zoomIn,onOnZoomOut:t.zoomOut,onOnSetScale:t.setScale},null,8,["current-zoom","onOnZoomIn","onOnZoomOut","onOnSetScale"])):vue.createCommentVNode("",!0),t.highlight?(vue.openBlock(),vue.createBlock(c,{key:3,icon:"fa-highlighter","is-activated":t.highlightingColor!="",color:t.highlightingColor,"class-prefix":"bg",colors:{warning:"#ffff00",danger:"#ff0000",info:"#0000ff",success:"#00ff00"},onOnChange:t.setHighlight},null,8,["is-activated","color","onOnChange"])):vue.createCommentVNode("",!0),t.comment?(vue.openBlock(),vue.createBlock(c,{key:4,icon:"fa-message","is-activated":t.commentingColor!="",color:t.commentingColor,"class-prefix":"text",colors:{danger:"#a94442",warning:"#ffff00",info:"#31708f",success:"#3c763d",muted:"#ffffff"},onOnChange:t.setCommenting},null,8,["is-activated","color","onOnChange"])):vue.createCommentVNode("",!0),t.save?(vue.openBlock(),vue.createElementBlock("button",{key:5,type:"button",class:vue.normalizeClass(["btn",t.needsToBeSaved?"btn-primary":"btn-default disabled"]),onClick:e[0]||(e[0]=(...i)=>t.saveDocument&&t.saveDocument(...i))},[vue.createElementVNode("span",{class:vue.normalizeClass(["fas",t.savingInProgress?"fa-spinner fa-spin-pulse":`fa-save ${t.needsToBeSaved&&"fa-beat-fade"}`])},null,2)],2)):vue.createCommentVNode("",!0)]),t.error?(vue.openBlock(),vue.createElementBlock("p",_hoisted_6,vue.toDisplayString(t.error),1)):vue.createCommentVNode("",!0)])}const Editor=_export_sfc(_sfc_main,[["render",_sfc_render]]);function initEditors(){document.querySelectorAll(".osis-document-editor:not([data-v-app])").forEach(t=>{const e={baseUrl:"",value:"",...t.dataset};for(const u of["pagination","zoom","comment","highlight","rotation"])typeof t.dataset[u]<"u"&&(e[u]=t.dataset[u]==="true");runtimeDom.createApp(Editor,e).use(i18n).mount(t)})}initEditors();const observer=new MutationObserver(initEditors);observer.observe(document,{childList:!0,subtree:!0})}));
//# sourceMappingURL=osis-document-editor.umd.min.js.map
